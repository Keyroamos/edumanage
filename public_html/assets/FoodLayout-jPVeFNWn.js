import{u,r,j as e,l as b,f,N as p,O as j}from"./vendor-Cr6tcs86.js";import{u as g,T as v,a as k}from"./index-BxkJ-YYo.js";import{i as N,aI as m,N as w,X as y,ag as S,U as L,aB as z,ax as C,L as O}from"./ui-BBn2VFCU.js";const U=({user:a})=>{const d=u(),{config:i}=g(),[s,c]=r.useState(!1),[l,t]=r.useState(!1),o=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),d("/login")},h=[{path:"/food-portal/dashboard",icon:S,label:"Dashboard"},{path:"/food-portal/students",icon:L,label:"Students"},{path:"/food-portal/menu",icon:z,label:"Meal Options"},{path:"/food-portal/serving-list",icon:C,label:"Serving Lists"}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!0),className:"p-2 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-lg shadow-lg border border-slate-100 dark:border-slate-700",children:e.jsx(N,{size:24})})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>t(!1)}),e.jsxs("aside",{className:`
                    fixed md:sticky top-0 left-0 h-screen bg-white dark:bg-slate-900 
                    border-r border-slate-200 dark:border-slate-800 z-50 transition-all duration-300 ease-in-out
                    ${l?"translate-x-0":"-translate-x-full md:translate-x-0"}
                    ${s?"w-20":"w-72"}
                `,children:[e.jsxs("div",{className:"h-20 flex items-center justify-between px-6 border-b border-slate-100 dark:border-slate-800",children:[!s&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg flex items-center justify-center text-white shadow-lg shadow-orange-500/30",children:e.jsx(m,{size:20})}),e.jsxs("span",{className:"font-bold text-xl text-slate-900 dark:text-white tracking-tight",children:[i.school_name," ",e.jsx("span",{className:"text-orange-600",children:"Food"})]})]}),s&&e.jsx("div",{className:"mx-auto w-10 h-10 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-orange-500/30",children:e.jsx(m,{size:24})}),e.jsx("button",{onClick:()=>c(!s),className:"hidden md:flex p-1.5 rounded-lg bg-slate-50 dark:bg-slate-800 text-slate-400 hover:text-orange-500 transition-colors",children:s?e.jsx(w,{size:16}):e.jsx(y,{size:16})})]}),e.jsx("div",{className:"p-4 space-y-2",children:h.map(n=>e.jsx(b,{to:n.path,onClick:()=>t(!1),className:({isActive:x})=>`
                                flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group relative overflow-hidden
                                ${x?"bg-orange-50 dark:bg-orange-900/10 text-orange-600 dark:text-orange-400 font-semibold shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-800/50"}
                            `,children:({isActive:x})=>e.jsxs(e.Fragment,{children:[e.jsx(n.icon,{size:22,className:`
                                transition-colors
                                ${s?"mx-auto":""}
                            `}),!s&&e.jsx("span",{children:n.label}),e.jsx("div",{className:`
                                absolute left-0 top-1/2 -translate-y-1/2 w-1 h-8 rounded-r-full bg-orange-500 transition-all duration-300
                                ${x?"opacity-100":"opacity-0"}
                            `})]})},n.path))}),e.jsx("div",{className:"absolute bottom-0 w-full p-4 border-t border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50 backdrop-blur-sm",children:e.jsxs("div",{className:`flex items-center gap-3 ${s?"justify-center":""}`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400 font-bold",children:a?.username?.[0]?.toUpperCase()||"U"}),!s&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white truncate",children:a?.username||"User"}),e.jsx("p",{className:"text-xs text-slate-500 truncate",children:"Food Manager"})]}),!s&&e.jsx("button",{onClick:o,className:"p-2 text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(O,{size:18})}),e.jsx(v,{collapsed:s})]})})]})]})},E=()=>{const[a,d]=r.useState(null),[i,s]=r.useState(!0),c=f();if(r.useEffect(()=>{const o=localStorage.getItem("user");o&&d(JSON.parse(o)),s(!1)},[]),i)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-950",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})});if(!a)return e.jsx(p,{to:"/login",state:{from:c},replace:!0});const{isLocked:l}=g(),t=l();return e.jsxs("div",{className:"flex min-h-screen bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100 font-sans",children:[t&&e.jsx(k,{}),e.jsx(U,{user:a}),e.jsx("main",{className:"flex-1 transition-all duration-300 ease-in-out w-full max-w-[100vw] overflow-x-hidden",children:e.jsx("div",{className:"p-4 md:p-8 max-w-7xl mx-auto min-h-screen",children:e.jsx(j,{})})})]})};export{E as default};
