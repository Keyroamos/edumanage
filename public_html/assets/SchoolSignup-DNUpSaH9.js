import{u as S,f as C,r as c,j as e,e as P}from"./vendor-Cr6tcs86.js";import{b as z,B as p,I as o}from"./index-BxkJ-YYo.js";import{P as k}from"./PublicNavbar-CMFjf_OT.js";import{g as R,av as g,ae as L,az as A,Z as B,o as q,n as D,ad as E,aq as F,ac as J,A as I}from"./ui-BBn2VFCU.js";const H=()=>{const{registration_open:u,loading:b}=z(),d=S(),f=C(),t=new URLSearchParams(f.search).get("plan")||"Basic",[j,x]=c.useState(!1),[N,w]=c.useState(!1),[m,i]=c.useState(null),[s,h]=c.useState({school_name:"",school_code:"",school_email:"",school_phone:"",school_address:"",password:"",confirm_password:"",school_logo:null,school_logo_preview:null}),r=l=>{h(a=>({...a,[l.target.name]:l.target.value}))},v=l=>{const a=l.target.files[0];if(a){const n=new FileReader;n.onloadend=()=>{h(y=>({...y,school_logo:a,school_logo_preview:n.result}))},n.readAsDataURL(a)}},_=async l=>{if(l.preventDefault(),i(null),s.password!==s.confirm_password){i("Passwords do not match");return}x(!0);try{const a=new FormData;a.append("school_name",s.school_name),a.append("school_code",s.school_code),a.append("school_email",s.school_email),a.append("school_phone",s.school_phone),a.append("school_address",s.school_address),a.append("password",s.password),a.append("plan",t),s.school_logo&&a.append("school_logo",s.school_logo),(await P.post("/api/school-signup/",a)).data.success&&(w(!0),setTimeout(()=>d("/login"),3e3))}catch(a){i(a.response?.data?.error||"Registration failed. Please try again.")}finally{x(!1)}};return!b&&!u?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-6 text-center",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl p-12 shadow-xl border border-slate-100",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 text-slate-500 rounded-2xl flex items-center justify-center mb-6 mx-auto",children:e.jsx(R,{size:32})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Registration Closed"}),e.jsxs("p",{className:"text-slate-500 mb-8 leading-relaxed",children:["We are currently reaching capacity for our beta phase. Please contact ",e.jsx("b",{className:"text-slate-900",children:"support@edumanage.com"})," for invitation-only access."]}),e.jsx(p,{onClick:()=>d("/"),variant:"outline",className:"w-full",children:"Back to Home"})]})}):N?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-6 text-center",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-xl p-10 border border-slate-100 flex flex-col items-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-50 text-green-600 rounded-full flex items-center justify-center mb-6",children:e.jsx(g,{size:40})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Registration Successful!"}),e.jsxs("p",{className:"text-slate-500 mb-8 leading-relaxed text-sm",children:["Your institution ",e.jsx("b",{children:s.school_name})," has been registered. Redirecting you to the portal..."]}),e.jsxs("div",{className:"flex gap-2 text-slate-900 font-semibold items-center text-sm",children:[e.jsx(L,{className:"animate-spin",size:16}),e.jsx("span",{children:"Redirecting..."})]})]})}):e.jsxs("div",{className:"min-h-screen bg-white font-sans text-slate-900 selection:bg-blue-100 selection:text-blue-900",children:[e.jsx(k,{alwaysSolid:!1}),e.jsxs("div",{className:"relative pt-24 pb-20 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto flex flex-col lg:flex-row gap-12 lg:gap-24",children:[e.jsxs("div",{className:"lg:w-1/3 lg:pt-12 space-y-8",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-slate-50 border border-slate-200 rounded-full text-xs font-bold text-slate-600 uppercase tracking-wider",children:[e.jsx(A,{size:12,className:"text-blue-600"}),"Start your journey"]}),e.jsx("h1",{className:"text-4xl lg:text-5xl font-extrabold text-slate-900 tracking-tight leading-tight",children:"Create your school account."}),e.jsx("p",{className:"text-lg text-slate-500 leading-relaxed",children:"Join thousands of educational institutions modernizing their operations with EduManage."}),e.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${t==="Basic"?"bg-emerald-100 text-emerald-600":t==="Standard"?"bg-blue-100 text-blue-600":"bg-violet-100 text-violet-600"}`,children:[t==="Basic"&&e.jsx(B,{size:20}),t==="Standard"&&e.jsx(q,{size:20}),t==="Enterprise"&&e.jsx(D,{size:20})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Selected Plan"}),e.jsxs("h4",{className:"text-base font-bold text-slate-900",children:[t," Edition"]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-200 flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-500 font-medium",children:"Trial Period"}),e.jsx("span",{className:"text-green-600 font-bold bg-green-50 px-2 py-0.5 rounded-md",children:"7 Days Free"})]})]}),e.jsx("div",{className:"space-y-4 pt-2 hidden lg:block",children:["No credit card required","Cancel anytime","Free onboarding session"].map((l,a)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{size:16,className:"text-blue-600"}),e.jsx("span",{className:"text-slate-600 text-sm font-medium",children:l})]},a))})]}),e.jsx("div",{className:"lg:w-2/3",children:e.jsxs("div",{className:"bg-white rounded-3xl lg:shadow-[0_0_40px_-10px_rgba(0,0,0,0.05)] lg:border lg:border-slate-100 lg:p-10",children:[m&&e.jsxs("div",{className:"mb-8 p-4 bg-red-50 border border-red-100 text-red-600 rounded-xl flex items-start gap-3 text-sm",children:[e.jsx(E,{size:18,className:"mt-0.5 shrink-0"}),e.jsx("span",{className:"font-medium",children:m})]}),e.jsxs("form",{onSubmit:_,className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-8 pb-8 border-b border-slate-100",children:[e.jsxs("div",{className:"relative group shrink-0",children:[e.jsx("div",{className:"w-24 h-24 rounded-2xl bg-slate-50 border-2 border-dashed border-slate-200 flex items-center justify-center overflow-hidden transition-all group-hover:border-blue-500 group-hover:bg-blue-50/50",children:s.school_logo_preview?e.jsx("img",{src:s.school_logo_preview,alt:"Preview",className:"w-full h-full object-contain"}):e.jsx(F,{size:32,className:"text-slate-300"})}),e.jsxs("label",{className:"absolute -bottom-2 -right-2 p-2 bg-slate-900 text-white rounded-xl shadow-lg cursor-pointer transition-all hover:scale-110 active:scale-95",children:[e.jsx(J,{size:14}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:v})]})]}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"font-bold text-slate-900 mb-1",children:"Upload School Logo"}),e.jsx("p",{className:"text-xs text-slate-500 max-w-xs leading-relaxed",children:"Recommended: Square PNG/JPG, max 2MB."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-wider flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-px bg-slate-200"}),"Institution Details",e.jsx("span",{className:"flex-1 h-px bg-slate-200"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsx(o,{label:"School Name",name:"school_name",placeholder:"e.g. St. Jude Academy",required:!0,value:s.school_name,onChange:r,className:"h-11 bg-slate-50 border-transparent focus:bg-white"}),e.jsx(o,{label:"School Code",name:"school_code",placeholder:"e.g. SJA01",required:!0,value:s.school_code,onChange:r,className:"h-11 bg-slate-50 border-transparent focus:bg-white"}),e.jsx(o,{label:"Official Phone",name:"school_phone",placeholder:"+254...",value:s.school_phone,onChange:r,className:"h-11 bg-slate-50 border-transparent focus:bg-white"}),e.jsx(o,{label:"Support Email",type:"email",name:"school_email",placeholder:"admin@school.com",required:!0,value:s.school_email,onChange:r,className:"h-11 bg-slate-50 border-transparent focus:bg-white"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"School Address"}),e.jsx("textarea",{name:"school_address",className:"w-full px-4 py-3 bg-slate-50 border border-transparent rounded-xl focus:bg-white focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all outline-none min-h-[100px] text-sm text-slate-700 resize-none",placeholder:"Physical Location...",value:s.school_address,onChange:r})]})]}),e.jsxs("div",{className:"space-y-6 pt-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-wider flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-px bg-slate-200"}),"Admin Security",e.jsx("span",{className:"flex-1 h-px bg-slate-200"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsx(o,{label:"Password",type:"password",name:"password",placeholder:"••••••••",required:!0,value:s.password,onChange:r,className:"h-11 bg-slate-50 border-transparent focus:bg-white"}),e.jsx(o,{label:"Confirm Password",type:"password",name:"confirm_password",placeholder:"••••••••",required:!0,value:s.confirm_password,onChange:r,className:"h-11 bg-slate-50 border-transparent focus:bg-white"})]})]}),e.jsxs("div",{className:"pt-6",children:[e.jsxs(p,{type:"submit",size:"lg",className:"w-full py-4 text-base font-bold rounded-xl shadow-lg shadow-blue-600/20 hover:shadow-xl hover:-translate-y-0.5 transition-all bg-slate-900 text-white hover:bg-slate-800",isLoading:j,children:["Create Account",e.jsx(I,{size:18,className:"ml-2"})]}),e.jsx("p",{className:"text-center text-xs text-slate-400 mt-4",children:"By registering, you agree to our Terms of Service & Privacy Policy."})]})]})]})})]})]})};export{H as default};
