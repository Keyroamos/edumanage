import{j as e,l as h,u,r,N as f,O as g}from"./vendor-Cr6tcs86.js";import{T as b,u as p,a as v}from"./index-iYWx273v.js";import{aO as j,D as N,m as k,L as w,i as y}from"./ui-BBn2VFCU.js";const S=({isOpen:a,toggleSidebar:s,handleLogout:l})=>{const i=[{to:"/driver-portal",icon:j,label:"Dashboard",end:!0},{to:"/driver-portal/expenses",icon:N,label:"Expenses"},{to:"/driver-portal/profile",icon:k,label:"My Profile"}];return e.jsxs(e.Fragment,{children:[a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:s}),e.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 transform transition-transform duration-300 md:translate-x-0 ${a?"translate-x-0":"-translate-x-full"}`,children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-2xl mr-2",children:"ðŸš"}),e.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Driver Portal"})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:i.map(t=>e.jsxs(h,{to:t.to,end:t.end,onClick:()=>window.innerWidth<768&&s(),className:({isActive:o})=>`flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-medium ${o?"bg-indigo-600 text-white shadow-lg shadow-indigo-600/30":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[e.jsx(t.icon,{size:20}),t.label]},t.to))}),e.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 space-y-2",children:[e.jsx(b,{className:"w-full !justify-start px-4 py-3"}),e.jsxs("button",{onClick:l,className:"flex items-center gap-3 px-4 py-3 w-full rounded-xl text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors font-medium",children:[e.jsx(w,{size:20}),"Logout"]})]})]})})]})},z=()=>{const a=u(),[s,l]=r.useState(null),[i,t]=r.useState(!0),{isLocked:o}=p(),x=o(),[d,n]=r.useState(!1);r.useEffect(()=>{const c=localStorage.getItem("user");c&&l(JSON.parse(c)),t(!1)},[]);const m=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),a("/driver-login")};return i?e.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent"})}):s?e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900",children:[x&&e.jsx(v,{}),e.jsx(S,{isOpen:d,toggleSidebar:()=>n(!d),handleLogout:m}),e.jsxs("div",{className:"md:ml-64 min-h-screen flex flex-col transition-all duration-300",children:[e.jsxs("div",{className:"h-16 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-4 flex items-center justify-between sticky top-0 z-30 shadow-sm",children:[e.jsx("button",{onClick:()=>n(!0),className:"p-2 -ml-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg md:hidden",children:e.jsx(y,{size:24,className:"text-slate-600 dark:text-slate-300"})}),e.jsxs("div",{className:"flex items-center gap-3 ml-2 md:ml-0",children:[e.jsx("span",{className:"md:hidden text-2xl",children:"ðŸš"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"font-bold text-slate-800 dark:text-white leading-tight",children:["Hello, ",s.first_name]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium",children:"Have a safe trip!"})]})]}),e.jsxs("div",{className:"w-9 h-9 bg-indigo-100 dark:bg-indigo-900/30 rounded-full flex items-center justify-center text-indigo-700 dark:text-indigo-400 font-bold text-sm shadow-inner cursor-pointer",onClick:()=>a("/driver-portal/profile"),children:[s.first_name[0],s.last_name?s.last_name[0]:""]})]}),e.jsx("main",{className:"flex-1 p-4 sm:p-6 overflow-x-hidden max-w-5xl mx-auto w-full",children:e.jsx(g,{})})]})]}):e.jsx(f,{to:"/driver-login",replace:!0})};export{z as default};
