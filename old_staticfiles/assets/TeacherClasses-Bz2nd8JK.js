import{k as $,u as F,r,j as e,m as b,e as w}from"./vendor-Cr6tcs86.js";import{U as u,w as E,at as I,G as U,b as V,t as v,k as D,ah as G,aT as M}from"./ui-kKL2mqtN.js";const B=()=>{const{id:d}=$(),x=F(),[l,i]=r.useState(null),[a,o]=r.useState([]),[N,y]=r.useState(!0),[k,f]=r.useState(!1),[n,C]=r.useState(""),[h,S]=r.useState("ALL");r.useEffect(()=>{(async()=>{try{const s=await w.get(`/api/teachers/${d}/`);i(s.data.teacher),s.data.teacher.professional.is_class_teacher&&s.data.teacher.professional.grade_id&&_(s.data.teacher.professional.grade_id)}catch(s){console.error("Error fetching teacher:",s)}finally{y(!1)}})()},[d]);const _=async t=>{try{f(!0);const s=await w.get(`/api/students/?grade=${t}`);o(s.data.students)}catch(s){console.error("Error fetching students:",s)}finally{f(!1)}},c=a.length,p=a.filter(t=>t.gender==="M"||t.gender==="Male").length,j=a.filter(t=>t.gender==="F"||t.gender==="Female").length,T=a.filter(t=>t.status==="ACTIVE").length,g=a.filter(t=>{const s=(t.first_name||"").toLowerCase().includes(n.toLowerCase())||(t.last_name||"").toLowerCase().includes(n.toLowerCase())||(t.admission_number||"").toString().toLowerCase().includes(n.toLowerCase()),L=h==="ALL"||t.status===h;return s&&L}),A=(t,s)=>`${t?.[0]||""}${s?.[0]||""}`.toUpperCase(),z=t=>{const s=["bg-indigo-500","bg-rose-500","bg-emerald-500","bg-amber-500","bg-cyan-500","bg-purple-500"];return s[t%s.length]};return N?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):!l||!l.professional.is_class_teacher?e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center min-h-[60vh] text-center p-8",children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 p-8 rounded-full mb-6",children:e.jsx(u,{size:64,className:"text-slate-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"No Class Assigned"}),e.jsx("p",{className:"text-slate-500 max-w-md mx-auto",children:"You are not currently assigned as a class teacher. Please contact the school administrator to assign you a class."})]}):e.jsxs("div",{className:"space-y-6 pb-20 md:pb-10 px-4 md:px-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mt-4 md:mt-0",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:["Class ",l.professional.grade_assigned,e.jsxs("span",{className:"px-2.5 py-1 rounded-lg bg-indigo-100 text-indigo-700 text-xs font-bold dark:bg-indigo-900/30 dark:text-indigo-400",children:["Term ",l.professional?.current_term||1," ",new Date().getFullYear()]})]}),e.jsx("p",{className:"text-sm md:text-base text-slate-500 dark:text-slate-400 mt-1",children:"Manage your students, track attendance, and view performance."})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsxs("button",{className:"flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2.5 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 border border-slate-200 dark:border-slate-700 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors shadow-sm",children:[e.jsx(E,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"Export"})]}),e.jsxs("button",{className:"flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 shadow-lg shadow-indigo-600/20 transition-all transform hover:scale-[1.02]",children:[e.jsx(I,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"Actions"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6",children:[e.jsx(m,{title:"Total Students",value:c,icon:U,color:"from-indigo-500 to-purple-500",trend:"+2 new"}),e.jsx(m,{title:"Boys",value:p,icon:V,color:"from-blue-500 to-cyan-500",subtitle:`${((p/c||0)*100).toFixed(0)}% of class`}),e.jsx(m,{title:"Girls",value:j,icon:u,color:"from-pink-500 to-rose-500",subtitle:`${((j/c||0)*100).toFixed(0)}% of class`}),e.jsx(m,{title:"Active Status",value:`${((T/c||0)*100).toFixed(0)}%`,icon:v,color:"from-emerald-500 to-teal-500",subtitle:"Attendance"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"p-4 md:p-6 border-b border-slate-100 dark:border-slate-700 flex flex-col sm:flex-row justify-between items-center gap-3 md:gap-4",children:[e.jsxs("div",{className:"relative w-full sm:w-96",children:[e.jsx(D,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search students...",value:n,onChange:t=>C(t.target.value),className:"w-full pl-9 pr-4 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:ring-2 focus:ring-indigo-500 focus:outline-none transition-all dark:text-white"})]}),e.jsx("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:e.jsxs("div",{className:"relative w-full sm:w-auto",children:[e.jsxs("select",{value:h,onChange:t=>S(t.target.value),className:"w-full sm:w-auto appearance-none pl-9 pr-8 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm text-slate-700 dark:text-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none cursor-pointer",children:[e.jsx("option",{value:"ALL",children:"All Status"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"})]}),e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16})]})})]}),e.jsx("div",{className:"p-4 md:p-6",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 md:gap-6",children:k?[...Array(8)].map((t,s)=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4 md:p-6 shadow-sm border border-slate-100 dark:border-slate-700 animate-pulse",children:[e.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 bg-slate-200 dark:bg-slate-700 rounded-full mx-auto mb-4"}),e.jsx("div",{className:"h-3 md:h-4 bg-slate-200 dark:bg-slate-700 rounded w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"h-2 md:h-3 bg-slate-200 dark:bg-slate-700 rounded w-1/2 mx-auto"})]},s)):g.length>0?g.map(t=>e.jsxs(b.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{y:-5},className:"group bg-white dark:bg-slate-800 rounded-2xl p-4 md:p-6 shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-xl hover:shadow-indigo-500/10 transition-all cursor-pointer relative overflow-hidden",onClick:()=>x(`/teacher/${d}/student/${t.id}`),children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-20 md:h-24 bg-gradient-to-br from-slate-50 to-indigo-50 dark:from-slate-800 dark:to-slate-900 z-0"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[e.jsxs("div",{className:"relative mb-3 md:mb-4",children:[e.jsx("div",{className:"h-20 w-20 md:h-24 md:w-24 rounded-full border-4 border-white dark:border-slate-800 shadow-md overflow-hidden bg-white dark:bg-slate-700 flex items-center justify-center",children:t.photo?e.jsx("img",{src:t.photo,alt:t.full_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:`w-full h-full flex items-center justify-center text-white text-xl md:text-2xl font-bold ${z(t.id)}`,children:A(t.first_name,t.last_name)})}),e.jsx("div",{className:`absolute bottom-1 right-1 w-4 h-4 md:w-5 md:h-5 rounded-full border-2 border-white dark:border-slate-800 flex items-center justify-center ${t.status==="ACTIVE"?"bg-emerald-500":"bg-slate-400"}`,children:t.status==="ACTIVE"&&e.jsx("div",{className:"w-1 md:w-1.5 h-1 md:h-1.5 bg-white rounded-full"})})]}),e.jsx("h3",{className:"text-sm md:text-lg font-bold text-slate-900 dark:text-white text-center mb-1 line-clamp-1 w-full px-1",children:t.full_name}),e.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-1.5 md:gap-2 mb-3 md:mb-4",children:[e.jsx("span",{className:"text-[10px] md:text-xs font-mono text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:t.admission_number}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wider ${t.gender==="Female"||t.gender==="F"?"bg-pink-50 text-pink-600 dark:bg-pink-900/20 dark:text-pink-400":"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400"}`,children:t.gender==="Female"||t.gender==="F"?"Girl":"Boy"})]}),e.jsxs("div",{className:"grid grid-cols-2 w-full gap-2 mt-auto",children:[e.jsxs("button",{className:"flex items-center justify-center gap-1 md:gap-2 py-1.5 md:py-2 px-2 md:px-3 rounded-lg md:rounded-xl bg-slate-50 dark:bg-slate-700/50 text-slate-600 dark:text-slate-300 text-[10px] md:text-xs font-semibold hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[e.jsx(v,{size:12,className:"md:w-3.5 md:h-3.5"}),"Results"]}),e.jsxs("button",{className:"flex items-center justify-center gap-1 md:gap-2 py-1.5 md:py-2 px-2 md:px-3 rounded-lg md:rounded-xl bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 text-[10px] md:text-xs font-semibold hover:bg-indigo-100 dark:hover:bg-indigo-900/30 transition-colors",children:[e.jsx(u,{size:12,className:"md:w-3.5 md:h-3.5"}),"Profile"]})]})]})]},t.id)):e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-10 md:py-20 text-slate-400",children:[e.jsx(M,{size:48,"md:size":64,className:"mb-4 text-slate-300 dark:text-slate-600"}),e.jsx("p",{className:"text-base md:text-lg font-medium text-slate-900 dark:text-white",children:"No students found"}),e.jsx("p",{className:"text-xs md:text-sm",children:"Try adjusting your search or filters"})]})})}),g.length>0&&e.jsx("div",{className:"flex justify-center my-6 md:mt-8",children:e.jsxs("nav",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"h-8 w-8 md:h-10 md:w-10 flex items-center justify-center rounded-lg border border-slate-200 dark:border-slate-700 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800 disabled:opacity-50",disabled:!0,children:"<"}),e.jsx("button",{className:"h-8 w-8 md:h-10 md:w-10 flex items-center justify-center rounded-lg bg-indigo-600 text-white font-bold shadow-lg shadow-indigo-600/20 text-sm",children:"1"}),e.jsx("button",{className:"h-8 w-8 md:h-10 md:w-10 flex items-center justify-center rounded-lg border border-slate-200 dark:border-slate-700 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800 disabled:opacity-50",disabled:!0,children:">"})]})})]})]})},m=({title:d,value:x,icon:l,color:i,subtitle:a,trend:o})=>e.jsxs(b.div,{whileHover:{y:-5},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 relative overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 right-0 p-4 opacity-10 bg-gradient-to-br ${i} rounded-bl-3xl`,children:e.jsx(l,{size:40})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${i} flex items-center justify-center text-white shadow-lg mb-4`,children:e.jsx(l,{size:24})}),e.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:d}),e.jsxs("div",{className:"flex items-baseline gap-2 mt-1",children:[e.jsx("h4",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:x}),o&&e.jsx("span",{className:"text-xs text-emerald-500 font-bold bg-emerald-50 dark:bg-emerald-900/30 px-1.5 py-0.5 rounded",children:o})]}),a&&e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:a})]})]});export{B as default};
