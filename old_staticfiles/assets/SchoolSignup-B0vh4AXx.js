import{u as P,f as k,r as n,j as e,e as z}from"./vendor-Cr6tcs86.js";import{b as R,I as o,B as A}from"./index-eBdLMQe5.js";import{P as L}from"./PublicNavbar-BaBZtFca.js";import{h as m,av as u,ae as B,B as E,Z as I,p as q,o as D,ad as g,aq as b,ac as M,a3 as F,a4 as O,V as T,A as J}from"./ui-kKL2mqtN.js";const V=()=>{const{registration_open:f,loading:j}=R(),c=P(),v=k(),t=new URLSearchParams(v.search).get("plan")||"Basic",[w,x]=n.useState(!1),[N,y]=n.useState(!1),[h,d]=n.useState(null),[s,p]=n.useState({school_name:"",school_code:"",school_email:"",school_phone:"",school_address:"",password:"",confirm_password:"",school_logo:null,school_logo_preview:null}),r=l=>{p(a=>({...a,[l.target.name]:l.target.value}))},_=l=>{const a=l.target.files[0];if(a){const i=new FileReader;i.onloadend=()=>{p(C=>({...C,school_logo:a,school_logo_preview:i.result}))},i.readAsDataURL(a)}},S=async l=>{if(l.preventDefault(),d(null),s.password!==s.confirm_password){d("Passwords do not match");return}x(!0);try{const a=new FormData;a.append("school_name",s.school_name),a.append("school_code",s.school_code),a.append("school_email",s.school_email),a.append("school_phone",s.school_phone),a.append("school_address",s.school_address),a.append("password",s.password),a.append("plan",t),s.school_logo&&a.append("school_logo",s.school_logo),(await z.post("/api/school-signup/",a)).data.success&&(y(!0),setTimeout(()=>c("/login"),3e3))}catch(a){d(a.response?.data?.error||"Registration failed. Please try again.")}finally{x(!1)}};return!j&&!f?e.jsxs("div",{className:"min-h-screen bg-slate-950 flex shadow-inner items-center justify-center p-6 sm:p-12 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-primary-600/10 rounded-full blur-[120px] pointer-events-none"}),e.jsxs("div",{className:"max-w-md w-full bg-slate-900/50 backdrop-blur-xl border border-slate-800 p-12 rounded-[3rem] text-center shadow-2xl relative z-10",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-500/10 text-rose-500 rounded-full flex items-center justify-center mb-6 mx-auto",children:e.jsx(m,{size:40})}),e.jsx("h2",{className:"text-3xl font-black text-white mb-4 italic",children:"REGISTRATION CLOSED."}),e.jsxs("p",{className:"text-slate-400 mb-8 font-medium leading-relaxed",children:["We are currently reaching capacity for our beta phase. Please contact ",e.jsx("b",{children:"support@edumanage.com"})," for invitation-only access."]}),e.jsx("button",{onClick:()=>c("/"),className:"w-full py-4 px-6 bg-white text-slate-950 rounded-2xl font-black uppercase tracking-wider hover:bg-slate-200 transition-colors",children:"Back to Home"})]})]}):N?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-6 text-center",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-xl p-10 border border-slate-100 flex flex-col items-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center mb-6",children:e.jsx(u,{size:48})}),e.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Registration Successful!"}),e.jsxs("p",{className:"text-slate-600 mb-8 leading-relaxed",children:["Your institution ",e.jsx("b",{children:s.school_name})," has been registered. You are being redirected to the login page."]}),e.jsxs("div",{className:"flex gap-2 text-primary-600 font-semibold items-center",children:[e.jsx(B,{className:"animate-spin",size:20}),e.jsx("span",{children:"Redirecting..."})]})]})}):e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col lg:flex-row",children:[e.jsx(L,{alwaysSolid:!0}),e.jsxs("div",{className:"lg:w-1/3 bg-slate-900 p-12 lg:pt-32 text-white flex flex-col justify-between relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-12",children:[e.jsx("div",{className:"bg-primary-600 p-2 rounded-xl text-white",children:e.jsx(E,{size:24})}),e.jsx("span",{className:"text-xl font-bold tracking-tight",children:"EduManage"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-4xl font-bold leading-tight",children:"Join the future of education governance."}),e.jsx("p",{className:"text-slate-400 text-lg",children:"Set up your school dashboard in minutes and start managing your institution like a pro."}),e.jsx("div",{className:"space-y-4 pt-4",children:["Multi-branch support","Automated fee tracking","Comprehensive HR tools","Real-time academic reporting"].map((l,a)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-primary-500/20 text-primary-400 flex items-center justify-center",children:e.jsx(u,{size:12})}),e.jsx("span",{className:"text-slate-300",children:l})]},a))})]})]}),e.jsx("div",{className:"relative z-10 pt-12 border-t border-slate-800",children:e.jsx("p",{className:"text-slate-500 text-sm",children:"© 2024 EduManage Inc. All rights reserved."})}),e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary-600/20 blur-[120px]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-indigo-600/10 blur-[100px]"})]}),e.jsx("div",{className:"lg:w-2/3 p-6 lg:p-20 lg:pt-32 overflow-y-auto",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-12",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Register Your Institution"}),e.jsx("p",{className:"text-slate-500",children:"Enter your school details to create your admin account."})]}),e.jsxs("div",{className:"mb-8 p-6 bg-white rounded-3xl border border-slate-100 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${t==="Basic"?"bg-emerald-50 text-emerald-600":t==="Standard"?"bg-blue-50 text-blue-600":"bg-violet-50 text-violet-600"}`,children:[t==="Basic"&&e.jsx(I,{size:24}),t==="Standard"&&e.jsx(q,{size:24}),t==="Enterprise"&&e.jsx(D,{size:24})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Selected Plan"}),e.jsxs("h4",{className:"text-lg font-bold text-slate-900",children:[t," Edition"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Includes"}),e.jsx("p",{className:"text-sm font-bold text-primary-600",children:"7-Day Free Trial"})]})]}),h&&e.jsxs("div",{className:"mb-8 p-4 bg-red-50 border border-red-100 text-red-600 rounded-2xl flex items-center gap-3",children:[e.jsx(g,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:h})]}),e.jsxs("form",{onSubmit:S,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-100",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-slate-400 mb-6",children:"Institution Logo"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-8",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-32 h-32 rounded-3xl bg-slate-50 border-2 border-dashed border-slate-200 flex items-center justify-center overflow-hidden transition-all group-hover:border-primary-500 group-hover:bg-primary-50/10",children:s.school_logo_preview?e.jsx("img",{src:s.school_logo_preview,alt:"Preview",className:"w-full h-full object-contain"}):e.jsx(b,{size:40,className:"text-slate-300"})}),e.jsxs("label",{className:"absolute -bottom-3 -right-3 p-3 bg-primary-600 hover:bg-primary-700 text-white rounded-2xl shadow-xl cursor-pointer transition-all hover:scale-110 active:scale-95",children:[e.jsx(M,{size:18}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:_})]})]}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"font-bold text-slate-900 mb-1",children:"Upload School Logo"}),e.jsx("p",{className:"text-sm text-slate-500 max-w-xs leading-relaxed",children:"This logo will appear on all sidebars, login pages, and official receipts. Recommended: Square PNG/JPG, max 2MB."})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o,{label:"School Name",name:"school_name",placeholder:"e.g. St. Jude Academy",required:!0,value:s.school_name,onChange:r,icon:b}),e.jsx(o,{label:"School Code",name:"school_code",placeholder:"e.g. SJA01",required:!0,value:s.school_code,onChange:r,icon:g}),e.jsx(o,{label:"Official Phone Number",name:"school_phone",placeholder:"+254...",value:s.school_phone,onChange:r,icon:F}),e.jsx(o,{label:"Support Email",type:"email",name:"school_email",placeholder:"admin@school.com",required:!0,value:s.school_email,onChange:r,icon:O})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center gap-2",children:[e.jsx(T,{size:16}),"School Address"]}),e.jsx("textarea",{name:"school_address",className:"w-full px-5 py-4 bg-white border border-slate-200 rounded-2xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500 transition-all outline-none min-h-[120px] text-slate-600",placeholder:"P.O Box, Physical Location...",value:s.school_address,onChange:r})]}),e.jsxs("div",{className:"bg-slate-50 p-8 rounded-3xl border border-slate-100 space-y-6",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-slate-400",children:"Security & Password"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o,{label:"Set School Admin Password",type:"password",name:"password",placeholder:"••••••••",required:!0,value:s.password,onChange:r,icon:m}),e.jsx(o,{label:"Confirm Password",type:"password",name:"confirm_password",placeholder:"••••••••",required:!0,value:s.confirm_password,onChange:r,icon:m})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs(A,{type:"submit",size:"lg",className:"w-full py-6 text-lg rounded-2xl shadow-lg shadow-primary-500/20",isLoading:w,children:["Complete Registration",e.jsx(J,{size:20,className:"ml-2"})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-slate-500",children:["Already have a school account? "," ",e.jsx("button",{onClick:()=>c("/login"),className:"text-primary-600 font-bold hover:underline",children:"Sign In"})]})})]})})]})};export{V as default};
