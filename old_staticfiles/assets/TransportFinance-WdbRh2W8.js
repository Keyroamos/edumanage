import{r as a,e as l,j as e}from"./vendor-Cr6tcs86.js";import{aA as u,t as j,D as N,W as k}from"./ui-kKL2mqtN.js";const y=()=>{const[s,r]=a.useState("income"),[c,o]=a.useState([]),[i,x]=a.useState([]),[p,m]=a.useState([]),[h,d]=a.useState(!0);a.useEffect(()=>{b()},[s]);const b=async()=>{d(!0);try{if(s==="expenses"){const t=await l.get("/api/transport/finance/expenses/");o(t.data.expenses||[])}else if(s==="advances"){const t=await l.get("/api/transport/finance/advances/");x(t.data.advances||[])}else{const t=await l.get("/api/finance/transactions/all/?source=TRANSPORT");m(t.data.transactions||[])}}catch(t){console.error(t)}finally{d(!1)}},f=({status:t})=>e.jsx("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wide border ${t==="APPROVED"||t==="INCOME"||t==="COMPLETED"?"bg-emerald-50 border-emerald-200 text-emerald-600 dark:bg-emerald-500/10 dark:border-emerald-500/20 dark:text-emerald-400":t==="REJECTED"?"bg-rose-50 border-rose-200 text-rose-600 dark:bg-rose-500/10 dark:border-rose-500/20 dark:text-rose-400":"bg-amber-50 border-amber-200 text-amber-600 dark:bg-amber-500/10 dark:border-amber-200 text-amber-500"}`,children:t}),n=()=>s==="income"?p:s==="expenses"?c:i;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-black text-slate-900 dark:text-white flex items-center gap-3",children:[e.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 p-2 rounded-xl text-indigo-600 dark:text-indigo-400",children:e.jsx(u,{size:24})}),"Transport Finance"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium ml-14 mt-1",children:"Income and Expenditure tracking for the fleet"})]}),e.jsxs("div",{className:"bg-white/50 dark:bg-slate-900/50 backdrop-blur-md rounded-xl p-1 flex border border-slate-200 dark:border-slate-800 shadow-sm overflow-x-auto no-scrollbar",children:[e.jsxs("button",{onClick:()=>r("income"),className:`px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 transition-all whitespace-nowrap ${s==="income"?"bg-white dark:bg-slate-800 text-emerald-600 dark:text-emerald-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:[e.jsx(j,{size:14})," Revenue"]}),e.jsxs("button",{onClick:()=>r("expenses"),className:`px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 transition-all whitespace-nowrap ${s==="expenses"?"bg-white dark:bg-slate-800 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:[e.jsx(N,{size:14})," Expenses"]}),e.jsxs("button",{onClick:()=>r("advances"),className:`px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 transition-all whitespace-nowrap ${s==="advances"?"bg-white dark:bg-slate-800 text-amber-600 dark:text-amber-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:[e.jsx(k,{size:14})," Advances"]})]})]}),h?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"w-10 h-10 rounded-full border-4 border-slate-200 border-t-indigo-600 animate-spin"})}):e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-[2rem] border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800",children:e.jsxs("tr",{className:"text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest",children:[e.jsx("th",{className:"px-6 py-4",children:"Participant/Source"}),e.jsx("th",{className:"px-6 py-4",children:"Details"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"}),e.jsx("th",{className:"px-6 py-4",children:"Method/Ref"}),e.jsx("th",{className:"px-6 py-4",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:n().map((t,g)=>e.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-xs font-bold text-slate-500",children:(t.driver||t.title||"U")[0]}),e.jsx("span",{className:"text-sm font-bold",children:t.driver||t.title})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-xs text-slate-500 font-medium truncate max-w-[200px]",title:t.description||t.reason||t.title,children:t.description||t.reason||t.title})}),e.jsxs("td",{className:`px-6 py-4 text-right font-black text-sm ${s==="income"?"text-emerald-600":"text-rose-600"}`,children:["KES ",t.amount.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase",children:t.method||"CASH"}),e.jsx("p",{className:"text-[10px] font-mono whitespace-nowrap",children:t.reference||"-"})]}),e.jsx("td",{className:"px-6 py-4 text-xs font-medium text-slate-500",children:t.date}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx(f,{status:t.status||(s==="income"?"PAID":"PENDING")})})]},g))})]}),n().length===0&&e.jsx("div",{className:"text-center py-20 text-slate-400 font-bold uppercase tracking-widest text-xs",children:"No records found"})]})})]})};export{y as default};
