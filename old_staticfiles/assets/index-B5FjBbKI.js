import{a as cf,c as yg,d as js,j as e,m as he,r as f,A as vt,e as V,u as Le,f as Ya,O as Sa,h as Zt,N as Cm,i as os,b as wg,g as kg,L as Tr,B as _g,k as Sg,l as je}from"./vendor-DG3Bd_lS.js";import{S as xf,M as mf,a as Cg,G as ta,X as Ve,U as Ie,B as Lt,R as ul,C as Ze,b as Mn,c as It,d as uf,e as Jc,D as it,f as Pn,g as Mt,Z as ql,L as Fr,h as Tt,A as Za,i as ot,j as Hr,k as jt,l as rd,m as xl,n as Qe,o as ad,p as Wc,q as fl,r as dt,s as Ga,T as Dt,t as Ca,F as Wt,I as Eg,u as Dn,v as Ms,w as Ye,x as id,W as Ss,y as hf,z as pf,E as ha,H as Cs,J as Ls,K as ds,N as ma,O as Em,P as gt,Q as hs,V as ua,Y as nt,_ as Am,$ as Pp,a0 as Rn,a1 as Es,a2 as Gt,a3 as ff,a4 as nd,a5 as Ur,a6 as Oi,a7 as Pi,a8 as Pr,a9 as qa,aa as zm,ab as Di,ac as za,ad as sa,ae as Tm,af as Hs,ag as bf,ah as gm,ai as Br,aj as Bn,ak as Un,al as Fn,am as Ag,an as Uc,ao as Bp,ap as im,aq as ld,ar as Hn,as as e0,at as Up,au as zg,av as gf,aw as On,ax as Kc,ay as hl,az as Tg,aA as vf,aB as Lg,aC as jf,aD as Mg,aE as Dg,aF as Rg,aG as Og,aH as vm,aI as Nf,aJ as Ia,aK as Pg,aL as jm,aM as yf,aN as Bg,aO as Ug,aP as Fg,aQ as Hg,aR as Ig,aS as wf,aT as kf,aU as Gg,aV as qg,aW as Zg,aX as $g,aY as Yg,aZ as Fp,a_ as Vg,a$ as Nm,b0 as Kg,b1 as _f,b2 as Xg,b3 as Sf,b4 as Qg,b5 as Jg,b6 as Wg}from"./ui-D6hSc0dZ.js";import{R as es,A as Bi,C as pl,X as Ea,Y as Aa,T as ts,a as Zl,P as Ir,b as Gr,c as $a,B as In,d as Ri,L as Lm}from"./charts-BKT6Z9E_.js";(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))u(g);new MutationObserver(g=>{for(const v of g)if(v.type==="childList")for(const j of v.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&u(j)}).observe(document,{childList:!0,subtree:!0});function c(g){const v={};return g.integrity&&(v.integrity=g.integrity),g.referrerPolicy&&(v.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?v.credentials="include":g.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function u(g){if(g.ep)return;g.ep=!0;const v=c(g);fetch(g.href,v)}})();var nm={exports:{}},Qo={},om={exports:{}},dm={};var Hp;function ev(){return Hp||(Hp=1,(function(n){function m(B,le){var G=B.length;B.push(le);e:for(;0<G;){var J=G-1>>>1,oe=B[J];if(0<g(oe,le))B[J]=le,B[G]=oe,G=J;else break e}}function c(B){return B.length===0?null:B[0]}function u(B){if(B.length===0)return null;var le=B[0],G=B.pop();if(G!==le){B[0]=G;e:for(var J=0,oe=B.length,ue=oe>>>1;J<ue;){var ke=2*(J+1)-1,ye=B[ke],we=ke+1,Se=B[we];if(0>g(ye,G))we<oe&&0>g(Se,ye)?(B[J]=Se,B[we]=G,J=we):(B[J]=ye,B[ke]=G,J=ke);else if(we<oe&&0>g(Se,G))B[J]=Se,B[we]=G,J=we;else break e}}return le}function g(B,le){var G=B.sortIndex-le.sortIndex;return G!==0?G:B.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var v=performance;n.unstable_now=function(){return v.now()}}else{var j=Date,S=j.now();n.unstable_now=function(){return j.now()-S}}var _=[],E=[],z=1,h=null,b=3,C=!1,A=!1,M=!1,k=!1,T=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function P(B){for(var le=c(E);le!==null;){if(le.callback===null)u(E);else if(le.startTime<=B)u(E),le.sortIndex=le.expirationTime,m(_,le);else break;le=c(E)}}function U(B){if(M=!1,P(B),!A)if(c(_)!==null)A=!0,F||(F=!0,ee());else{var le=c(E);le!==null&&re(U,le.startTime-B)}}var F=!1,Z=-1,ae=5,H=-1;function xe(){return k?!0:!(n.unstable_now()-H<ae)}function I(){if(k=!1,F){var B=n.unstable_now();H=B;var le=!0;try{e:{A=!1,M&&(M=!1,D(Z),Z=-1),C=!0;var G=b;try{t:{for(P(B),h=c(_);h!==null&&!(h.expirationTime>B&&xe());){var J=h.callback;if(typeof J=="function"){h.callback=null,b=h.priorityLevel;var oe=J(h.expirationTime<=B);if(B=n.unstable_now(),typeof oe=="function"){h.callback=oe,P(B),le=!0;break t}h===c(_)&&u(_),P(B)}else u(_);h=c(_)}if(h!==null)le=!0;else{var ue=c(E);ue!==null&&re(U,ue.startTime-B),le=!1}}break e}finally{h=null,b=G,C=!1}le=void 0}}finally{le?ee():F=!1}}}var ee;if(typeof y=="function")ee=function(){y(I)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Q=$.port2;$.port1.onmessage=I,ee=function(){Q.postMessage(null)}}else ee=function(){T(I,0)};function re(B,le){Z=T(function(){B(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(B){switch(b){case 1:case 2:case 3:var le=3;break;default:le=b}var G=b;b=le;try{return B()}finally{b=G}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(B,le){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var G=b;b=B;try{return le()}finally{b=G}},n.unstable_scheduleCallback=function(B,le,G){var J=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?J+G:J):G=J,B){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=G+oe,B={id:z++,callback:le,priorityLevel:B,startTime:G,expirationTime:oe,sortIndex:-1},G>J?(B.sortIndex=G,m(E,B),c(_)===null&&B===c(E)&&(M?(D(Z),Z=-1):M=!0,re(U,G-J))):(B.sortIndex=oe,m(_,B),A||C||(A=!0,F||(F=!0,ee()))),B},n.unstable_shouldYield=xe,n.unstable_wrapCallback=function(B){var le=b;return function(){var G=b;b=le;try{return B.apply(this,arguments)}finally{b=G}}}})(dm)),dm}var Ip;function tv(){return Ip||(Ip=1,om.exports=ev()),om.exports}var Gp;function sv(){if(Gp)return Qo;Gp=1;var n=tv(),m=cf(),c=yg();function u(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function g(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function v(t){var s=t,l=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(l=s.return),t=s.return;while(t)}return s.tag===3?l:null}function j(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function S(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function _(t){if(v(t)!==t)throw Error(u(188))}function E(t){var s=t.alternate;if(!s){if(s=v(t),s===null)throw Error(u(188));return s!==t?null:t}for(var l=t,i=s;;){var d=l.return;if(d===null)break;var x=d.alternate;if(x===null){if(i=d.return,i!==null){l=i;continue}break}if(d.child===x.child){for(x=d.child;x;){if(x===l)return _(d),t;if(x===i)return _(d),s;x=x.sibling}throw Error(u(188))}if(l.return!==i.return)l=d,i=x;else{for(var w=!1,O=d.child;O;){if(O===l){w=!0,l=d,i=x;break}if(O===i){w=!0,i=d,l=x;break}O=O.sibling}if(!w){for(O=x.child;O;){if(O===l){w=!0,l=x,i=d;break}if(O===i){w=!0,i=x,l=d;break}O=O.sibling}if(!w)throw Error(u(189))}}if(l.alternate!==i)throw Error(u(190))}if(l.tag!==3)throw Error(u(188));return l.stateNode.current===l?t:s}function z(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=z(t),s!==null)return s;t=t.sibling}return null}var h=Object.assign,b=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),y=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),xe=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function ee(t){return t===null||typeof t!="object"?null:(t=I&&t[I]||t["@@iterator"],typeof t=="function"?t:null)}var $=Symbol.for("react.client.reference");function Q(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===$?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case T:return"Profiler";case k:return"StrictMode";case U:return"Suspense";case F:return"SuspenseList";case H:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case A:return"Portal";case y:return t.displayName||"Context";case D:return(t._context.displayName||"Context")+".Consumer";case P:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Z:return s=t.displayName||null,s!==null?s:Q(t.type)||"Memo";case ae:s=t._payload,t=t._init;try{return Q(t(s))}catch{}}return null}var re=Array.isArray,B=m.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},J=[],oe=-1;function ue(t){return{current:t}}function ke(t){0>oe||(t.current=J[oe],J[oe]=null,oe--)}function ye(t,s){oe++,J[oe]=t.current,t.current=s}var we=ue(null),Se=ue(null),Me=ue(null),Be=ue(null);function Ue(t,s){switch(ye(Me,s),ye(Se,t),ye(we,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?ip(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=ip(s),t=np(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ke(we),ye(we,t)}function Rt(){ke(we),ke(Se),ke(Me)}function K(t){t.memoizedState!==null&&ye(Be,t);var s=we.current,l=np(s,t.type);s!==l&&(ye(Se,t),ye(we,l))}function Ne(t){Se.current===t&&(ke(we),ke(Se)),Be.current===t&&(ke(Be),Yo._currentValue=G)}var Ae,Ce;function ct(t){if(Ae===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Ae=s&&s[1]||"",Ce=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ae+t+Ce}var Ge=!1;function pt(t,s){if(!t||Ge)return"";Ge=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(s){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(me){var ce=me}Reflect.construct(t,[],ve)}else{try{ve.call()}catch(me){ce=me}t.call(ve.prototype)}}else{try{throw Error()}catch(me){ce=me}(ve=t())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(me){if(me&&ce&&typeof me.stack=="string")return[me.stack,ce.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=i.DetermineComponentFrameRoot(),w=x[0],O=x[1];if(w&&O){var Y=w.split(`
`),ne=O.split(`
`);for(d=i=0;i<Y.length&&!Y[i].includes("DetermineComponentFrameRoot");)i++;for(;d<ne.length&&!ne[d].includes("DetermineComponentFrameRoot");)d++;if(i===Y.length||d===ne.length)for(i=Y.length-1,d=ne.length-1;1<=i&&0<=d&&Y[i]!==ne[d];)d--;for(;1<=i&&0<=d;i--,d--)if(Y[i]!==ne[d]){if(i!==1||d!==1)do if(i--,d--,0>d||Y[i]!==ne[d]){var pe=`
`+Y[i].replace(" at new "," at ");return t.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",t.displayName)),pe}while(1<=i&&0<=d);break}}}finally{Ge=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?ct(l):""}function ft(t,s){switch(t.tag){case 26:case 27:case 5:return ct(t.type);case 16:return ct("Lazy");case 13:return t.child!==s&&s!==null?ct("Suspense Fallback"):ct("Suspense");case 19:return ct("SuspenseList");case 0:case 15:return pt(t.type,!1);case 11:return pt(t.type.render,!1);case 1:return pt(t.type,!0);case 31:return ct("Activity");default:return""}}function Ot(t){try{var s="",l=null;do s+=ft(t,l),l=t,t=t.return;while(t);return s}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var ps=Object.prototype.hasOwnProperty,As=n.unstable_scheduleCallback,bl=n.unstable_cancelCallback,xd=n.unstable_shouldYield,md=n.unstable_requestPaint,Ds=n.unstable_now,o0=n.unstable_getCurrentPriorityLevel,Fi=n.unstable_ImmediatePriority,$n=n.unstable_UserBlockingPriority,Zr=n.unstable_NormalPriority,d0=n.unstable_LowPriority,Yn=n.unstable_IdlePriority,ud=n.log,c0=n.unstable_setDisableYieldValue,Yl=null,Ns=null;function Ta(t){if(typeof ud=="function"&&c0(t),Ns&&typeof Ns.setStrictMode=="function")try{Ns.setStrictMode(Yl,t)}catch{}}var Rs=Math.clz32?Math.clz32:m0,$r=Math.log,x0=Math.LN2;function m0(t){return t>>>=0,t===0?32:31-($r(t)/x0|0)|0}var Yr=256,Vr=262144,Kr=4194304;function gl(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Hi(t,s,l){var i=t.pendingLanes;if(i===0)return 0;var d=0,x=t.suspendedLanes,w=t.pingedLanes;t=t.warmLanes;var O=i&134217727;return O!==0?(i=O&~x,i!==0?d=gl(i):(w&=O,w!==0?d=gl(w):l||(l=O&~t,l!==0&&(d=gl(l))))):(O=i&~x,O!==0?d=gl(O):w!==0?d=gl(w):l||(l=i&~t,l!==0&&(d=gl(l)))),d===0?0:s!==0&&s!==d&&(s&x)===0&&(x=d&-d,l=s&-s,x>=l||x===32&&(l&4194048)!==0)?s:d}function Xr(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function u0(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hd(){var t=Kr;return Kr<<=1,(Kr&62914560)===0&&(Kr=4194304),t}function Vn(t){for(var s=[],l=0;31>l;l++)s.push(t);return s}function vl(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function h0(t,s,l,i,d,x){var w=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var O=t.entanglements,Y=t.expirationTimes,ne=t.hiddenUpdates;for(l=w&~l;0<l;){var pe=31-Rs(l),ve=1<<pe;O[pe]=0,Y[pe]=-1;var ce=ne[pe];if(ce!==null)for(ne[pe]=null,pe=0;pe<ce.length;pe++){var me=ce[pe];me!==null&&(me.lane&=-536870913)}l&=~ve}i!==0&&pd(t,i,0),x!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=x&~(w&~s))}function pd(t,s,l){t.pendingLanes|=s,t.suspendedLanes&=~s;var i=31-Rs(s);t.entangledLanes|=s,t.entanglements[i]=t.entanglements[i]|1073741824|l&261930}function fd(t,s){var l=t.entangledLanes|=s;for(t=t.entanglements;l;){var i=31-Rs(l),d=1<<i;d&s|t[i]&s&&(t[i]|=s),l&=~d}}function bd(t,s){var l=s&-s;return l=(l&42)!==0?1:Is(l),(l&(t.suspendedLanes|s))!==0?0:l}function Is(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Re(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Kn(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:zp(t.type))}function Xn(t,s){var l=le.p;try{return le.p=t,s()}finally{le.p=l}}var La=Math.random().toString(36).slice(2),ss="__reactFiber$"+La,fs="__reactProps$"+La,jl="__reactContainer$"+La,Va="__reactEvents$"+La,gd="__reactListeners$"+La,p0="__reactHandles$"+La,vd="__reactResources$"+La,Qr="__reactMarker$"+La;function Qn(t){delete t[ss],delete t[fs],delete t[Va],delete t[gd],delete t[p0]}function Nl(t){var s=t[ss];if(s)return s;for(var l=t.parentNode;l;){if(s=l[jl]||l[ss]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(t=hp(t);t!==null;){if(l=t[ss])return l;t=hp(t)}return s}t=l,l=t.parentNode}return null}function Vl(t){if(t=t[ss]||t[jl]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Ka(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(u(33))}function Kl(t){var s=t[vd];return s||(s=t[vd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function as(t){t[Qr]=!0}var jd=new Set,Nd={};function yl(t,s){Xa(t,s),Xa(t+"Capture",s)}function Xa(t,s){for(Nd[t]=s,t=0;t<s.length;t++)jd.add(s[t])}var Jr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jn={},Wn={};function Wr(t){return ps.call(Wn,t)?!0:ps.call(Jn,t)?!1:Jr.test(t)?Wn[t]=!0:(Jn[t]=!0,!1)}function We(t,s,l){if(Wr(s))if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var i=s.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+l)}}function _t(t,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+l)}}function Gs(t,s,l,i){if(i===null)t.removeAttribute(l);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(s,l,""+i)}}function cs(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wl(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function eo(t,s,l){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var d=i.get,x=i.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){l=""+w,x.call(this,w)}}),Object.defineProperty(t,s,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(w){l=""+w},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function qe(t){if(!t._valueTracker){var s=wl(t)?"checked":"value";t._valueTracker=eo(t,s,""+t[s])}}function Ut(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var l=s.getValue(),i="";return t&&(i=wl(t)?t.checked?"true":"false":t.value),t=i,t!==l?(s.setValue(t),!0):!1}function Xl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ii=/[\n"\\]/g;function Pt(t){return t.replace(Ii,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function to(t,s,l,i,d,x,w,O){t.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.type=w:t.removeAttribute("type"),s!=null?w==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+cs(s)):t.value!==""+cs(s)&&(t.value=""+cs(s)):w!=="submit"&&w!=="reset"||t.removeAttribute("value"),s!=null?Ma(t,w,cs(s)):l!=null?Ma(t,w,cs(l)):i!=null&&t.removeAttribute("value"),d==null&&x!=null&&(t.defaultChecked=!!x),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?t.name=""+cs(O):t.removeAttribute("name")}function ei(t,s,l,i,d,x,w,O){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.type=x),s!=null||l!=null){if(!(x!=="submit"&&x!=="reset"||s!=null)){qe(t);return}l=l!=null?""+cs(l):"",s=s!=null?""+cs(s):l,O||s===t.value||(t.value=s),t.defaultValue=s}i=i??d,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=O?t.checked:!!i,t.defaultChecked=!!i,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.name=w),qe(t)}function Ma(t,s,l){s==="number"&&Xl(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function At(t,s,l,i){if(t=t.options,s){s={};for(var d=0;d<l.length;d++)s["$"+l[d]]=!0;for(l=0;l<t.length;l++)d=s.hasOwnProperty("$"+t[l].value),t[l].selected!==d&&(t[l].selected=d),d&&i&&(t[l].defaultSelected=!0)}else{for(l=""+cs(l),s=null,d=0;d<t.length;d++){if(t[d].value===l){t[d].selected=!0,i&&(t[d].defaultSelected=!0);return}s!==null||t[d].disabled||(s=t[d])}s!==null&&(s.selected=!0)}}function Qa(t,s,l){if(s!=null&&(s=""+cs(s),s!==t.value&&(t.value=s),l==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=l!=null?""+cs(l):""}function Ql(t,s,l,i){if(s==null){if(i!=null){if(l!=null)throw Error(u(92));if(re(i)){if(1<i.length)throw Error(u(93));i=i[0]}l=i}l==null&&(l=""),s=l}l=cs(s),t.defaultValue=l,i=t.textContent,i===l&&i!==""&&i!==null&&(t.value=i),qe(t)}function pa(t,s){if(s){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=s;return}}t.textContent=s}var so=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jl(t,s,l){var i=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?i?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":i?t.setProperty(s,l):typeof l!="number"||l===0||so.has(s)?s==="float"?t.cssFloat=l:t[s]=(""+l).trim():t[s]=l+"px"}function Gi(t,s,l){if(s!=null&&typeof s!="object")throw Error(u(62));if(t=t.style,l!=null){for(var i in l)!l.hasOwnProperty(i)||s!=null&&s.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var d in s)i=s[d],s.hasOwnProperty(d)&&l[d]!==i&&Jl(t,d,i)}else for(var x in s)s.hasOwnProperty(x)&&Jl(t,x,s[x])}function ti(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ao=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wl(t){return ao.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function qs(){}var Zi=null;function si(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var er=null,He=null;function aa(t){var s=Vl(t);if(s&&(t=s.stateNode)){var l=t[fs]||null;e:switch(t=s.stateNode,s.type){case"input":if(to(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Pt(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var i=l[s];if(i!==t&&i.form===t.form){var d=i[fs]||null;if(!d)throw Error(u(90));to(i,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<l.length;s++)i=l[s],i.form===t.form&&Ut(i)}break e;case"textarea":Qa(t,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&At(t,!!l.multiple,s,!1)}}}var yt=!1;function lo(t,s,l){if(yt)return t(s,l);yt=!0;try{var i=t(s);return i}finally{if(yt=!1,(er!==null||He!==null)&&(bc(),er&&(s=er,t=He,He=er=null,aa(s),t)))for(s=0;s<t.length;s++)aa(t[s])}}function kl(t,s){var l=t.stateNode;if(l===null)return null;var i=l[fs]||null;if(i===null)return null;l=i[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(u(231,s,typeof l));return l}var la=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ai=!1;if(la)try{var ra={};Object.defineProperty(ra,"passive",{get:function(){ai=!0}}),window.addEventListener("test",ra,ra),window.removeEventListener("test",ra,ra)}catch{ai=!1}var fa=null,_l=null,$t=null;function Ja(){if($t)return $t;var t,s=_l,l=s.length,i,d="value"in fa?fa.value:fa.textContent,x=d.length;for(t=0;t<l&&s[t]===d[t];t++);var w=l-t;for(i=1;i<=w&&s[l-i]===d[x-i];i++);return $t=d.slice(t,1<i?1-i:void 0)}function li(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ri(){return!0}function yd(){return!1}function ys(t){function s(l,i,d,x,w){this._reactName=l,this._targetInst=d,this.type=i,this.nativeEvent=x,this.target=w,this.currentTarget=null;for(var O in t)t.hasOwnProperty(O)&&(l=t[O],this[O]=l?l(x):x[O]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?ri:yd,this.isPropagationStopped=yd,this}return h(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),s}var Da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$i=ys(Da),tr=h({},Da,{view:0,detail:0}),at=ys(tr),ro,Os,Ra,ii=h({},tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ra&&(Ra&&t.type==="mousemove"?(ro=t.screenX-Ra.screenX,Os=t.screenY-Ra.screenY):Os=ro=0,Ra=t),ro)},movementY:function(t){return"movementY"in t?t.movementY:Os}}),wd=ys(ii),io=h({},ii,{dataTransfer:0}),f0=ys(io),kd=h({},tr,{relatedTarget:0}),no=ys(kd),b0=h({},Da,{animationName:0,elapsedTime:0,pseudoElement:0}),oo=ys(b0),g0=h({},Da,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ba=ys(g0),v0=h({},Da,{data:0}),co=ys(v0),Wa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_d={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xo(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Sd[t])?!!s[t]:!1}function mo(){return xo}var Cd=h({},tr,{key:function(t){if(t.key){var s=Wa[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=li(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_d[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mo,charCode:function(t){return t.type==="keypress"?li(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?li(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ed=ys(Cd),j0=h({},ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ad=ys(j0),uo=h({},tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mo}),N0=ys(uo),zd=h({},Da,{propertyName:0,elapsedTime:0,pseudoElement:0}),Td=ys(zd),Yi=h({},ii,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Sl=ys(Yi),y0=h({},Da,{newState:0,oldState:0}),ni=ys(y0),Zs=[9,13,27,32],Vi=la&&"CompositionEvent"in window,sr=null;la&&"documentMode"in document&&(sr=document.documentMode);var w0=la&&"TextEvent"in window&&!sr,Ki=la&&(!Vi||sr&&8<sr&&11>=sr),Xi=" ",Ld=!1;function Md(t,s){switch(t){case"keyup":return Zs.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ho(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ar=!1;function ia(t,s){switch(t){case"compositionend":return ho(s);case"keypress":return s.which!==32?null:(Ld=!0,Xi);case"textInput":return t=s.data,t===Xi&&Ld?null:t;default:return null}}function lr(t,s){if(ar)return t==="compositionend"||!Vi&&Md(t,s)?(t=Ja(),$t=_l=fa=null,ar=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ki&&s.locale!=="ko"?null:s.data;default:return null}}var k0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ga(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!k0[t.type]:s==="textarea"}function Dd(t,s,l,i){er?He?He.push(i):He=[i]:er=i,s=kc(s,"onChange"),0<s.length&&(l=new $i("onChange","change",null,l,i),t.push({event:l,listeners:s}))}var va=null,oi=null;function di(t){ep(t,0)}function ci(t){var s=Ka(t);if(Ut(s))return t}function xi(t,s){if(t==="change")return s}var Rd=!1;if(la){var ja;if(la){var rr="oninput"in document;if(!rr){var Od=document.createElement("div");Od.setAttribute("oninput","return;"),rr=typeof Od.oninput=="function"}ja=rr}else ja=!1;Rd=ja&&(!document.documentMode||9<document.documentMode)}function Qi(){va&&(va.detachEvent("onpropertychange",Pd),oi=va=null)}function Pd(t){if(t.propertyName==="value"&&ci(oi)){var s=[];Dd(s,oi,t,si(t)),lo(di,s)}}function Oa(t,s,l){t==="focusin"?(Qi(),va=s,oi=l,va.attachEvent("onpropertychange",Pd)):t==="focusout"&&Qi()}function _0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ci(oi)}function ir(t,s){if(t==="click")return ci(s)}function S0(t,s){if(t==="input"||t==="change")return ci(s)}function Pa(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var bs=typeof Object.is=="function"?Object.is:Pa;function nr(t,s){if(bs(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var l=Object.keys(t),i=Object.keys(s);if(l.length!==i.length)return!1;for(i=0;i<l.length;i++){var d=l[i];if(!ps.call(s,d)||!bs(t[d],s[d]))return!1}return!0}function Ji(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mi(t,s){var l=Ji(t);t=0;for(var i;l;){if(l.nodeType===3){if(i=t+l.textContent.length,t<=s&&i>=s)return{node:l,offset:s-t};t=i}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Ji(l)}}function Wi(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Wi(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function ui(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Xl(t.document);s instanceof t.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)t=s.contentWindow;else break;s=Xl(t.document)}return s}function el(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var en=la&&"documentMode"in document&&11>=document.documentMode,tl=null,tn=null,hi=null,or=!1;function Bd(t,s,l){var i=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;or||tl==null||tl!==Xl(i)||(i=tl,"selectionStart"in i&&el(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),hi&&nr(hi,i)||(hi=i,i=kc(tn,"onSelect"),0<i.length&&(s=new $i("onSelect","select",null,s,l),t.push({event:s,listeners:i}),s.target=tl)))}function sl(t,s){var l={};return l[t.toLowerCase()]=s.toLowerCase(),l["Webkit"+t]="webkit"+s,l["Moz"+t]="moz"+s,l}var dr={animationend:sl("Animation","AnimationEnd"),animationiteration:sl("Animation","AnimationIteration"),animationstart:sl("Animation","AnimationStart"),transitionrun:sl("Transition","TransitionRun"),transitionstart:sl("Transition","TransitionStart"),transitioncancel:sl("Transition","TransitionCancel"),transitionend:sl("Transition","TransitionEnd")},sn={},Ud={};la&&(Ud=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);function gs(t){if(sn[t])return sn[t];if(!dr[t])return t;var s=dr[t],l;for(l in s)if(s.hasOwnProperty(l)&&l in Ud)return sn[t]=s[l];return t}var pi=gs("animationend"),Fd=gs("animationiteration"),fi=gs("animationstart"),C0=gs("transitionrun"),Hd=gs("transitionstart"),E0=gs("transitioncancel"),cr=gs("transitionend"),Id=new Map,al="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");al.push("scrollEnd");function $s(t,s){Id.set(t,s),yl(s,[t])}var bi=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ys=[],zs=0,an=0;function gi(){for(var t=zs,s=an=zs=0;s<t;){var l=Ys[s];Ys[s++]=null;var i=Ys[s];Ys[s++]=null;var d=Ys[s];Ys[s++]=null;var x=Ys[s];if(Ys[s++]=null,i!==null&&d!==null){var w=i.pending;w===null?d.next=d:(d.next=w.next,w.next=d),i.pending=d}x!==0&&xr(l,d,x)}}function ll(t,s,l,i){Ys[zs++]=t,Ys[zs++]=s,Ys[zs++]=l,Ys[zs++]=i,an|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function po(t,s,l,i){return ll(t,s,l,i),vi(t)}function Na(t,s){return ll(t,null,null,s),vi(t)}function xr(t,s,l){t.lanes|=l;var i=t.alternate;i!==null&&(i.lanes|=l);for(var d=!1,x=t.return;x!==null;)x.childLanes|=l,i=x.alternate,i!==null&&(i.childLanes|=l),x.tag===22&&(t=x.stateNode,t===null||t._visibility&1||(d=!0)),t=x,x=x.return;return t.tag===3?(x=t.stateNode,d&&s!==null&&(d=31-Rs(l),t=x.hiddenUpdates,i=t[d],i===null?t[d]=[s]:i.push(s),s.lane=l|536870912),x):null}function vi(t){if(50<Fo)throw Fo=0,zx=null,Error(u(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Cl={};function A0(t,s,l,i){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ts(t,s,l,i){return new A0(t,s,l,i)}function ln(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ya(t,s){var l=t.alternate;return l===null?(l=Ts(t.tag,s,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=s,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,s=t.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function fo(t,s){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,s=l.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function ji(t,s,l,i,d,x){var w=0;if(i=t,typeof t=="function")ln(t)&&(w=1);else if(typeof t=="string")w=cg(t,l,we.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case H:return t=Ts(31,l,s,d),t.elementType=H,t.lanes=x,t;case M:return El(l.children,d,x,s);case k:w=8,d|=24;break;case T:return t=Ts(12,l,s,d|2),t.elementType=T,t.lanes=x,t;case U:return t=Ts(13,l,s,d),t.elementType=U,t.lanes=x,t;case F:return t=Ts(19,l,s,d),t.elementType=F,t.lanes=x,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case y:w=10;break e;case D:w=9;break e;case P:w=11;break e;case Z:w=14;break e;case ae:w=16,i=null;break e}w=29,l=Error(u(130,t===null?"null":typeof t,"")),i=null}return s=Ts(w,l,s,d),s.elementType=t,s.type=i,s.lanes=x,s}function El(t,s,l,i){return t=Ts(7,t,i,s),t.lanes=l,t}function rn(t,s,l){return t=Ts(6,t,null,s),t.lanes=l,t}function bo(t){var s=Ts(18,null,null,0);return s.stateNode=t,s}function go(t,s,l){return s=Ts(4,t.children!==null?t.children:[],t.key,s),s.lanes=l,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var a=new WeakMap;function r(t,s){if(typeof t=="object"&&t!==null){var l=a.get(t);return l!==void 0?l:(s={value:t,source:s,stack:Ot(s)},a.set(t,s),s)}return{value:t,source:s,stack:Ot(s)}}var o=[],p=0,N=null,R=0,q=[],se=0,de=null,ge=1,_e="";function Oe(t,s){o[p++]=R,o[p++]=N,N=t,R=s}function Ke(t,s,l){q[se++]=ge,q[se++]=_e,q[se++]=de,de=t;var i=ge;t=_e;var d=32-Rs(i)-1;i&=~(1<<d),l+=1;var x=32-Rs(s)+d;if(30<x){var w=d-d%5;x=(i&(1<<w)-1).toString(32),i>>=w,d-=w,ge=1<<32-Rs(s)+d|l<<d|i,_e=x+t}else ge=1<<x|l<<d|i,_e=t}function xs(t){t.return!==null&&(Oe(t,1),Ke(t,1,0))}function Yt(t){for(;t===N;)N=o[--p],o[p]=null,R=o[--p],o[p]=null;for(;t===de;)de=q[--se],q[se]=null,_e=q[--se],q[se]=null,ge=q[--se],q[se]=null}function Ps(t,s){q[se++]=ge,q[se++]=_e,q[se++]=de,ge=s.id,_e=s.overflow,de=t}var xt=null,mt=null,et=!1,rl=null,Vs=!1,nn=Error(u(519));function il(t){var s=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ni(r(s,t)),nn}function vo(t){var s=t.stateNode,l=t.type,i=t.memoizedProps;switch(s[ss]=t,s[fs]=i,l){case"dialog":st("cancel",s),st("close",s);break;case"iframe":case"object":case"embed":st("load",s);break;case"video":case"audio":for(l=0;l<Io.length;l++)st(Io[l],s);break;case"source":st("error",s);break;case"img":case"image":case"link":st("error",s),st("load",s);break;case"details":st("toggle",s);break;case"input":st("invalid",s),ei(s,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":st("invalid",s);break;case"textarea":st("invalid",s),Ql(s,i.value,i.defaultValue,i.children)}l=i.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||i.suppressHydrationWarning===!0||lp(s.textContent,l)?(i.popover!=null&&(st("beforetoggle",s),st("toggle",s)),i.onScroll!=null&&st("scroll",s),i.onScrollEnd!=null&&st("scrollend",s),i.onClick!=null&&(s.onclick=qs),s=!0):s=!1,s||il(t,!0)}function qt(t){for(xt=t.return;xt;)switch(xt.tag){case 5:case 31:case 13:Vs=!1;return;case 27:case 3:Vs=!0;return;default:xt=xt.return}}function Ba(t){if(t!==xt)return!1;if(!et)return qt(t),et=!0,!1;var s=t.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||Zx(t.type,t.memoizedProps)),l=!l),l&&mt&&il(t),qt(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(u(317));mt=up(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(u(317));mt=up(t)}else s===27?(s=mt,_r(t.type)?(t=Xx,Xx=null,mt=t):mt=s):mt=xt?ka(t.stateNode.nextSibling):null;return!0}function Al(){mt=xt=null,et=!1}function jo(){var t=rl;return t!==null&&(Js===null?Js=t:Js.push.apply(Js,t),rl=null),t}function Ni(t){rl===null?rl=[t]:rl.push(t)}var yi=ue(null),nl=null,Ua=null;function mr(t,s,l){ye(yi,s._currentValue),s._currentValue=l}function zl(t){t._currentValue=yi.current,ke(yi)}function z0(t,s,l){for(;t!==null;){var i=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,i!==null&&(i.childLanes|=s)):i!==null&&(i.childLanes&s)!==s&&(i.childLanes|=s),t===l)break;t=t.return}}function T0(t,s,l,i){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var x=d.dependencies;if(x!==null){var w=d.child;x=x.firstContext;e:for(;x!==null;){var O=x;x=d;for(var Y=0;Y<s.length;Y++)if(O.context===s[Y]){x.lanes|=l,O=x.alternate,O!==null&&(O.lanes|=l),z0(x.return,l,t),i||(w=null);break e}x=O.next}}else if(d.tag===18){if(w=d.return,w===null)throw Error(u(341));w.lanes|=l,x=w.alternate,x!==null&&(x.lanes|=l),z0(w,l,t),w=null}else w=d.child;if(w!==null)w.return=d;else for(w=d;w!==null;){if(w===t){w=null;break}if(d=w.sibling,d!==null){d.return=w.return,w=d;break}w=w.return}d=w}}function on(t,s,l,i){t=null;for(var d=s,x=!1;d!==null;){if(!x){if((d.flags&524288)!==0)x=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var w=d.alternate;if(w===null)throw Error(u(387));if(w=w.memoizedProps,w!==null){var O=d.type;bs(d.pendingProps.value,w.value)||(t!==null?t.push(O):t=[O])}}else if(d===Be.current){if(w=d.alternate,w===null)throw Error(u(387));w.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Yo):t=[Yo])}d=d.return}t!==null&&T0(s,t,l,i),s.flags|=262144}function Gd(t){for(t=t.firstContext;t!==null;){if(!bs(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function wi(t){nl=t,Ua=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ws(t){return Gm(nl,t)}function qd(t,s){return nl===null&&wi(t),Gm(t,s)}function Gm(t,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},Ua===null){if(t===null)throw Error(u(308));Ua=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else Ua=Ua.next=s;return l}var ib=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(l,i){t.push(i)}};this.abort=function(){s.aborted=!0,t.forEach(function(l){return l()})}},nb=n.unstable_scheduleCallback,ob=n.unstable_NormalPriority,ls={$$typeof:y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function L0(){return{controller:new ib,data:new Map,refCount:0}}function No(t){t.refCount--,t.refCount===0&&nb(ob,function(){t.controller.abort()})}var yo=null,M0=0,dn=0,cn=null;function db(t,s){if(yo===null){var l=yo=[];M0=0,dn=Ox(),cn={status:"pending",value:void 0,then:function(i){l.push(i)}}}return M0++,s.then(qm,qm),s}function qm(){if(--M0===0&&yo!==null){cn!==null&&(cn.status="fulfilled");var t=yo;yo=null,dn=0,cn=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function cb(t,s){var l=[],i={status:"pending",value:null,reason:null,then:function(d){l.push(d)}};return t.then(function(){i.status="fulfilled",i.value=s;for(var d=0;d<l.length;d++)(0,l[d])(s)},function(d){for(i.status="rejected",i.reason=d,d=0;d<l.length;d++)(0,l[d])(void 0)}),i}var Zm=B.S;B.S=function(t,s){Eh=Ds(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&db(t,s),Zm!==null&&Zm(t,s)};var ki=ue(null);function D0(){var t=ki.current;return t!==null?t:zt.pooledCache}function Zd(t,s){s===null?ye(ki,ki.current):ye(ki,s.pool)}function $m(){var t=D0();return t===null?null:{parent:ls._currentValue,pool:t}}var xn=Error(u(460)),R0=Error(u(474)),$d=Error(u(542)),Yd={then:function(){}};function Ym(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Vm(t,s,l){switch(l=t[l],l===void 0?t.push(s):l!==s&&(s.then(qs,qs),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Xm(t),t;default:if(typeof s.status=="string")s.then(qs,qs);else{if(t=zt,t!==null&&100<t.shellSuspendCounter)throw Error(u(482));t=s,t.status="pending",t.then(function(i){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=i}},function(i){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=i}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Xm(t),t}throw Si=s,xn}}function _i(t){try{var s=t._init;return s(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Si=l,xn):l}}var Si=null;function Km(){if(Si===null)throw Error(u(459));var t=Si;return Si=null,t}function Xm(t){if(t===xn||t===$d)throw Error(u(483))}var mn=null,wo=0;function Vd(t){var s=wo;return wo+=1,mn===null&&(mn=[]),Vm(mn,t,s)}function ko(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Kd(t,s){throw s.$$typeof===b?Error(u(525)):(t=Object.prototype.toString.call(s),Error(u(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Qm(t){function s(te,X){if(t){var ie=te.deletions;ie===null?(te.deletions=[X],te.flags|=16):ie.push(X)}}function l(te,X){if(!t)return null;for(;X!==null;)s(te,X),X=X.sibling;return null}function i(te){for(var X=new Map;te!==null;)te.key!==null?X.set(te.key,te):X.set(te.index,te),te=te.sibling;return X}function d(te,X){return te=ya(te,X),te.index=0,te.sibling=null,te}function x(te,X,ie){return te.index=ie,t?(ie=te.alternate,ie!==null?(ie=ie.index,ie<X?(te.flags|=67108866,X):ie):(te.flags|=67108866,X)):(te.flags|=1048576,X)}function w(te){return t&&te.alternate===null&&(te.flags|=67108866),te}function O(te,X,ie,be){return X===null||X.tag!==6?(X=rn(ie,te.mode,be),X.return=te,X):(X=d(X,ie),X.return=te,X)}function Y(te,X,ie,be){var Pe=ie.type;return Pe===M?pe(te,X,ie.props.children,be,ie.key):X!==null&&(X.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===ae&&_i(Pe)===X.type)?(X=d(X,ie.props),ko(X,ie),X.return=te,X):(X=ji(ie.type,ie.key,ie.props,null,te.mode,be),ko(X,ie),X.return=te,X)}function ne(te,X,ie,be){return X===null||X.tag!==4||X.stateNode.containerInfo!==ie.containerInfo||X.stateNode.implementation!==ie.implementation?(X=go(ie,te.mode,be),X.return=te,X):(X=d(X,ie.children||[]),X.return=te,X)}function pe(te,X,ie,be,Pe){return X===null||X.tag!==7?(X=El(ie,te.mode,be,Pe),X.return=te,X):(X=d(X,ie),X.return=te,X)}function ve(te,X,ie){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=rn(""+X,te.mode,ie),X.return=te,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case C:return ie=ji(X.type,X.key,X.props,null,te.mode,ie),ko(ie,X),ie.return=te,ie;case A:return X=go(X,te.mode,ie),X.return=te,X;case ae:return X=_i(X),ve(te,X,ie)}if(re(X)||ee(X))return X=El(X,te.mode,ie,null),X.return=te,X;if(typeof X.then=="function")return ve(te,Vd(X),ie);if(X.$$typeof===y)return ve(te,qd(te,X),ie);Kd(te,X)}return null}function ce(te,X,ie,be){var Pe=X!==null?X.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Pe!==null?null:O(te,X,""+ie,be);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case C:return ie.key===Pe?Y(te,X,ie,be):null;case A:return ie.key===Pe?ne(te,X,ie,be):null;case ae:return ie=_i(ie),ce(te,X,ie,be)}if(re(ie)||ee(ie))return Pe!==null?null:pe(te,X,ie,be,null);if(typeof ie.then=="function")return ce(te,X,Vd(ie),be);if(ie.$$typeof===y)return ce(te,X,qd(te,ie),be);Kd(te,ie)}return null}function me(te,X,ie,be,Pe){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return te=te.get(ie)||null,O(X,te,""+be,Pe);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case C:return te=te.get(be.key===null?ie:be.key)||null,Y(X,te,be,Pe);case A:return te=te.get(be.key===null?ie:be.key)||null,ne(X,te,be,Pe);case ae:return be=_i(be),me(te,X,ie,be,Pe)}if(re(be)||ee(be))return te=te.get(ie)||null,pe(X,te,be,Pe,null);if(typeof be.then=="function")return me(te,X,ie,Vd(be),Pe);if(be.$$typeof===y)return me(te,X,ie,qd(X,be),Pe);Kd(X,be)}return null}function Ee(te,X,ie,be){for(var Pe=null,ut=null,De=X,Xe=X=0,rt=null;De!==null&&Xe<ie.length;Xe++){De.index>Xe?(rt=De,De=null):rt=De.sibling;var ht=ce(te,De,ie[Xe],be);if(ht===null){De===null&&(De=rt);break}t&&De&&ht.alternate===null&&s(te,De),X=x(ht,X,Xe),ut===null?Pe=ht:ut.sibling=ht,ut=ht,De=rt}if(Xe===ie.length)return l(te,De),et&&Oe(te,Xe),Pe;if(De===null){for(;Xe<ie.length;Xe++)De=ve(te,ie[Xe],be),De!==null&&(X=x(De,X,Xe),ut===null?Pe=De:ut.sibling=De,ut=De);return et&&Oe(te,Xe),Pe}for(De=i(De);Xe<ie.length;Xe++)rt=me(De,te,Xe,ie[Xe],be),rt!==null&&(t&&rt.alternate!==null&&De.delete(rt.key===null?Xe:rt.key),X=x(rt,X,Xe),ut===null?Pe=rt:ut.sibling=rt,ut=rt);return t&&De.forEach(function(zr){return s(te,zr)}),et&&Oe(te,Xe),Pe}function Fe(te,X,ie,be){if(ie==null)throw Error(u(151));for(var Pe=null,ut=null,De=X,Xe=X=0,rt=null,ht=ie.next();De!==null&&!ht.done;Xe++,ht=ie.next()){De.index>Xe?(rt=De,De=null):rt=De.sibling;var zr=ce(te,De,ht.value,be);if(zr===null){De===null&&(De=rt);break}t&&De&&zr.alternate===null&&s(te,De),X=x(zr,X,Xe),ut===null?Pe=zr:ut.sibling=zr,ut=zr,De=rt}if(ht.done)return l(te,De),et&&Oe(te,Xe),Pe;if(De===null){for(;!ht.done;Xe++,ht=ie.next())ht=ve(te,ht.value,be),ht!==null&&(X=x(ht,X,Xe),ut===null?Pe=ht:ut.sibling=ht,ut=ht);return et&&Oe(te,Xe),Pe}for(De=i(De);!ht.done;Xe++,ht=ie.next())ht=me(De,te,Xe,ht.value,be),ht!==null&&(t&&ht.alternate!==null&&De.delete(ht.key===null?Xe:ht.key),X=x(ht,X,Xe),ut===null?Pe=ht:ut.sibling=ht,ut=ht);return t&&De.forEach(function(Ng){return s(te,Ng)}),et&&Oe(te,Xe),Pe}function Et(te,X,ie,be){if(typeof ie=="object"&&ie!==null&&ie.type===M&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case C:e:{for(var Pe=ie.key;X!==null;){if(X.key===Pe){if(Pe=ie.type,Pe===M){if(X.tag===7){l(te,X.sibling),be=d(X,ie.props.children),be.return=te,te=be;break e}}else if(X.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===ae&&_i(Pe)===X.type){l(te,X.sibling),be=d(X,ie.props),ko(be,ie),be.return=te,te=be;break e}l(te,X);break}else s(te,X);X=X.sibling}ie.type===M?(be=El(ie.props.children,te.mode,be,ie.key),be.return=te,te=be):(be=ji(ie.type,ie.key,ie.props,null,te.mode,be),ko(be,ie),be.return=te,te=be)}return w(te);case A:e:{for(Pe=ie.key;X!==null;){if(X.key===Pe)if(X.tag===4&&X.stateNode.containerInfo===ie.containerInfo&&X.stateNode.implementation===ie.implementation){l(te,X.sibling),be=d(X,ie.children||[]),be.return=te,te=be;break e}else{l(te,X);break}else s(te,X);X=X.sibling}be=go(ie,te.mode,be),be.return=te,te=be}return w(te);case ae:return ie=_i(ie),Et(te,X,ie,be)}if(re(ie))return Ee(te,X,ie,be);if(ee(ie)){if(Pe=ee(ie),typeof Pe!="function")throw Error(u(150));return ie=Pe.call(ie),Fe(te,X,ie,be)}if(typeof ie.then=="function")return Et(te,X,Vd(ie),be);if(ie.$$typeof===y)return Et(te,X,qd(te,ie),be);Kd(te,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,X!==null&&X.tag===6?(l(te,X.sibling),be=d(X,ie),be.return=te,te=be):(l(te,X),be=rn(ie,te.mode,be),be.return=te,te=be),w(te)):l(te,X)}return function(te,X,ie,be){try{wo=0;var Pe=Et(te,X,ie,be);return mn=null,Pe}catch(De){if(De===xn||De===$d)throw De;var ut=Ts(29,De,null,te.mode);return ut.lanes=be,ut.return=te,ut}}}var Ci=Qm(!0),Jm=Qm(!1),ur=!1;function O0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function P0(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function hr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function pr(t,s,l){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,(bt&2)!==0){var d=i.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),i.pending=s,s=vi(t),xr(t,null,l),s}return ll(t,i,s,l),vi(t)}function _o(t,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var i=s.lanes;i&=t.pendingLanes,l|=i,s.lanes=l,fd(t,l)}}function B0(t,s){var l=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,l===i)){var d=null,x=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};x===null?d=x=w:x=x.next=w,l=l.next}while(l!==null);x===null?d=x=s:x=x.next=s}else d=x=s;l={baseState:i.baseState,firstBaseUpdate:d,lastBaseUpdate:x,shared:i.shared,callbacks:i.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=s:t.next=s,l.lastBaseUpdate=s}var U0=!1;function So(){if(U0){var t=cn;if(t!==null)throw t}}function Co(t,s,l,i){U0=!1;var d=t.updateQueue;ur=!1;var x=d.firstBaseUpdate,w=d.lastBaseUpdate,O=d.shared.pending;if(O!==null){d.shared.pending=null;var Y=O,ne=Y.next;Y.next=null,w===null?x=ne:w.next=ne,w=Y;var pe=t.alternate;pe!==null&&(pe=pe.updateQueue,O=pe.lastBaseUpdate,O!==w&&(O===null?pe.firstBaseUpdate=ne:O.next=ne,pe.lastBaseUpdate=Y))}if(x!==null){var ve=d.baseState;w=0,pe=ne=Y=null,O=x;do{var ce=O.lane&-536870913,me=ce!==O.lane;if(me?(lt&ce)===ce:(i&ce)===ce){ce!==0&&ce===dn&&(U0=!0),pe!==null&&(pe=pe.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Ee=t,Fe=O;ce=s;var Et=l;switch(Fe.tag){case 1:if(Ee=Fe.payload,typeof Ee=="function"){ve=Ee.call(Et,ve,ce);break e}ve=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Fe.payload,ce=typeof Ee=="function"?Ee.call(Et,ve,ce):Ee,ce==null)break e;ve=h({},ve,ce);break e;case 2:ur=!0}}ce=O.callback,ce!==null&&(t.flags|=64,me&&(t.flags|=8192),me=d.callbacks,me===null?d.callbacks=[ce]:me.push(ce))}else me={lane:ce,tag:O.tag,payload:O.payload,callback:O.callback,next:null},pe===null?(ne=pe=me,Y=ve):pe=pe.next=me,w|=ce;if(O=O.next,O===null){if(O=d.shared.pending,O===null)break;me=O,O=me.next,me.next=null,d.lastBaseUpdate=me,d.shared.pending=null}}while(!0);pe===null&&(Y=ve),d.baseState=Y,d.firstBaseUpdate=ne,d.lastBaseUpdate=pe,x===null&&(d.shared.lanes=0),jr|=w,t.lanes=w,t.memoizedState=ve}}function Wm(t,s){if(typeof t!="function")throw Error(u(191,t));t.call(s)}function eu(t,s){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)Wm(l[t],s)}var un=ue(null),Xd=ue(0);function tu(t,s){t=Ul,ye(Xd,t),ye(un,s),Ul=t|s.baseLanes}function F0(){ye(Xd,Ul),ye(un,un.current)}function H0(){Ul=Xd.current,ke(un),ke(Xd)}var na=ue(null),wa=null;function fr(t){var s=t.alternate;ye(Xt,Xt.current&1),ye(na,t),wa===null&&(s===null||un.current!==null||s.memoizedState!==null)&&(wa=t)}function I0(t){ye(Xt,Xt.current),ye(na,t),wa===null&&(wa=t)}function su(t){t.tag===22?(ye(Xt,Xt.current),ye(na,t),wa===null&&(wa=t)):br()}function br(){ye(Xt,Xt.current),ye(na,na.current)}function oa(t){ke(na),wa===t&&(wa=null),ke(Xt)}var Xt=ue(0);function Qd(t){for(var s=t;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Vx(l)||Kx(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Tl=0,$e=null,St=null,rs=null,Jd=!1,hn=!1,Ei=!1,Wd=0,Eo=0,pn=null,xb=0;function Vt(){throw Error(u(321))}function G0(t,s){if(s===null)return!1;for(var l=0;l<s.length&&l<t.length;l++)if(!bs(t[l],s[l]))return!1;return!0}function q0(t,s,l,i,d,x){return Tl=x,$e=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,B.H=t===null||t.memoizedState===null?Uu:rx,Ei=!1,x=l(i,d),Ei=!1,hn&&(x=lu(s,l,i,d)),au(t),x}function au(t){B.H=To;var s=St!==null&&St.next!==null;if(Tl=0,rs=St=$e=null,Jd=!1,Eo=0,pn=null,s)throw Error(u(300));t===null||is||(t=t.dependencies,t!==null&&Gd(t)&&(is=!0))}function lu(t,s,l,i){$e=t;var d=0;do{if(hn&&(pn=null),Eo=0,hn=!1,25<=d)throw Error(u(301));if(d+=1,rs=St=null,t.updateQueue!=null){var x=t.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}B.H=Fu,x=s(l,i)}while(hn);return x}function mb(){var t=B.H,s=t.useState()[0];return s=typeof s.then=="function"?Ao(s):s,t=t.useState()[0],(St!==null?St.memoizedState:null)!==t&&($e.flags|=1024),s}function Z0(){var t=Wd!==0;return Wd=0,t}function $0(t,s,l){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~l}function Y0(t){if(Jd){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Jd=!1}Tl=0,rs=St=$e=null,hn=!1,Eo=Wd=0,pn=null}function Bs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rs===null?$e.memoizedState=rs=t:rs=rs.next=t,rs}function Qt(){if(St===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var s=rs===null?$e.memoizedState:rs.next;if(s!==null)rs=s,St=t;else{if(t===null)throw $e.alternate===null?Error(u(467)):Error(u(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},rs===null?$e.memoizedState=rs=t:rs=rs.next=t}return rs}function ec(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ao(t){var s=Eo;return Eo+=1,pn===null&&(pn=[]),t=Vm(pn,t,s),s=$e,(rs===null?s.memoizedState:rs.next)===null&&(s=s.alternate,B.H=s===null||s.memoizedState===null?Uu:rx),t}function tc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ao(t);if(t.$$typeof===y)return ws(t)}throw Error(u(438,String(t)))}function V0(t){var s=null,l=$e.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var i=$e.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(s={data:i.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=ec(),$e.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(t),i=0;i<t;i++)l[i]=xe;return s.index++,l}function Ll(t,s){return typeof s=="function"?s(t):s}function sc(t){var s=Qt();return K0(s,St,t)}function K0(t,s,l){var i=t.queue;if(i===null)throw Error(u(311));i.lastRenderedReducer=l;var d=t.baseQueue,x=i.pending;if(x!==null){if(d!==null){var w=d.next;d.next=x.next,x.next=w}s.baseQueue=d=x,i.pending=null}if(x=t.baseState,d===null)t.memoizedState=x;else{s=d.next;var O=w=null,Y=null,ne=s,pe=!1;do{var ve=ne.lane&-536870913;if(ve!==ne.lane?(lt&ve)===ve:(Tl&ve)===ve){var ce=ne.revertLane;if(ce===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),ve===dn&&(pe=!0);else if((Tl&ce)===ce){ne=ne.next,ce===dn&&(pe=!0);continue}else ve={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},Y===null?(O=Y=ve,w=x):Y=Y.next=ve,$e.lanes|=ce,jr|=ce;ve=ne.action,Ei&&l(x,ve),x=ne.hasEagerState?ne.eagerState:l(x,ve)}else ce={lane:ve,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},Y===null?(O=Y=ce,w=x):Y=Y.next=ce,$e.lanes|=ve,jr|=ve;ne=ne.next}while(ne!==null&&ne!==s);if(Y===null?w=x:Y.next=O,!bs(x,t.memoizedState)&&(is=!0,pe&&(l=cn,l!==null)))throw l;t.memoizedState=x,t.baseState=w,t.baseQueue=Y,i.lastRenderedState=x}return d===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function X0(t){var s=Qt(),l=s.queue;if(l===null)throw Error(u(311));l.lastRenderedReducer=t;var i=l.dispatch,d=l.pending,x=s.memoizedState;if(d!==null){l.pending=null;var w=d=d.next;do x=t(x,w.action),w=w.next;while(w!==d);bs(x,s.memoizedState)||(is=!0),s.memoizedState=x,s.baseQueue===null&&(s.baseState=x),l.lastRenderedState=x}return[x,i]}function ru(t,s,l){var i=$e,d=Qt(),x=et;if(x){if(l===void 0)throw Error(u(407));l=l()}else l=s();var w=!bs((St||d).memoizedState,l);if(w&&(d.memoizedState=l,is=!0),d=d.queue,W0(ou.bind(null,i,d,t),[t]),d.getSnapshot!==s||w||rs!==null&&rs.memoizedState.tag&1){if(i.flags|=2048,fn(9,{destroy:void 0},nu.bind(null,i,d,l,s),null),zt===null)throw Error(u(349));x||(Tl&127)!==0||iu(i,s,l)}return l}function iu(t,s,l){t.flags|=16384,t={getSnapshot:s,value:l},s=$e.updateQueue,s===null?(s=ec(),$e.updateQueue=s,s.stores=[t]):(l=s.stores,l===null?s.stores=[t]:l.push(t))}function nu(t,s,l,i){s.value=l,s.getSnapshot=i,du(s)&&cu(t)}function ou(t,s,l){return l(function(){du(s)&&cu(t)})}function du(t){var s=t.getSnapshot;t=t.value;try{var l=s();return!bs(t,l)}catch{return!0}}function cu(t){var s=Na(t,2);s!==null&&Ws(s,t,2)}function Q0(t){var s=Bs();if(typeof t=="function"){var l=t;if(t=l(),Ei){Ta(!0);try{l()}finally{Ta(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ll,lastRenderedState:t},s}function xu(t,s,l,i){return t.baseState=l,K0(t,St,typeof i=="function"?i:Ll)}function ub(t,s,l,i,d){if(rc(t))throw Error(u(485));if(t=s.action,t!==null){var x={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){x.listeners.push(w)}};B.T!==null?l(!0):x.isTransition=!1,i(x),l=s.pending,l===null?(x.next=s.pending=x,mu(s,x)):(x.next=l.next,s.pending=l.next=x)}}function mu(t,s){var l=s.action,i=s.payload,d=t.state;if(s.isTransition){var x=B.T,w={};B.T=w;try{var O=l(d,i),Y=B.S;Y!==null&&Y(w,O),uu(t,s,O)}catch(ne){J0(t,s,ne)}finally{x!==null&&w.types!==null&&(x.types=w.types),B.T=x}}else try{x=l(d,i),uu(t,s,x)}catch(ne){J0(t,s,ne)}}function uu(t,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(i){hu(t,s,i)},function(i){return J0(t,s,i)}):hu(t,s,l)}function hu(t,s,l){s.status="fulfilled",s.value=l,pu(s),t.state=l,s=t.pending,s!==null&&(l=s.next,l===s?t.pending=null:(l=l.next,s.next=l,mu(t,l)))}function J0(t,s,l){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do s.status="rejected",s.reason=l,pu(s),s=s.next;while(s!==i)}t.action=null}function pu(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function fu(t,s){return s}function bu(t,s){if(et){var l=zt.formState;if(l!==null){e:{var i=$e;if(et){if(mt){t:{for(var d=mt,x=Vs;d.nodeType!==8;){if(!x){d=null;break t}if(d=ka(d.nextSibling),d===null){d=null;break t}}x=d.data,d=x==="F!"||x==="F"?d:null}if(d){mt=ka(d.nextSibling),i=d.data==="F!";break e}}il(i)}i=!1}i&&(s=l[0])}}return l=Bs(),l.memoizedState=l.baseState=s,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fu,lastRenderedState:s},l.queue=i,l=Ou.bind(null,$e,i),i.dispatch=l,i=Q0(!1),x=lx.bind(null,$e,!1,i.queue),i=Bs(),d={state:s,dispatch:null,action:t,pending:null},i.queue=d,l=ub.bind(null,$e,d,x,l),d.dispatch=l,i.memoizedState=t,[s,l,!1]}function gu(t){var s=Qt();return vu(s,St,t)}function vu(t,s,l){if(s=K0(t,s,fu)[0],t=sc(Ll)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var i=Ao(s)}catch(w){throw w===xn?$d:w}else i=s;s=Qt();var d=s.queue,x=d.dispatch;return l!==s.memoizedState&&($e.flags|=2048,fn(9,{destroy:void 0},hb.bind(null,d,l),null)),[i,x,t]}function hb(t,s){t.action=s}function ju(t){var s=Qt(),l=St;if(l!==null)return vu(s,l,t);Qt(),s=s.memoizedState,l=Qt();var i=l.queue.dispatch;return l.memoizedState=t,[s,i,!1]}function fn(t,s,l,i){return t={tag:t,create:l,deps:i,inst:s,next:null},s=$e.updateQueue,s===null&&(s=ec(),$e.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=t.next=t:(i=l.next,l.next=t,t.next=i,s.lastEffect=t),t}function Nu(){return Qt().memoizedState}function ac(t,s,l,i){var d=Bs();$e.flags|=t,d.memoizedState=fn(1|s,{destroy:void 0},l,i===void 0?null:i)}function lc(t,s,l,i){var d=Qt();i=i===void 0?null:i;var x=d.memoizedState.inst;St!==null&&i!==null&&G0(i,St.memoizedState.deps)?d.memoizedState=fn(s,x,l,i):($e.flags|=t,d.memoizedState=fn(1|s,x,l,i))}function yu(t,s){ac(8390656,8,t,s)}function W0(t,s){lc(2048,8,t,s)}function pb(t){$e.flags|=4;var s=$e.updateQueue;if(s===null)s=ec(),$e.updateQueue=s,s.events=[t];else{var l=s.events;l===null?s.events=[t]:l.push(t)}}function wu(t){var s=Qt().memoizedState;return pb({ref:s,nextImpl:t}),function(){if((bt&2)!==0)throw Error(u(440));return s.impl.apply(void 0,arguments)}}function ku(t,s){return lc(4,2,t,s)}function _u(t,s){return lc(4,4,t,s)}function Su(t,s){if(typeof s=="function"){t=t();var l=s(t);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Cu(t,s,l){l=l!=null?l.concat([t]):null,lc(4,4,Su.bind(null,s,t),l)}function ex(){}function Eu(t,s){var l=Qt();s=s===void 0?null:s;var i=l.memoizedState;return s!==null&&G0(s,i[1])?i[0]:(l.memoizedState=[t,s],t)}function Au(t,s){var l=Qt();s=s===void 0?null:s;var i=l.memoizedState;if(s!==null&&G0(s,i[1]))return i[0];if(i=t(),Ei){Ta(!0);try{t()}finally{Ta(!1)}}return l.memoizedState=[i,s],i}function tx(t,s,l){return l===void 0||(Tl&1073741824)!==0&&(lt&261930)===0?t.memoizedState=s:(t.memoizedState=l,t=zh(),$e.lanes|=t,jr|=t,l)}function zu(t,s,l,i){return bs(l,s)?l:un.current!==null?(t=tx(t,l,i),bs(t,s)||(is=!0),t):(Tl&42)===0||(Tl&1073741824)!==0&&(lt&261930)===0?(is=!0,t.memoizedState=l):(t=zh(),$e.lanes|=t,jr|=t,s)}function Tu(t,s,l,i,d){var x=le.p;le.p=x!==0&&8>x?x:8;var w=B.T,O={};B.T=O,lx(t,!1,s,l);try{var Y=d(),ne=B.S;if(ne!==null&&ne(O,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var pe=cb(Y,i);zo(t,s,pe,xa(t))}else zo(t,s,i,xa(t))}catch(ve){zo(t,s,{then:function(){},status:"rejected",reason:ve},xa())}finally{le.p=x,w!==null&&O.types!==null&&(w.types=O.types),B.T=w}}function fb(){}function sx(t,s,l,i){if(t.tag!==5)throw Error(u(476));var d=Lu(t).queue;Tu(t,d,s,G,l===null?fb:function(){return Mu(t),l(i)})}function Lu(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ll,lastRenderedState:G},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ll,lastRenderedState:l},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Mu(t){var s=Lu(t);s.next===null&&(s=t.alternate.memoizedState),zo(t,s.next.queue,{},xa())}function ax(){return ws(Yo)}function Du(){return Qt().memoizedState}function Ru(){return Qt().memoizedState}function bb(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var l=xa();t=hr(l);var i=pr(s,t,l);i!==null&&(Ws(i,s,l),_o(i,s,l)),s={cache:L0()},t.payload=s;return}s=s.return}}function gb(t,s,l){var i=xa();l={lane:i,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},rc(t)?Pu(s,l):(l=po(t,s,l,i),l!==null&&(Ws(l,t,i),Bu(l,s,i)))}function Ou(t,s,l){var i=xa();zo(t,s,l,i)}function zo(t,s,l,i){var d={lane:i,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(rc(t))Pu(s,d);else{var x=t.alternate;if(t.lanes===0&&(x===null||x.lanes===0)&&(x=s.lastRenderedReducer,x!==null))try{var w=s.lastRenderedState,O=x(w,l);if(d.hasEagerState=!0,d.eagerState=O,bs(O,w))return ll(t,s,d,0),zt===null&&gi(),!1}catch{}if(l=po(t,s,d,i),l!==null)return Ws(l,t,i),Bu(l,s,i),!0}return!1}function lx(t,s,l,i){if(i={lane:2,revertLane:Ox(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},rc(t)){if(s)throw Error(u(479))}else s=po(t,l,i,2),s!==null&&Ws(s,t,2)}function rc(t){var s=t.alternate;return t===$e||s!==null&&s===$e}function Pu(t,s){hn=Jd=!0;var l=t.pending;l===null?s.next=s:(s.next=l.next,l.next=s),t.pending=s}function Bu(t,s,l){if((l&4194048)!==0){var i=s.lanes;i&=t.pendingLanes,l|=i,s.lanes=l,fd(t,l)}}var To={readContext:ws,use:tc,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};To.useEffectEvent=Vt;var Uu={readContext:ws,use:tc,useCallback:function(t,s){return Bs().memoizedState=[t,s===void 0?null:s],t},useContext:ws,useEffect:yu,useImperativeHandle:function(t,s,l){l=l!=null?l.concat([t]):null,ac(4194308,4,Su.bind(null,s,t),l)},useLayoutEffect:function(t,s){return ac(4194308,4,t,s)},useInsertionEffect:function(t,s){ac(4,2,t,s)},useMemo:function(t,s){var l=Bs();s=s===void 0?null:s;var i=t();if(Ei){Ta(!0);try{t()}finally{Ta(!1)}}return l.memoizedState=[i,s],i},useReducer:function(t,s,l){var i=Bs();if(l!==void 0){var d=l(s);if(Ei){Ta(!0);try{l(s)}finally{Ta(!1)}}}else d=s;return i.memoizedState=i.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},i.queue=t,t=t.dispatch=gb.bind(null,$e,t),[i.memoizedState,t]},useRef:function(t){var s=Bs();return t={current:t},s.memoizedState=t},useState:function(t){t=Q0(t);var s=t.queue,l=Ou.bind(null,$e,s);return s.dispatch=l,[t.memoizedState,l]},useDebugValue:ex,useDeferredValue:function(t,s){var l=Bs();return tx(l,t,s)},useTransition:function(){var t=Q0(!1);return t=Tu.bind(null,$e,t.queue,!0,!1),Bs().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,l){var i=$e,d=Bs();if(et){if(l===void 0)throw Error(u(407));l=l()}else{if(l=s(),zt===null)throw Error(u(349));(lt&127)!==0||iu(i,s,l)}d.memoizedState=l;var x={value:l,getSnapshot:s};return d.queue=x,yu(ou.bind(null,i,x,t),[t]),i.flags|=2048,fn(9,{destroy:void 0},nu.bind(null,i,x,l,s),null),l},useId:function(){var t=Bs(),s=zt.identifierPrefix;if(et){var l=_e,i=ge;l=(i&~(1<<32-Rs(i)-1)).toString(32)+l,s="_"+s+"R_"+l,l=Wd++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=xb++,s="_"+s+"r_"+l.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:ax,useFormState:bu,useActionState:bu,useOptimistic:function(t){var s=Bs();s.memoizedState=s.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=lx.bind(null,$e,!0,l),l.dispatch=s,[t,s]},useMemoCache:V0,useCacheRefresh:function(){return Bs().memoizedState=bb.bind(null,$e)},useEffectEvent:function(t){var s=Bs(),l={impl:t};return s.memoizedState=l,function(){if((bt&2)!==0)throw Error(u(440));return l.impl.apply(void 0,arguments)}}},rx={readContext:ws,use:tc,useCallback:Eu,useContext:ws,useEffect:W0,useImperativeHandle:Cu,useInsertionEffect:ku,useLayoutEffect:_u,useMemo:Au,useReducer:sc,useRef:Nu,useState:function(){return sc(Ll)},useDebugValue:ex,useDeferredValue:function(t,s){var l=Qt();return zu(l,St.memoizedState,t,s)},useTransition:function(){var t=sc(Ll)[0],s=Qt().memoizedState;return[typeof t=="boolean"?t:Ao(t),s]},useSyncExternalStore:ru,useId:Du,useHostTransitionStatus:ax,useFormState:gu,useActionState:gu,useOptimistic:function(t,s){var l=Qt();return xu(l,St,t,s)},useMemoCache:V0,useCacheRefresh:Ru};rx.useEffectEvent=wu;var Fu={readContext:ws,use:tc,useCallback:Eu,useContext:ws,useEffect:W0,useImperativeHandle:Cu,useInsertionEffect:ku,useLayoutEffect:_u,useMemo:Au,useReducer:X0,useRef:Nu,useState:function(){return X0(Ll)},useDebugValue:ex,useDeferredValue:function(t,s){var l=Qt();return St===null?tx(l,t,s):zu(l,St.memoizedState,t,s)},useTransition:function(){var t=X0(Ll)[0],s=Qt().memoizedState;return[typeof t=="boolean"?t:Ao(t),s]},useSyncExternalStore:ru,useId:Du,useHostTransitionStatus:ax,useFormState:ju,useActionState:ju,useOptimistic:function(t,s){var l=Qt();return St!==null?xu(l,St,t,s):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:V0,useCacheRefresh:Ru};Fu.useEffectEvent=wu;function ix(t,s,l,i){s=t.memoizedState,l=l(i,s),l=l==null?s:h({},s,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var nx={enqueueSetState:function(t,s,l){t=t._reactInternals;var i=xa(),d=hr(i);d.payload=s,l!=null&&(d.callback=l),s=pr(t,d,i),s!==null&&(Ws(s,t,i),_o(s,t,i))},enqueueReplaceState:function(t,s,l){t=t._reactInternals;var i=xa(),d=hr(i);d.tag=1,d.payload=s,l!=null&&(d.callback=l),s=pr(t,d,i),s!==null&&(Ws(s,t,i),_o(s,t,i))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var l=xa(),i=hr(l);i.tag=2,s!=null&&(i.callback=s),s=pr(t,i,l),s!==null&&(Ws(s,t,l),_o(s,t,l))}};function Hu(t,s,l,i,d,x,w){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,x,w):s.prototype&&s.prototype.isPureReactComponent?!nr(l,i)||!nr(d,x):!0}function Iu(t,s,l,i){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,i),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,i),s.state!==t&&nx.enqueueReplaceState(s,s.state,null)}function Ai(t,s){var l=s;if("ref"in s){l={};for(var i in s)i!=="ref"&&(l[i]=s[i])}if(t=t.defaultProps){l===s&&(l=h({},l));for(var d in t)l[d]===void 0&&(l[d]=t[d])}return l}function Gu(t){bi(t)}function qu(t){console.error(t)}function Zu(t){bi(t)}function ic(t,s){try{var l=t.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(i){setTimeout(function(){throw i})}}function $u(t,s,l){try{var i=t.onCaughtError;i(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function ox(t,s,l){return l=hr(l),l.tag=3,l.payload={element:null},l.callback=function(){ic(t,s)},l}function Yu(t){return t=hr(t),t.tag=3,t}function Vu(t,s,l,i){var d=l.type.getDerivedStateFromError;if(typeof d=="function"){var x=i.value;t.payload=function(){return d(x)},t.callback=function(){$u(s,l,i)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(t.callback=function(){$u(s,l,i),typeof d!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var O=i.stack;this.componentDidCatch(i.value,{componentStack:O!==null?O:""})})}function vb(t,s,l,i,d){if(l.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(s=l.alternate,s!==null&&on(s,l,d,!0),l=na.current,l!==null){switch(l.tag){case 31:case 13:return wa===null?gc():l.alternate===null&&Kt===0&&(Kt=3),l.flags&=-257,l.flags|=65536,l.lanes=d,i===Yd?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([i]):s.add(i),Mx(t,i,d)),!1;case 22:return l.flags|=65536,i===Yd?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([i])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([i]):l.add(i)),Mx(t,i,d)),!1}throw Error(u(435,l.tag))}return Mx(t,i,d),gc(),!1}if(et)return s=na.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,i!==nn&&(t=Error(u(422),{cause:i}),Ni(r(t,l)))):(i!==nn&&(s=Error(u(423),{cause:i}),Ni(r(s,l))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,i=r(i,l),d=ox(t.stateNode,i,d),B0(t,d),Kt!==4&&(Kt=2)),!1;var x=Error(u(520),{cause:i});if(x=r(x,l),Uo===null?Uo=[x]:Uo.push(x),Kt!==4&&(Kt=2),s===null)return!0;i=r(i,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,t=d&-d,l.lanes|=t,t=ox(l.stateNode,i,t),B0(l,t),!1;case 1:if(s=l.type,x=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Nr===null||!Nr.has(x))))return l.flags|=65536,d&=-d,l.lanes|=d,d=Yu(d),Vu(d,t,l,i),B0(l,d),!1}l=l.return}while(l!==null);return!1}var dx=Error(u(461)),is=!1;function ks(t,s,l,i){s.child=t===null?Jm(s,null,l,i):Ci(s,t.child,l,i)}function Ku(t,s,l,i,d){l=l.render;var x=s.ref;if("ref"in i){var w={};for(var O in i)O!=="ref"&&(w[O]=i[O])}else w=i;return wi(s),i=q0(t,s,l,w,x,d),O=Z0(),t!==null&&!is?($0(t,s,d),Ml(t,s,d)):(et&&O&&xs(s),s.flags|=1,ks(t,s,i,d),s.child)}function Xu(t,s,l,i,d){if(t===null){var x=l.type;return typeof x=="function"&&!ln(x)&&x.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=x,Qu(t,s,x,i,d)):(t=ji(l.type,null,i,s,s.mode,d),t.ref=s.ref,t.return=s,s.child=t)}if(x=t.child,!bx(t,d)){var w=x.memoizedProps;if(l=l.compare,l=l!==null?l:nr,l(w,i)&&t.ref===s.ref)return Ml(t,s,d)}return s.flags|=1,t=ya(x,i),t.ref=s.ref,t.return=s,s.child=t}function Qu(t,s,l,i,d){if(t!==null){var x=t.memoizedProps;if(nr(x,i)&&t.ref===s.ref)if(is=!1,s.pendingProps=i=x,bx(t,d))(t.flags&131072)!==0&&(is=!0);else return s.lanes=t.lanes,Ml(t,s,d)}return cx(t,s,l,i,d)}function Ju(t,s,l,i){var d=i.children,x=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((s.flags&128)!==0){if(x=x!==null?x.baseLanes|l:l,t!==null){for(i=s.child=t.child,d=0;i!==null;)d=d|i.lanes|i.childLanes,i=i.sibling;i=d&~x}else i=0,s.child=null;return Wu(t,s,x,l,i)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Zd(s,x!==null?x.cachePool:null),x!==null?tu(s,x):F0(),su(s);else return i=s.lanes=536870912,Wu(t,s,x!==null?x.baseLanes|l:l,l,i)}else x!==null?(Zd(s,x.cachePool),tu(s,x),br(),s.memoizedState=null):(t!==null&&Zd(s,null),F0(),br());return ks(t,s,d,l),s.child}function Lo(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Wu(t,s,l,i,d){var x=D0();return x=x===null?null:{parent:ls._currentValue,pool:x},s.memoizedState={baseLanes:l,cachePool:x},t!==null&&Zd(s,null),F0(),su(s),t!==null&&on(t,s,i,!0),s.childLanes=d,null}function nc(t,s){return s=dc({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function eh(t,s,l){return Ci(s,t.child,null,l),t=nc(s,s.pendingProps),t.flags|=2,oa(s),s.memoizedState=null,t}function jb(t,s,l){var i=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(et){if(i.mode==="hidden")return t=nc(s,i),s.lanes=536870912,Lo(null,t);if(I0(s),(t=mt)?(t=mp(t,Vs),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:de!==null?{id:ge,overflow:_e}:null,retryLane:536870912,hydrationErrors:null},l=bo(t),l.return=s,s.child=l,xt=s,mt=null)):t=null,t===null)throw il(s);return s.lanes=536870912,null}return nc(s,i)}var x=t.memoizedState;if(x!==null){var w=x.dehydrated;if(I0(s),d)if(s.flags&256)s.flags&=-257,s=eh(t,s,l);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(u(558));else if(is||on(t,s,l,!1),d=(l&t.childLanes)!==0,is||d){if(i=zt,i!==null&&(w=bd(i,l),w!==0&&w!==x.retryLane))throw x.retryLane=w,Na(t,w),Ws(i,t,w),dx;gc(),s=eh(t,s,l)}else t=x.treeContext,mt=ka(w.nextSibling),xt=s,et=!0,rl=null,Vs=!1,t!==null&&Ps(s,t),s=nc(s,i),s.flags|=4096;return s}return t=ya(t.child,{mode:i.mode,children:i.children}),t.ref=s.ref,s.child=t,t.return=s,t}function oc(t,s){var l=s.ref;if(l===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(u(284));(t===null||t.ref!==l)&&(s.flags|=4194816)}}function cx(t,s,l,i,d){return wi(s),l=q0(t,s,l,i,void 0,d),i=Z0(),t!==null&&!is?($0(t,s,d),Ml(t,s,d)):(et&&i&&xs(s),s.flags|=1,ks(t,s,l,d),s.child)}function th(t,s,l,i,d,x){return wi(s),s.updateQueue=null,l=lu(s,i,l,d),au(t),i=Z0(),t!==null&&!is?($0(t,s,x),Ml(t,s,x)):(et&&i&&xs(s),s.flags|=1,ks(t,s,l,x),s.child)}function sh(t,s,l,i,d){if(wi(s),s.stateNode===null){var x=Cl,w=l.contextType;typeof w=="object"&&w!==null&&(x=ws(w)),x=new l(i,x),s.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=nx,s.stateNode=x,x._reactInternals=s,x=s.stateNode,x.props=i,x.state=s.memoizedState,x.refs={},O0(s),w=l.contextType,x.context=typeof w=="object"&&w!==null?ws(w):Cl,x.state=s.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(ix(s,l,w,i),x.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(w=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),w!==x.state&&nx.enqueueReplaceState(x,x.state,null),Co(s,i,x,d),So(),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308),i=!0}else if(t===null){x=s.stateNode;var O=s.memoizedProps,Y=Ai(l,O);x.props=Y;var ne=x.context,pe=l.contextType;w=Cl,typeof pe=="object"&&pe!==null&&(w=ws(pe));var ve=l.getDerivedStateFromProps;pe=typeof ve=="function"||typeof x.getSnapshotBeforeUpdate=="function",O=s.pendingProps!==O,pe||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(O||ne!==w)&&Iu(s,x,i,w),ur=!1;var ce=s.memoizedState;x.state=ce,Co(s,i,x,d),So(),ne=s.memoizedState,O||ce!==ne||ur?(typeof ve=="function"&&(ix(s,l,ve,i),ne=s.memoizedState),(Y=ur||Hu(s,l,Y,i,ce,ne,w))?(pe||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=i,s.memoizedState=ne),x.props=i,x.state=ne,x.context=w,i=Y):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),i=!1)}else{x=s.stateNode,P0(t,s),w=s.memoizedProps,pe=Ai(l,w),x.props=pe,ve=s.pendingProps,ce=x.context,ne=l.contextType,Y=Cl,typeof ne=="object"&&ne!==null&&(Y=ws(ne)),O=l.getDerivedStateFromProps,(ne=typeof O=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(w!==ve||ce!==Y)&&Iu(s,x,i,Y),ur=!1,ce=s.memoizedState,x.state=ce,Co(s,i,x,d),So();var me=s.memoizedState;w!==ve||ce!==me||ur||t!==null&&t.dependencies!==null&&Gd(t.dependencies)?(typeof O=="function"&&(ix(s,l,O,i),me=s.memoizedState),(pe=ur||Hu(s,l,pe,i,ce,me,Y)||t!==null&&t.dependencies!==null&&Gd(t.dependencies))?(ne||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(i,me,Y),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(i,me,Y)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||w===t.memoizedProps&&ce===t.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&ce===t.memoizedState||(s.flags|=1024),s.memoizedProps=i,s.memoizedState=me),x.props=i,x.state=me,x.context=Y,i=pe):(typeof x.componentDidUpdate!="function"||w===t.memoizedProps&&ce===t.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&ce===t.memoizedState||(s.flags|=1024),i=!1)}return x=i,oc(t,s),i=(s.flags&128)!==0,x||i?(x=s.stateNode,l=i&&typeof l.getDerivedStateFromError!="function"?null:x.render(),s.flags|=1,t!==null&&i?(s.child=Ci(s,t.child,null,d),s.child=Ci(s,null,l,d)):ks(t,s,l,d),s.memoizedState=x.state,t=s.child):t=Ml(t,s,d),t}function ah(t,s,l,i){return Al(),s.flags|=256,ks(t,s,l,i),s.child}var xx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mx(t){return{baseLanes:t,cachePool:$m()}}function ux(t,s,l){return t=t!==null?t.childLanes&~l:0,s&&(t|=ca),t}function lh(t,s,l){var i=s.pendingProps,d=!1,x=(s.flags&128)!==0,w;if((w=x)||(w=t!==null&&t.memoizedState===null?!1:(Xt.current&2)!==0),w&&(d=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,t===null){if(et){if(d?fr(s):br(),(t=mt)?(t=mp(t,Vs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:de!==null?{id:ge,overflow:_e}:null,retryLane:536870912,hydrationErrors:null},l=bo(t),l.return=s,s.child=l,xt=s,mt=null)):t=null,t===null)throw il(s);return Kx(t)?s.lanes=32:s.lanes=536870912,null}var O=i.children;return i=i.fallback,d?(br(),d=s.mode,O=dc({mode:"hidden",children:O},d),i=El(i,d,l,null),O.return=s,i.return=s,O.sibling=i,s.child=O,i=s.child,i.memoizedState=mx(l),i.childLanes=ux(t,w,l),s.memoizedState=xx,Lo(null,i)):(fr(s),hx(s,O))}var Y=t.memoizedState;if(Y!==null&&(O=Y.dehydrated,O!==null)){if(x)s.flags&256?(fr(s),s.flags&=-257,s=px(t,s,l)):s.memoizedState!==null?(br(),s.child=t.child,s.flags|=128,s=null):(br(),O=i.fallback,d=s.mode,i=dc({mode:"visible",children:i.children},d),O=El(O,d,l,null),O.flags|=2,i.return=s,O.return=s,i.sibling=O,s.child=i,Ci(s,t.child,null,l),i=s.child,i.memoizedState=mx(l),i.childLanes=ux(t,w,l),s.memoizedState=xx,s=Lo(null,i));else if(fr(s),Kx(O)){if(w=O.nextSibling&&O.nextSibling.dataset,w)var ne=w.dgst;w=ne,i=Error(u(419)),i.stack="",i.digest=w,Ni({value:i,source:null,stack:null}),s=px(t,s,l)}else if(is||on(t,s,l,!1),w=(l&t.childLanes)!==0,is||w){if(w=zt,w!==null&&(i=bd(w,l),i!==0&&i!==Y.retryLane))throw Y.retryLane=i,Na(t,i),Ws(w,t,i),dx;Vx(O)||gc(),s=px(t,s,l)}else Vx(O)?(s.flags|=192,s.child=t.child,s=null):(t=Y.treeContext,mt=ka(O.nextSibling),xt=s,et=!0,rl=null,Vs=!1,t!==null&&Ps(s,t),s=hx(s,i.children),s.flags|=4096);return s}return d?(br(),O=i.fallback,d=s.mode,Y=t.child,ne=Y.sibling,i=ya(Y,{mode:"hidden",children:i.children}),i.subtreeFlags=Y.subtreeFlags&65011712,ne!==null?O=ya(ne,O):(O=El(O,d,l,null),O.flags|=2),O.return=s,i.return=s,i.sibling=O,s.child=i,Lo(null,i),i=s.child,O=t.child.memoizedState,O===null?O=mx(l):(d=O.cachePool,d!==null?(Y=ls._currentValue,d=d.parent!==Y?{parent:Y,pool:Y}:d):d=$m(),O={baseLanes:O.baseLanes|l,cachePool:d}),i.memoizedState=O,i.childLanes=ux(t,w,l),s.memoizedState=xx,Lo(t.child,i)):(fr(s),l=t.child,t=l.sibling,l=ya(l,{mode:"visible",children:i.children}),l.return=s,l.sibling=null,t!==null&&(w=s.deletions,w===null?(s.deletions=[t],s.flags|=16):w.push(t)),s.child=l,s.memoizedState=null,l)}function hx(t,s){return s=dc({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function dc(t,s){return t=Ts(22,t,null,s),t.lanes=0,t}function px(t,s,l){return Ci(s,t.child,null,l),t=hx(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function rh(t,s,l){t.lanes|=s;var i=t.alternate;i!==null&&(i.lanes|=s),z0(t.return,s,l)}function fx(t,s,l,i,d,x){var w=t.memoizedState;w===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:i,tail:l,tailMode:d,treeForkCount:x}:(w.isBackwards=s,w.rendering=null,w.renderingStartTime=0,w.last=i,w.tail=l,w.tailMode=d,w.treeForkCount=x)}function ih(t,s,l){var i=s.pendingProps,d=i.revealOrder,x=i.tail;i=i.children;var w=Xt.current,O=(w&2)!==0;if(O?(w=w&1|2,s.flags|=128):w&=1,ye(Xt,w),ks(t,s,i,l),i=et?R:0,!O&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rh(t,l,s);else if(t.tag===19)rh(t,l,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(l=s.child,d=null;l!==null;)t=l.alternate,t!==null&&Qd(t)===null&&(d=l),l=l.sibling;l=d,l===null?(d=s.child,s.child=null):(d=l.sibling,l.sibling=null),fx(s,!1,d,l,x,i);break;case"backwards":case"unstable_legacy-backwards":for(l=null,d=s.child,s.child=null;d!==null;){if(t=d.alternate,t!==null&&Qd(t)===null){s.child=d;break}t=d.sibling,d.sibling=l,l=d,d=t}fx(s,!0,l,null,x,i);break;case"together":fx(s,!1,null,null,void 0,i);break;default:s.memoizedState=null}return s.child}function Ml(t,s,l){if(t!==null&&(s.dependencies=t.dependencies),jr|=s.lanes,(l&s.childLanes)===0)if(t!==null){if(on(t,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(u(153));if(s.child!==null){for(t=s.child,l=ya(t,t.pendingProps),s.child=l,l.return=s;t.sibling!==null;)t=t.sibling,l=l.sibling=ya(t,t.pendingProps),l.return=s;l.sibling=null}return s.child}function bx(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Gd(t)))}function Nb(t,s,l){switch(s.tag){case 3:Ue(s,s.stateNode.containerInfo),mr(s,ls,t.memoizedState.cache),Al();break;case 27:case 5:K(s);break;case 4:Ue(s,s.stateNode.containerInfo);break;case 10:mr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,I0(s),null;break;case 13:var i=s.memoizedState;if(i!==null)return i.dehydrated!==null?(fr(s),s.flags|=128,null):(l&s.child.childLanes)!==0?lh(t,s,l):(fr(s),t=Ml(t,s,l),t!==null?t.sibling:null);fr(s);break;case 19:var d=(t.flags&128)!==0;if(i=(l&s.childLanes)!==0,i||(on(t,s,l,!1),i=(l&s.childLanes)!==0),d){if(i)return ih(t,s,l);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ye(Xt,Xt.current),i)break;return null;case 22:return s.lanes=0,Ju(t,s,l,s.pendingProps);case 24:mr(s,ls,t.memoizedState.cache)}return Ml(t,s,l)}function nh(t,s,l){if(t!==null)if(t.memoizedProps!==s.pendingProps)is=!0;else{if(!bx(t,l)&&(s.flags&128)===0)return is=!1,Nb(t,s,l);is=(t.flags&131072)!==0}else is=!1,et&&(s.flags&1048576)!==0&&Ke(s,R,s.index);switch(s.lanes=0,s.tag){case 16:e:{var i=s.pendingProps;if(t=_i(s.elementType),s.type=t,typeof t=="function")ln(t)?(i=Ai(t,i),s.tag=1,s=sh(null,s,t,i,l)):(s.tag=0,s=cx(null,s,t,i,l));else{if(t!=null){var d=t.$$typeof;if(d===P){s.tag=11,s=Ku(null,s,t,i,l);break e}else if(d===Z){s.tag=14,s=Xu(null,s,t,i,l);break e}}throw s=Q(t)||t,Error(u(306,s,""))}}return s;case 0:return cx(t,s,s.type,s.pendingProps,l);case 1:return i=s.type,d=Ai(i,s.pendingProps),sh(t,s,i,d,l);case 3:e:{if(Ue(s,s.stateNode.containerInfo),t===null)throw Error(u(387));i=s.pendingProps;var x=s.memoizedState;d=x.element,P0(t,s),Co(s,i,null,l);var w=s.memoizedState;if(i=w.cache,mr(s,ls,i),i!==x.cache&&T0(s,[ls],l,!0),So(),i=w.element,x.isDehydrated)if(x={element:i,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=x,s.memoizedState=x,s.flags&256){s=ah(t,s,i,l);break e}else if(i!==d){d=r(Error(u(424)),s),Ni(d),s=ah(t,s,i,l);break e}else for(t=s.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,mt=ka(t.firstChild),xt=s,et=!0,rl=null,Vs=!0,l=Jm(s,null,i,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Al(),i===d){s=Ml(t,s,l);break e}ks(t,s,i,l)}s=s.child}return s;case 26:return oc(t,s),t===null?(l=gp(s.type,null,s.pendingProps,null))?s.memoizedState=l:et||(l=s.type,t=s.pendingProps,i=_c(Me.current).createElement(l),i[ss]=s,i[fs]=t,_s(i,l,t),as(i),s.stateNode=i):s.memoizedState=gp(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return K(s),t===null&&et&&(i=s.stateNode=pp(s.type,s.pendingProps,Me.current),xt=s,Vs=!0,d=mt,_r(s.type)?(Xx=d,mt=ka(i.firstChild)):mt=d),ks(t,s,s.pendingProps.children,l),oc(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&et&&((d=i=mt)&&(i=Qb(i,s.type,s.pendingProps,Vs),i!==null?(s.stateNode=i,xt=s,mt=ka(i.firstChild),Vs=!1,d=!0):d=!1),d||il(s)),K(s),d=s.type,x=s.pendingProps,w=t!==null?t.memoizedProps:null,i=x.children,Zx(d,x)?i=null:w!==null&&Zx(d,w)&&(s.flags|=32),s.memoizedState!==null&&(d=q0(t,s,mb,null,null,l),Yo._currentValue=d),oc(t,s),ks(t,s,i,l),s.child;case 6:return t===null&&et&&((t=l=mt)&&(l=Jb(l,s.pendingProps,Vs),l!==null?(s.stateNode=l,xt=s,mt=null,t=!0):t=!1),t||il(s)),null;case 13:return lh(t,s,l);case 4:return Ue(s,s.stateNode.containerInfo),i=s.pendingProps,t===null?s.child=Ci(s,null,i,l):ks(t,s,i,l),s.child;case 11:return Ku(t,s,s.type,s.pendingProps,l);case 7:return ks(t,s,s.pendingProps,l),s.child;case 8:return ks(t,s,s.pendingProps.children,l),s.child;case 12:return ks(t,s,s.pendingProps.children,l),s.child;case 10:return i=s.pendingProps,mr(s,s.type,i.value),ks(t,s,i.children,l),s.child;case 9:return d=s.type._context,i=s.pendingProps.children,wi(s),d=ws(d),i=i(d),s.flags|=1,ks(t,s,i,l),s.child;case 14:return Xu(t,s,s.type,s.pendingProps,l);case 15:return Qu(t,s,s.type,s.pendingProps,l);case 19:return ih(t,s,l);case 31:return jb(t,s,l);case 22:return Ju(t,s,l,s.pendingProps);case 24:return wi(s),i=ws(ls),t===null?(d=D0(),d===null&&(d=zt,x=L0(),d.pooledCache=x,x.refCount++,x!==null&&(d.pooledCacheLanes|=l),d=x),s.memoizedState={parent:i,cache:d},O0(s),mr(s,ls,d)):((t.lanes&l)!==0&&(P0(t,s),Co(s,null,null,l),So()),d=t.memoizedState,x=s.memoizedState,d.parent!==i?(d={parent:i,cache:i},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),mr(s,ls,i)):(i=x.cache,mr(s,ls,i),i!==d.cache&&T0(s,[ls],l,!0))),ks(t,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(u(156,s.tag))}function Dl(t){t.flags|=4}function gx(t,s,l,i,d){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(Dh())t.flags|=8192;else throw Si=Yd,R0}else t.flags&=-16777217}function oh(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!wp(s))if(Dh())t.flags|=8192;else throw Si=Yd,R0}function cc(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?hd():536870912,t.lanes|=s,jn|=s)}function Mo(t,s){if(!et)switch(t.tailMode){case"hidden":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var i=null;l!==null;)l.alternate!==null&&(i=l),l=l.sibling;i===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Bt(t){var s=t.alternate!==null&&t.alternate.child===t.child,l=0,i=0;if(s)for(var d=t.child;d!==null;)l|=d.lanes|d.childLanes,i|=d.subtreeFlags&65011712,i|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)l|=d.lanes|d.childLanes,i|=d.subtreeFlags,i|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=i,t.childLanes=l,s}function yb(t,s,l){var i=s.pendingProps;switch(Yt(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(s),null;case 1:return Bt(s),null;case 3:return l=s.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),s.memoizedState.cache!==i&&(s.flags|=2048),zl(ls),Rt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(Ba(s)?Dl(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,jo())),Bt(s),null;case 26:var d=s.type,x=s.memoizedState;return t===null?(Dl(s),x!==null?(Bt(s),oh(s,x)):(Bt(s),gx(s,d,null,i,l))):x?x!==t.memoizedState?(Dl(s),Bt(s),oh(s,x)):(Bt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==i&&Dl(s),Bt(s),gx(s,d,t,i,l)),null;case 27:if(Ne(s),l=Me.current,d=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==i&&Dl(s);else{if(!i){if(s.stateNode===null)throw Error(u(166));return Bt(s),null}t=we.current,Ba(s)?vo(s):(t=pp(d,i,l),s.stateNode=t,Dl(s))}return Bt(s),null;case 5:if(Ne(s),d=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==i&&Dl(s);else{if(!i){if(s.stateNode===null)throw Error(u(166));return Bt(s),null}if(x=we.current,Ba(s))vo(s);else{var w=_c(Me.current);switch(x){case 1:x=w.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:x=w.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":x=w.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":x=w.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":x=w.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof i.is=="string"?w.createElement("select",{is:i.is}):w.createElement("select"),i.multiple?x.multiple=!0:i.size&&(x.size=i.size);break;default:x=typeof i.is=="string"?w.createElement(d,{is:i.is}):w.createElement(d)}}x[ss]=s,x[fs]=i;e:for(w=s.child;w!==null;){if(w.tag===5||w.tag===6)x.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===s)break e;for(;w.sibling===null;){if(w.return===null||w.return===s)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}s.stateNode=x;e:switch(_s(x,d,i),d){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Dl(s)}}return Bt(s),gx(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,l),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==i&&Dl(s);else{if(typeof i!="string"&&s.stateNode===null)throw Error(u(166));if(t=Me.current,Ba(s)){if(t=s.stateNode,l=s.memoizedProps,i=null,d=xt,d!==null)switch(d.tag){case 27:case 5:i=d.memoizedProps}t[ss]=s,t=!!(t.nodeValue===l||i!==null&&i.suppressHydrationWarning===!0||lp(t.nodeValue,l)),t||il(s,!0)}else t=_c(t).createTextNode(i),t[ss]=s,s.stateNode=t}return Bt(s),null;case 31:if(l=s.memoizedState,t===null||t.memoizedState!==null){if(i=Ba(s),l!==null){if(t===null){if(!i)throw Error(u(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(u(557));t[ss]=s}else Al(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Bt(s),t=!1}else l=jo(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return s.flags&256?(oa(s),s):(oa(s),null);if((s.flags&128)!==0)throw Error(u(558))}return Bt(s),null;case 13:if(i=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=Ba(s),i!==null&&i.dehydrated!==null){if(t===null){if(!d)throw Error(u(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(u(317));d[ss]=s}else Al(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Bt(s),d=!1}else d=jo(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(oa(s),s):(oa(s),null)}return oa(s),(s.flags&128)!==0?(s.lanes=l,s):(l=i!==null,t=t!==null&&t.memoizedState!==null,l&&(i=s.child,d=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(d=i.alternate.memoizedState.cachePool.pool),x=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(x=i.memoizedState.cachePool.pool),x!==d&&(i.flags|=2048)),l!==t&&l&&(s.child.flags|=8192),cc(s,s.updateQueue),Bt(s),null);case 4:return Rt(),t===null&&Fx(s.stateNode.containerInfo),Bt(s),null;case 10:return zl(s.type),Bt(s),null;case 19:if(ke(Xt),i=s.memoizedState,i===null)return Bt(s),null;if(d=(s.flags&128)!==0,x=i.rendering,x===null)if(d)Mo(i,!1);else{if(Kt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(x=Qd(t),x!==null){for(s.flags|=128,Mo(i,!1),t=x.updateQueue,s.updateQueue=t,cc(s,t),s.subtreeFlags=0,t=l,l=s.child;l!==null;)fo(l,t),l=l.sibling;return ye(Xt,Xt.current&1|2),et&&Oe(s,i.treeForkCount),s.child}t=t.sibling}i.tail!==null&&Ds()>pc&&(s.flags|=128,d=!0,Mo(i,!1),s.lanes=4194304)}else{if(!d)if(t=Qd(x),t!==null){if(s.flags|=128,d=!0,t=t.updateQueue,s.updateQueue=t,cc(s,t),Mo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!x.alternate&&!et)return Bt(s),null}else 2*Ds()-i.renderingStartTime>pc&&l!==536870912&&(s.flags|=128,d=!0,Mo(i,!1),s.lanes=4194304);i.isBackwards?(x.sibling=s.child,s.child=x):(t=i.last,t!==null?t.sibling=x:s.child=x,i.last=x)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ds(),t.sibling=null,l=Xt.current,ye(Xt,d?l&1|2:l&1),et&&Oe(s,i.treeForkCount),t):(Bt(s),null);case 22:case 23:return oa(s),H0(),i=s.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(s.flags|=8192):i&&(s.flags|=8192),i?(l&536870912)!==0&&(s.flags&128)===0&&(Bt(s),s.subtreeFlags&6&&(s.flags|=8192)):Bt(s),l=s.updateQueue,l!==null&&cc(s,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==l&&(s.flags|=2048),t!==null&&ke(ki),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),zl(ls),Bt(s),null;case 25:return null;case 30:return null}throw Error(u(156,s.tag))}function wb(t,s){switch(Yt(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return zl(ls),Rt(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Ne(s),null;case 31:if(s.memoizedState!==null){if(oa(s),s.alternate===null)throw Error(u(340));Al()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(oa(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(u(340));Al()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return ke(Xt),null;case 4:return Rt(),null;case 10:return zl(s.type),null;case 22:case 23:return oa(s),H0(),t!==null&&ke(ki),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return zl(ls),null;case 25:return null;default:return null}}function dh(t,s){switch(Yt(s),s.tag){case 3:zl(ls),Rt();break;case 26:case 27:case 5:Ne(s);break;case 4:Rt();break;case 31:s.memoizedState!==null&&oa(s);break;case 13:oa(s);break;case 19:ke(Xt);break;case 10:zl(s.type);break;case 22:case 23:oa(s),H0(),t!==null&&ke(ki);break;case 24:zl(ls)}}function Do(t,s){try{var l=s.updateQueue,i=l!==null?l.lastEffect:null;if(i!==null){var d=i.next;l=d;do{if((l.tag&t)===t){i=void 0;var x=l.create,w=l.inst;i=x(),w.destroy=i}l=l.next}while(l!==d)}}catch(O){kt(s,s.return,O)}}function gr(t,s,l){try{var i=s.updateQueue,d=i!==null?i.lastEffect:null;if(d!==null){var x=d.next;i=x;do{if((i.tag&t)===t){var w=i.inst,O=w.destroy;if(O!==void 0){w.destroy=void 0,d=s;var Y=l,ne=O;try{ne()}catch(pe){kt(d,Y,pe)}}}i=i.next}while(i!==x)}}catch(pe){kt(s,s.return,pe)}}function ch(t){var s=t.updateQueue;if(s!==null){var l=t.stateNode;try{eu(s,l)}catch(i){kt(t,t.return,i)}}}function xh(t,s,l){l.props=Ai(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(i){kt(t,s,i)}}function Ro(t,s){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof l=="function"?t.refCleanup=l(i):l.current=i}}catch(d){kt(t,s,d)}}function ol(t,s){var l=t.ref,i=t.refCleanup;if(l!==null)if(typeof i=="function")try{i()}catch(d){kt(t,s,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(d){kt(t,s,d)}else l.current=null}function mh(t){var s=t.type,l=t.memoizedProps,i=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&i.focus();break e;case"img":l.src?i.src=l.src:l.srcSet&&(i.srcset=l.srcSet)}}catch(d){kt(t,t.return,d)}}function vx(t,s,l){try{var i=t.stateNode;Zb(i,t.type,l,s),i[fs]=s}catch(d){kt(t,t.return,d)}}function uh(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&_r(t.type)||t.tag===4}function jx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&_r(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nx(t,s,l){var i=t.tag;if(i===5||i===6)t=t.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(t),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=qs));else if(i!==4&&(i===27&&_r(t.type)&&(l=t.stateNode,s=null),t=t.child,t!==null))for(Nx(t,s,l),t=t.sibling;t!==null;)Nx(t,s,l),t=t.sibling}function xc(t,s,l){var i=t.tag;if(i===5||i===6)t=t.stateNode,s?l.insertBefore(t,s):l.appendChild(t);else if(i!==4&&(i===27&&_r(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(xc(t,s,l),t=t.sibling;t!==null;)xc(t,s,l),t=t.sibling}function hh(t){var s=t.stateNode,l=t.memoizedProps;try{for(var i=t.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);_s(s,i,l),s[ss]=t,s[fs]=l}catch(x){kt(t,t.return,x)}}var Rl=!1,ns=!1,yx=!1,ph=typeof WeakSet=="function"?WeakSet:Set,vs=null;function kb(t,s){if(t=t.containerInfo,Gx=Lc,t=ui(t),el(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var i=l.getSelection&&l.getSelection();if(i&&i.rangeCount!==0){l=i.anchorNode;var d=i.anchorOffset,x=i.focusNode;i=i.focusOffset;try{l.nodeType,x.nodeType}catch{l=null;break e}var w=0,O=-1,Y=-1,ne=0,pe=0,ve=t,ce=null;t:for(;;){for(var me;ve!==l||d!==0&&ve.nodeType!==3||(O=w+d),ve!==x||i!==0&&ve.nodeType!==3||(Y=w+i),ve.nodeType===3&&(w+=ve.nodeValue.length),(me=ve.firstChild)!==null;)ce=ve,ve=me;for(;;){if(ve===t)break t;if(ce===l&&++ne===d&&(O=w),ce===x&&++pe===i&&(Y=w),(me=ve.nextSibling)!==null)break;ve=ce,ce=ve.parentNode}ve=me}l=O===-1||Y===-1?null:{start:O,end:Y}}else l=null}l=l||{start:0,end:0}}else l=null;for(qx={focusedElem:t,selectionRange:l},Lc=!1,vs=s;vs!==null;)if(s=vs,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,vs=t;else for(;vs!==null;){switch(s=vs,x=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)d=t[l],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&x!==null){t=void 0,l=s,d=x.memoizedProps,x=x.memoizedState,i=l.stateNode;try{var Ee=Ai(l.type,d);t=i.getSnapshotBeforeUpdate(Ee,x),i.__reactInternalSnapshotBeforeUpdate=t}catch(Fe){kt(l,l.return,Fe)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,l=t.nodeType,l===9)Yx(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Yx(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(u(163))}if(t=s.sibling,t!==null){t.return=s.return,vs=t;break}vs=s.return}}function fh(t,s,l){var i=l.flags;switch(l.tag){case 0:case 11:case 15:Pl(t,l),i&4&&Do(5,l);break;case 1:if(Pl(t,l),i&4)if(t=l.stateNode,s===null)try{t.componentDidMount()}catch(w){kt(l,l.return,w)}else{var d=Ai(l.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(d,s,t.__reactInternalSnapshotBeforeUpdate)}catch(w){kt(l,l.return,w)}}i&64&&ch(l),i&512&&Ro(l,l.return);break;case 3:if(Pl(t,l),i&64&&(t=l.updateQueue,t!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{eu(t,s)}catch(w){kt(l,l.return,w)}}break;case 27:s===null&&i&4&&hh(l);case 26:case 5:Pl(t,l),s===null&&i&4&&mh(l),i&512&&Ro(l,l.return);break;case 12:Pl(t,l);break;case 31:Pl(t,l),i&4&&vh(t,l);break;case 13:Pl(t,l),i&4&&jh(t,l),i&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=Mb.bind(null,l),Wb(t,l))));break;case 22:if(i=l.memoizedState!==null||Rl,!i){s=s!==null&&s.memoizedState!==null||ns,d=Rl;var x=ns;Rl=i,(ns=s)&&!x?Bl(t,l,(l.subtreeFlags&8772)!==0):Pl(t,l),Rl=d,ns=x}break;case 30:break;default:Pl(t,l)}}function bh(t){var s=t.alternate;s!==null&&(t.alternate=null,bh(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Qn(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ft=null,Ks=!1;function Ol(t,s,l){for(l=l.child;l!==null;)gh(t,s,l),l=l.sibling}function gh(t,s,l){if(Ns&&typeof Ns.onCommitFiberUnmount=="function")try{Ns.onCommitFiberUnmount(Yl,l)}catch{}switch(l.tag){case 26:ns||ol(l,s),Ol(t,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ns||ol(l,s);var i=Ft,d=Ks;_r(l.type)&&(Ft=l.stateNode,Ks=!1),Ol(t,s,l),qo(l.stateNode),Ft=i,Ks=d;break;case 5:ns||ol(l,s);case 6:if(i=Ft,d=Ks,Ft=null,Ol(t,s,l),Ft=i,Ks=d,Ft!==null)if(Ks)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(l.stateNode)}catch(x){kt(l,s,x)}else try{Ft.removeChild(l.stateNode)}catch(x){kt(l,s,x)}break;case 18:Ft!==null&&(Ks?(t=Ft,cp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),En(t)):cp(Ft,l.stateNode));break;case 4:i=Ft,d=Ks,Ft=l.stateNode.containerInfo,Ks=!0,Ol(t,s,l),Ft=i,Ks=d;break;case 0:case 11:case 14:case 15:gr(2,l,s),ns||gr(4,l,s),Ol(t,s,l);break;case 1:ns||(ol(l,s),i=l.stateNode,typeof i.componentWillUnmount=="function"&&xh(l,s,i)),Ol(t,s,l);break;case 21:Ol(t,s,l);break;case 22:ns=(i=ns)||l.memoizedState!==null,Ol(t,s,l),ns=i;break;default:Ol(t,s,l)}}function vh(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{En(t)}catch(l){kt(s,s.return,l)}}}function jh(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{En(t)}catch(l){kt(s,s.return,l)}}function _b(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new ph),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new ph),s;default:throw Error(u(435,t.tag))}}function mc(t,s){var l=_b(t);s.forEach(function(i){if(!l.has(i)){l.add(i);var d=Db.bind(null,t,i);i.then(d,d)}})}function Xs(t,s){var l=s.deletions;if(l!==null)for(var i=0;i<l.length;i++){var d=l[i],x=t,w=s,O=w;e:for(;O!==null;){switch(O.tag){case 27:if(_r(O.type)){Ft=O.stateNode,Ks=!1;break e}break;case 5:Ft=O.stateNode,Ks=!1;break e;case 3:case 4:Ft=O.stateNode.containerInfo,Ks=!0;break e}O=O.return}if(Ft===null)throw Error(u(160));gh(x,w,d),Ft=null,Ks=!1,x=d.alternate,x!==null&&(x.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Nh(s,t),s=s.sibling}var Fa=null;function Nh(t,s){var l=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Xs(s,t),Qs(t),i&4&&(gr(3,t,t.return),Do(3,t),gr(5,t,t.return));break;case 1:Xs(s,t),Qs(t),i&512&&(ns||l===null||ol(l,l.return)),i&64&&Rl&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?i:l.concat(i))));break;case 26:var d=Fa;if(Xs(s,t),Qs(t),i&512&&(ns||l===null||ol(l,l.return)),i&4){var x=l!==null?l.memoizedState:null;if(i=t.memoizedState,l===null)if(i===null)if(t.stateNode===null){e:{i=t.type,l=t.memoizedProps,d=d.ownerDocument||d;t:switch(i){case"title":x=d.getElementsByTagName("title")[0],(!x||x[Qr]||x[ss]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=d.createElement(i),d.head.insertBefore(x,d.querySelector("head > title"))),_s(x,i,l),x[ss]=t,as(x),i=x;break e;case"link":var w=Np("link","href",d).get(i+(l.href||""));if(w){for(var O=0;O<w.length;O++)if(x=w[O],x.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&x.getAttribute("rel")===(l.rel==null?null:l.rel)&&x.getAttribute("title")===(l.title==null?null:l.title)&&x.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(O,1);break t}}x=d.createElement(i),_s(x,i,l),d.head.appendChild(x);break;case"meta":if(w=Np("meta","content",d).get(i+(l.content||""))){for(O=0;O<w.length;O++)if(x=w[O],x.getAttribute("content")===(l.content==null?null:""+l.content)&&x.getAttribute("name")===(l.name==null?null:l.name)&&x.getAttribute("property")===(l.property==null?null:l.property)&&x.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&x.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(O,1);break t}}x=d.createElement(i),_s(x,i,l),d.head.appendChild(x);break;default:throw Error(u(468,i))}x[ss]=t,as(x),i=x}t.stateNode=i}else yp(d,t.type,t.stateNode);else t.stateNode=jp(d,i,t.memoizedProps);else x!==i?(x===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):x.count--,i===null?yp(d,t.type,t.stateNode):jp(d,i,t.memoizedProps)):i===null&&t.stateNode!==null&&vx(t,t.memoizedProps,l.memoizedProps)}break;case 27:Xs(s,t),Qs(t),i&512&&(ns||l===null||ol(l,l.return)),l!==null&&i&4&&vx(t,t.memoizedProps,l.memoizedProps);break;case 5:if(Xs(s,t),Qs(t),i&512&&(ns||l===null||ol(l,l.return)),t.flags&32){d=t.stateNode;try{pa(d,"")}catch(Ee){kt(t,t.return,Ee)}}i&4&&t.stateNode!=null&&(d=t.memoizedProps,vx(t,d,l!==null?l.memoizedProps:d)),i&1024&&(yx=!0);break;case 6:if(Xs(s,t),Qs(t),i&4){if(t.stateNode===null)throw Error(u(162));i=t.memoizedProps,l=t.stateNode;try{l.nodeValue=i}catch(Ee){kt(t,t.return,Ee)}}break;case 3:if(Ec=null,d=Fa,Fa=Sc(s.containerInfo),Xs(s,t),Fa=d,Qs(t),i&4&&l!==null&&l.memoizedState.isDehydrated)try{En(s.containerInfo)}catch(Ee){kt(t,t.return,Ee)}yx&&(yx=!1,yh(t));break;case 4:i=Fa,Fa=Sc(t.stateNode.containerInfo),Xs(s,t),Qs(t),Fa=i;break;case 12:Xs(s,t),Qs(t);break;case 31:Xs(s,t),Qs(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,mc(t,i)));break;case 13:Xs(s,t),Qs(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(hc=Ds()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,mc(t,i)));break;case 22:d=t.memoizedState!==null;var Y=l!==null&&l.memoizedState!==null,ne=Rl,pe=ns;if(Rl=ne||d,ns=pe||Y,Xs(s,t),ns=pe,Rl=ne,Qs(t),i&8192)e:for(s=t.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(l===null||Y||Rl||ns||zi(t)),l=null,s=t;;){if(s.tag===5||s.tag===26){if(l===null){Y=l=s;try{if(x=Y.stateNode,d)w=x.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{O=Y.stateNode;var ve=Y.memoizedProps.style,ce=ve!=null&&ve.hasOwnProperty("display")?ve.display:null;O.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Ee){kt(Y,Y.return,Ee)}}}else if(s.tag===6){if(l===null){Y=s;try{Y.stateNode.nodeValue=d?"":Y.memoizedProps}catch(Ee){kt(Y,Y.return,Ee)}}}else if(s.tag===18){if(l===null){Y=s;try{var me=Y.stateNode;d?xp(me,!0):xp(Y.stateNode,!1)}catch(Ee){kt(Y,Y.return,Ee)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}i&4&&(i=t.updateQueue,i!==null&&(l=i.retryQueue,l!==null&&(i.retryQueue=null,mc(t,l))));break;case 19:Xs(s,t),Qs(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,mc(t,i)));break;case 30:break;case 21:break;default:Xs(s,t),Qs(t)}}function Qs(t){var s=t.flags;if(s&2){try{for(var l,i=t.return;i!==null;){if(uh(i)){l=i;break}i=i.return}if(l==null)throw Error(u(160));switch(l.tag){case 27:var d=l.stateNode,x=jx(t);xc(t,x,d);break;case 5:var w=l.stateNode;l.flags&32&&(pa(w,""),l.flags&=-33);var O=jx(t);xc(t,O,w);break;case 3:case 4:var Y=l.stateNode.containerInfo,ne=jx(t);Nx(t,ne,Y);break;default:throw Error(u(161))}}catch(pe){kt(t,t.return,pe)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function yh(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;yh(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Pl(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)fh(t,s.alternate,s),s=s.sibling}function zi(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:gr(4,s,s.return),zi(s);break;case 1:ol(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&xh(s,s.return,l),zi(s);break;case 27:qo(s.stateNode);case 26:case 5:ol(s,s.return),zi(s);break;case 22:s.memoizedState===null&&zi(s);break;case 30:zi(s);break;default:zi(s)}t=t.sibling}}function Bl(t,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var i=s.alternate,d=t,x=s,w=x.flags;switch(x.tag){case 0:case 11:case 15:Bl(d,x,l),Do(4,x);break;case 1:if(Bl(d,x,l),i=x,d=i.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(ne){kt(i,i.return,ne)}if(i=x,d=i.updateQueue,d!==null){var O=i.stateNode;try{var Y=d.shared.hiddenCallbacks;if(Y!==null)for(d.shared.hiddenCallbacks=null,d=0;d<Y.length;d++)Wm(Y[d],O)}catch(ne){kt(i,i.return,ne)}}l&&w&64&&ch(x),Ro(x,x.return);break;case 27:hh(x);case 26:case 5:Bl(d,x,l),l&&i===null&&w&4&&mh(x),Ro(x,x.return);break;case 12:Bl(d,x,l);break;case 31:Bl(d,x,l),l&&w&4&&vh(d,x);break;case 13:Bl(d,x,l),l&&w&4&&jh(d,x);break;case 22:x.memoizedState===null&&Bl(d,x,l),Ro(x,x.return);break;case 30:break;default:Bl(d,x,l)}s=s.sibling}}function wx(t,s){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&No(l))}function kx(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&No(t))}function Ha(t,s,l,i){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)wh(t,s,l,i),s=s.sibling}function wh(t,s,l,i){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Ha(t,s,l,i),d&2048&&Do(9,s);break;case 1:Ha(t,s,l,i);break;case 3:Ha(t,s,l,i),d&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&No(t)));break;case 12:if(d&2048){Ha(t,s,l,i),t=s.stateNode;try{var x=s.memoizedProps,w=x.id,O=x.onPostCommit;typeof O=="function"&&O(w,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(Y){kt(s,s.return,Y)}}else Ha(t,s,l,i);break;case 31:Ha(t,s,l,i);break;case 13:Ha(t,s,l,i);break;case 23:break;case 22:x=s.stateNode,w=s.alternate,s.memoizedState!==null?x._visibility&2?Ha(t,s,l,i):Oo(t,s):x._visibility&2?Ha(t,s,l,i):(x._visibility|=2,bn(t,s,l,i,(s.subtreeFlags&10256)!==0||!1)),d&2048&&wx(w,s);break;case 24:Ha(t,s,l,i),d&2048&&kx(s.alternate,s);break;default:Ha(t,s,l,i)}}function bn(t,s,l,i,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var x=t,w=s,O=l,Y=i,ne=w.flags;switch(w.tag){case 0:case 11:case 15:bn(x,w,O,Y,d),Do(8,w);break;case 23:break;case 22:var pe=w.stateNode;w.memoizedState!==null?pe._visibility&2?bn(x,w,O,Y,d):Oo(x,w):(pe._visibility|=2,bn(x,w,O,Y,d)),d&&ne&2048&&wx(w.alternate,w);break;case 24:bn(x,w,O,Y,d),d&&ne&2048&&kx(w.alternate,w);break;default:bn(x,w,O,Y,d)}s=s.sibling}}function Oo(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=t,i=s,d=i.flags;switch(i.tag){case 22:Oo(l,i),d&2048&&wx(i.alternate,i);break;case 24:Oo(l,i),d&2048&&kx(i.alternate,i);break;default:Oo(l,i)}s=s.sibling}}var Po=8192;function gn(t,s,l){if(t.subtreeFlags&Po)for(t=t.child;t!==null;)kh(t,s,l),t=t.sibling}function kh(t,s,l){switch(t.tag){case 26:gn(t,s,l),t.flags&Po&&t.memoizedState!==null&&xg(l,Fa,t.memoizedState,t.memoizedProps);break;case 5:gn(t,s,l);break;case 3:case 4:var i=Fa;Fa=Sc(t.stateNode.containerInfo),gn(t,s,l),Fa=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Po,Po=16777216,gn(t,s,l),Po=i):gn(t,s,l));break;default:gn(t,s,l)}}function _h(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Bo(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var i=s[l];vs=i,Ch(i,t)}_h(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Sh(t),t=t.sibling}function Sh(t){switch(t.tag){case 0:case 11:case 15:Bo(t),t.flags&2048&&gr(9,t,t.return);break;case 3:Bo(t);break;case 12:Bo(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,uc(t)):Bo(t);break;default:Bo(t)}}function uc(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var i=s[l];vs=i,Ch(i,t)}_h(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:gr(8,s,s.return),uc(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,uc(s));break;default:uc(s)}t=t.sibling}}function Ch(t,s){for(;vs!==null;){var l=vs;switch(l.tag){case 0:case 11:case 15:gr(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var i=l.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:No(l.memoizedState.cache)}if(i=l.child,i!==null)i.return=l,vs=i;else e:for(l=t;vs!==null;){i=vs;var d=i.sibling,x=i.return;if(bh(i),i===l){vs=null;break e}if(d!==null){d.return=x,vs=d;break e}vs=x}}}var Sb={getCacheForType:function(t){var s=ws(ls),l=s.data.get(t);return l===void 0&&(l=t(),s.data.set(t,l)),l},cacheSignal:function(){return ws(ls).controller.signal}},Cb=typeof WeakMap=="function"?WeakMap:Map,bt=0,zt=null,tt=null,lt=0,wt=0,da=null,vr=!1,vn=!1,_x=!1,Ul=0,Kt=0,jr=0,Ti=0,Sx=0,ca=0,jn=0,Uo=null,Js=null,Cx=!1,hc=0,Eh=0,pc=1/0,fc=null,Nr=null,ms=0,yr=null,Nn=null,Fl=0,Ex=0,Ax=null,Ah=null,Fo=0,zx=null;function xa(){return(bt&2)!==0&&lt!==0?lt&-lt:B.T!==null?Ox():Kn()}function zh(){if(ca===0)if((lt&536870912)===0||et){var t=Vr;Vr<<=1,(Vr&3932160)===0&&(Vr=262144),ca=t}else ca=536870912;return t=na.current,t!==null&&(t.flags|=32),ca}function Ws(t,s,l){(t===zt&&(wt===2||wt===9)||t.cancelPendingCommit!==null)&&(yn(t,0),wr(t,lt,ca,!1)),vl(t,l),((bt&2)===0||t!==zt)&&(t===zt&&((bt&2)===0&&(Ti|=l),Kt===4&&wr(t,lt,ca,!1)),dl(t))}function Th(t,s,l){if((bt&6)!==0)throw Error(u(327));var i=!l&&(s&127)===0&&(s&t.expiredLanes)===0||Xr(t,s),d=i?zb(t,s):Lx(t,s,!0),x=i;do{if(d===0){vn&&!i&&wr(t,s,0,!1);break}else{if(l=t.current.alternate,x&&!Eb(l)){d=Lx(t,s,!1),x=!1;continue}if(d===2){if(x=s,t.errorRecoveryDisabledLanes&x)var w=0;else w=t.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var O=t;d=Uo;var Y=O.current.memoizedState.isDehydrated;if(Y&&(yn(O,w).flags|=256),w=Lx(O,w,!1),w!==2){if(_x&&!Y){O.errorRecoveryDisabledLanes|=x,Ti|=x,d=4;break e}x=Js,Js=d,x!==null&&(Js===null?Js=x:Js.push.apply(Js,x))}d=w}if(x=!1,d!==2)continue}}if(d===1){yn(t,0),wr(t,s,0,!0);break}e:{switch(i=t,x=d,x){case 0:case 1:throw Error(u(345));case 4:if((s&4194048)!==s)break;case 6:wr(i,s,ca,!vr);break e;case 2:Js=null;break;case 3:case 5:break;default:throw Error(u(329))}if((s&62914560)===s&&(d=hc+300-Ds(),10<d)){if(wr(i,s,ca,!vr),Hi(i,0,!0)!==0)break e;Fl=s,i.timeoutHandle=op(Lh.bind(null,i,l,Js,fc,Cx,s,ca,Ti,jn,vr,x,"Throttled",-0,0),d);break e}Lh(i,l,Js,fc,Cx,s,ca,Ti,jn,vr,x,null,-0,0)}}break}while(!0);dl(t)}function Lh(t,s,l,i,d,x,w,O,Y,ne,pe,ve,ce,me){if(t.timeoutHandle=-1,ve=s.subtreeFlags,ve&8192||(ve&16785408)===16785408){ve={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qs},kh(s,x,ve);var Ee=(x&62914560)===x?hc-Ds():(x&4194048)===x?Eh-Ds():0;if(Ee=mg(ve,Ee),Ee!==null){Fl=x,t.cancelPendingCommit=Ee(Fh.bind(null,t,s,x,l,i,d,w,O,Y,pe,ve,null,ce,me)),wr(t,x,w,!ne);return}}Fh(t,s,x,l,i,d,w,O,Y)}function Eb(t){for(var s=t;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var i=0;i<l.length;i++){var d=l[i],x=d.getSnapshot;d=d.value;try{if(!bs(x(),d))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function wr(t,s,l,i){s&=~Sx,s&=~Ti,t.suspendedLanes|=s,t.pingedLanes&=~s,i&&(t.warmLanes|=s),i=t.expirationTimes;for(var d=s;0<d;){var x=31-Rs(d),w=1<<x;i[x]=-1,d&=~w}l!==0&&pd(t,l,s)}function bc(){return(bt&6)===0?(Ho(0),!1):!0}function Tx(){if(tt!==null){if(wt===0)var t=tt.return;else t=tt,Ua=nl=null,Y0(t),mn=null,wo=0,t=tt;for(;t!==null;)dh(t.alternate,t),t=t.return;tt=null}}function yn(t,s){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,Vb(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),Fl=0,Tx(),zt=t,tt=l=ya(t.current,null),lt=s,wt=0,da=null,vr=!1,vn=Xr(t,s),_x=!1,jn=ca=Sx=Ti=jr=Kt=0,Js=Uo=null,Cx=!1,(s&8)!==0&&(s|=s&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=s;0<i;){var d=31-Rs(i),x=1<<d;s|=t[d],i&=~x}return Ul=s,gi(),l}function Mh(t,s){$e=null,B.H=To,s===xn||s===$d?(s=Km(),wt=3):s===R0?(s=Km(),wt=4):wt=s===dx?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,da=s,tt===null&&(Kt=1,ic(t,r(s,t.current)))}function Dh(){var t=na.current;return t===null?!0:(lt&4194048)===lt?wa===null:(lt&62914560)===lt||(lt&536870912)!==0?t===wa:!1}function Rh(){var t=B.H;return B.H=To,t===null?To:t}function Oh(){var t=B.A;return B.A=Sb,t}function gc(){Kt=4,vr||(lt&4194048)!==lt&&na.current!==null||(vn=!0),(jr&134217727)===0&&(Ti&134217727)===0||zt===null||wr(zt,lt,ca,!1)}function Lx(t,s,l){var i=bt;bt|=2;var d=Rh(),x=Oh();(zt!==t||lt!==s)&&(fc=null,yn(t,s)),s=!1;var w=Kt;e:do try{if(wt!==0&&tt!==null){var O=tt,Y=da;switch(wt){case 8:Tx(),w=6;break e;case 3:case 2:case 9:case 6:na.current===null&&(s=!0);var ne=wt;if(wt=0,da=null,wn(t,O,Y,ne),l&&vn){w=0;break e}break;default:ne=wt,wt=0,da=null,wn(t,O,Y,ne)}}Ab(),w=Kt;break}catch(pe){Mh(t,pe)}while(!0);return s&&t.shellSuspendCounter++,Ua=nl=null,bt=i,B.H=d,B.A=x,tt===null&&(zt=null,lt=0,gi()),w}function Ab(){for(;tt!==null;)Ph(tt)}function zb(t,s){var l=bt;bt|=2;var i=Rh(),d=Oh();zt!==t||lt!==s?(fc=null,pc=Ds()+500,yn(t,s)):vn=Xr(t,s);e:do try{if(wt!==0&&tt!==null){s=tt;var x=da;t:switch(wt){case 1:wt=0,da=null,wn(t,s,x,1);break;case 2:case 9:if(Ym(x)){wt=0,da=null,Bh(s);break}s=function(){wt!==2&&wt!==9||zt!==t||(wt=7),dl(t)},x.then(s,s);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:Ym(x)?(wt=0,da=null,Bh(s)):(wt=0,da=null,wn(t,s,x,7));break;case 5:var w=null;switch(tt.tag){case 26:w=tt.memoizedState;case 5:case 27:var O=tt;if(w?wp(w):O.stateNode.complete){wt=0,da=null;var Y=O.sibling;if(Y!==null)tt=Y;else{var ne=O.return;ne!==null?(tt=ne,vc(ne)):tt=null}break t}}wt=0,da=null,wn(t,s,x,5);break;case 6:wt=0,da=null,wn(t,s,x,6);break;case 8:Tx(),Kt=6;break e;default:throw Error(u(462))}}Tb();break}catch(pe){Mh(t,pe)}while(!0);return Ua=nl=null,B.H=i,B.A=d,bt=l,tt!==null?0:(zt=null,lt=0,gi(),Kt)}function Tb(){for(;tt!==null&&!xd();)Ph(tt)}function Ph(t){var s=nh(t.alternate,t,Ul);t.memoizedProps=t.pendingProps,s===null?vc(t):tt=s}function Bh(t){var s=t,l=s.alternate;switch(s.tag){case 15:case 0:s=th(l,s,s.pendingProps,s.type,void 0,lt);break;case 11:s=th(l,s,s.pendingProps,s.type.render,s.ref,lt);break;case 5:Y0(s);default:dh(l,s),s=tt=fo(s,Ul),s=nh(l,s,Ul)}t.memoizedProps=t.pendingProps,s===null?vc(t):tt=s}function wn(t,s,l,i){Ua=nl=null,Y0(s),mn=null,wo=0;var d=s.return;try{if(vb(t,d,s,l,lt)){Kt=1,ic(t,r(l,t.current)),tt=null;return}}catch(x){if(d!==null)throw tt=d,x;Kt=1,ic(t,r(l,t.current)),tt=null;return}s.flags&32768?(et||i===1?t=!0:vn||(lt&536870912)!==0?t=!1:(vr=t=!0,(i===2||i===9||i===3||i===6)&&(i=na.current,i!==null&&i.tag===13&&(i.flags|=16384))),Uh(s,t)):vc(s)}function vc(t){var s=t;do{if((s.flags&32768)!==0){Uh(s,vr);return}t=s.return;var l=yb(s.alternate,s,Ul);if(l!==null){tt=l;return}if(s=s.sibling,s!==null){tt=s;return}tt=s=t}while(s!==null);Kt===0&&(Kt=5)}function Uh(t,s){do{var l=wb(t.alternate,t);if(l!==null){l.flags&=32767,tt=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(t=t.sibling,t!==null)){tt=t;return}tt=t=l}while(t!==null);Kt=6,tt=null}function Fh(t,s,l,i,d,x,w,O,Y){t.cancelPendingCommit=null;do jc();while(ms!==0);if((bt&6)!==0)throw Error(u(327));if(s!==null){if(s===t.current)throw Error(u(177));if(x=s.lanes|s.childLanes,x|=an,h0(t,l,x,w,O,Y),t===zt&&(tt=zt=null,lt=0),Nn=s,yr=t,Fl=l,Ex=x,Ax=d,Ah=i,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Rb(Zr,function(){return Zh(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||i){i=B.T,B.T=null,d=le.p,le.p=2,w=bt,bt|=4;try{kb(t,s,l)}finally{bt=w,le.p=d,B.T=i}}ms=1,Hh(),Ih(),Gh()}}function Hh(){if(ms===1){ms=0;var t=yr,s=Nn,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=B.T,B.T=null;var i=le.p;le.p=2;var d=bt;bt|=4;try{Nh(s,t);var x=qx,w=ui(t.containerInfo),O=x.focusedElem,Y=x.selectionRange;if(w!==O&&O&&O.ownerDocument&&Wi(O.ownerDocument.documentElement,O)){if(Y!==null&&el(O)){var ne=Y.start,pe=Y.end;if(pe===void 0&&(pe=ne),"selectionStart"in O)O.selectionStart=ne,O.selectionEnd=Math.min(pe,O.value.length);else{var ve=O.ownerDocument||document,ce=ve&&ve.defaultView||window;if(ce.getSelection){var me=ce.getSelection(),Ee=O.textContent.length,Fe=Math.min(Y.start,Ee),Et=Y.end===void 0?Fe:Math.min(Y.end,Ee);!me.extend&&Fe>Et&&(w=Et,Et=Fe,Fe=w);var te=mi(O,Fe),X=mi(O,Et);if(te&&X&&(me.rangeCount!==1||me.anchorNode!==te.node||me.anchorOffset!==te.offset||me.focusNode!==X.node||me.focusOffset!==X.offset)){var ie=ve.createRange();ie.setStart(te.node,te.offset),me.removeAllRanges(),Fe>Et?(me.addRange(ie),me.extend(X.node,X.offset)):(ie.setEnd(X.node,X.offset),me.addRange(ie))}}}}for(ve=[],me=O;me=me.parentNode;)me.nodeType===1&&ve.push({element:me,left:me.scrollLeft,top:me.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<ve.length;O++){var be=ve[O];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}Lc=!!Gx,qx=Gx=null}finally{bt=d,le.p=i,B.T=l}}t.current=s,ms=2}}function Ih(){if(ms===2){ms=0;var t=yr,s=Nn,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=B.T,B.T=null;var i=le.p;le.p=2;var d=bt;bt|=4;try{fh(t,s.alternate,s)}finally{bt=d,le.p=i,B.T=l}}ms=3}}function Gh(){if(ms===4||ms===3){ms=0,md();var t=yr,s=Nn,l=Fl,i=Ah;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ms=5:(ms=0,Nn=yr=null,qh(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Nr=null),Re(l),s=s.stateNode,Ns&&typeof Ns.onCommitFiberRoot=="function")try{Ns.onCommitFiberRoot(Yl,s,void 0,(s.current.flags&128)===128)}catch{}if(i!==null){s=B.T,d=le.p,le.p=2,B.T=null;try{for(var x=t.onRecoverableError,w=0;w<i.length;w++){var O=i[w];x(O.value,{componentStack:O.stack})}}finally{B.T=s,le.p=d}}(Fl&3)!==0&&jc(),dl(t),d=t.pendingLanes,(l&261930)!==0&&(d&42)!==0?t===zx?Fo++:(Fo=0,zx=t):Fo=0,Ho(0)}}function qh(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,No(s)))}function jc(){return Hh(),Ih(),Gh(),Zh()}function Zh(){if(ms!==5)return!1;var t=yr,s=Ex;Ex=0;var l=Re(Fl),i=B.T,d=le.p;try{le.p=32>l?32:l,B.T=null,l=Ax,Ax=null;var x=yr,w=Fl;if(ms=0,Nn=yr=null,Fl=0,(bt&6)!==0)throw Error(u(331));var O=bt;if(bt|=4,Sh(x.current),wh(x,x.current,w,l),bt=O,Ho(0,!1),Ns&&typeof Ns.onPostCommitFiberRoot=="function")try{Ns.onPostCommitFiberRoot(Yl,x)}catch{}return!0}finally{le.p=d,B.T=i,qh(t,s)}}function $h(t,s,l){s=r(l,s),s=ox(t.stateNode,s,2),t=pr(t,s,2),t!==null&&(vl(t,2),dl(t))}function kt(t,s,l){if(t.tag===3)$h(t,t,l);else for(;s!==null;){if(s.tag===3){$h(s,t,l);break}else if(s.tag===1){var i=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Nr===null||!Nr.has(i))){t=r(l,t),l=Yu(2),i=pr(s,l,2),i!==null&&(Vu(l,i,s,t),vl(i,2),dl(i));break}}s=s.return}}function Mx(t,s,l){var i=t.pingCache;if(i===null){i=t.pingCache=new Cb;var d=new Set;i.set(s,d)}else d=i.get(s),d===void 0&&(d=new Set,i.set(s,d));d.has(l)||(_x=!0,d.add(l),t=Lb.bind(null,t,s,l),s.then(t,t))}function Lb(t,s,l){var i=t.pingCache;i!==null&&i.delete(s),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,zt===t&&(lt&l)===l&&(Kt===4||Kt===3&&(lt&62914560)===lt&&300>Ds()-hc?(bt&2)===0&&yn(t,0):Sx|=l,jn===lt&&(jn=0)),dl(t)}function Yh(t,s){s===0&&(s=hd()),t=Na(t,s),t!==null&&(vl(t,s),dl(t))}function Mb(t){var s=t.memoizedState,l=0;s!==null&&(l=s.retryLane),Yh(t,l)}function Db(t,s){var l=0;switch(t.tag){case 31:case 13:var i=t.stateNode,d=t.memoizedState;d!==null&&(l=d.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(u(314))}i!==null&&i.delete(s),Yh(t,l)}function Rb(t,s){return As(t,s)}var Nc=null,kn=null,Dx=!1,yc=!1,Rx=!1,kr=0;function dl(t){t!==kn&&t.next===null&&(kn===null?Nc=kn=t:kn=kn.next=t),yc=!0,Dx||(Dx=!0,Pb())}function Ho(t,s){if(!Rx&&yc){Rx=!0;do for(var l=!1,i=Nc;i!==null;){if(t!==0){var d=i.pendingLanes;if(d===0)var x=0;else{var w=i.suspendedLanes,O=i.pingedLanes;x=(1<<31-Rs(42|t)+1)-1,x&=d&~(w&~O),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(l=!0,Qh(i,x))}else x=lt,x=Hi(i,i===zt?x:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(x&3)===0||Xr(i,x)||(l=!0,Qh(i,x));i=i.next}while(l);Rx=!1}}function Ob(){Vh()}function Vh(){yc=Dx=!1;var t=0;kr!==0&&Yb()&&(t=kr);for(var s=Ds(),l=null,i=Nc;i!==null;){var d=i.next,x=Kh(i,s);x===0?(i.next=null,l===null?Nc=d:l.next=d,d===null&&(kn=l)):(l=i,(t!==0||(x&3)!==0)&&(yc=!0)),i=d}ms!==0&&ms!==5||Ho(t),kr!==0&&(kr=0)}function Kh(t,s){for(var l=t.suspendedLanes,i=t.pingedLanes,d=t.expirationTimes,x=t.pendingLanes&-62914561;0<x;){var w=31-Rs(x),O=1<<w,Y=d[w];Y===-1?((O&l)===0||(O&i)!==0)&&(d[w]=u0(O,s)):Y<=s&&(t.expiredLanes|=O),x&=~O}if(s=zt,l=lt,l=Hi(t,t===s?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,l===0||t===s&&(wt===2||wt===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&bl(i),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||Xr(t,l)){if(s=l&-l,s===t.callbackPriority)return s;switch(i!==null&&bl(i),Re(l)){case 2:case 8:l=$n;break;case 32:l=Zr;break;case 268435456:l=Yn;break;default:l=Zr}return i=Xh.bind(null,t),l=As(l,i),t.callbackPriority=s,t.callbackNode=l,s}return i!==null&&i!==null&&bl(i),t.callbackPriority=2,t.callbackNode=null,2}function Xh(t,s){if(ms!==0&&ms!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(jc()&&t.callbackNode!==l)return null;var i=lt;return i=Hi(t,t===zt?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(Th(t,i,s),Kh(t,Ds()),t.callbackNode!=null&&t.callbackNode===l?Xh.bind(null,t):null)}function Qh(t,s){if(jc())return null;Th(t,s,!0)}function Pb(){Kb(function(){(bt&6)!==0?As(Fi,Ob):Vh()})}function Ox(){if(kr===0){var t=dn;t===0&&(t=Yr,Yr<<=1,(Yr&261888)===0&&(Yr=256)),kr=t}return kr}function Jh(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Wl(""+t)}function Wh(t,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,t.id&&l.setAttribute("form",t.id),s.parentNode.insertBefore(l,s),t=new FormData(t),l.parentNode.removeChild(l),t}function Bb(t,s,l,i,d){if(s==="submit"&&l&&l.stateNode===d){var x=Jh((d[fs]||null).action),w=i.submitter;w&&(s=(s=w[fs]||null)?Jh(s.formAction):w.getAttribute("formAction"),s!==null&&(x=s,w=null));var O=new $i("action","action",null,i,d);t.push({event:O,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(kr!==0){var Y=w?Wh(d,w):new FormData(d);sx(l,{pending:!0,data:Y,method:d.method,action:x},null,Y)}}else typeof x=="function"&&(O.preventDefault(),Y=w?Wh(d,w):new FormData(d),sx(l,{pending:!0,data:Y,method:d.method,action:x},x,Y))},currentTarget:d}]})}}for(var Px=0;Px<al.length;Px++){var Bx=al[Px],Ub=Bx.toLowerCase(),Fb=Bx[0].toUpperCase()+Bx.slice(1);$s(Ub,"on"+Fb)}$s(pi,"onAnimationEnd"),$s(Fd,"onAnimationIteration"),$s(fi,"onAnimationStart"),$s("dblclick","onDoubleClick"),$s("focusin","onFocus"),$s("focusout","onBlur"),$s(C0,"onTransitionRun"),$s(Hd,"onTransitionStart"),$s(E0,"onTransitionCancel"),$s(cr,"onTransitionEnd"),Xa("onMouseEnter",["mouseout","mouseover"]),Xa("onMouseLeave",["mouseout","mouseover"]),Xa("onPointerEnter",["pointerout","pointerover"]),Xa("onPointerLeave",["pointerout","pointerover"]),yl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yl("onBeforeInput",["compositionend","keypress","textInput","paste"]),yl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Io));function ep(t,s){s=(s&4)!==0;for(var l=0;l<t.length;l++){var i=t[l],d=i.event;i=i.listeners;e:{var x=void 0;if(s)for(var w=i.length-1;0<=w;w--){var O=i[w],Y=O.instance,ne=O.currentTarget;if(O=O.listener,Y!==x&&d.isPropagationStopped())break e;x=O,d.currentTarget=ne;try{x(d)}catch(pe){bi(pe)}d.currentTarget=null,x=Y}else for(w=0;w<i.length;w++){if(O=i[w],Y=O.instance,ne=O.currentTarget,O=O.listener,Y!==x&&d.isPropagationStopped())break e;x=O,d.currentTarget=ne;try{x(d)}catch(pe){bi(pe)}d.currentTarget=null,x=Y}}}}function st(t,s){var l=s[Va];l===void 0&&(l=s[Va]=new Set);var i=t+"__bubble";l.has(i)||(tp(s,t,2,!1),l.add(i))}function Ux(t,s,l){var i=0;s&&(i|=4),tp(l,t,i,s)}var wc="_reactListening"+Math.random().toString(36).slice(2);function Fx(t){if(!t[wc]){t[wc]=!0,jd.forEach(function(l){l!=="selectionchange"&&(Hb.has(l)||Ux(l,!1,t),Ux(l,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[wc]||(s[wc]=!0,Ux("selectionchange",!1,s))}}function tp(t,s,l,i){switch(zp(s)){case 2:var d=pg;break;case 8:d=fg;break;default:d=tm}l=d.bind(null,s,l,t),d=void 0,!ai||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),i?d!==void 0?t.addEventListener(s,l,{capture:!0,passive:d}):t.addEventListener(s,l,!0):d!==void 0?t.addEventListener(s,l,{passive:d}):t.addEventListener(s,l,!1)}function Hx(t,s,l,i,d){var x=i;if((s&1)===0&&(s&2)===0&&i!==null)e:for(;;){if(i===null)return;var w=i.tag;if(w===3||w===4){var O=i.stateNode.containerInfo;if(O===d)break;if(w===4)for(w=i.return;w!==null;){var Y=w.tag;if((Y===3||Y===4)&&w.stateNode.containerInfo===d)return;w=w.return}for(;O!==null;){if(w=Nl(O),w===null)return;if(Y=w.tag,Y===5||Y===6||Y===26||Y===27){i=x=w;continue e}O=O.parentNode}}i=i.return}lo(function(){var ne=x,pe=si(l),ve=[];e:{var ce=Id.get(t);if(ce!==void 0){var me=$i,Ee=t;switch(t){case"keypress":if(li(l)===0)break e;case"keydown":case"keyup":me=Ed;break;case"focusin":Ee="focus",me=no;break;case"focusout":Ee="blur",me=no;break;case"beforeblur":case"afterblur":me=no;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=wd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=f0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=N0;break;case pi:case Fd:case fi:me=oo;break;case cr:me=Td;break;case"scroll":case"scrollend":me=at;break;case"wheel":me=Sl;break;case"copy":case"cut":case"paste":me=ba;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=Ad;break;case"toggle":case"beforetoggle":me=ni}var Fe=(s&4)!==0,Et=!Fe&&(t==="scroll"||t==="scrollend"),te=Fe?ce!==null?ce+"Capture":null:ce;Fe=[];for(var X=ne,ie;X!==null;){var be=X;if(ie=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||ie===null||te===null||(be=kl(X,te),be!=null&&Fe.push(Go(X,be,ie))),Et)break;X=X.return}0<Fe.length&&(ce=new me(ce,Ee,null,l,pe),ve.push({event:ce,listeners:Fe}))}}if((s&7)===0){e:{if(ce=t==="mouseover"||t==="pointerover",me=t==="mouseout"||t==="pointerout",ce&&l!==Zi&&(Ee=l.relatedTarget||l.fromElement)&&(Nl(Ee)||Ee[jl]))break e;if((me||ce)&&(ce=pe.window===pe?pe:(ce=pe.ownerDocument)?ce.defaultView||ce.parentWindow:window,me?(Ee=l.relatedTarget||l.toElement,me=ne,Ee=Ee?Nl(Ee):null,Ee!==null&&(Et=v(Ee),Fe=Ee.tag,Ee!==Et||Fe!==5&&Fe!==27&&Fe!==6)&&(Ee=null)):(me=null,Ee=ne),me!==Ee)){if(Fe=wd,be="onMouseLeave",te="onMouseEnter",X="mouse",(t==="pointerout"||t==="pointerover")&&(Fe=Ad,be="onPointerLeave",te="onPointerEnter",X="pointer"),Et=me==null?ce:Ka(me),ie=Ee==null?ce:Ka(Ee),ce=new Fe(be,X+"leave",me,l,pe),ce.target=Et,ce.relatedTarget=ie,be=null,Nl(pe)===ne&&(Fe=new Fe(te,X+"enter",Ee,l,pe),Fe.target=ie,Fe.relatedTarget=Et,be=Fe),Et=be,me&&Ee)t:{for(Fe=Ib,te=me,X=Ee,ie=0,be=te;be;be=Fe(be))ie++;be=0;for(var Pe=X;Pe;Pe=Fe(Pe))be++;for(;0<ie-be;)te=Fe(te),ie--;for(;0<be-ie;)X=Fe(X),be--;for(;ie--;){if(te===X||X!==null&&te===X.alternate){Fe=te;break t}te=Fe(te),X=Fe(X)}Fe=null}else Fe=null;me!==null&&sp(ve,ce,me,Fe,!1),Ee!==null&&Et!==null&&sp(ve,Et,Ee,Fe,!0)}}e:{if(ce=ne?Ka(ne):window,me=ce.nodeName&&ce.nodeName.toLowerCase(),me==="select"||me==="input"&&ce.type==="file")var ut=xi;else if(ga(ce))if(Rd)ut=S0;else{ut=_0;var De=Oa}else me=ce.nodeName,!me||me.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?ne&&ti(ne.elementType)&&(ut=xi):ut=ir;if(ut&&(ut=ut(t,ne))){Dd(ve,ut,l,pe);break e}De&&De(t,ce,ne),t==="focusout"&&ne&&ce.type==="number"&&ne.memoizedProps.value!=null&&Ma(ce,"number",ce.value)}switch(De=ne?Ka(ne):window,t){case"focusin":(ga(De)||De.contentEditable==="true")&&(tl=De,tn=ne,hi=null);break;case"focusout":hi=tn=tl=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,Bd(ve,l,pe);break;case"selectionchange":if(en)break;case"keydown":case"keyup":Bd(ve,l,pe)}var Xe;if(Vi)e:{switch(t){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else ar?Md(t,l)&&(rt="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(rt="onCompositionStart");rt&&(Ki&&l.locale!=="ko"&&(ar||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&ar&&(Xe=Ja()):(fa=pe,_l="value"in fa?fa.value:fa.textContent,ar=!0)),De=kc(ne,rt),0<De.length&&(rt=new co(rt,t,null,l,pe),ve.push({event:rt,listeners:De}),Xe?rt.data=Xe:(Xe=ho(l),Xe!==null&&(rt.data=Xe)))),(Xe=w0?ia(t,l):lr(t,l))&&(rt=kc(ne,"onBeforeInput"),0<rt.length&&(De=new co("onBeforeInput","beforeinput",null,l,pe),ve.push({event:De,listeners:rt}),De.data=Xe)),Bb(ve,t,ne,l,pe)}ep(ve,s)})}function Go(t,s,l){return{instance:t,listener:s,currentTarget:l}}function kc(t,s){for(var l=s+"Capture",i=[];t!==null;){var d=t,x=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||x===null||(d=kl(t,l),d!=null&&i.unshift(Go(t,d,x)),d=kl(t,s),d!=null&&i.push(Go(t,d,x))),t.tag===3)return i;t=t.return}return[]}function Ib(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function sp(t,s,l,i,d){for(var x=s._reactName,w=[];l!==null&&l!==i;){var O=l,Y=O.alternate,ne=O.stateNode;if(O=O.tag,Y!==null&&Y===i)break;O!==5&&O!==26&&O!==27||ne===null||(Y=ne,d?(ne=kl(l,x),ne!=null&&w.unshift(Go(l,ne,Y))):d||(ne=kl(l,x),ne!=null&&w.push(Go(l,ne,Y)))),l=l.return}w.length!==0&&t.push({event:s,listeners:w})}var Gb=/\r\n?/g,qb=/\u0000|\uFFFD/g;function ap(t){return(typeof t=="string"?t:""+t).replace(Gb,`
`).replace(qb,"")}function lp(t,s){return s=ap(s),ap(t)===s}function Ct(t,s,l,i,d,x){switch(l){case"children":typeof i=="string"?s==="body"||s==="textarea"&&i===""||pa(t,i):(typeof i=="number"||typeof i=="bigint")&&s!=="body"&&pa(t,""+i);break;case"className":_t(t,"class",i);break;case"tabIndex":_t(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":_t(t,l,i);break;case"style":Gi(t,i,x);break;case"data":if(s!=="object"){_t(t,"data",i);break}case"src":case"href":if(i===""&&(s!=="a"||l!=="href")){t.removeAttribute(l);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(l);break}i=Wl(""+i),t.setAttribute(l,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(l==="formAction"?(s!=="input"&&Ct(t,s,"name",d.name,d,null),Ct(t,s,"formEncType",d.formEncType,d,null),Ct(t,s,"formMethod",d.formMethod,d,null),Ct(t,s,"formTarget",d.formTarget,d,null)):(Ct(t,s,"encType",d.encType,d,null),Ct(t,s,"method",d.method,d,null),Ct(t,s,"target",d.target,d,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(l);break}i=Wl(""+i),t.setAttribute(l,i);break;case"onClick":i!=null&&(t.onclick=qs);break;case"onScroll":i!=null&&st("scroll",t);break;case"onScrollEnd":i!=null&&st("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(u(61));if(l=i.__html,l!=null){if(d.children!=null)throw Error(u(60));t.innerHTML=l}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}l=Wl(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(l,""+i):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":i===!0?t.setAttribute(l,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(l,i):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(l,i):t.removeAttribute(l);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(l):t.setAttribute(l,i);break;case"popover":st("beforetoggle",t),st("toggle",t),We(t,"popover",i);break;case"xlinkActuate":Gs(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Gs(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Gs(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Gs(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Gs(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Gs(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Gs(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Gs(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Gs(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":We(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=qi.get(l)||l,We(t,l,i))}}function Ix(t,s,l,i,d,x){switch(l){case"style":Gi(t,i,x);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(u(61));if(l=i.__html,l!=null){if(d.children!=null)throw Error(u(60));t.innerHTML=l}}break;case"children":typeof i=="string"?pa(t,i):(typeof i=="number"||typeof i=="bigint")&&pa(t,""+i);break;case"onScroll":i!=null&&st("scroll",t);break;case"onScrollEnd":i!=null&&st("scrollend",t);break;case"onClick":i!=null&&(t.onclick=qs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nd.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(d=l.endsWith("Capture"),s=l.slice(2,d?l.length-7:void 0),x=t[fs]||null,x=x!=null?x[l]:null,typeof x=="function"&&t.removeEventListener(s,x,d),typeof i=="function")){typeof x!="function"&&x!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(s,i,d);break e}l in t?t[l]=i:i===!0?t.setAttribute(l,""):We(t,l,i)}}}function _s(t,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",t),st("load",t);var i=!1,d=!1,x;for(x in l)if(l.hasOwnProperty(x)){var w=l[x];if(w!=null)switch(x){case"src":i=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,s));default:Ct(t,s,x,w,l,null)}}d&&Ct(t,s,"srcSet",l.srcSet,l,null),i&&Ct(t,s,"src",l.src,l,null);return;case"input":st("invalid",t);var O=x=w=d=null,Y=null,ne=null;for(i in l)if(l.hasOwnProperty(i)){var pe=l[i];if(pe!=null)switch(i){case"name":d=pe;break;case"type":w=pe;break;case"checked":Y=pe;break;case"defaultChecked":ne=pe;break;case"value":x=pe;break;case"defaultValue":O=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(u(137,s));break;default:Ct(t,s,i,pe,l,null)}}ei(t,x,O,Y,ne,w,d,!1);return;case"select":st("invalid",t),i=w=x=null;for(d in l)if(l.hasOwnProperty(d)&&(O=l[d],O!=null))switch(d){case"value":x=O;break;case"defaultValue":w=O;break;case"multiple":i=O;default:Ct(t,s,d,O,l,null)}s=x,l=w,t.multiple=!!i,s!=null?At(t,!!i,s,!1):l!=null&&At(t,!!i,l,!0);return;case"textarea":st("invalid",t),x=d=i=null;for(w in l)if(l.hasOwnProperty(w)&&(O=l[w],O!=null))switch(w){case"value":i=O;break;case"defaultValue":d=O;break;case"children":x=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(u(91));break;default:Ct(t,s,w,O,l,null)}Ql(t,i,d,x);return;case"option":for(Y in l)l.hasOwnProperty(Y)&&(i=l[Y],i!=null)&&(Y==="selected"?t.selected=i&&typeof i!="function"&&typeof i!="symbol":Ct(t,s,Y,i,l,null));return;case"dialog":st("beforetoggle",t),st("toggle",t),st("cancel",t),st("close",t);break;case"iframe":case"object":st("load",t);break;case"video":case"audio":for(i=0;i<Io.length;i++)st(Io[i],t);break;case"image":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"embed":case"source":case"link":st("error",t),st("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in l)if(l.hasOwnProperty(ne)&&(i=l[ne],i!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,s));default:Ct(t,s,ne,i,l,null)}return;default:if(ti(s)){for(pe in l)l.hasOwnProperty(pe)&&(i=l[pe],i!==void 0&&Ix(t,s,pe,i,l,void 0));return}}for(O in l)l.hasOwnProperty(O)&&(i=l[O],i!=null&&Ct(t,s,O,i,l,null))}function Zb(t,s,l,i){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,x=null,w=null,O=null,Y=null,ne=null,pe=null;for(me in l){var ve=l[me];if(l.hasOwnProperty(me)&&ve!=null)switch(me){case"checked":break;case"value":break;case"defaultValue":Y=ve;default:i.hasOwnProperty(me)||Ct(t,s,me,null,i,ve)}}for(var ce in i){var me=i[ce];if(ve=l[ce],i.hasOwnProperty(ce)&&(me!=null||ve!=null))switch(ce){case"type":x=me;break;case"name":d=me;break;case"checked":ne=me;break;case"defaultChecked":pe=me;break;case"value":w=me;break;case"defaultValue":O=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(u(137,s));break;default:me!==ve&&Ct(t,s,ce,me,i,ve)}}to(t,w,O,Y,ne,pe,x,d);return;case"select":me=w=O=ce=null;for(x in l)if(Y=l[x],l.hasOwnProperty(x)&&Y!=null)switch(x){case"value":break;case"multiple":me=Y;default:i.hasOwnProperty(x)||Ct(t,s,x,null,i,Y)}for(d in i)if(x=i[d],Y=l[d],i.hasOwnProperty(d)&&(x!=null||Y!=null))switch(d){case"value":ce=x;break;case"defaultValue":O=x;break;case"multiple":w=x;default:x!==Y&&Ct(t,s,d,x,i,Y)}s=O,l=w,i=me,ce!=null?At(t,!!l,ce,!1):!!i!=!!l&&(s!=null?At(t,!!l,s,!0):At(t,!!l,l?[]:"",!1));return;case"textarea":me=ce=null;for(O in l)if(d=l[O],l.hasOwnProperty(O)&&d!=null&&!i.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:Ct(t,s,O,null,i,d)}for(w in i)if(d=i[w],x=l[w],i.hasOwnProperty(w)&&(d!=null||x!=null))switch(w){case"value":ce=d;break;case"defaultValue":me=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(u(91));break;default:d!==x&&Ct(t,s,w,d,i,x)}Qa(t,ce,me);return;case"option":for(var Ee in l)ce=l[Ee],l.hasOwnProperty(Ee)&&ce!=null&&!i.hasOwnProperty(Ee)&&(Ee==="selected"?t.selected=!1:Ct(t,s,Ee,null,i,ce));for(Y in i)ce=i[Y],me=l[Y],i.hasOwnProperty(Y)&&ce!==me&&(ce!=null||me!=null)&&(Y==="selected"?t.selected=ce&&typeof ce!="function"&&typeof ce!="symbol":Ct(t,s,Y,ce,i,me));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in l)ce=l[Fe],l.hasOwnProperty(Fe)&&ce!=null&&!i.hasOwnProperty(Fe)&&Ct(t,s,Fe,null,i,ce);for(ne in i)if(ce=i[ne],me=l[ne],i.hasOwnProperty(ne)&&ce!==me&&(ce!=null||me!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(u(137,s));break;default:Ct(t,s,ne,ce,i,me)}return;default:if(ti(s)){for(var Et in l)ce=l[Et],l.hasOwnProperty(Et)&&ce!==void 0&&!i.hasOwnProperty(Et)&&Ix(t,s,Et,void 0,i,ce);for(pe in i)ce=i[pe],me=l[pe],!i.hasOwnProperty(pe)||ce===me||ce===void 0&&me===void 0||Ix(t,s,pe,ce,i,me);return}}for(var te in l)ce=l[te],l.hasOwnProperty(te)&&ce!=null&&!i.hasOwnProperty(te)&&Ct(t,s,te,null,i,ce);for(ve in i)ce=i[ve],me=l[ve],!i.hasOwnProperty(ve)||ce===me||ce==null&&me==null||Ct(t,s,ve,ce,i,me)}function rp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $b(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,l=performance.getEntriesByType("resource"),i=0;i<l.length;i++){var d=l[i],x=d.transferSize,w=d.initiatorType,O=d.duration;if(x&&O&&rp(w)){for(w=0,O=d.responseEnd,i+=1;i<l.length;i++){var Y=l[i],ne=Y.startTime;if(ne>O)break;var pe=Y.transferSize,ve=Y.initiatorType;pe&&rp(ve)&&(Y=Y.responseEnd,w+=pe*(Y<O?1:(O-ne)/(Y-ne)))}if(--i,s+=8*(x+w)/(d.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Gx=null,qx=null;function _c(t){return t.nodeType===9?t:t.ownerDocument}function ip(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function np(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Zx(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var $x=null;function Yb(){var t=window.event;return t&&t.type==="popstate"?t===$x?!1:($x=t,!0):($x=null,!1)}var op=typeof setTimeout=="function"?setTimeout:void 0,Vb=typeof clearTimeout=="function"?clearTimeout:void 0,dp=typeof Promise=="function"?Promise:void 0,Kb=typeof queueMicrotask=="function"?queueMicrotask:typeof dp<"u"?function(t){return dp.resolve(null).then(t).catch(Xb)}:op;function Xb(t){setTimeout(function(){throw t})}function _r(t){return t==="head"}function cp(t,s){var l=s,i=0;do{var d=l.nextSibling;if(t.removeChild(l),d&&d.nodeType===8)if(l=d.data,l==="/$"||l==="/&"){if(i===0){t.removeChild(d),En(s);return}i--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")i++;else if(l==="html")qo(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,qo(l);for(var x=l.firstChild;x;){var w=x.nextSibling,O=x.nodeName;x[Qr]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&x.rel.toLowerCase()==="stylesheet"||l.removeChild(x),x=w}}else l==="body"&&qo(t.ownerDocument.body);l=d}while(l);En(s)}function xp(t,s){var l=t;t=0;do{var i=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),i&&i.nodeType===8)if(l=i.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=i}while(l)}function Yx(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Yx(l),Qn(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function Qb(t,s,l,i){for(;t.nodeType===1;){var d=l;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[Qr])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(x=t.getAttribute("rel"),x==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(x!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(x=t.getAttribute("src"),(x!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&x&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var x=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===x)return t}else return t;if(t=ka(t.nextSibling),t===null)break}return null}function Jb(t,s,l){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=ka(t.nextSibling),t===null))return null;return t}function mp(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=ka(t.nextSibling),t===null))return null;return t}function Vx(t){return t.data==="$?"||t.data==="$~"}function Kx(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Wb(t,s){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||l.readyState!=="loading")s();else{var i=function(){s(),l.removeEventListener("DOMContentLoaded",i)};l.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function ka(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Xx=null;function up(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(s===0)return ka(t.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}t=t.nextSibling}return null}function hp(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return t;s--}else l!=="/$"&&l!=="/&"||s++}t=t.previousSibling}return null}function pp(t,s,l){switch(s=_c(l),t){case"html":if(t=s.documentElement,!t)throw Error(u(452));return t;case"head":if(t=s.head,!t)throw Error(u(453));return t;case"body":if(t=s.body,!t)throw Error(u(454));return t;default:throw Error(u(451))}}function qo(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Qn(t)}var _a=new Map,fp=new Set;function Sc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Hl=le.d;le.d={f:eg,r:tg,D:sg,C:ag,L:lg,m:rg,X:ng,S:ig,M:og};function eg(){var t=Hl.f(),s=bc();return t||s}function tg(t){var s=Vl(t);s!==null&&s.tag===5&&s.type==="form"?Mu(s):Hl.r(t)}var _n=typeof document>"u"?null:document;function bp(t,s,l){var i=_n;if(i&&typeof s=="string"&&s){var d=Pt(s);d='link[rel="'+t+'"][href="'+d+'"]',typeof l=="string"&&(d+='[crossorigin="'+l+'"]'),fp.has(d)||(fp.add(d),t={rel:t,crossOrigin:l,href:s},i.querySelector(d)===null&&(s=i.createElement("link"),_s(s,"link",t),as(s),i.head.appendChild(s)))}}function sg(t){Hl.D(t),bp("dns-prefetch",t,null)}function ag(t,s){Hl.C(t,s),bp("preconnect",t,s)}function lg(t,s,l){Hl.L(t,s,l);var i=_n;if(i&&t&&s){var d='link[rel="preload"][as="'+Pt(s)+'"]';s==="image"&&l&&l.imageSrcSet?(d+='[imagesrcset="'+Pt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(d+='[imagesizes="'+Pt(l.imageSizes)+'"]')):d+='[href="'+Pt(t)+'"]';var x=d;switch(s){case"style":x=Sn(t);break;case"script":x=Cn(t)}_a.has(x)||(t=h({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:t,as:s},l),_a.set(x,t),i.querySelector(d)!==null||s==="style"&&i.querySelector(Zo(x))||s==="script"&&i.querySelector($o(x))||(s=i.createElement("link"),_s(s,"link",t),as(s),i.head.appendChild(s)))}}function rg(t,s){Hl.m(t,s);var l=_n;if(l&&t){var i=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+Pt(i)+'"][href="'+Pt(t)+'"]',x=d;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Cn(t)}if(!_a.has(x)&&(t=h({rel:"modulepreload",href:t},s),_a.set(x,t),l.querySelector(d)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector($o(x)))return}i=l.createElement("link"),_s(i,"link",t),as(i),l.head.appendChild(i)}}}function ig(t,s,l){Hl.S(t,s,l);var i=_n;if(i&&t){var d=Kl(i).hoistableStyles,x=Sn(t);s=s||"default";var w=d.get(x);if(!w){var O={loading:0,preload:null};if(w=i.querySelector(Zo(x)))O.loading=5;else{t=h({rel:"stylesheet",href:t,"data-precedence":s},l),(l=_a.get(x))&&Qx(t,l);var Y=w=i.createElement("link");as(Y),_s(Y,"link",t),Y._p=new Promise(function(ne,pe){Y.onload=ne,Y.onerror=pe}),Y.addEventListener("load",function(){O.loading|=1}),Y.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Cc(w,s,i)}w={type:"stylesheet",instance:w,count:1,state:O},d.set(x,w)}}}function ng(t,s){Hl.X(t,s);var l=_n;if(l&&t){var i=Kl(l).hoistableScripts,d=Cn(t),x=i.get(d);x||(x=l.querySelector($o(d)),x||(t=h({src:t,async:!0},s),(s=_a.get(d))&&Jx(t,s),x=l.createElement("script"),as(x),_s(x,"link",t),l.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},i.set(d,x))}}function og(t,s){Hl.M(t,s);var l=_n;if(l&&t){var i=Kl(l).hoistableScripts,d=Cn(t),x=i.get(d);x||(x=l.querySelector($o(d)),x||(t=h({src:t,async:!0,type:"module"},s),(s=_a.get(d))&&Jx(t,s),x=l.createElement("script"),as(x),_s(x,"link",t),l.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},i.set(d,x))}}function gp(t,s,l,i){var d=(d=Me.current)?Sc(d):null;if(!d)throw Error(u(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Sn(l.href),l=Kl(d).hoistableStyles,i=l.get(s),i||(i={type:"style",instance:null,count:0,state:null},l.set(s,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=Sn(l.href);var x=Kl(d).hoistableStyles,w=x.get(t);if(w||(d=d.ownerDocument||d,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(t,w),(x=d.querySelector(Zo(t)))&&!x._p&&(w.instance=x,w.state.loading=5),_a.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},_a.set(t,l),x||dg(d,t,l,w.state))),s&&i===null)throw Error(u(528,""));return w}if(s&&i!==null)throw Error(u(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Cn(l),l=Kl(d).hoistableScripts,i=l.get(s),i||(i={type:"script",instance:null,count:0,state:null},l.set(s,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,t))}}function Sn(t){return'href="'+Pt(t)+'"'}function Zo(t){return'link[rel="stylesheet"]['+t+"]"}function vp(t){return h({},t,{"data-precedence":t.precedence,precedence:null})}function dg(t,s,l,i){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?i.loading=1:(s=t.createElement("link"),i.preload=s,s.addEventListener("load",function(){return i.loading|=1}),s.addEventListener("error",function(){return i.loading|=2}),_s(s,"link",l),as(s),t.head.appendChild(s))}function Cn(t){return'[src="'+Pt(t)+'"]'}function $o(t){return"script[async]"+t}function jp(t,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var i=t.querySelector('style[data-href~="'+Pt(l.href)+'"]');if(i)return s.instance=i,as(i),i;var d=h({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),as(i),_s(i,"style",d),Cc(i,l.precedence,t),s.instance=i;case"stylesheet":d=Sn(l.href);var x=t.querySelector(Zo(d));if(x)return s.state.loading|=4,s.instance=x,as(x),x;i=vp(l),(d=_a.get(d))&&Qx(i,d),x=(t.ownerDocument||t).createElement("link"),as(x);var w=x;return w._p=new Promise(function(O,Y){w.onload=O,w.onerror=Y}),_s(x,"link",i),s.state.loading|=4,Cc(x,l.precedence,t),s.instance=x;case"script":return x=Cn(l.src),(d=t.querySelector($o(x)))?(s.instance=d,as(d),d):(i=l,(d=_a.get(x))&&(i=h({},l),Jx(i,d)),t=t.ownerDocument||t,d=t.createElement("script"),as(d),_s(d,"link",i),t.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(u(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(i=s.instance,s.state.loading|=4,Cc(i,l.precedence,t));return s.instance}function Cc(t,s,l){for(var i=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=i.length?i[i.length-1]:null,x=d,w=0;w<i.length;w++){var O=i[w];if(O.dataset.precedence===s)x=O;else if(x!==d)break}x?x.parentNode.insertBefore(t,x.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(t,s.firstChild))}function Qx(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Jx(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Ec=null;function Np(t,s,l){if(Ec===null){var i=new Map,d=Ec=new Map;d.set(l,i)}else d=Ec,i=d.get(l),i||(i=new Map,d.set(l,i));if(i.has(t))return i;for(i.set(t,null),l=l.getElementsByTagName(t),d=0;d<l.length;d++){var x=l[d];if(!(x[Qr]||x[ss]||t==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var w=x.getAttribute(s)||"";w=t+w;var O=i.get(w);O?O.push(x):i.set(w,[x])}}return i}function yp(t,s,l){t=t.ownerDocument||t,t.head.insertBefore(l,s==="title"?t.querySelector("head > title"):null)}function cg(t,s,l){if(l===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(t=s.disabled,typeof s.precedence=="string"&&t==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function wp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function xg(t,s,l,i){if(l.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var d=Sn(i.href),x=s.querySelector(Zo(d));if(x){s=x._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Ac.bind(t),s.then(t,t)),l.state.loading|=4,l.instance=x,as(x);return}x=s.ownerDocument||s,i=vp(i),(d=_a.get(d))&&Qx(i,d),x=x.createElement("link"),as(x);var w=x;w._p=new Promise(function(O,Y){w.onload=O,w.onerror=Y}),_s(x,"link",i),l.instance=x}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=Ac.bind(t),s.addEventListener("load",l),s.addEventListener("error",l))}}var Wx=0;function mg(t,s){return t.stylesheets&&t.count===0&&Tc(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var i=setTimeout(function(){if(t.stylesheets&&Tc(t,t.stylesheets),t.unsuspend){var x=t.unsuspend;t.unsuspend=null,x()}},6e4+s);0<t.imgBytes&&Wx===0&&(Wx=62500*$b());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Tc(t,t.stylesheets),t.unsuspend)){var x=t.unsuspend;t.unsuspend=null,x()}},(t.imgBytes>Wx?50:800)+s);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(d)}}:null}function Ac(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Tc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var zc=null;function Tc(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,zc=new Map,s.forEach(ug,t),zc=null,Ac.call(t))}function ug(t,s){if(!(s.state.loading&4)){var l=zc.get(t);if(l)var i=l.get(null);else{l=new Map,zc.set(t,l);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<d.length;x++){var w=d[x];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),i=w)}i&&l.set(null,i)}d=s.instance,w=d.getAttribute("data-precedence"),x=l.get(w)||i,x===i&&l.set(null,d),l.set(w,d),this.count++,i=Ac.bind(this),d.addEventListener("load",i),d.addEventListener("error",i),x?x.parentNode.insertBefore(d,x.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),s.state.loading|=4}}var Yo={$$typeof:y,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function hg(t,s,l,i,d,x,w,O,Y){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vn(0),this.hiddenUpdates=Vn(null),this.identifierPrefix=i,this.onUncaughtError=d,this.onCaughtError=x,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function kp(t,s,l,i,d,x,w,O,Y,ne,pe,ve){return t=new hg(t,s,l,w,Y,ne,pe,ve,O),s=1,x===!0&&(s|=24),x=Ts(3,null,null,s),t.current=x,x.stateNode=t,s=L0(),s.refCount++,t.pooledCache=s,s.refCount++,x.memoizedState={element:i,isDehydrated:l,cache:s},O0(x),t}function _p(t){return t?(t=Cl,t):Cl}function Sp(t,s,l,i,d,x){d=_p(d),i.context===null?i.context=d:i.pendingContext=d,i=hr(s),i.payload={element:l},x=x===void 0?null:x,x!==null&&(i.callback=x),l=pr(t,i,s),l!==null&&(Ws(l,t,s),_o(l,t,s))}function Cp(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<s?l:s}}function em(t,s){Cp(t,s),(t=t.alternate)&&Cp(t,s)}function Ep(t){if(t.tag===13||t.tag===31){var s=Na(t,67108864);s!==null&&Ws(s,t,67108864),em(t,67108864)}}function Ap(t){if(t.tag===13||t.tag===31){var s=xa();s=Is(s);var l=Na(t,s);l!==null&&Ws(l,t,s),em(t,s)}}var Lc=!0;function pg(t,s,l,i){var d=B.T;B.T=null;var x=le.p;try{le.p=2,tm(t,s,l,i)}finally{le.p=x,B.T=d}}function fg(t,s,l,i){var d=B.T;B.T=null;var x=le.p;try{le.p=8,tm(t,s,l,i)}finally{le.p=x,B.T=d}}function tm(t,s,l,i){if(Lc){var d=sm(i);if(d===null)Hx(t,s,i,Mc,l),Tp(t,i);else if(gg(d,t,s,l,i))i.stopPropagation();else if(Tp(t,i),s&4&&-1<bg.indexOf(t)){for(;d!==null;){var x=Vl(d);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var w=gl(x.pendingLanes);if(w!==0){var O=x;for(O.pendingLanes|=2,O.entangledLanes|=2;w;){var Y=1<<31-Rs(w);O.entanglements[1]|=Y,w&=~Y}dl(x),(bt&6)===0&&(pc=Ds()+500,Ho(0))}}break;case 31:case 13:O=Na(x,2),O!==null&&Ws(O,x,2),bc(),em(x,2)}if(x=sm(i),x===null&&Hx(t,s,i,Mc,l),x===d)break;d=x}d!==null&&i.stopPropagation()}else Hx(t,s,i,null,l)}}function sm(t){return t=si(t),am(t)}var Mc=null;function am(t){if(Mc=null,t=Nl(t),t!==null){var s=v(t);if(s===null)t=null;else{var l=s.tag;if(l===13){if(t=j(s),t!==null)return t;t=null}else if(l===31){if(t=S(s),t!==null)return t;t=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Mc=t,null}function zp(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(o0()){case Fi:return 2;case $n:return 8;case Zr:case d0:return 32;case Yn:return 268435456;default:return 32}default:return 32}}var lm=!1,Sr=null,Cr=null,Er=null,Vo=new Map,Ko=new Map,Ar=[],bg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tp(t,s){switch(t){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":Vo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ko.delete(s.pointerId)}}function Xo(t,s,l,i,d,x){return t===null||t.nativeEvent!==x?(t={blockedOn:s,domEventName:l,eventSystemFlags:i,nativeEvent:x,targetContainers:[d]},s!==null&&(s=Vl(s),s!==null&&Ep(s)),t):(t.eventSystemFlags|=i,s=t.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),t)}function gg(t,s,l,i,d){switch(s){case"focusin":return Sr=Xo(Sr,t,s,l,i,d),!0;case"dragenter":return Cr=Xo(Cr,t,s,l,i,d),!0;case"mouseover":return Er=Xo(Er,t,s,l,i,d),!0;case"pointerover":var x=d.pointerId;return Vo.set(x,Xo(Vo.get(x)||null,t,s,l,i,d)),!0;case"gotpointercapture":return x=d.pointerId,Ko.set(x,Xo(Ko.get(x)||null,t,s,l,i,d)),!0}return!1}function Lp(t){var s=Nl(t.target);if(s!==null){var l=v(s);if(l!==null){if(s=l.tag,s===13){if(s=j(l),s!==null){t.blockedOn=s,Xn(t.priority,function(){Ap(l)});return}}else if(s===31){if(s=S(l),s!==null){t.blockedOn=s,Xn(t.priority,function(){Ap(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dc(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var l=sm(t.nativeEvent);if(l===null){l=t.nativeEvent;var i=new l.constructor(l.type,l);Zi=i,l.target.dispatchEvent(i),Zi=null}else return s=Vl(l),s!==null&&Ep(s),t.blockedOn=l,!1;s.shift()}return!0}function Mp(t,s,l){Dc(t)&&l.delete(s)}function vg(){lm=!1,Sr!==null&&Dc(Sr)&&(Sr=null),Cr!==null&&Dc(Cr)&&(Cr=null),Er!==null&&Dc(Er)&&(Er=null),Vo.forEach(Mp),Ko.forEach(Mp)}function Rc(t,s){t.blockedOn===s&&(t.blockedOn=null,lm||(lm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,vg)))}var Oc=null;function Dp(t){Oc!==t&&(Oc=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Oc===t&&(Oc=null);for(var s=0;s<t.length;s+=3){var l=t[s],i=t[s+1],d=t[s+2];if(typeof i!="function"){if(am(i||l)===null)continue;break}var x=Vl(l);x!==null&&(t.splice(s,3),s-=3,sx(x,{pending:!0,data:d,method:l.method,action:i},i,d))}}))}function En(t){function s(Y){return Rc(Y,t)}Sr!==null&&Rc(Sr,t),Cr!==null&&Rc(Cr,t),Er!==null&&Rc(Er,t),Vo.forEach(s),Ko.forEach(s);for(var l=0;l<Ar.length;l++){var i=Ar[l];i.blockedOn===t&&(i.blockedOn=null)}for(;0<Ar.length&&(l=Ar[0],l.blockedOn===null);)Lp(l),l.blockedOn===null&&Ar.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(i=0;i<l.length;i+=3){var d=l[i],x=l[i+1],w=d[fs]||null;if(typeof x=="function")w||Dp(l);else if(w){var O=null;if(x&&x.hasAttribute("formAction")){if(d=x,w=x[fs]||null)O=w.formAction;else if(am(d)!==null)continue}else O=w.action;typeof O=="function"?l[i+1]=O:(l.splice(i,3),i-=3),Dp(l)}}}function Rp(){function t(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(w){return d=w})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),i||setTimeout(l,20)}function l(){if(!i&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function rm(t){this._internalRoot=t}Pc.prototype.render=rm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(u(409));var l=s.current,i=xa();Sp(l,i,t,s,null,null)},Pc.prototype.unmount=rm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Sp(t.current,2,null,t,null,null),bc(),s[jl]=null}};function Pc(t){this._internalRoot=t}Pc.prototype.unstable_scheduleHydration=function(t){if(t){var s=Kn();t={blockedOn:null,target:t,priority:s};for(var l=0;l<Ar.length&&s!==0&&s<Ar[l].priority;l++);Ar.splice(l,0,t),l===0&&Lp(t)}};var Op=m.version;if(Op!=="19.2.3")throw Error(u(527,Op,"19.2.3"));le.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(u(188)):(t=Object.keys(t).join(","),Error(u(268,t)));return t=E(s),t=t!==null?z(t):null,t=t===null?null:t.stateNode,t};var jg={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{Yl=Bc.inject(jg),Ns=Bc}catch{}}return Qo.createRoot=function(t,s){if(!g(t))throw Error(u(299));var l=!1,i="",d=Gu,x=qu,w=Zu;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(x=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError)),s=kp(t,1,!1,null,null,l,i,null,d,x,w,Rp),t[jl]=s.current,Fx(t),new rm(s)},Qo.hydrateRoot=function(t,s,l){if(!g(t))throw Error(u(299));var i=!1,d="",x=Gu,w=qu,O=Zu,Y=null;return l!=null&&(l.unstable_strictMode===!0&&(i=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(O=l.onRecoverableError),l.formState!==void 0&&(Y=l.formState)),s=kp(t,1,!0,s,l??null,i,d,Y,x,w,O,Rp),s.context=_p(null),l=s.current,i=xa(),i=Is(i),d=hr(i),d.callback=null,pr(l,d,i),l=i,s.current.lanes=l,vl(s,l),dl(s),t[jl]=s.current,Fx(t),new Pc(s)},Qo.version="19.2.3",Qo}var qp;function av(){if(qp)return nm.exports;qp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(m){console.error(m)}}return n(),nm.exports=sv(),nm.exports}var lv=av();const rv=(n,m)=>{const c=new Array(n.length+m.length);for(let u=0;u<n.length;u++)c[u]=n[u];for(let u=0;u<m.length;u++)c[n.length+u]=m[u];return c},iv=(n,m)=>({classGroupId:n,validator:m}),Cf=(n=new Map,m=null,c)=>({nextPart:n,validators:m,classGroupId:c}),t0="-",Zp=[],nv="arbitrary..",ov=n=>{const m=cv(n),{conflictingClassGroups:c,conflictingClassGroupModifiers:u}=n;return{getClassGroupId:j=>{if(j.startsWith("[")&&j.endsWith("]"))return dv(j);const S=j.split(t0),_=S[0]===""&&S.length>1?1:0;return Ef(S,_,m)},getConflictingClassGroupIds:(j,S)=>{if(S){const _=u[j],E=c[j];return _?E?rv(E,_):_:E||Zp}return c[j]||Zp}}},Ef=(n,m,c)=>{if(n.length-m===0)return c.classGroupId;const g=n[m],v=c.nextPart.get(g);if(v){const E=Ef(n,m+1,v);if(E)return E}const j=c.validators;if(j===null)return;const S=m===0?n.join(t0):n.slice(m).join(t0),_=j.length;for(let E=0;E<_;E++){const z=j[E];if(z.validator(S))return z.classGroupId}},dv=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const m=n.slice(1,-1),c=m.indexOf(":"),u=m.slice(0,c);return u?nv+u:void 0})(),cv=n=>{const{theme:m,classGroups:c}=n;return xv(c,m)},xv=(n,m)=>{const c=Cf();for(const u in n){const g=n[u];Mm(g,c,u,m)}return c},Mm=(n,m,c,u)=>{const g=n.length;for(let v=0;v<g;v++){const j=n[v];mv(j,m,c,u)}},mv=(n,m,c,u)=>{if(typeof n=="string"){uv(n,m,c);return}if(typeof n=="function"){hv(n,m,c,u);return}pv(n,m,c,u)},uv=(n,m,c)=>{const u=n===""?m:Af(m,n);u.classGroupId=c},hv=(n,m,c,u)=>{if(fv(n)){Mm(n(u),m,c,u);return}m.validators===null&&(m.validators=[]),m.validators.push(iv(c,n))},pv=(n,m,c,u)=>{const g=Object.entries(n),v=g.length;for(let j=0;j<v;j++){const[S,_]=g[j];Mm(_,Af(m,S),c,u)}},Af=(n,m)=>{let c=n;const u=m.split(t0),g=u.length;for(let v=0;v<g;v++){const j=u[v];let S=c.nextPart.get(j);S||(S=Cf(),c.nextPart.set(j,S)),c=S}return c},fv=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,bv=n=>{if(n<1)return{get:()=>{},set:()=>{}};let m=0,c=Object.create(null),u=Object.create(null);const g=(v,j)=>{c[v]=j,m++,m>n&&(m=0,u=c,c=Object.create(null))};return{get(v){let j=c[v];if(j!==void 0)return j;if((j=u[v])!==void 0)return g(v,j),j},set(v,j){v in c?c[v]=j:g(v,j)}}},ym="!",$p=":",gv=[],Yp=(n,m,c,u,g)=>({modifiers:n,hasImportantModifier:m,baseClassName:c,maybePostfixModifierPosition:u,isExternal:g}),vv=n=>{const{prefix:m,experimentalParseClassName:c}=n;let u=g=>{const v=[];let j=0,S=0,_=0,E;const z=g.length;for(let M=0;M<z;M++){const k=g[M];if(j===0&&S===0){if(k===$p){v.push(g.slice(_,M)),_=M+1;continue}if(k==="/"){E=M;continue}}k==="["?j++:k==="]"?j--:k==="("?S++:k===")"&&S--}const h=v.length===0?g:g.slice(_);let b=h,C=!1;h.endsWith(ym)?(b=h.slice(0,-1),C=!0):h.startsWith(ym)&&(b=h.slice(1),C=!0);const A=E&&E>_?E-_:void 0;return Yp(v,C,b,A)};if(m){const g=m+$p,v=u;u=j=>j.startsWith(g)?v(j.slice(g.length)):Yp(gv,!1,j,void 0,!0)}if(c){const g=u;u=v=>c({className:v,parseClassName:g})}return u},jv=n=>{const m=new Map;return n.orderSensitiveModifiers.forEach((c,u)=>{m.set(c,1e6+u)}),c=>{const u=[];let g=[];for(let v=0;v<c.length;v++){const j=c[v],S=j[0]==="[",_=m.has(j);S||_?(g.length>0&&(g.sort(),u.push(...g),g=[]),u.push(j)):g.push(j)}return g.length>0&&(g.sort(),u.push(...g)),u}},Nv=n=>({cache:bv(n.cacheSize),parseClassName:vv(n),sortModifiers:jv(n),...ov(n)}),yv=/\s+/,wv=(n,m)=>{const{parseClassName:c,getClassGroupId:u,getConflictingClassGroupIds:g,sortModifiers:v}=m,j=[],S=n.trim().split(yv);let _="";for(let E=S.length-1;E>=0;E-=1){const z=S[E],{isExternal:h,modifiers:b,hasImportantModifier:C,baseClassName:A,maybePostfixModifierPosition:M}=c(z);if(h){_=z+(_.length>0?" "+_:_);continue}let k=!!M,T=u(k?A.substring(0,M):A);if(!T){if(!k){_=z+(_.length>0?" "+_:_);continue}if(T=u(A),!T){_=z+(_.length>0?" "+_:_);continue}k=!1}const D=b.length===0?"":b.length===1?b[0]:v(b).join(":"),y=C?D+ym:D,P=y+T;if(j.indexOf(P)>-1)continue;j.push(P);const U=g(T,k);for(let F=0;F<U.length;++F){const Z=U[F];j.push(y+Z)}_=z+(_.length>0?" "+_:_)}return _},kv=(...n)=>{let m=0,c,u,g="";for(;m<n.length;)(c=n[m++])&&(u=zf(c))&&(g&&(g+=" "),g+=u);return g},zf=n=>{if(typeof n=="string")return n;let m,c="";for(let u=0;u<n.length;u++)n[u]&&(m=zf(n[u]))&&(c&&(c+=" "),c+=m);return c},_v=(n,...m)=>{let c,u,g,v;const j=_=>{const E=m.reduce((z,h)=>h(z),n());return c=Nv(E),u=c.cache.get,g=c.cache.set,v=S,S(_)},S=_=>{const E=u(_);if(E)return E;const z=wv(_,c);return g(_,z),z};return v=j,(..._)=>v(kv(..._))},Sv=[],us=n=>{const m=c=>c[n]||Sv;return m.isThemeGetter=!0,m},Tf=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Lf=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Cv=/^\d+\/\d+$/,Ev=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Av=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,zv=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Tv=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Lv=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,An=n=>Cv.test(n),Je=n=>!!n&&!Number.isNaN(Number(n)),Lr=n=>!!n&&Number.isInteger(Number(n)),cm=n=>n.endsWith("%")&&Je(n.slice(0,-1)),Il=n=>Ev.test(n),Mv=()=>!0,Dv=n=>Av.test(n)&&!zv.test(n),Mf=()=>!1,Rv=n=>Tv.test(n),Ov=n=>Lv.test(n),Pv=n=>!ze(n)&&!Te(n),Bv=n=>Gn(n,Of,Mf),ze=n=>Tf.test(n),Li=n=>Gn(n,Pf,Dv),xm=n=>Gn(n,Gv,Je),Vp=n=>Gn(n,Df,Mf),Uv=n=>Gn(n,Rf,Ov),Fc=n=>Gn(n,Bf,Rv),Te=n=>Lf.test(n),Jo=n=>qn(n,Pf),Fv=n=>qn(n,qv),Kp=n=>qn(n,Df),Hv=n=>qn(n,Of),Iv=n=>qn(n,Rf),Hc=n=>qn(n,Bf,!0),Gn=(n,m,c)=>{const u=Tf.exec(n);return u?u[1]?m(u[1]):c(u[2]):!1},qn=(n,m,c=!1)=>{const u=Lf.exec(n);return u?u[1]?m(u[1]):c:!1},Df=n=>n==="position"||n==="percentage",Rf=n=>n==="image"||n==="url",Of=n=>n==="length"||n==="size"||n==="bg-size",Pf=n=>n==="length",Gv=n=>n==="number",qv=n=>n==="family-name",Bf=n=>n==="shadow",Zv=()=>{const n=us("color"),m=us("font"),c=us("text"),u=us("font-weight"),g=us("tracking"),v=us("leading"),j=us("breakpoint"),S=us("container"),_=us("spacing"),E=us("radius"),z=us("shadow"),h=us("inset-shadow"),b=us("text-shadow"),C=us("drop-shadow"),A=us("blur"),M=us("perspective"),k=us("aspect"),T=us("ease"),D=us("animate"),y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],U=()=>[...P(),Te,ze],F=()=>["auto","hidden","clip","visible","scroll"],Z=()=>["auto","contain","none"],ae=()=>[Te,ze,_],H=()=>[An,"full","auto",...ae()],xe=()=>[Lr,"none","subgrid",Te,ze],I=()=>["auto",{span:["full",Lr,Te,ze]},Lr,Te,ze],ee=()=>[Lr,"auto",Te,ze],$=()=>["auto","min","max","fr",Te,ze],Q=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],re=()=>["start","end","center","stretch","center-safe","end-safe"],B=()=>["auto",...ae()],le=()=>[An,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...ae()],G=()=>[n,Te,ze],J=()=>[...P(),Kp,Vp,{position:[Te,ze]}],oe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ue=()=>["auto","cover","contain",Hv,Bv,{size:[Te,ze]}],ke=()=>[cm,Jo,Li],ye=()=>["","none","full",E,Te,ze],we=()=>["",Je,Jo,Li],Se=()=>["solid","dashed","dotted","double"],Me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Be=()=>[Je,cm,Kp,Vp],Ue=()=>["","none",A,Te,ze],Rt=()=>["none",Je,Te,ze],K=()=>["none",Je,Te,ze],Ne=()=>[Je,Te,ze],Ae=()=>[An,"full",...ae()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Il],breakpoint:[Il],color:[Mv],container:[Il],"drop-shadow":[Il],ease:["in","out","in-out"],font:[Pv],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Il],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Il],shadow:[Il],spacing:["px",Je],text:[Il],"text-shadow":[Il],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",An,ze,Te,k]}],container:["container"],columns:[{columns:[Je,ze,Te,S]}],"break-after":[{"break-after":y()}],"break-before":[{"break-before":y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:U()}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:Z()}],"overscroll-x":[{"overscroll-x":Z()}],"overscroll-y":[{"overscroll-y":Z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:H()}],"inset-x":[{"inset-x":H()}],"inset-y":[{"inset-y":H()}],start:[{start:H()}],end:[{end:H()}],top:[{top:H()}],right:[{right:H()}],bottom:[{bottom:H()}],left:[{left:H()}],visibility:["visible","invisible","collapse"],z:[{z:[Lr,"auto",Te,ze]}],basis:[{basis:[An,"full","auto",S,...ae()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Je,An,"auto","initial","none",ze]}],grow:[{grow:["",Je,Te,ze]}],shrink:[{shrink:["",Je,Te,ze]}],order:[{order:[Lr,"first","last","none",Te,ze]}],"grid-cols":[{"grid-cols":xe()}],"col-start-end":[{col:I()}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":xe()}],"row-start-end":[{row:I()}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":$()}],"auto-rows":[{"auto-rows":$()}],gap:[{gap:ae()}],"gap-x":[{"gap-x":ae()}],"gap-y":[{"gap-y":ae()}],"justify-content":[{justify:[...Q(),"normal"]}],"justify-items":[{"justify-items":[...re(),"normal"]}],"justify-self":[{"justify-self":["auto",...re()]}],"align-content":[{content:["normal",...Q()]}],"align-items":[{items:[...re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...re(),{baseline:["","last"]}]}],"place-content":[{"place-content":Q()}],"place-items":[{"place-items":[...re(),"baseline"]}],"place-self":[{"place-self":["auto",...re()]}],p:[{p:ae()}],px:[{px:ae()}],py:[{py:ae()}],ps:[{ps:ae()}],pe:[{pe:ae()}],pt:[{pt:ae()}],pr:[{pr:ae()}],pb:[{pb:ae()}],pl:[{pl:ae()}],m:[{m:B()}],mx:[{mx:B()}],my:[{my:B()}],ms:[{ms:B()}],me:[{me:B()}],mt:[{mt:B()}],mr:[{mr:B()}],mb:[{mb:B()}],ml:[{ml:B()}],"space-x":[{"space-x":ae()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":ae()}],"space-y-reverse":["space-y-reverse"],size:[{size:le()}],w:[{w:[S,"screen",...le()]}],"min-w":[{"min-w":[S,"screen","none",...le()]}],"max-w":[{"max-w":[S,"screen","none","prose",{screen:[j]},...le()]}],h:[{h:["screen","lh",...le()]}],"min-h":[{"min-h":["screen","lh","none",...le()]}],"max-h":[{"max-h":["screen","lh",...le()]}],"font-size":[{text:["base",c,Jo,Li]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[u,Te,xm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",cm,ze]}],"font-family":[{font:[Fv,ze,m]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[g,Te,ze]}],"line-clamp":[{"line-clamp":[Je,"none",Te,xm]}],leading:[{leading:[v,...ae()]}],"list-image":[{"list-image":["none",Te,ze]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Te,ze]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:G()}],"text-color":[{text:G()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Se(),"wavy"]}],"text-decoration-thickness":[{decoration:[Je,"from-font","auto",Te,Li]}],"text-decoration-color":[{decoration:G()}],"underline-offset":[{"underline-offset":[Je,"auto",Te,ze]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ae()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Te,ze]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Te,ze]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:J()}],"bg-repeat":[{bg:oe()}],"bg-size":[{bg:ue()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Lr,Te,ze],radial:["",Te,ze],conic:[Lr,Te,ze]},Iv,Uv]}],"bg-color":[{bg:G()}],"gradient-from-pos":[{from:ke()}],"gradient-via-pos":[{via:ke()}],"gradient-to-pos":[{to:ke()}],"gradient-from":[{from:G()}],"gradient-via":[{via:G()}],"gradient-to":[{to:G()}],rounded:[{rounded:ye()}],"rounded-s":[{"rounded-s":ye()}],"rounded-e":[{"rounded-e":ye()}],"rounded-t":[{"rounded-t":ye()}],"rounded-r":[{"rounded-r":ye()}],"rounded-b":[{"rounded-b":ye()}],"rounded-l":[{"rounded-l":ye()}],"rounded-ss":[{"rounded-ss":ye()}],"rounded-se":[{"rounded-se":ye()}],"rounded-ee":[{"rounded-ee":ye()}],"rounded-es":[{"rounded-es":ye()}],"rounded-tl":[{"rounded-tl":ye()}],"rounded-tr":[{"rounded-tr":ye()}],"rounded-br":[{"rounded-br":ye()}],"rounded-bl":[{"rounded-bl":ye()}],"border-w":[{border:we()}],"border-w-x":[{"border-x":we()}],"border-w-y":[{"border-y":we()}],"border-w-s":[{"border-s":we()}],"border-w-e":[{"border-e":we()}],"border-w-t":[{"border-t":we()}],"border-w-r":[{"border-r":we()}],"border-w-b":[{"border-b":we()}],"border-w-l":[{"border-l":we()}],"divide-x":[{"divide-x":we()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":we()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Se(),"hidden","none"]}],"divide-style":[{divide:[...Se(),"hidden","none"]}],"border-color":[{border:G()}],"border-color-x":[{"border-x":G()}],"border-color-y":[{"border-y":G()}],"border-color-s":[{"border-s":G()}],"border-color-e":[{"border-e":G()}],"border-color-t":[{"border-t":G()}],"border-color-r":[{"border-r":G()}],"border-color-b":[{"border-b":G()}],"border-color-l":[{"border-l":G()}],"divide-color":[{divide:G()}],"outline-style":[{outline:[...Se(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Je,Te,ze]}],"outline-w":[{outline:["",Je,Jo,Li]}],"outline-color":[{outline:G()}],shadow:[{shadow:["","none",z,Hc,Fc]}],"shadow-color":[{shadow:G()}],"inset-shadow":[{"inset-shadow":["none",h,Hc,Fc]}],"inset-shadow-color":[{"inset-shadow":G()}],"ring-w":[{ring:we()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:G()}],"ring-offset-w":[{"ring-offset":[Je,Li]}],"ring-offset-color":[{"ring-offset":G()}],"inset-ring-w":[{"inset-ring":we()}],"inset-ring-color":[{"inset-ring":G()}],"text-shadow":[{"text-shadow":["none",b,Hc,Fc]}],"text-shadow-color":[{"text-shadow":G()}],opacity:[{opacity:[Je,Te,ze]}],"mix-blend":[{"mix-blend":[...Me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Je]}],"mask-image-linear-from-pos":[{"mask-linear-from":Be()}],"mask-image-linear-to-pos":[{"mask-linear-to":Be()}],"mask-image-linear-from-color":[{"mask-linear-from":G()}],"mask-image-linear-to-color":[{"mask-linear-to":G()}],"mask-image-t-from-pos":[{"mask-t-from":Be()}],"mask-image-t-to-pos":[{"mask-t-to":Be()}],"mask-image-t-from-color":[{"mask-t-from":G()}],"mask-image-t-to-color":[{"mask-t-to":G()}],"mask-image-r-from-pos":[{"mask-r-from":Be()}],"mask-image-r-to-pos":[{"mask-r-to":Be()}],"mask-image-r-from-color":[{"mask-r-from":G()}],"mask-image-r-to-color":[{"mask-r-to":G()}],"mask-image-b-from-pos":[{"mask-b-from":Be()}],"mask-image-b-to-pos":[{"mask-b-to":Be()}],"mask-image-b-from-color":[{"mask-b-from":G()}],"mask-image-b-to-color":[{"mask-b-to":G()}],"mask-image-l-from-pos":[{"mask-l-from":Be()}],"mask-image-l-to-pos":[{"mask-l-to":Be()}],"mask-image-l-from-color":[{"mask-l-from":G()}],"mask-image-l-to-color":[{"mask-l-to":G()}],"mask-image-x-from-pos":[{"mask-x-from":Be()}],"mask-image-x-to-pos":[{"mask-x-to":Be()}],"mask-image-x-from-color":[{"mask-x-from":G()}],"mask-image-x-to-color":[{"mask-x-to":G()}],"mask-image-y-from-pos":[{"mask-y-from":Be()}],"mask-image-y-to-pos":[{"mask-y-to":Be()}],"mask-image-y-from-color":[{"mask-y-from":G()}],"mask-image-y-to-color":[{"mask-y-to":G()}],"mask-image-radial":[{"mask-radial":[Te,ze]}],"mask-image-radial-from-pos":[{"mask-radial-from":Be()}],"mask-image-radial-to-pos":[{"mask-radial-to":Be()}],"mask-image-radial-from-color":[{"mask-radial-from":G()}],"mask-image-radial-to-color":[{"mask-radial-to":G()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":P()}],"mask-image-conic-pos":[{"mask-conic":[Je]}],"mask-image-conic-from-pos":[{"mask-conic-from":Be()}],"mask-image-conic-to-pos":[{"mask-conic-to":Be()}],"mask-image-conic-from-color":[{"mask-conic-from":G()}],"mask-image-conic-to-color":[{"mask-conic-to":G()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:J()}],"mask-repeat":[{mask:oe()}],"mask-size":[{mask:ue()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Te,ze]}],filter:[{filter:["","none",Te,ze]}],blur:[{blur:Ue()}],brightness:[{brightness:[Je,Te,ze]}],contrast:[{contrast:[Je,Te,ze]}],"drop-shadow":[{"drop-shadow":["","none",C,Hc,Fc]}],"drop-shadow-color":[{"drop-shadow":G()}],grayscale:[{grayscale:["",Je,Te,ze]}],"hue-rotate":[{"hue-rotate":[Je,Te,ze]}],invert:[{invert:["",Je,Te,ze]}],saturate:[{saturate:[Je,Te,ze]}],sepia:[{sepia:["",Je,Te,ze]}],"backdrop-filter":[{"backdrop-filter":["","none",Te,ze]}],"backdrop-blur":[{"backdrop-blur":Ue()}],"backdrop-brightness":[{"backdrop-brightness":[Je,Te,ze]}],"backdrop-contrast":[{"backdrop-contrast":[Je,Te,ze]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Je,Te,ze]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Je,Te,ze]}],"backdrop-invert":[{"backdrop-invert":["",Je,Te,ze]}],"backdrop-opacity":[{"backdrop-opacity":[Je,Te,ze]}],"backdrop-saturate":[{"backdrop-saturate":[Je,Te,ze]}],"backdrop-sepia":[{"backdrop-sepia":["",Je,Te,ze]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":ae()}],"border-spacing-x":[{"border-spacing-x":ae()}],"border-spacing-y":[{"border-spacing-y":ae()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Te,ze]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Je,"initial",Te,ze]}],ease:[{ease:["linear","initial",T,Te,ze]}],delay:[{delay:[Je,Te,ze]}],animate:[{animate:["none",D,Te,ze]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[M,Te,ze]}],"perspective-origin":[{"perspective-origin":U()}],rotate:[{rotate:Rt()}],"rotate-x":[{"rotate-x":Rt()}],"rotate-y":[{"rotate-y":Rt()}],"rotate-z":[{"rotate-z":Rt()}],scale:[{scale:K()}],"scale-x":[{"scale-x":K()}],"scale-y":[{"scale-y":K()}],"scale-z":[{"scale-z":K()}],"scale-3d":["scale-3d"],skew:[{skew:Ne()}],"skew-x":[{"skew-x":Ne()}],"skew-y":[{"skew-y":Ne()}],transform:[{transform:[Te,ze,"","none","gpu","cpu"]}],"transform-origin":[{origin:U()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ae()}],"translate-x":[{"translate-x":Ae()}],"translate-y":[{"translate-y":Ae()}],"translate-z":[{"translate-z":Ae()}],"translate-none":["translate-none"],accent:[{accent:G()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:G()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Te,ze]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ae()}],"scroll-mx":[{"scroll-mx":ae()}],"scroll-my":[{"scroll-my":ae()}],"scroll-ms":[{"scroll-ms":ae()}],"scroll-me":[{"scroll-me":ae()}],"scroll-mt":[{"scroll-mt":ae()}],"scroll-mr":[{"scroll-mr":ae()}],"scroll-mb":[{"scroll-mb":ae()}],"scroll-ml":[{"scroll-ml":ae()}],"scroll-p":[{"scroll-p":ae()}],"scroll-px":[{"scroll-px":ae()}],"scroll-py":[{"scroll-py":ae()}],"scroll-ps":[{"scroll-ps":ae()}],"scroll-pe":[{"scroll-pe":ae()}],"scroll-pt":[{"scroll-pt":ae()}],"scroll-pr":[{"scroll-pr":ae()}],"scroll-pb":[{"scroll-pb":ae()}],"scroll-pl":[{"scroll-pl":ae()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Te,ze]}],fill:[{fill:["none",...G()]}],"stroke-w":[{stroke:[Je,Jo,Li,xm]}],stroke:[{stroke:["none",...G()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Uf=_v(Zv),W=js.forwardRef(({className:n,variant:m="primary",size:c="md",isLoading:u,children:g,...v},j)=>{const S={primary:"bg-primary-600 text-white hover:bg-primary-700 shadow-lg shadow-primary-500/30 border-transparent",secondary:"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 border-slate-200 dark:border-slate-700 shadow-sm",ghost:"bg-transparent text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 border-transparent shadow-none",outline:"bg-transparent text-primary-600 dark:text-primary-400 border-primary-600 dark:border-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/10 shadow-none",destructive:"bg-red-600 text-white hover:bg-red-700 shadow-lg shadow-red-500/30 border-transparent"},_={sm:"h-8 px-2.5 text-xs",md:"h-9.5 px-4 text-sm",lg:"h-11 px-6 text-base"};return e.jsxs(he.button,{ref:j,whileTap:{scale:.98},className:Uf("inline-flex items-center justify-center rounded-xl font-medium transition-all focus:outline-none focus:ring-2 focus:ring-primary-500/50 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none border",S[m],_[c],n),disabled:u,...v,children:[u?e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,g]})});W.displayName="Button";const fe=js.forwardRef(({className:n,icon:m,label:c,error:u,...g},v)=>e.jsxs("div",{className:"w-full space-y-2",children:[c&&e.jsx("label",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 ml-1 uppercase tracking-wider",children:c}),e.jsxs("div",{className:"relative",children:[m&&e.jsx("div",{className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500 pointer-events-none",children:e.jsx(m,{size:18})}),e.jsx("input",{ref:v,className:Uf("flex h-9.5 w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 px-3 py-2 text-sm text-slate-900 dark:text-white transition-all placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:bg-white dark:focus:bg-slate-900 focus:border-primary-500 dark:focus:border-primary-500 focus:outline-none focus:ring-4 focus:ring-primary-500/10 dark:focus:ring-primary-500/20 disabled:cursor-not-allowed disabled:opacity-50",m&&"pl-10",u&&"border-red-500 focus:border-red-500 focus:ring-red-500/10",n),...g})]}),u&&e.jsx("p",{className:"text-sm text-red-500 ml-1 animate-in slide-in-from-top-1 fade-in",children:u})]}));fe.displayName="Input";const Ui=({className:n="",collapsed:m=!1})=>{const[c,u]=f.useState(localStorage.getItem("theme")||"dark");f.useEffect(()=>{const S=document.documentElement;c==="dark"||c==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches?S.classList.add("dark"):S.classList.remove("dark"),localStorage.setItem("theme",c)},[c]);const g=()=>{u(c==="light"?"dark":c==="dark"?"auto":"light")},j=c==="light"?xf:c==="dark"?mf:Cg;return e.jsxs("button",{onClick:g,className:`
                relative flex items-center justify-center p-2 rounded-lg transition-all duration-200
                hover:bg-slate-100 dark:hover:bg-slate-800
                text-slate-500 dark:text-slate-400
                hover:text-amber-500 dark:hover:text-amber-400
                ${n}
            `,title:`Current theme: ${c}`,children:[e.jsx(vt,{mode:"wait",initial:!1,children:e.jsx(he.div,{initial:{y:-10,opacity:0},animate:{y:0,opacity:1},exit:{y:10,opacity:0},transition:{duration:.1},children:e.jsx(j,{size:18})},c)}),!m&&e.jsxs("span",{className:"ml-3 text-sm font-medium capitalize lg:hidden",children:[c," Mode"]})]})},Ff=f.createContext(),$v=({children:n})=>{const[m,c]=f.useState(()=>{const E=localStorage.getItem("school_config");return E?JSON.parse(E):{school_name:"EduManage",school_code:"EDU",school_email:"",school_phone:"",school_address:"",school_logo:null}}),[u,g]=f.useState(!0),v=f.useCallback(async()=>{try{const E=await V.get("/api/config/"),z=E.data.config||E.data;c(z),localStorage.setItem("school_config",JSON.stringify(z))}catch(E){console.error("Error fetching school config:",E)}finally{g(!1)}},[]);f.useEffect(()=>{v()},[v]),f.useEffect(()=>{const E=()=>v();return window.addEventListener("login",E),()=>window.removeEventListener("login",E)},[v]);const j=E=>{c(z=>{const h={...z,...E};return E.school_logo&&(h.school_logo=E.school_logo),localStorage.setItem("school_config",JSON.stringify(h)),h})},S=f.useCallback(E=>{if(!m||!m.subscription)return!1;const z=m.subscription.plan||"Basic";return{STUDENT_MANAGEMENT:["Basic","Standard","Enterprise","Trial"],ACADEMIC_MANAGEMENT:["Basic","Standard","Enterprise","Trial"],ATTENDANCE:["Basic","Standard","Enterprise","Trial"],SCHEDULE:["Basic","Standard","Enterprise","Trial"],FINANCE_MANAGEMENT:["Basic","Standard","Enterprise","Trial"],HR_MANAGEMENT:["Standard","Enterprise","Trial"],COMMUNICATION:["Enterprise","Trial"],TRANSPORT_MANAGEMENT:["Enterprise","Trial"],FOOD_MANAGEMENT:["Enterprise","Trial"]}[E]?.includes(z)||!1},[m]),_=f.useCallback(()=>{if(!m||!m.subscription||m.subscription.status==="Active")return!1;if(m.subscription.status==="Trial"){const E=new Date(m.subscription.trial_end);return new Date>E}return m.subscription.status==="Expired"},[m]);return e.jsx(Ff.Provider,{value:{config:m,fetchConfig:v,updateConfig:j,hasFeature:S,isLocked:_,loading:u},children:n})},Nt=()=>{const n=f.useContext(Ff);if(!n)throw new Error("useSchool must be used within a SchoolProvider");return n},Us=({icon:n,label:m,path:c,onClick:u})=>{const g=Ya(),v=g.pathname===c||g.pathname.startsWith(`${c}/`);return e.jsxs("button",{onClick:u,className:`w-full flex items-center space-x-3 px-3 py-2.5 rounded-xl transition-all duration-200 ${v?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-medium shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-slate-200"}`,children:[e.jsx(n,{size:18,className:v?"text-primary-600 dark:text-primary-400":"text-slate-400 dark:text-slate-500"}),e.jsx("span",{className:"text-sm",children:m}),v&&e.jsx("div",{className:"ml-auto w-1 h-1 rounded-full bg-primary-600 dark:bg-primary-400"})]})},Yv=({isOpen:n,onClose:m,user:c,onLogout:u})=>{const g=Le(),{config:v,hasFeature:j}=Nt(),S=_=>{g(_),m&&m()};return e.jsxs(e.Fragment,{children:[n&&e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:m}),e.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-slate-900 border-r border-slate-200 dark:border-slate-800 transform transition-transform duration-300 ease-[cubic-bezier(0.23,1,0.32,1)]
        ${n?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        flex flex-col h-screen lg:shadow-none
      `,children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-primary-600 to-primary-700 rounded-lg flex items-center justify-center shadow-lg shadow-primary-500/30 text-white overflow-hidden",children:v.school_logo?e.jsx("img",{src:v.school_logo,alt:"School Logo",className:"h-full w-full object-cover"}):e.jsx(ta,{size:20})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-lg text-slate-900 dark:text-white tracking-tight block leading-tight",children:v.school_name}),e.jsx("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold tracking-wide uppercase",children:"Admin Portal"})]})]}),e.jsx("button",{className:"lg:hidden p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",onClick:m,children:e.jsx(Ve,{size:20,className:"text-slate-500 dark:text-slate-400"})})]}),e.jsxs("div",{className:"p-4 space-y-1 overflow-y-auto flex-1 custom-scrollbar",children:[e.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-slate-400 dark:text-slate-500 uppercase tracking-wider",children:"Main Menu"}),e.jsx(Us,{icon:Ie,label:"Overview",path:"/dashboard",onClick:()=>S("/dashboard")}),j("STUDENT_MANAGEMENT")&&e.jsx(Us,{icon:ta,label:"Students",path:"/students",onClick:()=>S("/students")}),j("ACADEMIC_MANAGEMENT")&&e.jsxs(e.Fragment,{children:[e.jsx(Us,{icon:Lt,label:"Academics",path:"/academics",onClick:()=>S("/academics")}),e.jsx(Us,{icon:ul,label:"Academic Management",path:"/academic-management",onClick:()=>S("/academic-management")})]}),j("STUDENT_MANAGEMENT")&&e.jsx(Us,{icon:Ie,label:"Teachers",path:"/teachers",onClick:()=>S("/teachers")}),j("SCHEDULE")&&e.jsx(Us,{icon:Ze,label:"Schedule",path:"/schedule",onClick:()=>S("/schedule")}),j("HR_MANAGEMENT")&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-4 py-2 mt-6 text-xs font-semibold text-slate-400 dark:text-slate-500 uppercase tracking-wider text-[10px]",children:"HR Management"}),e.jsx(Us,{icon:Mn,label:"Staff",path:"/hr/staff",onClick:()=>S("/hr/staff")}),e.jsx(Us,{icon:It,label:"Salaries",path:"/hr/salaries",onClick:()=>S("/finance/salaries")}),e.jsx(Us,{icon:uf,label:"Approvals",path:"/hr/approvals",onClick:()=>S("/hr/approvals")}),e.jsx(Us,{icon:Ie,label:"Supervisors",path:"/hr/supervisors",onClick:()=>S("/hr/supervisors")})]}),e.jsx("div",{className:"px-4 py-2 mt-6 text-xs font-semibold text-slate-400 dark:text-slate-500 uppercase tracking-wider text-[10px]",children:"Management"}),j("COMMUNICATION")&&e.jsx(Us,{icon:Jc,label:"Communication",path:"/communication",onClick:()=>S("/communication")}),j("FINANCE_MANAGEMENT")&&e.jsx(Us,{icon:it,label:"Finance",path:"/finance",onClick:()=>S("/finance")}),e.jsx(Us,{icon:It,label:"Subscription",path:"/subscription",onClick:()=>S("/subscription")}),e.jsx(Us,{icon:Pn,label:"Settings",path:"/settings",onClick:()=>S("/settings")}),c?.is_superuser&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-4 py-2 mt-6 text-xs font-semibold text-rose-500 dark:text-rose-400 uppercase tracking-wider text-[10px]",children:"Super Admin"}),e.jsx(Us,{icon:Mt,label:"Platform Admin",path:"/ultimate-control-center",onClick:()=>S("/ultimate-control-center")})]})]}),v.subscription?.status==="Trial"&&e.jsxs("div",{className:"mx-4 mb-4 p-4 rounded-2xl bg-gradient-to-br from-blue-600 to-indigo-700 text-white shadow-lg shadow-blue-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider opacity-80",children:"Free Trial"}),e.jsx(ql,{size:14,className:"text-yellow-400 fill-yellow-400"})]}),e.jsxs("p",{className:"text-sm font-bold mb-1",children:[v.subscription?.plan," Edition"]}),e.jsx("div",{className:"h-1.5 w-full bg-white/20 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-white rounded-full transition-all duration-1000",style:{width:`${Math.max(0,Math.min(100,(new Date(v.subscription.trial_end)-new Date)/(10080*60*1e3)*100))}%`}})}),e.jsxs("p",{className:"text-[10px] mt-2 font-medium opacity-90",children:[Math.ceil((new Date(v.subscription.trial_end)-new Date)/(1e3*60*60*24))," days remaining"]})]}),e.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4 p-2 bg-white dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-800 shadow-sm",children:[e.jsxs("div",{className:"h-10 w-10 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-700 dark:text-primary-400 font-bold border-2 border-white dark:border-slate-800 shadow-sm",children:[c.first_name?.[0],c.last_name?.[0]]}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 capitalize truncate",children:c.role||"Administrator"})}),e.jsx(Ui,{})]}),e.jsxs(W,{onClick:u,variant:"ghost",className:"w-full justify-start text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-700 dark:hover:text-red-300 hover:border-red-100 dark:hover:border-red-900/30 border border-transparent",children:[e.jsx(Fr,{size:18,className:"mr-2"}),"Sign Out"]})]})]})]})},Zn=()=>{const n=Le();return e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-slate-950/80 backdrop-blur-md p-4",children:e.jsxs("div",{className:"w-full max-w-lg bg-white dark:bg-slate-900 rounded-[3rem] shadow-2xl border border-white/10 overflow-hidden text-center p-8 sm:p-12",children:[e.jsx("div",{className:"w-20 h-20 rounded-3xl bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 flex items-center justify-center mx-auto mb-8 animate-bounce",children:e.jsx(Tt,{size:40})}),e.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-4 tracking-tight",children:"Trial Period Expired"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8 font-medium leading-relaxed",children:"Your 7-day free trial has come to an end. To continue managing your institution and access all features, please upgrade to a premium plan."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(W,{className:"w-full py-4 text-base bg-indigo-600 hover:bg-indigo-500 shadow-xl shadow-indigo-600/20",onClick:()=>n("/subscription"),children:[e.jsx(It,{size:18,className:"mr-2"}),"Upgrade Now",e.jsx(Za,{size:18,className:"ml-2"})]}),e.jsxs("div",{className:"p-4 rounded-2xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-800 flex items-start gap-3 text-left",children:[e.jsx(ot,{className:"text-amber-500 shrink-0 mt-0.5",size:18}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium leading-relaxed",children:"Your data is safe! You can still view some records in read-only mode, but all management actions are locked until a subscription is active."})]})]}),e.jsx("p",{className:"mt-8 text-xs text-slate-400 underline cursor-pointer hover:text-slate-600 dark:hover:text-slate-300",onClick:()=>window.location.reload(),children:"Already upgraded? Refresh page"})]})})},Vv=()=>{const[n,m]=f.useState(!1),[c,u]=f.useState(""),[g,v]=f.useState([]),[j,S]=f.useState(!1),_=f.useRef(null),E=Le(),z=Ya(),{isLocked:h}=Nt(),b=JSON.parse(localStorage.getItem("user")||"{}"),C=h(),A=z.pathname==="/subscription",M=()=>{localStorage.removeItem("user"),E("/login")};f.useEffect(()=>{const y=setTimeout(async()=>{if(c.length>=2)try{const P=await V.get("/api/search/",{params:{q:c}});v(P.data.results||[]),S(!0)}catch(P){console.error("Search error:",P)}else v([]),S(!1)},300);return()=>clearTimeout(y)},[c]),f.useEffect(()=>{const y=P=>{_.current&&!_.current.contains(P.target)&&S(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const k=y=>{E(y),S(!1),u("")},T=y=>{switch(y){case"student":return e.jsx(Qe,{size:16,className:"text-blue-500 dark:text-blue-400"});case"teacher":return e.jsx(ta,{size:16,className:"text-green-500 dark:text-green-400"});case"staff":return e.jsx(Qe,{size:16,className:"text-indigo-500 dark:text-indigo-400"});case"subject":return e.jsx(Lt,{size:16,className:"text-violet-500 dark:text-violet-400"});default:return e.jsx(Qe,{size:16,className:"text-slate-500 dark:text-slate-400"})}},D=y=>({student:"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400",teacher:"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-400",staff:"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/20 dark:text-indigo-400",subject:"bg-violet-50 text-violet-700 dark:bg-violet-900/20 dark:text-violet-400"})[y]||"bg-slate-50 text-slate-700 dark:bg-slate-800 dark:text-slate-400";return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex overflow-hidden transition-colors duration-200",children:[C&&!A&&e.jsx(Zn,{}),e.jsx(Yv,{isOpen:n,onClose:()=>m(!1),user:b,onLogout:M}),e.jsxs("div",{className:"flex-1 flex flex-col h-screen overflow-hidden relative ml-0 lg:ml-72",children:[e.jsxs("header",{className:"bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 sticky top-0 z-30 px-6 py-3 flex justify-between items-center h-16 transition-colors duration-200",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("button",{className:"lg:hidden p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg text-slate-600 dark:text-slate-400 transition-colors",onClick:()=>m(!0),children:e.jsx(Hr,{size:24})})}),e.jsxs("div",{className:"flex items-center space-x-3 md:space-x-6",children:[e.jsxs("div",{className:"hidden md:flex relative",ref:_,children:[e.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 dark:text-slate-500 pointer-events-none z-10"}),e.jsx("input",{type:"text",placeholder:"Search students, teachers...",value:c,onChange:y=>u(y.target.value),onFocus:()=>g?.length>0&&S(!0),className:"pl-9 pr-4 py-2 bg-slate-100 dark:bg-slate-800 border-transparent focus:bg-white dark:focus:bg-slate-900 focus:ring-2 focus:ring-primary-100 dark:focus:ring-primary-900/50 focus:border-primary-300 dark:focus:border-primary-700 rounded-xl text-sm transition-all w-64 text-slate-900 dark:text-white placeholder-slate-500 dark:placeholder-slate-500"}),j&&g?.length>0&&e.jsx("div",{className:"absolute top-full mt-2 w-96 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-800 overflow-hidden z-50",children:e.jsx("div",{className:"p-2 max-h-96 overflow-y-auto custom-scrollbar",children:g.map((y,P)=>e.jsxs("button",{onClick:()=>k(y.url),className:"w-full flex items-center gap-3 p-3 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg transition-colors text-left",children:[y.avatar?e.jsx("img",{src:y.avatar,alt:y.title,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:T(y.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white text-sm truncate",children:y.title}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${D(y.type)}`,children:y.type})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:y.subtitle})]})]},`${y.type}-${y.id}`))})})]}),e.jsxs("button",{className:"relative p-2 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-500 dark:text-slate-400 transition-colors",children:[e.jsx(rd,{size:20}),e.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 rounded-full bg-red-500 border-2 border-white dark:border-slate-900"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800 p-1.5 rounded-xl transition-colors",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-700 dark:text-primary-400 font-bold border border-primary-200 dark:border-primary-800",children:b.first_name?.[0]}),e.jsx(xl,{size:16,className:"text-slate-400 dark:text-slate-500"})]})]})]}),e.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-slate-50 dark:bg-slate-900 scroll-smooth",children:e.jsx(Sa,{})})]})]})},Kv=({feature:n,requiredPlan:m})=>{const c=Le(),u={Standard:{icon:Wc,color:"blue",price:"2,499"},Enterprise:{icon:ad,color:"violet",price:"3,499"}},g=u[m]||u.Standard;return g.icon,e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[70vh] p-8 text-center",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"w-24 h-24 rounded-[2rem] bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-400",children:e.jsx(Tt,{size:40})}),e.jsx("div",{className:"absolute -bottom-2 -right-2 w-10 h-10 rounded-2xl bg-amber-500 flex items-center justify-center text-white shadow-lg border-4 border-white dark:border-slate-900",children:e.jsx(ad,{size:16})})]}),e.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-4 tracking-tight",children:"Upgrade Required"}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 max-w-md mx-auto mb-10 font-medium leading-relaxed",children:["The ",e.jsx("span",{className:"text-slate-900 dark:text-white font-bold",children:n})," module is not available in your current plan. Upgrade to the ",e.jsxs("span",{className:`text-${g.color}-600 dark:text-${g.color}-400 font-bold`,children:[m," Edition"]})," to unlock this and many more powerful features."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full max-w-md",children:[e.jsxs(W,{variant:"outline",onClick:()=>c(-1),className:"flex-1 rounded-2xl py-4",children:[e.jsx(fl,{size:18,className:"mr-2"}),"Go Back"]}),e.jsx(W,{onClick:()=>c("/subscription"),className:`flex-1 rounded-2xl py-4 bg-${g.color}-600 hover:bg-${g.color}-500 shadow-xl shadow-${g.color}-600/20`,children:"Upgrade Now"})]}),e.jsxs("div",{className:"mt-12 grid grid-cols-1 sm:grid-cols-3 gap-6 w-full max-w-2xl opacity-50 grayscale hover:opacity-100 hover:grayscale-0 transition-all duration-500",children:[e.jsxs("div",{className:"p-4 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900",children:[e.jsx(ql,{className:"text-emerald-500 mb-2",size:20}),e.jsx("p",{className:"text-xs font-bold text-slate-900 dark:text-white tracking-tight",children:"Basic"})]}),e.jsxs("div",{className:"p-4 rounded-2xl border border-blue-200 dark:border-blue-800 bg-blue-50/10 dark:bg-blue-900/10",children:[e.jsx(Wc,{className:"text-blue-500 mb-2",size:20}),e.jsx("p",{className:"text-xs font-bold text-slate-900 dark:text-white tracking-tight",children:"Standard"})]}),e.jsxs("div",{className:"p-4 rounded-2xl border border-violet-200 dark:border-violet-800 bg-violet-50/10 dark:bg-violet-900/10",children:[e.jsx(ad,{className:"text-violet-500 mb-2",size:20}),e.jsx("p",{className:"text-xs font-bold text-slate-900 dark:text-white tracking-tight",children:"Enterprise"})]})]})]})},Wo=({title:n,value:m,subtext:c,icon:u,colorClass:g,trend:v,onClick:j})=>e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`p-4 rounded-2xl transition-all ${j?"cursor-pointer hover:bg-slate-100 dark:hover:bg-white/5":""}`,onClick:j,children:[e.jsxs("div",{className:"flex justify-center md:justify-between items-center md:items-start w-full mb-3",children:[e.jsx("div",{className:`p-2.5 rounded-xl shadow-lg ${g} shadow-${g.split("-")[1]}-500/20`,children:e.jsx(u,{size:18,className:"text-white"})}),v!==void 0&&e.jsxs("div",{className:`hidden md:flex items-center space-x-1 px-3 py-1.5 rounded-full text-xs font-black tracking-tighter ${v>=0?"text-emerald-500 bg-emerald-500/10":"text-rose-500 bg-rose-500/10"}`,children:[v>=0?e.jsx(Dt,{size:14}):e.jsx(Ca,{size:14}),e.jsxs("span",{children:[Math.abs(v),"%"]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-[10px] font-black uppercase tracking-widest",children:n}),e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white mt-1 tracking-tight",children:m}),e.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-[10px] font-medium mt-0.5",children:c})]}),v!==void 0&&e.jsxs("div",{className:`flex md:hidden items-center space-x-1 px-2 py-1 rounded-lg text-xs font-medium mt-2 ${v>=0?"text-green-600 bg-green-50 dark:bg-green-900/30":"text-red-600 bg-red-50 dark:bg-red-900/30"}`,children:[v>=0?e.jsx(Dt,{size:14}):e.jsx(Ca,{size:14}),e.jsxs("span",{children:[Math.abs(v),"%"]})]})]}),Xv=()=>{const n=Le(),{config:m,hasFeature:c}=Nt(),[u,g]=f.useState({}),[v,j]=f.useState([]),[S,_]=f.useState([]),[E,z]=f.useState(!0),h=JSON.parse(localStorage.getItem("user")||"{}");if(f.useEffect(()=>{(async()=>{u||z(!0);try{const A=await V.get("/api/dashboard/");g(A.data.stats||{});const M=A?.data?.chart_data;if(M?.labels&&M?.revenue){const k=M.labels.map((T,D)=>({name:T,revenue:M.revenue[D]||0}));j(k)}else j([]);_(A?.data?.recent_payments||[])}catch(A){console.error("Error fetching dashboard data:",A),g({}),j([]),_([])}finally{z(!1)}})()},[]),E&&!u)return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});const b=()=>{const C=new Date().getHours();return C<12?"Good Morning":C<18?"Good Afternoon":"Good Evening"};return e.jsxs("div",{className:"p-4 max-w-7xl mx-auto space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-xl p-4 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg font-bold mb-0.5",children:[b(),", ",h.first_name||"Admin","! "]}),e.jsxs("p",{className:"text-primary-100 text-xs",children:["Here's what's happening with ",m.school_name," today"]})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-xl",children:[e.jsx(dt,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[e.jsx(Wo,{title:"Total Students",value:u?.total_students||0,subtext:`${u?.new_students||0} joined this month`,icon:Ie,colorClass:"bg-blue-500",onClick:()=>n("/students")}),c("FINANCE_MANAGEMENT")?e.jsx(Wo,{title:"Total Revenue",value:`KES ${(u?.total_revenue||0).toLocaleString()}`,subtext:"Total fees collected",icon:it,colorClass:"bg-emerald-500",onClick:()=>n("/finance")}):e.jsx(Wo,{title:"Total Revenue",value:e.jsx(Tt,{size:28,className:"text-slate-400 mt-1"}),subtext:"Standard plan required",icon:it,colorClass:"bg-slate-400",onClick:()=>n("/subscription")}),e.jsx(Wo,{title:"Teaching Staff",value:u?.total_teachers||0,subtext:"Active teachers",icon:ta,colorClass:"bg-violet-500",onClick:()=>n("/teachers")}),e.jsx(Wo,{title:"Attendance Rate",value:`${u?.attendance_rate||0}%`,subtext:"Today's attendance",icon:Ze,colorClass:"bg-amber-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white/50 dark:bg-slate-900/50 p-4 rounded-2xl border border-transparent relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white tracking-tight uppercase",children:"Revenue Analytics"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Monthly fee collection trends"})]}),e.jsxs("select",{className:"bg-slate-100 dark:bg-slate-800 border-none rounded-xl text-sm px-4 py-2 text-slate-600 dark:text-slate-300 focus:ring-2 focus:ring-primary-100 focus:outline-none font-bold",children:[e.jsx("option",{children:"Last 6 Months"}),e.jsx("option",{children:"This Year"})]})]}),c("FINANCE_MANAGEMENT")?e.jsx("div",{className:"h-80 w-full min-h-[320px]",children:e.jsx(es,{width:"99%",height:320,minHeight:320,children:e.jsxs(Bi,{data:v.length>0?v:[{name:"N/A",revenue:0}],children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})}),e.jsx(pl,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9",strokeOpacity:.1}),e.jsx(Ea,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:12},dy:10}),e.jsx(Aa,{axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:12},tickFormatter:C=>`${(C/1e3).toFixed(0)}k`}),e.jsx(ts,{contentStyle:{borderRadius:"20px",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)",padding:"16px",backgroundColor:"rgba(15, 23, 42, 0.9)",backdropFilter:"blur(8px)",color:"#fff"},formatter:C=>[`KES ${C.toLocaleString()}`,"Revenue"]}),e.jsx(Zl,{type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:4,fillOpacity:1,fill:"url(#colorRevenue)"})]})})}):e.jsxs("div",{className:"h-80 w-full flex flex-col items-center justify-center bg-slate-50/50 dark:bg-slate-800/20 rounded-2xl border border-dashed border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"w-16 h-16 rounded-3xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-400 mb-4 shadow-sm",children:e.jsx(Tt,{size:28})}),e.jsx("p",{className:"text-xs text-slate-500 mb-6 font-medium",children:"Standard Edition Required"}),e.jsx(W,{size:"sm",onClick:()=>n("/subscription"),children:"View Plans"})]})]}),e.jsxs("div",{className:"bg-white/50 dark:bg-slate-900/50 p-4 rounded-2xl border border-transparent",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white tracking-tight uppercase tracking-widest",children:"Recent Payments"}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:"Latest transactions"})]}),c("FINANCE_MANAGEMENT")&&e.jsx(W,{variant:"ghost",size:"sm",className:"text-primary-600 hover:bg-primary-50",onClick:()=>n("/finance"),children:e.jsx(Ga,{size:16})})]}),c("FINANCE_MANAGEMENT")?e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:S.length>0?S.map(C=>e.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-colors border border-transparent hover:border-slate-100 dark:hover:border-slate-700 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400 font-bold text-sm",children:C.student_name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:C.student_name}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:C.date})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:["+KES ",C.amount.toLocaleString()]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:C.method})]})]},C.id)):e.jsx("div",{className:"py-2",children:e.jsx("p",{className:"text-slate-400 text-xs italic",children:"No activity recorded for this period"})})}):e.jsxs("div",{className:"space-y-4",children:[[1,2,3].map(C=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50/50 dark:bg-slate-800/30 rounded-xl blur-[2px] opacity-40",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-200 dark:bg-slate-800"}),e.jsx("div",{className:"h-4 w-24 bg-slate-200 dark:bg-slate-800 rounded"})]}),e.jsx("div",{className:"h-4 w-12 bg-slate-200 dark:bg-slate-800 rounded"})]},C)),e.jsxs("div",{className:"text-center pt-2",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx(Tt,{size:14,className:"text-slate-400"})}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Premium History"})]})]}),c("FINANCE_MANAGEMENT")?e.jsx(W,{variant:"outline",className:"w-full mt-4",onClick:()=>n("/finance"),children:S.length>0?"View All Transactions":"Go to Finance Center"}):e.jsx(W,{variant:"outline",className:"w-full mt-4 border-dashed",onClick:()=>n("/subscription"),children:"Unlock Finance Center"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsx("button",{onClick:()=>n("/students/create"),className:"p-4 rounded-3xl transition-all text-left group hover:bg-slate-100 dark:hover:bg-white/5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-2xl group-hover:scale-110 transition-transform",children:e.jsx(Ie,{className:"text-blue-600 dark:text-blue-400",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-slate-900 dark:text-white text-sm",children:"New Student"}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-bold uppercase tracking-wider",children:"Register a new student"})]})]})}),e.jsx("button",{onClick:()=>n("/teachers/create"),className:"p-4 rounded-3xl transition-all text-left group hover:bg-slate-100 dark:hover:bg-white/5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-violet-100 dark:bg-violet-900/30 rounded-2xl group-hover:scale-110 transition-transform",children:e.jsx(ta,{className:"text-violet-600 dark:text-violet-400",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-slate-900 dark:text-white text-sm",children:"Add Teacher"}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-bold uppercase tracking-wider",children:"Register new staff"})]})]})}),e.jsx("button",{onClick:()=>n("/schedule"),className:"p-4 rounded-3xl transition-all text-left group hover:bg-slate-100 dark:hover:bg-white/5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-amber-100 dark:bg-amber-900/30 rounded-2xl group-hover:scale-110 transition-transform",children:e.jsx(Ze,{className:"text-amber-600 dark:text-amber-400",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-slate-900 dark:text-white text-sm",children:"View Schedule"}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-bold uppercase tracking-wider",children:"Check timetable"})]})]})})]})]})};let Qv={data:""},Jv=n=>{if(typeof window=="object"){let m=(n?n.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return m.nonce=window.__nonce__,m.parentNode||(n||document.head).appendChild(m),m.firstChild}return n||Qv},Wv=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ej=/\/\*[^]*?\*\/|  +/g,Xp=/\n+/g,Or=(n,m)=>{let c="",u="",g="";for(let v in n){let j=n[v];v[0]=="@"?v[1]=="i"?c=v+" "+j+";":u+=v[1]=="f"?Or(j,v):v+"{"+Or(j,v[1]=="k"?"":m)+"}":typeof j=="object"?u+=Or(j,m?m.replace(/([^,])+/g,S=>v.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,_=>/&/.test(_)?_.replace(/&/g,S):S?S+" "+_:_)):v):j!=null&&(v=/^--/.test(v)?v:v.replace(/[A-Z]/g,"-$&").toLowerCase(),g+=Or.p?Or.p(v,j):v+":"+j+";")}return c+(m&&g?m+"{"+g+"}":g)+u},Gl={},Hf=n=>{if(typeof n=="object"){let m="";for(let c in n)m+=c+Hf(n[c]);return m}return n},tj=(n,m,c,u,g)=>{let v=Hf(n),j=Gl[v]||(Gl[v]=(_=>{let E=0,z=11;for(;E<_.length;)z=101*z+_.charCodeAt(E++)>>>0;return"go"+z})(v));if(!Gl[j]){let _=v!==n?n:(E=>{let z,h,b=[{}];for(;z=Wv.exec(E.replace(ej,""));)z[4]?b.shift():z[3]?(h=z[3].replace(Xp," ").trim(),b.unshift(b[0][h]=b[0][h]||{})):b[0][z[1]]=z[2].replace(Xp," ").trim();return b[0]})(n);Gl[j]=Or(g?{["@keyframes "+j]:_}:_,c?"":"."+j)}let S=c&&Gl.g?Gl.g:null;return c&&(Gl.g=Gl[j]),((_,E,z,h)=>{h?E.data=E.data.replace(h,_):E.data.indexOf(_)===-1&&(E.data=z?_+E.data:E.data+_)})(Gl[j],m,u,S),j},sj=(n,m,c)=>n.reduce((u,g,v)=>{let j=m[v];if(j&&j.call){let S=j(c),_=S&&S.props&&S.props.className||/^go/.test(S)&&S;j=_?"."+_:S&&typeof S=="object"?S.props?"":Or(S,""):S===!1?"":S}return u+g+(j??"")},"");function l0(n){let m=this||{},c=n.call?n(m.p):n;return tj(c.unshift?c.raw?sj(c,[].slice.call(arguments,1),m.p):c.reduce((u,g)=>Object.assign(u,g&&g.call?g(m.p):g),{}):c,Jv(m.target),m.g,m.o,m.k)}let If,wm,km;l0.bind({g:1});let $l=l0.bind({k:1});function aj(n,m,c,u){Or.p=m,If=n,wm=c,km=u}function qr(n,m){let c=this||{};return function(){let u=arguments;function g(v,j){let S=Object.assign({},v),_=S.className||g.className;c.p=Object.assign({theme:wm&&wm()},S),c.o=/ *go\d+/.test(_),S.className=l0.apply(c,u)+(_?" "+_:"");let E=n;return n[0]&&(E=S.as||n,delete S.as),km&&E[0]&&km(S),If(E,S)}return g}}var lj=n=>typeof n=="function",s0=(n,m)=>lj(n)?n(m):n,rj=(()=>{let n=0;return()=>(++n).toString()})(),Gf=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let m=matchMedia("(prefers-reduced-motion: reduce)");n=!m||m.matches}return n}})(),ij=20,Dm="default",qf=(n,m)=>{let{toastLimit:c}=n.settings;switch(m.type){case 0:return{...n,toasts:[m.toast,...n.toasts].slice(0,c)};case 1:return{...n,toasts:n.toasts.map(j=>j.id===m.toast.id?{...j,...m.toast}:j)};case 2:let{toast:u}=m;return qf(n,{type:n.toasts.find(j=>j.id===u.id)?1:0,toast:u});case 3:let{toastId:g}=m;return{...n,toasts:n.toasts.map(j=>j.id===g||g===void 0?{...j,dismissed:!0,visible:!1}:j)};case 4:return m.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(j=>j.id!==m.toastId)};case 5:return{...n,pausedAt:m.time};case 6:let v=m.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(j=>({...j,pauseDuration:j.pauseDuration+v}))}}},Xc=[],Zf={toasts:[],pausedAt:void 0,settings:{toastLimit:ij}},ml={},$f=(n,m=Dm)=>{ml[m]=qf(ml[m]||Zf,n),Xc.forEach(([c,u])=>{c===m&&u(ml[m])})},Yf=n=>Object.keys(ml).forEach(m=>$f(n,m)),nj=n=>Object.keys(ml).find(m=>ml[m].toasts.some(c=>c.id===n)),r0=(n=Dm)=>m=>{$f(m,n)},oj={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},dj=(n={},m=Dm)=>{let[c,u]=f.useState(ml[m]||Zf),g=f.useRef(ml[m]);f.useEffect(()=>(g.current!==ml[m]&&u(ml[m]),Xc.push([m,u]),()=>{let j=Xc.findIndex(([S])=>S===m);j>-1&&Xc.splice(j,1)}),[m]);let v=c.toasts.map(j=>{var S,_,E;return{...n,...n[j.type],...j,removeDelay:j.removeDelay||((S=n[j.type])==null?void 0:S.removeDelay)||n?.removeDelay,duration:j.duration||((_=n[j.type])==null?void 0:_.duration)||n?.duration||oj[j.type],style:{...n.style,...(E=n[j.type])==null?void 0:E.style,...j.style}}});return{...c,toasts:v}},cj=(n,m="blank",c)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:m,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...c,id:c?.id||rj()}),od=n=>(m,c)=>{let u=cj(m,n,c);return r0(u.toasterId||nj(u.id))({type:2,toast:u}),u.id},Ht=(n,m)=>od("blank")(n,m);Ht.error=od("error");Ht.success=od("success");Ht.loading=od("loading");Ht.custom=od("custom");Ht.dismiss=(n,m)=>{let c={type:3,toastId:n};m?r0(m)(c):Yf(c)};Ht.dismissAll=n=>Ht.dismiss(void 0,n);Ht.remove=(n,m)=>{let c={type:4,toastId:n};m?r0(m)(c):Yf(c)};Ht.removeAll=n=>Ht.remove(void 0,n);Ht.promise=(n,m,c)=>{let u=Ht.loading(m.loading,{...c,...c?.loading});return typeof n=="function"&&(n=n()),n.then(g=>{let v=m.success?s0(m.success,g):void 0;return v?Ht.success(v,{id:u,...c,...c?.success}):Ht.dismiss(u),g}).catch(g=>{let v=m.error?s0(m.error,g):void 0;v?Ht.error(v,{id:u,...c,...c?.error}):Ht.dismiss(u)}),n};var xj=1e3,mj=(n,m="default")=>{let{toasts:c,pausedAt:u}=dj(n,m),g=f.useRef(new Map).current,v=f.useCallback((h,b=xj)=>{if(g.has(h))return;let C=setTimeout(()=>{g.delete(h),j({type:4,toastId:h})},b);g.set(h,C)},[]);f.useEffect(()=>{if(u)return;let h=Date.now(),b=c.map(C=>{if(C.duration===1/0)return;let A=(C.duration||0)+C.pauseDuration-(h-C.createdAt);if(A<0){C.visible&&Ht.dismiss(C.id);return}return setTimeout(()=>Ht.dismiss(C.id,m),A)});return()=>{b.forEach(C=>C&&clearTimeout(C))}},[c,u,m]);let j=f.useCallback(r0(m),[m]),S=f.useCallback(()=>{j({type:5,time:Date.now()})},[j]),_=f.useCallback((h,b)=>{j({type:1,toast:{id:h,height:b}})},[j]),E=f.useCallback(()=>{u&&j({type:6,time:Date.now()})},[u,j]),z=f.useCallback((h,b)=>{let{reverseOrder:C=!1,gutter:A=8,defaultPosition:M}=b||{},k=c.filter(y=>(y.position||M)===(h.position||M)&&y.height),T=k.findIndex(y=>y.id===h.id),D=k.filter((y,P)=>P<T&&y.visible).length;return k.filter(y=>y.visible).slice(...C?[D+1]:[0,D]).reduce((y,P)=>y+(P.height||0)+A,0)},[c]);return f.useEffect(()=>{c.forEach(h=>{if(h.dismissed)v(h.id,h.removeDelay);else{let b=g.get(h.id);b&&(clearTimeout(b),g.delete(h.id))}})},[c,v]),{toasts:c,handlers:{updateHeight:_,startPause:S,endPause:E,calculateOffset:z}}},uj=$l`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,hj=$l`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,pj=$l`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,fj=qr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${uj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${hj} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${pj} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,bj=$l`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,gj=qr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${bj} 1s linear infinite;
`,vj=$l`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,jj=$l`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Nj=qr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${vj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${jj} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,yj=qr("div")`
  position: absolute;
`,wj=qr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,kj=$l`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_j=qr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${kj} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Sj=({toast:n})=>{let{icon:m,type:c,iconTheme:u}=n;return m!==void 0?typeof m=="string"?f.createElement(_j,null,m):m:c==="blank"?null:f.createElement(wj,null,f.createElement(gj,{...u}),c!=="loading"&&f.createElement(yj,null,c==="error"?f.createElement(fj,{...u}):f.createElement(Nj,{...u})))},Cj=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Ej=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,Aj="0%{opacity:0;} 100%{opacity:1;}",zj="0%{opacity:1;} 100%{opacity:0;}",Tj=qr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Lj=qr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Mj=(n,m)=>{let c=n.includes("top")?1:-1,[u,g]=Gf()?[Aj,zj]:[Cj(c),Ej(c)];return{animation:m?`${$l(u)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${$l(g)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Dj=f.memo(({toast:n,position:m,style:c,children:u})=>{let g=n.height?Mj(n.position||m||"top-center",n.visible):{opacity:0},v=f.createElement(Sj,{toast:n}),j=f.createElement(Lj,{...n.ariaProps},s0(n.message,n));return f.createElement(Tj,{className:n.className,style:{...g,...c,...n.style}},typeof u=="function"?u({icon:v,message:j}):f.createElement(f.Fragment,null,v,j))});aj(f.createElement);var Rj=({id:n,className:m,style:c,onHeightUpdate:u,children:g})=>{let v=f.useCallback(j=>{if(j){let S=()=>{let _=j.getBoundingClientRect().height;u(n,_)};S(),new MutationObserver(S).observe(j,{subtree:!0,childList:!0,characterData:!0})}},[n,u]);return f.createElement("div",{ref:v,className:m,style:c},g)},Oj=(n,m)=>{let c=n.includes("top"),u=c?{top:0}:{bottom:0},g=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Gf()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${m*(c?1:-1)}px)`,...u,...g}},Pj=l0`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ic=16,Bj=({reverseOrder:n,position:m="top-center",toastOptions:c,gutter:u,children:g,toasterId:v,containerStyle:j,containerClassName:S})=>{let{toasts:_,handlers:E}=mj(c,v);return f.createElement("div",{"data-rht-toaster":v||"",style:{position:"fixed",zIndex:9999,top:Ic,left:Ic,right:Ic,bottom:Ic,pointerEvents:"none",...j},className:S,onMouseEnter:E.startPause,onMouseLeave:E.endPause},_.map(z=>{let h=z.position||m,b=E.calculateOffset(z,{reverseOrder:n,gutter:u,defaultPosition:m}),C=Oj(h,b);return f.createElement(Rj,{id:z.id,key:z.id,onHeightUpdate:E.updateHeight,className:z.visible?Pj:"",style:C},z.type==="custom"?s0(z.message,z):g?g(z):f.createElement(Dj,{toast:z,position:h}))}))},Jt=Ht;const Uj=({isOpen:n,onClose:m,onRefresh:c})=>{const[u,g]=f.useState(null),[v,j]=f.useState(!1),[S,_]=f.useState(null),E=b=>{const C=b.target.files[0];if(C){if(!C.name.endsWith(".xlsx")&&!C.name.endsWith(".xls")){Jt.error("Please upload an Excel file (.xlsx or .xls)");return}g(C),_(null)}},z=async()=>{if(!u){Jt.error("Please select a file first");return}j(!0);const b=new FormData;b.append("file",u);try{const C=await V.post("/api/students/bulk-import/",b,{headers:{"Content-Type":"multipart/form-data"}});C.data.success&&(_(C.data.summary),Jt.success(`Successfully imported ${C.data.summary.imported} students!`),c&&c())}catch(C){console.error("Import error:",C);const A=C.response?.data?.error||"Failed to import students";Jt.error(A)}finally{j(!1)}},h=async()=>{try{const b=await V.get("/api/students/template/",{responseType:"blob"}),C=window.URL.createObjectURL(new Blob([b.data])),A=document.createElement("a");A.href=C,A.setAttribute("download","student_template.xlsx"),document.body.appendChild(A),A.click(),A.remove()}catch(b){console.error("Download error:",b),Jt.error("Failed to download template")}};return n?e.jsx(vt,{children:e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:m,className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm"}),e.jsxs(he.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-2xl bg-white dark:bg-slate-900 rounded-3xl shadow-2xl border border-slate-200 dark:border-slate-800 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 dark:border-slate-800 flex items-center justify-between bg-slate-50/50 dark:bg-slate-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-primary-100 dark:bg-primary-900/30 rounded-xl flex items-center justify-center text-primary-600 dark:text-primary-400",children:e.jsx(Wt,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Bulk Student Admission"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Import student records from Excel"})]})]}),e.jsx("button",{onClick:m,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition-colors",children:e.jsx(Ve,{size:20,className:"text-slate-500"})})]}),e.jsx("div",{className:"p-6",children:S?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/10 border border-emerald-100 dark:border-emerald-800/50 rounded-2xl p-6 text-center",children:[e.jsx("div",{className:"h-16 w-16 bg-emerald-500 text-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg shadow-emerald-500/20",children:e.jsx(Ye,{size:32})}),e.jsx("h4",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Import Completed!"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-100 dark:border-slate-700",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Total Rows"}),e.jsx("p",{className:"text-2xl font-black text-slate-900 dark:text-white",children:S.total})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-100 dark:border-slate-700",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Imported"}),e.jsx("p",{className:"text-2xl font-black text-emerald-600 dark:text-emerald-400",children:S.imported})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-100 dark:border-slate-700",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Skipped/Failed"}),e.jsx("p",{className:"text-2xl font-black text-red-600 dark:text-red-400",children:S.skipped})]})]})]}),S.errors&&S.errors.length>0&&e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-red-600 dark:text-red-400",children:[e.jsx(ot,{size:18}),e.jsxs("p",{className:"text-sm font-bold uppercase tracking-wider",children:["Issues Encountered (",S.errors.length,")"]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto custom-scrollbar space-y-2",children:S.errors.map((b,C)=>e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-800 rounded-lg border border-slate-100 dark:border-slate-700",children:b},C))})]}),e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(W,{onClick:m,className:"px-12 rounded-full",children:"Done"})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-primary-50 dark:bg-primary-900/10 border border-primary-100 dark:border-primary-800/50 rounded-2xl p-4 flex gap-4",children:[e.jsx(Eg,{className:"text-primary-500 shrink-0",size:20}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-bold text-primary-900 dark:text-primary-300 mb-1",children:"Important Instructions"}),e.jsxs("ul",{className:"text-primary-700 dark:text-primary-400 space-y-1 list-disc ml-4",children:[e.jsx("li",{children:"Use the official template for best results."}),e.jsxs("li",{children:["Columns: ",e.jsx("b",{children:"First Name"}),", ",e.jsx("b",{children:"Last Name"}),", and ",e.jsx("b",{children:"Grade"})," are required."]}),e.jsx("li",{children:"System will create user accounts automatically for each student."}),e.jsx("li",{children:"Admission fees will be recorded as cash payments by default."})]})]})]}),e.jsxs("div",{className:`relative border-2 border-dashed rounded-3xl p-10 flex flex-col items-center justify-center transition-all ${u?"border-primary-500 bg-primary-50/20 dark:bg-primary-900/10":"border-slate-200 dark:border-slate-800 hover:border-primary-400"}`,children:[e.jsx("input",{type:"file",onChange:E,className:"absolute inset-0 opacity-0 cursor-pointer",accept:".xlsx,.xls"}),e.jsx("div",{className:`h-16 w-16 rounded-2xl flex items-center justify-center mb-4 transition-transform ${u?"bg-primary-500 text-white scale-110":"bg-slate-100 dark:bg-slate-800 text-slate-400"}`,children:e.jsx(Dn,{size:32})}),e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white mb-1",children:u?u.name:"Click or drag Excel file here"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Only .xlsx or .xls files supported"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs(W,{variant:"outline",onClick:h,children:[e.jsx(Ms,{size:18,className:"mr-2"}),"Download Template"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(W,{variant:"ghost",onClick:m,children:"Cancel"}),e.jsx(W,{onClick:z,disabled:!u||v,isLoading:v,children:v?"Importing Students...":"Start Import"})]})]})]})})]})]})}):null},Fj=({children:n,variant:m="gray",className:c=""})=>{const u={gray:"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300",green:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",red:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",blue:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",yellow:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",purple:"bg-violet-100 text-violet-700 dark:bg-violet-900/30 dark:text-violet-400"};return e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold ${u[m]} ${c}`,children:n})},Hj=({student:n,onClick:m})=>e.jsxs(he.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},whileHover:{y:-5},onClick:m,className:"group relative bg-white dark:bg-slate-900 rounded-2xl p-4 md:p-6 shadow-sm border border-slate-100 dark:border-slate-800 hover:shadow-xl hover:border-primary-200 dark:hover:border-primary-800 transition-all duration-300 cursor-pointer overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 md:w-32 md:h-32 bg-primary-50 dark:bg-primary-900/10 rounded-full blur-3xl -mr-12 -mt-12 md:-mr-16 md:-mt-16 transition-opacity group-hover:opacity-75"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[e.jsxs("div",{className:"relative mb-3 md:mb-4",children:[e.jsx("div",{className:"h-16 w-16 md:h-24 md:w-24 rounded-xl md:rounded-2xl bg-gradient-to-br from-primary-100 to-primary-50 dark:from-primary-900/40 dark:to-slate-800 text-primary-600 dark:text-primary-400 flex items-center justify-center text-xl md:text-3xl font-bold shadow-inner overflow-hidden",children:n.photo?e.jsx("img",{src:n.photo,alt:n.full_name,className:"w-full h-full object-cover"}):n.full_name.charAt(0)}),e.jsx("div",{className:`absolute -bottom-1 -right-1 md:-bottom-2 md:-right-2 p-1 md:p-1.5 rounded-full bg-white dark:bg-slate-900 border-2 border-white dark:border-slate-900 shadow-sm ${n.balance>0?"text-red-500":"text-green-500"}`,children:n.balance>0?e.jsx(Ss,{size:12,className:"md:w-[14px] md:h-[14px]",fill:"currentColor"}):e.jsx(ta,{size:12,className:"md:w-[14px] md:h-[14px]",fill:"currentColor"})})]}),e.jsx("h3",{className:"text-sm md:text-lg font-bold text-slate-900 dark:text-white text-center mb-1 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors line-clamp-1",children:n.full_name}),e.jsxs("p",{className:"text-[10px] md:text-xs font-mono text-slate-500 dark:text-slate-400 mb-3 md:mb-4 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 md:px-2 md:py-1 rounded",children:["#",n.admission_number]}),e.jsxs("div",{className:"hidden md:grid grid-cols-2 gap-3 w-full mb-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-2.5 rounded-xl text-center",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-0.5",children:"Grade"}),e.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-200",children:n.grade})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-2.5 rounded-xl text-center",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-0.5",children:"Gender"}),e.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-200",children:n.gender==="M"?"M":"F"})]})]}),e.jsxs("div",{className:"flex md:hidden items-center justify-center gap-2 mb-3 text-[10px] font-bold text-slate-500",children:[e.jsxs("span",{className:"bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded",children:["G: ",n.grade]}),e.jsx("span",{className:"bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded",children:n.gender==="M"?"Male":"Female"})]}),e.jsxs("div",{className:`w-full py-1.5 md:py-2 px-2 md:px-3 rounded-lg md:rounded-xl flex items-center justify-between text-[10px] md:text-xs font-medium ${n.balance>0?"bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-300":"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-300"}`,children:[e.jsx("span",{className:"hidden xs:inline",children:"Balance"}),e.jsx("span",{className:"font-bold",children:n.balance>0?`-$${n.balance.toLocaleString()}`:"Paid"})]}),e.jsx("div",{className:"absolute top-2 left-2 opacity-0 group-hover:opacity-100 transition-opacity z-20",children:e.jsx("button",{onClick:c=>{c.stopPropagation(),onDelete&&onDelete(c,n.id)},className:"p-1.5 bg-white/90 dark:bg-slate-800/90 rounded-lg text-slate-400 hover:text-red-600 shadow-sm border border-slate-100 dark:border-slate-700",children:e.jsx(Cs,{size:14})})})]})]}),Ij=()=>{const n=Le(),[m,c]=f.useState("grid"),[u,g]=f.useState([]),[v,j]=f.useState(!0),[S,_]=f.useState({search:"",grade:"",status:""}),[E,z]=f.useState({page:1,total:0,pages:1}),[h,b]=f.useState({fully_paid:"-",male_count:0,female_count:0}),[C,A]=f.useState(!1),M=async()=>{u.length===0&&j(!0);try{const P=await V.get("/api/students/",{params:{...S,page:E.page}});g(P.data.students),P.data.stats&&b(P.data.stats),z(U=>({...U,total:P.data.total,pages:P.data.pages,page:P.data.current_page}))}catch(P){console.error("Error fetching students:",P)}finally{j(!1)}},k=async(P,U)=>{if(P&&P.stopPropagation(),window.confirm("Are you sure you want to delete this student? This action cannot be undone."))try{await V.delete(`/api/students/${U}/`),g(F=>F.filter(Z=>Z.id!==U)),z(F=>({...F,total:F.total-1}))}catch(F){console.error("Error deleting student:",F),alert("Failed to delete student. Please try again.")}},[T,D]=f.useState([]);f.useEffect(()=>{(async()=>{try{const U=await V.get("/api/grades/");D(U.data.grades)}catch(U){console.error("Error fetching grades:",U)}})()},[]),f.useEffect(()=>{const P=setTimeout(()=>{M()},300);return()=>clearTimeout(P)},[S,E.page]);const y={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-center md:justify-end gap-3",children:e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsxs(W,{variant:"outline",onClick:()=>A(!0),className:"w-full md:w-auto",children:[e.jsx(Dn,{size:18,className:"mr-2"}),"Bulk Admission"]}),e.jsxs(W,{onClick:()=>n("/students/create"),className:"w-full md:w-auto shadow-lg shadow-primary-500/20",children:[e.jsx(id,{size:18,className:"mr-2"}),"New Admission"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-indigo-600 to-blue-600 rounded-2xl p-5 text-white shadow-lg shadow-blue-500/20 group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity transform group-hover:scale-110 duration-500",children:e.jsx(Ie,{size:80})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-white/20 backdrop-blur-md rounded-lg shadow-inner",children:e.jsx(Ie,{size:18,className:"text-white"})}),e.jsx("p",{className:"font-medium text-blue-100 text-sm",children:"Total Students"})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("h2",{className:"text-3xl font-black tracking-tight",children:E.total}),e.jsx("span",{className:"text-xs font-bold bg-white/20 px-2 py-0.5 rounded-full text-blue-50 backdrop-blur-sm",children:"Active"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-5 border border-slate-100 dark:border-slate-800 shadow-sm relative group overflow-hidden",children:[e.jsx("div",{className:"absolute right-0 top-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity transform group-hover:scale-110 duration-500",children:e.jsx(Ss,{size:80,className:"text-emerald-500"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg text-emerald-600 dark:text-emerald-400",children:e.jsx(Ss,{size:18})}),e.jsx("p",{className:"font-medium text-slate-500 dark:text-slate-400 text-sm",children:"Fully Paid"})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight",children:h.fully_paid}),e.jsx("span",{className:"text-xs font-semibold text-slate-400",children:"students"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-5 border border-slate-100 dark:border-slate-800 shadow-sm relative overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg text-indigo-600 dark:text-indigo-400",children:e.jsx(Ie,{size:18})}),e.jsx("p",{className:"font-medium text-slate-500 dark:text-slate-400 text-sm",children:"Gender Distribution"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 dark:bg-slate-800 px-2 py-1 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsxs("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:[(h.male_count/(h.male_count+h.female_count||1)*100).toFixed(0),"%"]}),e.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Male"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"h-2.5 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden flex shadow-inner",children:[e.jsx(he.div,{initial:{width:0},animate:{width:`${h.male_count/(h.male_count+h.female_count||1)*100}%`},transition:{duration:1,ease:"easeOut"},className:"h-full bg-blue-500"}),e.jsx(he.div,{initial:{width:0},animate:{width:`${h.female_count/(h.male_count+h.female_count||1)*100}%`},transition:{duration:1,ease:"easeOut",delay:.1},className:"h-full bg-rose-400"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.6)]"}),e.jsxs("span",{className:"font-bold text-slate-600 dark:text-slate-300",children:[h.male_count," Boys"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-slate-600 dark:text-slate-300",children:[h.female_count," Girls"]}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-rose-400 shadow-[0_0_8px_rgba(244,63,94,0.6)]"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-2 rounded-2xl border border-slate-100 dark:border-slate-800 shadow-sm flex flex-col md:flex-row gap-4 items-center justify-between sticky top-4 z-20",children:[e.jsxs("div",{className:"flex flex-1 gap-2 w-full md:w-auto p-2",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search students...",className:"w-full pl-10 pr-4 py-2 rounded-xl bg-slate-50 dark:bg-slate-800 border-none focus:ring-2 focus:ring-primary-500 transition-all text-sm text-slate-900 dark:text-white placeholder-slate-400",value:S.search,onChange:P=>_(U=>({...U,search:P.target.value}))})]}),e.jsxs("select",{className:"px-4 py-2 rounded-xl bg-slate-50 dark:bg-slate-800 border-none focus:ring-2 focus:ring-primary-500 text-sm text-slate-700 dark:text-slate-200 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",onChange:P=>_(U=>({...U,grade:P.target.value})),children:[e.jsx("option",{value:"",children:"All Grades"}),(T||[]).map(P=>e.jsx("option",{value:P.id,children:P.name},P.id))]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 border-l border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-1 rounded-lg flex items-center",children:[e.jsx("button",{onClick:()=>c("list"),className:`p-2 rounded-md transition-all ${m==="list"?"bg-white dark:bg-slate-700 text-primary-600 dark:text-primary-400 shadow-sm":"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300"}`,children:e.jsx(hf,{size:18})}),e.jsx("button",{onClick:()=>c("grid"),className:`p-2 rounded-md transition-all ${m==="grid"?"bg-white dark:bg-slate-700 text-primary-600 dark:text-primary-400 shadow-sm":"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300"}`,children:e.jsx(pf,{size:18})})]}),e.jsxs(W,{variant:"ghost",size:"sm",className:"hidden md:flex",children:[e.jsx(Ms,{size:18,className:"mr-2"}),"Export"]})]})]}),e.jsx("div",{className:"min-h-[400px]",children:(u||[]).length>0?e.jsx(vt,{mode:"wait",children:m==="grid"||window.innerWidth<768?e.jsx(he.div,{variants:y,initial:"hidden",animate:"show",className:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6",children:u.map(P=>e.jsx(Hj,{student:P,onClick:()=>n(`/students/${P.id}`),onDelete:k},P.id))},"grid"):e.jsx(he.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-white dark:bg-slate-900 rounded-3xl border border-slate-100 dark:border-slate-800 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50/50 dark:bg-slate-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-5 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-5 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Grade"}),e.jsx("th",{className:"px-6 py-5 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Branch"}),e.jsx("th",{className:"px-6 py-5 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Gender"}),e.jsx("th",{className:"px-6 py-5 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Financial Status"}),e.jsx("th",{className:"px-6 py-5 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-5 text-right text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:u.map(P=>e.jsxs("tr",{className:"group hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors cursor-pointer",onClick:()=>n(`/students/${P.id}`),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-primary-100 to-primary-50 dark:from-primary-900/30 dark:to-slate-800 text-primary-600 dark:text-primary-400 flex items-center justify-center font-bold text-lg shadow-sm overflow-hidden",children:P.photo?e.jsx("img",{src:P.photo,alt:P.full_name,className:"w-full h-full object-cover"}):P.full_name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:P.full_name}),e.jsxs("p",{className:"text-xs font-mono text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-800 p-0.5 px-1.5 rounded inline-block mt-1",children:["#",P.admission_number]})]})]})}),e.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-slate-600 dark:text-slate-300",children:["Grade ",P.grade]}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-300",children:P.branch}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-300",children:P.gender==="M"?"Male":"Female"}),e.jsx("td",{className:"px-6 py-4",children:P.balance>0?e.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),e.jsxs("span",{className:"font-bold",children:["-$",P.balance.toLocaleString()]})]}):e.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),e.jsx("span",{className:"font-bold",children:"Paid"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(Fj,{variant:"green",children:"Active"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg text-slate-400 hover:text-primary-600 transition-colors",children:e.jsx(ha,{size:16})}),e.jsx("button",{onClick:U=>k(U,P.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg text-slate-400 hover:text-red-600 transition-colors",children:e.jsx(Cs,{size:16})})]})})]},P.id))})]})})},"list")}):e.jsxs("div",{className:"text-center py-20 bg-white dark:bg-slate-900 rounded-3xl border border-slate-100 dark:border-slate-800 border-dashed",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-50 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(jt,{className:"text-slate-300 dark:text-slate-600",size:32})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1",children:"No students found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Try adjusting your filters or add a new student."}),e.jsxs(W,{variant:"primary",className:"mt-6",onClick:()=>n("/students/create"),children:[e.jsx(id,{size:18,className:"mr-2"}),"New Admission"]})]})}),e.jsxs("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 bg-white/90 dark:bg-slate-900/90 backdrop-blur shadow-xl border border-slate-100 dark:border-slate-800 rounded-full py-2 px-6 flex items-center gap-4 z-30 transform hover:scale-105 transition-transform",children:[e.jsx("button",{disabled:E.page<=1,onClick:()=>z(P=>({...P,page:P.page-1})),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full text-slate-500 disabled:opacity-50 transition-colors",children:e.jsx(Ls,{size:20})}),e.jsxs("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 min-w-[100px] text-center",children:["Page ",E.page," of ",E.pages]}),e.jsx("button",{disabled:E.page>=E.pages,onClick:()=>z(P=>({...P,page:P.page+1})),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full text-slate-500 disabled:opacity-50 transition-colors",children:e.jsx(ds,{size:20})})]}),e.jsx(Uj,{isOpen:C,onClose:()=>A(!1),onRefresh:M})]})},Gj=({currentStep:n})=>{const m=[{id:1,label:"Personal",icon:Qe},{id:2,label:"Academic",icon:Lt},{id:3,label:"Guardian",icon:Ie},{id:4,label:"Payment",icon:It}];return e.jsx("div",{className:"flex items-center justify-between w-full mb-8",children:m.map((c,u)=>e.jsxs(js.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center relative z-10",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors duration-300 ${n>=c.id?"bg-primary-600 text-white shadow-lg shadow-primary-500/30":"bg-slate-100 text-slate-400"}`,children:e.jsx(c.icon,{size:18})}),e.jsx("span",{className:`text-xs mt-2 font-medium ${n>=c.id?"text-primary-700":"text-slate-400"}`,children:c.label})]}),u<m.length-1&&e.jsx("div",{className:`flex-1 h-1 mx-2 rounded-full -mt-6 transition-colors duration-300 ${n>c.id?"bg-primary-500":"bg-slate-100"}`})]},c.id))})},qj=()=>{const{config:n}=Nt(),m=Le(),[c,u]=f.useState(1),[g,v]=f.useState(!1),[j,S]=f.useState([]),[_,E]=f.useState([]),[z,h]=f.useState(null),[b,C]=f.useState({first_name:"",last_name:"",date_of_birth:"",gender:"M",photo:null,grade:"",current_term:1,academic_year:new Date().getFullYear(),location:"MAIN",branch:"",parent_name:"",parent_phone:"",parent_email:"",payment_method:"CASH",reference_number:""});f.useEffect(()=>{(async()=>{try{const[P,U]=await Promise.all([V.get("/api/grades/"),V.get("/api/branches/")]);S(P.data.grades),E(U.data.branches)}catch(P){console.error(P)}})()},[]);const A=y=>{const{name:P,value:U,files:F}=y.target;C(P==="photo"?Z=>({...Z,photo:F[0]}):Z=>({...Z,[P]:U}))},M=y=>y===1?b.first_name&&b.last_name:y===2?b.grade:y===3?b.parent_name&&b.parent_phone:!(y===4&&b.payment_method!=="CASH"&&!b.reference_number),k=()=>{M(c)?(u(y=>y+1),h(null)):h("Please fill in all required fields")},T=()=>u(y=>y-1),D=async()=>{if(!M(c)){h("Please fill in all required fields");return}v(!0),h(null);const y=new FormData;Object.keys(b).forEach(P=>{b[P]!==null&&y.append(P,b[P])});try{(await V.post("/api/students/create/",y)).data.success&&m("/students?success=true")}catch(P){h(P.response?.data?.error||"Failed to create admission"),P.response?.data?.errors&&(console.error(P.response.data.errors),alert(`Validation Error: ${JSON.stringify(P.response.data.errors)}`))}finally{v(!1)}};return e.jsx("div",{className:"p-6 max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-primary-900 px-8 py-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"New Student Admission"}),e.jsx("p",{className:"text-primary-200 text-sm mt-1",children:"Complete the steps below to register a new student"})]}),e.jsxs("div",{className:"p-8",children:[e.jsx(Gj,{currentStep:c}),z&&e.jsxs("div",{className:"mb-6 bg-red-50 text-red-600 p-4 rounded-xl flex items-center gap-2 text-sm",children:[e.jsx(ot,{size:18}),z]}),e.jsx("div",{className:"min-h-[320px]",children:e.jsxs(vt,{mode:"wait",children:[c===1&&e.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{label:"First Name",name:"first_name",value:b.first_name,onChange:A,required:!0}),e.jsx(fe,{label:"Last Name",name:"last_name",value:b.last_name,onChange:A,required:!0}),e.jsx(fe,{type:"date",label:"Date of Birth",name:"date_of_birth",value:b.date_of_birth,onChange:A}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Gender"}),e.jsxs("select",{name:"gender",value:b.gender,onChange:A,className:"w-full h-11 rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 focus:ring-2 focus:ring-primary-100 focus:border-primary-500 transition-all outline-none",children:[e.jsx("option",{value:"M",children:"Male"}),e.jsx("option",{value:"F",children:"Female"})]})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(fe,{type:"file",label:"Photo",name:"photo",onChange:A,className:"file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"})})]},"step1"),c===2&&e.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Grade / Class"}),e.jsxs("select",{name:"grade",value:b.grade,onChange:A,className:"w-full h-11 rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 focus:ring-2 focus:ring-primary-100 focus:border-primary-500 transition-all outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Grade"}),j.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Branch (Optional)"}),e.jsxs("select",{name:"branch",value:b.branch,onChange:A,className:"w-full h-11 rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 focus:ring-2 focus:ring-primary-100 focus:border-primary-500 transition-all outline-none",children:[e.jsx("option",{value:"",children:"Main School (Default)"}),_.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]})]}),e.jsx(fe,{type:"number",label:"Academic Year",name:"academic_year",value:b.academic_year,onChange:A}),e.jsx(fe,{type:"number",label:"Current Term",name:"current_term",value:b.current_term,onChange:A,min:1,max:3})]},"step2"),c===3&&e.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx(fe,{label:"Parent / Guardian Name",name:"parent_name",value:b.parent_name,onChange:A,required:!0}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{label:"Phone Number",name:"parent_phone",value:b.parent_phone,onChange:A,required:!0}),e.jsx(fe,{type:"email",label:"Email Address",name:"parent_email",value:b.parent_email,onChange:A})]})]},"step3"),c===4&&e.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 flex items-start gap-3",children:[e.jsx(Ye,{className:"text-blue-600 shrink-0 mt-1",size:20}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-900",children:"Admission Fee Required"}),e.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["A fee of ",n?.currency||"KES"," ",(n?.admission_fee||0).toLocaleString()," is required to complete admission."]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Payment Method"}),e.jsxs("select",{name:"payment_method",value:b.payment_method,onChange:A,className:"w-full h-11 rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 focus:ring-2 focus:ring-primary-100 focus:border-primary-500 transition-all outline-none",children:[e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"MPESA",children:"M-Pesa"}),e.jsx("option",{value:"BANK",children:"Bank Transfer"})]})]}),b.payment_method!=="CASH"&&e.jsx(fe,{label:b.payment_method==="MPESA"?"M-Pesa Transaction Code":"Bank Reference Number",name:"reference_number",value:b.reference_number,onChange:A,placeholder:b.payment_method==="MPESA"?"e.g. QWE123TY":"e.g. REF-123456",required:!0})]})]},"step4")]})}),e.jsxs("div",{className:"flex justify-between pt-8 border-t border-slate-100 mt-8",children:[e.jsx(W,{variant:"secondary",onClick:c===1?()=>m("/students"):T,children:c===1?"Cancel":"Back"}),e.jsxs(W,{onClick:c===4?D:k,isLoading:g,className:"w-32",children:[c===4?"Complete":"Next",c!==4&&e.jsx(ds,{size:18,className:"ml-2"})]})]})]})]})})},Zj=({currentStep:n})=>{const m=[{id:1,label:"Personal",icon:Qe},{id:2,label:"Academic",icon:Lt},{id:3,label:"Guardian",icon:Ie}];return e.jsx("div",{className:"flex items-center justify-between w-full mb-8 max-w-lg mx-auto",children:m.map((c,u)=>e.jsxs(js.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center relative z-10",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors duration-300 ${n>=c.id?"bg-primary-600 text-white shadow-lg shadow-primary-500/30":"bg-slate-100 dark:bg-slate-800 text-slate-400"}`,children:e.jsx(c.icon,{size:18})}),e.jsx("span",{className:`text-xs mt-2 font-medium ${n>=c.id?"text-primary-700 dark:text-primary-400":"text-slate-400"}`,children:c.label})]}),u<m.length-1&&e.jsx("div",{className:`flex-1 h-1 mx-2 rounded-full -mt-6 transition-colors duration-300 ${n>c.id?"bg-primary-500":"bg-slate-100 dark:bg-slate-800"}`})]},c.id))})},$j=()=>{const{id:n}=Zt(),m=Le(),[c,u]=f.useState(1),[g,v]=f.useState(!1),[j,S]=f.useState(!0),[_,E]=f.useState([]),[z,h]=f.useState(null),[b,C]=f.useState({first_name:"",last_name:"",date_of_birth:"",gender:"M",photo:null,grade:"",current_term:1,academic_year:new Date().getFullYear(),location:"MAIN",parent_name:"",parent_phone:"",parent_email:""});f.useEffect(()=>{(async()=>{try{const[P,U]=await Promise.all([V.get("/api/grades/"),V.get(`/api/students/${n}/`)]);E(P.data.grades||[]);const F=U.data.student||{},Z=F.personal||{},ae=F.academic||{},H=F.guardian||{};C({first_name:(Z.full_name||"").split(" ")[0],last_name:(Z.full_name||"").split(" ").slice(1).join(" "),date_of_birth:Z.dob||"",gender:Z.gender==="Male"?"M":"F",photo:null,grade:ae.grade_id||"",current_term:1,academic_year:new Date().getFullYear(),location:Z.location||"MAIN",parent_name:H.name||"",parent_phone:H.phone||"",parent_email:H.email||""})}catch(P){console.error(P),h("Failed to load student data")}finally{S(!1)}})()},[n]);const A=y=>{const{name:P,value:U,files:F}=y.target;C(P==="photo"?Z=>({...Z,photo:F[0]}):Z=>({...Z,[P]:U}))},M=y=>y===1?b.first_name&&b.last_name:y===2?!0:y===3?b.parent_name&&b.parent_phone:!0,k=()=>{M(c)?(u(y=>y+1),h(null)):h("Please fill in all required fields")},T=()=>u(y=>y-1),D=async()=>{v(!0),h(null);const y=new FormData;Object.keys(b).forEach(P=>{if(b[P]!==null&&b[P]!==void 0){if(P==="photo"&&!(b[P]instanceof File))return;y.append(P,b[P])}});try{await V.post(`/api/students/${n}/`,y),m(`/students/${n}`)}catch(P){h(P.response?.data?.error||"Failed to update profile")}finally{v(!1)}};return j?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50 dark:bg-slate-950",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-slate-200 border-t-primary-600"})}):e.jsx("div",{className:"p-6 max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-xl overflow-hidden border border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"bg-slate-900 dark:bg-slate-950 px-8 py-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Edit Profile"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Update student information"})]}),e.jsx("button",{onClick:()=>m(`/students/${n}`),className:"text-slate-400 hover:text-white transition-colors",children:"Cancel"})]}),e.jsxs("div",{className:"p-8",children:[e.jsx(Zj,{currentStep:c}),z&&e.jsxs("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-4 rounded-xl flex items-center gap-2 text-sm",children:[e.jsx(ot,{size:18}),z]}),e.jsx("div",{className:"min-h-[320px]",children:e.jsxs(vt,{mode:"wait",children:[c===1&&e.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{label:"First Name",name:"first_name",value:b.first_name,onChange:A,required:!0}),e.jsx(fe,{label:"Last Name",name:"last_name",value:b.last_name,onChange:A,required:!0}),e.jsx(fe,{type:"date",label:"Date of Birth",name:"date_of_birth",value:b.date_of_birth,onChange:A}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Gender"}),e.jsxs("select",{name:"gender",value:b.gender,onChange:A,className:"w-full h-11 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 px-4 focus:ring-2 focus:ring-primary-100 focus:border-primary-500 transition-all outline-none text-slate-900 dark:text-white",children:[e.jsx("option",{value:"M",children:"Male"}),e.jsx("option",{value:"F",children:"Female"})]})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(fe,{type:"file",label:"Update Photo",name:"photo",onChange:A,className:"file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100 dark:file:bg-primary-900/30 dark:file:text-primary-400"})})]},"step1"),c===2&&e.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Grade / Class"}),e.jsxs("select",{name:"grade",value:b.grade,onChange:A,className:"w-full h-11 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 px-4 focus:ring-2 focus:ring-primary-100 focus:border-primary-500 transition-all outline-none text-slate-900 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Grade"}),_.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"School Location"}),e.jsxs("select",{name:"location",value:b.location,onChange:A,className:"w-full h-11 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 px-4 focus:ring-2 focus:ring-primary-100 focus:border-primary-500 transition-all outline-none text-slate-900 dark:text-white",children:[e.jsx("option",{value:"MAIN",children:"Main Campus"}),e.jsx("option",{value:"ANNEX",children:"Annex Campus"})]})]}),e.jsx(fe,{type:"number",label:"Academic Year",name:"academic_year",value:b.academic_year,onChange:A}),e.jsx(fe,{type:"number",label:"Current Term",name:"current_term",value:b.current_term,onChange:A,min:1,max:3})]},"step2"),c===3&&e.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsx(fe,{label:"Parent / Guardian Name",name:"parent_name",value:b.parent_name,onChange:A,required:!0}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{label:"Phone Number",name:"parent_phone",value:b.parent_phone,onChange:A,required:!0}),e.jsx(fe,{type:"email",label:"Email Address",name:"parent_email",value:b.parent_email,onChange:A})]})]},"step3")]})}),e.jsxs("div",{className:"flex justify-between pt-8 border-t border-slate-100 dark:border-slate-800 mt-8",children:[e.jsx(W,{variant:"secondary",onClick:c===1?()=>m(`/students/${n}`):T,children:c===1?"Cancel":"Back"}),e.jsxs(W,{onClick:c===3?D:k,isLoading:g,className:"w-32",children:[c===3?"Save":"Next",c!==3?e.jsx(ds,{size:18,className:"ml-2"}):e.jsx(ma,{size:18,className:"ml-2"})]})]})]})]})})},mm=({label:n,value:m,icon:c,color:u,trend:g})=>e.jsxs("div",{className:`p-2.5 md:p-3.5 rounded-xl border ${u} bg-white dark:bg-slate-900/50 backdrop-blur-sm flex flex-col items-center text-center md:items-start md:text-left relative overflow-hidden group`,children:[e.jsxs("div",{className:"flex justify-center md:justify-between items-center w-full mb-1.5 md:mb-3",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${u.replace("border-","bg-").replace("200","50").replace("text-","bg-")} dark:bg-opacity-20 group-hover:scale-110 transition-transform shadow-sm`,children:e.jsx(c,{size:16,className:u.replace("border-","text-").replace("bg-","text-").includes("text-")?u.replace("border-","text-"):"text-primary-600"})}),g&&e.jsxs("span",{className:"hidden md:flex items-center text-[9px] font-bold text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/30 px-1.5 py-0.5 rounded-md",children:[e.jsx(Ga,{size:10,className:"mr-1"}),g]})]}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-[8px] md:text-[10px] font-bold uppercase tracking-widest leading-none",children:n}),e.jsx("h3",{className:"text-base md:text-lg font-black text-slate-900 dark:text-white leading-tight",children:m})]})]}),Qp=({icon:n,label:m,value:c,subValue:u})=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-400 group-hover:bg-white group-hover:text-primary-500 group-hover:shadow-sm transition-all",children:e.jsx(n,{size:14})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase leading-none mb-1 tracking-wider",children:m}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white leading-tight",children:c||"N/A"}),u&&e.jsx("p",{className:"text-[11px] text-slate-500 mt-0.5",children:u})]})]}),Gc=({id:n,label:m,icon:c,active:u,onClick:g})=>e.jsxs("button",{onClick:()=>g(n),className:`relative flex items-center gap-1 md:gap-1.5 px-3 md:px-4 py-1.5 md:py-2 rounded-full text-[10px] md:text-xs font-black transition-all shrink-0 uppercase tracking-tighter ${u?"text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[u&&e.jsx(he.div,{layoutId:"activeTab",className:"absolute inset-0 bg-slate-900 dark:bg-primary-600 rounded-full shadow-lg",transition:{type:"spring",bounce:.2,duration:.6}}),e.jsxs("span",{className:"relative z-10 flex items-center gap-1 md:gap-1.5",children:[e.jsx(c,{size:12,className:"md:w-3.5 md:h-3.5"}),m]})]}),Yj=({studentId:n,student:m,isManageable:c})=>{const u=Le(),[g,v]=f.useState(null),[j,S]=f.useState(!0);if(f.useEffect(()=>{(async()=>{try{const C=await V.get(`/api/students/${n}/academics/`);v(C.data)}catch(C){console.error("Error fetching academic records:",C)}finally{S(!1)}})()},[n]),j)return e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-slate-200 border-t-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Loading academic records..."})]});if(!g||!g.success)return e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-12 text-center border-2 border-dashed border-slate-200 dark:border-slate-800",children:[e.jsx(Ur,{size:48,className:"mx-auto text-slate-300 mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"No Academic Records"}),e.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"No assessment records found for this student."}),c&&e.jsx(W,{onClick:()=>{const b=m?.academic?.grade_id||m?.grade_id||"";u(`/academics?student=${n}&grade=${b}`)},children:"Record First Assessment"})]});const _=Object.values(g.records).reduce((b,C)=>b+Object.keys(C).length,0),E={};Object.values(g.records).forEach(b=>{Object.values(b).forEach(C=>{C.subjects.forEach(A=>{E[A.subject_name]||(E[A.subject_name]={total:0,count:0}),E[A.subject_name].total+=A.marks,E[A.subject_name].count+=1})})});const z=Object.entries(E).map(([b,C])=>({name:b,average:(C.total/C.count).toFixed(1)})).sort((b,C)=>C.average-b.average),h=Math.max(...z.map(b=>parseFloat(b.average)));return e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-3 md:p-4 border border-blue-100 dark:border-blue-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5 md:mb-2 text-left",children:[e.jsx("div",{className:"h-7 w-7 md:h-8 md:w-8 bg-blue-500 rounded-lg flex items-center justify-center shrink-0",children:e.jsx(Ur,{size:14,className:"text-white"})}),e.jsx("p",{className:"text-[10px] text-blue-700 dark:text-blue-400 font-bold uppercase truncate",children:"Average"})]}),e.jsxs("p",{className:"text-xl md:text-3xl font-black text-blue-900 dark:text-blue-300 text-left",children:[g.stats.average_score,"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-3 md:p-4 border border-purple-100 dark:border-purple-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5 md:mb-2 text-left",children:[e.jsx("div",{className:"h-7 w-7 md:h-8 md:w-8 bg-purple-500 rounded-lg flex items-center justify-center shrink-0",children:e.jsx(Lt,{size:14,className:"text-white"})}),e.jsx("p",{className:"text-[10px] text-purple-700 dark:text-purple-400 font-bold uppercase truncate",children:"Assessments"})]}),e.jsx("p",{className:"text-xl md:text-3xl font-black text-purple-900 dark:text-purple-300 text-left",children:g.stats.total_assessments})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-3 md:p-4 border border-emerald-100 dark:border-emerald-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5 md:mb-2 text-left",children:[e.jsx("div",{className:"h-7 w-7 md:h-8 md:w-8 bg-emerald-500 rounded-lg flex items-center justify-center shrink-0",children:e.jsx(Lt,{size:14,className:"text-white"})}),e.jsx("p",{className:"text-[10px] text-emerald-700 dark:text-emerald-400 font-bold uppercase truncate",children:"Subjects"})]}),e.jsx("p",{className:"text-xl md:text-3xl font-black text-emerald-900 dark:text-emerald-300 text-left",children:g.stats.subjects_count})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-3 md:p-4 border border-amber-100 dark:border-amber-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5 md:mb-2 text-left",children:[e.jsx("div",{className:"h-7 w-7 md:h-8 md:w-8 bg-amber-500 rounded-lg flex items-center justify-center shrink-0",children:e.jsx(Ze,{size:14,className:"text-white"})}),e.jsx("p",{className:"text-[10px] text-amber-700 dark:text-amber-400 font-bold uppercase truncate",children:"Term"})]}),e.jsxs("p",{className:"text-sm md:text-xl font-black text-amber-900 dark:text-amber-300 text-left uppercase truncate",children:["T",g.stats.latest_term]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Performance Distribution"}),e.jsx(Oi,{size:16,className:"text-slate-400"})]}),e.jsx("div",{className:"space-y-2.5",children:[{level:"4",label:"Exceeding",count:g.performance_distribution.exceeding,color:"emerald"},{level:"3",label:"Meeting",count:g.performance_distribution.meeting,color:"blue"},{level:"2",label:"Approaching",count:g.performance_distribution.approaching,color:"amber"},{level:"1",label:"Below",count:g.performance_distribution.below,color:"rose"}].map(b=>{const C=(b.count/(g.stats.total_assessments||1)*100).toFixed(0);return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:[b.label," (",b.level,")"]}),e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[b.count," ",e.jsxs("span",{className:"text-slate-400 text-[10px]",children:["(",C,"%)"]})]})]}),e.jsx("div",{className:"h-1.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-${b.color}-500 transition-all duration-500`,style:{width:`${C}%`}})})]},b.level)})})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Subject Performance"}),e.jsx(Pi,{size:16,className:"text-slate-400"})]}),e.jsx("div",{className:"space-y-2",children:z.slice(0,6).map((b,C)=>e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-0.5",children:[e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:b.name}),e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[b.average,"%"]})]}),e.jsx("div",{className:"h-1.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary-500 to-primary-600 group-hover:from-primary-600 group-hover:to-primary-700 transition-all duration-300",style:{width:`${parseFloat(b.average)/h*100}%`}})})]},C))})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-5 py-3 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(Lt,{size:16,className:"text-primary-500"}),"Assessment Summary"]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:[_," assessment",_!==1?"s":""," across ",Object.keys(g.records).length," term",Object.keys(g.records).length!==1?"s":""]})]}),e.jsxs(W,{onClick:()=>u(`/students/${n}/academic-report`),size:"sm",className:"text-xs",children:["View Full Report",e.jsx(Ga,{size:14,className:"ml-1.5"})]})]})}),e.jsxs("div",{className:"p-5",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:Object.entries(g.records).slice(0,3).map(([b,C])=>e.jsxs("div",{className:"p-3 rounded-xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-700/50 hover:border-primary-200 dark:hover:border-primary-800 transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:b}),e.jsx(Ze,{size:14,className:"text-slate-400 group-hover:text-primary-500 transition-colors"})]}),e.jsx("p",{className:"text-2xl font-black text-slate-900 dark:text-white mb-0.5",children:Object.keys(C).length}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Assessment",Object.keys(C).length!==1?"s":""]})]},b))}),Object.keys(g.records).length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Lt,{size:40,className:"mx-auto text-slate-300 mb-3"}),e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-1",children:"No Assessments Yet"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-4",children:"This student hasn't been assessed yet."}),e.jsx(W,{onClick:()=>u("/academics"),size:"sm",children:"Record First Assessment"})]})]})]}),c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>u(`/students/${n}/academic-report`),className:"group p-4 rounded-xl bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-900 border border-slate-200 dark:border-slate-700 hover:border-primary-300 dark:hover:border-primary-700 transition-all text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-white dark:bg-slate-800 shadow-sm flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(Ms,{size:18,className:"text-primary-600"})}),e.jsx(Ga,{size:16,className:"text-slate-400 group-hover:text-primary-500 group-hover:translate-x-0.5 group-hover:-translate-y-0.5 transition-all"})]}),e.jsx("h4",{className:"text-sm font-bold text-slate-900 dark:text-white mb-0.5",children:"View Detailed Report"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Complete academic analysis with charts"})]}),e.jsxs("button",{onClick:()=>{const b=m?.academic?.grade_id||m?.grade_id||"";u(`/academics?student=${n}&grade=${b}`)},className:"group p-4 rounded-xl bg-gradient-to-br from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-800/20 border border-primary-200 dark:border-primary-800 hover:border-primary-300 dark:hover:border-primary-700 transition-all text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-white dark:bg-slate-800 shadow-sm flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(ha,{size:18,className:"text-primary-600"})}),e.jsx(Ga,{size:16,className:"text-primary-400 group-hover:text-primary-500 group-hover:translate-x-0.5 group-hover:-translate-y-0.5 transition-all"})]}),e.jsx("h4",{className:"text-sm font-bold text-slate-900 dark:text-white mb-0.5",children:"Record New Assessment"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Add marks for this student"})]})]})]})},Jp=()=>{const{id:n}=Zt(),m=Le(),{config:c,hasFeature:u}=Nt(),[g,v]=f.useState(null),[j,S]=f.useState(!0),[_,E]=f.useState("overview"),z=JSON.parse(localStorage.getItem("user")||"{}"),h=z.role==="student",b=z.is_superuser||z.role==="admin"||z.role==="staff",C=()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),m("/student-login")},[A,M]=f.useState([]),[k,T]=f.useState(!1),[D,y]=f.useState(!0),[P,U]=f.useState(0);f.useEffect(()=>{const K=()=>{const Ne=window.scrollY;Ne<10?y(!0):Ne>P?y(!1):y(!0),U(Ne)};return window.addEventListener("scroll",K,{passive:!0}),()=>window.removeEventListener("scroll",K)},[P]);const[F,Z]=f.useState(!1),[ae,H]=f.useState(!1),[xe,I]=f.useState({amount:"",payment_method:"CASH",reference:"",term:"",description:""}),[ee,$]=f.useState(!1),[Q,re]=f.useState(!1),[B,le]=f.useState({date:new Date().toISOString().split("T")[0],status:"PRESENT",remark:""}),G=async()=>{if(!b){alert("You do not have permission to delete student records.");return}if(window.confirm("Are you sure you want to delete this student record? This action cannot be undone."))try{S(!0),await V.delete(`/api/students/${n}/`),m("/students?deleted=true")}catch(K){alert(K.response?.data?.error||"Failed to delete student"),S(!1)}},J=async()=>{try{S(!0);const K=await V.get(`/api/students/${n}/`);v(K.data.student)}catch(K){console.error("Error fetching student:",K)}finally{S(!1)}};if(f.useEffect(()=>{J()},[n]),f.useEffect(()=>{_==="attendance"&&n&&(T(!0),V.get(`/api/students/${n}/attendance/`).then(K=>M(K.data.attendance||[])).catch(K=>console.error("Error fetching attendance history:",K)).finally(()=>T(!1)))},[_,n]),j)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-950",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-slate-200 border-t-primary-600"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Loading Student Profile..."})]})});if(!g)return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 dark:bg-slate-950 gap-4",children:[e.jsx("div",{className:"h-20 w-20 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center text-slate-400",children:e.jsx(Qe,{size:40})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Student Not Found"}),e.jsx(W,{variant:"outline",onClick:()=>m(-1),children:"Return to Dashboard"})]});const ue=(()=>{if(!A||A.length===0)return{total:0,present:0,absent:0,late:0,rate:0};const K=A.filter(Ge=>Ge.status==="PRESENT").length,Ne=A.filter(Ge=>Ge.status==="ABSENT").length,Ae=A.filter(Ge=>Ge.status==="LATE").length,Ce=A.length,ct=Ce>0?(K/Ce*100).toFixed(1):0;return{total:Ce,present:K,absent:Ne,late:Ae,rate:ct}})(),ke=A.slice(0,7),we=(()=>{const K=new Date,Ne=K.getFullYear(),Ae=K.getMonth(),Ce=new Date(Ne,Ae+1,0).getDate(),ct=[];for(let Ge=1;Ge<=Ce;Ge++){const pt=`${Ne}-${String(Ae+1).padStart(2,"0")}-${String(Ge).padStart(2,"0")}`,ft=A.find(Ot=>Ot.date===pt);ct.push({day:Ge,status:ft?ft.status.toLowerCase():null})}return ct})(),Se=new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}),Me=async K=>{if(K.preventDefault(),!b){alert("Permission denied.");return}H(!0);try{await V.post(`/api/students/${n}/payment/add/`,xe),Z(!1),I({amount:"",payment_method:"CASH",reference:"",term:g?.personal?.current_term||"",description:""}),J()}catch(Ne){alert(Ne.response?.data?.error||"Failed to record payment")}finally{H(!1)}},Be=async K=>{if(K.preventDefault(),!b){alert("Permission denied.");return}re(!0);try{await V.post(`/api/students/${n}/attendance/mark/`,B),$(!1);const Ne=await V.get(`/api/students/${n}/attendance/`);M(Ne.data.attendance||[]),J()}catch(Ne){alert(Ne.response?.data?.error||"Failed to record attendance")}finally{re(!1)}},Ue=()=>e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 text-left",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-5 md:p-6 border border-slate-100 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2 text-sm md:text-base",children:[e.jsx(gt,{size:18,className:"text-purple-500"}),"Guardian Info"]}),b&&e.jsx(W,{variant:"ghost",size:"sm",className:"h-7 w-7 md:h-8 md:w-8 p-0 rounded-full",children:e.jsx(ha,{size:14})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-3 md:p-4 rounded-2xl flex items-center gap-4",children:[e.jsx("div",{className:"h-10 w-10 md:h-12 md:w-12 rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-600 flex items-center justify-center font-bold text-base md:text-lg shrink-0",children:g.guardian.name?g.guardian.name.charAt(0):"G"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-bold text-slate-900 dark:text-white truncate text-sm md:text-base",children:g.guardian.name||"No Guardian"}),e.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 font-medium",children:"Primary Guardian"})]})]}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Qp,{icon:Es,label:"Phone Number",value:g.guardian.phone}),e.jsx(Qp,{icon:Gt,label:"Email Address",value:g.guardian.email||"No email provided"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-5 md:p-6 border border-slate-100 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2 text-sm md:text-base",children:[e.jsx(Lt,{size:18,className:"text-blue-500"}),"Academic Status"]}),e.jsx("span",{className:"text-[10px] font-bold bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-2.5 py-1 rounded-full uppercase tracking-tighter",children:"ACTIVE"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"p-3 md:p-4 rounded-2xl bg-blue-50 dark:bg-blue-900/10 text-center",children:[e.jsx("p",{className:"text-[10px] text-blue-600 dark:text-blue-400 font-bold uppercase mb-0.5",children:"Grade"}),e.jsx("p",{className:"text-xl md:text-2xl font-black text-slate-900 dark:text-white",children:g.personal.grade})]}),e.jsxs("div",{className:"p-3 md:p-4 rounded-2xl bg-indigo-50 dark:bg-indigo-900/10 text-center",children:[e.jsx("p",{className:"text-[10px] text-indigo-600 dark:text-indigo-400 font-bold uppercase mb-0.5",children:"Rank"}),e.jsxs("p",{className:"text-xl md:text-2xl font-black text-slate-900 dark:text-white",children:["#",g.academic.position]})]})]}),e.jsxs(W,{className:"w-full justify-between group h-10 md:h-11 text-xs md:text-sm font-bold",variant:"outline",children:["View Full Report",e.jsx(Ga,{size:14,className:"text-slate-400 group-hover:text-primary-600 transition-transform group-hover:translate-x-0.5 group-hover:-translate-y-0.5"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 dark:from-slate-800 dark:to-slate-900 rounded-3xl p-5 md:p-6 text-white shadow-lg overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:e.jsx(dt,{size:120})}),e.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6 relative z-10",children:[e.jsxs("h3",{className:"font-bold flex items-center gap-2 text-sm md:text-base",children:[e.jsx(dt,{size:18,className:"text-emerald-400"}),"Attendance"]}),e.jsxs("span",{className:"text-[10px] font-black bg-white/10 px-2 py-1 rounded-lg uppercase tracking-tight",children:["Term ",g.personal.current_term]})]}),e.jsx("div",{className:"flex items-center justify-center py-2 md:py-4 relative z-10",children:e.jsxs("div",{className:"relative h-24 w-24 md:h-32 md:w-32 flex items-center justify-center",children:[e.jsxs("svg",{className:"h-full w-full -rotate-90",viewBox:"0 0 36 36",children:[e.jsx("path",{className:"text-white/10",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3.5"}),e.jsx("path",{className:"text-emerald-400",strokeDasharray:`${g.attendance.attendance_rate}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round"})]}),e.jsxs("div",{className:"absolute flex flex-col items-center",children:[e.jsxs("span",{className:"text-2xl md:text-3xl font-black tracking-tighter",children:[g.attendance.attendance_rate,"%"]}),e.jsx("span",{className:"text-[8px] md:text-[10px] text-slate-400 uppercase font-black tracking-widest",children:"Score"})]})]})}),e.jsxs("div",{className:"flex justify-between text-xs mt-4 px-2 relative z-10",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-slate-500 text-[9px] uppercase font-black",children:"Absent"}),e.jsxs("p",{className:"font-black text-sm",children:[g.attendance.absent_days,"D"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-slate-500 text-[9px] uppercase font-black",children:"Late"}),e.jsxs("p",{className:"font-black text-sm",children:[g.attendance.late_days,"D"]})]})]})]})]}),Rt=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 md:gap-6",children:[e.jsx(mm,{label:"Billed",value:`${c.currency}${g.financial.total_fees.toLocaleString()}`,icon:It,color:"border-slate-200"}),e.jsx(mm,{label:"Paid",value:`${c.currency}${g.financial.total_paid.toLocaleString()}`,icon:Ye,color:"border-emerald-200"}),e.jsx(mm,{label:"Total Balance",value:`${c.currency}${g.financial.balance.toLocaleString()}`,icon:ot,color:g.financial.balance>0?"border-rose-200":"border-slate-200"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl border border-slate-100 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-4 md:p-6 border-b border-slate-100 dark:border-slate-800 flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Transaction History"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Record and monitor fee payments"})]}),e.jsxs("div",{className:"flex w-full sm:w-auto gap-2",children:[b&&e.jsxs(W,{variant:"primary",className:"flex-1 sm:flex-none text-xs h-9",onClick:()=>{I({...xe,term:g.personal.current_term||1}),Z(!0)},children:[e.jsx(ff,{size:14,className:"mr-1.5"}),"Record Payment"]}),e.jsxs(W,{variant:"ghost",className:"flex-1 sm:flex-none text-xs h-9",children:[e.jsx(Ms,{size:14,className:"mr-1.5"}),"Statement"]})]})]}),e.jsx("div",{className:"md:hidden divide-y divide-slate-100 dark:divide-slate-800",children:g.financial.history.map(K=>e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-black text-slate-900 dark:text-white uppercase tracking-tight",children:["Term ",K.term," Fees"]}),e.jsx("p",{className:"text-[9px] text-slate-500 font-bold uppercase",children:K.date})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-black text-slate-900 dark:text-white",children:[c.currency,K.amount.toLocaleString()]}),e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-md text-[8px] font-black bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 uppercase tracking-widest border border-emerald-500/10",children:"Success"})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-[9px] bg-slate-50 dark:bg-slate-800/40 p-2 rounded-xl border border-slate-100 dark:border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nd,{size:10,className:"text-slate-400"}),e.jsxs("span",{className:"font-mono text-slate-400 uppercase tracking-tighter shrink-0",children:[K.reference.substring(0,10),"..."]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-slate-600 dark:text-slate-400",children:[e.jsx(Pp,{size:10}),e.jsx("span",{className:"font-black uppercase",children:K.method})]})]})]},K.id))}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Ref ID"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Method"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:g.financial.history.map(K=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-600 dark:text-slate-300",children:K.date}),e.jsxs("td",{className:"px-6 py-4 text-sm text-slate-900 dark:text-white font-medium",children:["Term ",K.term," Fees"]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded select-all cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-700",children:K.reference})}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:K.method}),e.jsxs("td",{className:"px-6 py-4 text-sm font-bold text-right text-slate-900 dark:text-white",children:[c.currency,K.amount.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",children:"Success"})})]},K.id))})]})})]})]});return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 pb-20",children:[e.jsx(he.div,{initial:{y:0},animate:{y:D?0:-100},transition:{duration:.3,ease:"easeInOut"},className:"sticky top-0 z-50 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 px-4 sm:px-8 py-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[b&&e.jsxs("button",{onClick:()=>m("/students"),className:"group flex items-center gap-2 text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white transition-colors",children:[e.jsx("div",{className:"p-2 rounded-full group-hover:bg-slate-100 dark:group-hover:bg-slate-800 transition-colors",children:e.jsx(Ls,{size:20})}),e.jsx("span",{className:"font-medium",children:"Directory"})]}),h&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary-600 dark:text-primary-400 font-bold",children:[e.jsx(ta,{size:24}),e.jsx("span",{children:"My Profile"})]}),e.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-3 py-1.5 rounded-xl bg-red-50 dark:bg-red-900/10 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/20 transition-all font-bold text-xs border border-red-100 dark:border-red-900/20",children:[e.jsx(Fr,{size:14}),"Logout"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(W,{variant:"outline",size:"sm",className:"hidden sm:flex",onClick:()=>{navigator.clipboard.writeText(g.personal.admission_number),alert("Admission ID copied!")},children:[e.jsx(Em,{size:16,className:"mr-2"})," Copy ID"]}),b&&e.jsxs(e.Fragment,{children:[e.jsx(W,{variant:"primary",size:"sm",onClick:()=>m(`/students/${n}/edit`),children:"Edit Profile"}),e.jsx(W,{variant:"secondary",size:"sm",className:"bg-red-50 text-red-600 hover:bg-red-100 border-red-100",onClick:G,children:"Delete Student"})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-8 py-4 md:py-8 space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"h-28 md:h-48 w-full bg-gradient-to-br from-slate-900 via-slate-800 to-primary-900 rounded-3xl md:rounded-[2rem] overflow-hidden shadow-lg border border-slate-200/10 dark:border-white/5",children:[e.jsx("div",{className:"absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),e.jsx("div",{className:"absolute -bottom-10 -right-10 p-12 opacity-10 rotate-12",children:e.jsx(ta,{size:240,className:"text-white"})})]}),e.jsxs("div",{className:"relative -mt-14 md:-mt-20 px-4 md:px-10 flex flex-col md:flex-row items-center md:items-end gap-3 md:gap-8",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"h-28 w-28 md:h-44 md:w-44 rounded-2xl md:rounded-[2rem] border-4 md:border-[6px] border-white dark:border-slate-950 bg-white dark:bg-slate-900 shadow-2xl overflow-hidden p-1 flex items-center justify-center transform transition-transform group-hover:scale-[1.02]",children:g.personal.photo?e.jsx("img",{src:g.personal.photo,alt:g.personal.full_name,className:"w-full h-full object-cover rounded-xl md:rounded-[1.6rem]"}):e.jsx("div",{className:"w-full h-full bg-slate-50 dark:bg-slate-800/50 rounded-xl md:rounded-[1.6rem] flex items-center justify-center text-slate-300",children:e.jsx(Qe,{size:64})})}),b&&e.jsx("button",{className:"absolute bottom-1 right-1 md:bottom-3 md:right-3 p-2 bg-primary-600 text-white rounded-xl md:rounded-2xl shadow-xl hover:bg-primary-700 transition-all hover:scale-110 border-2 md:border-4 border-white dark:border-slate-950",children:e.jsx(ha,{size:14,className:"md:w-4 md:h-4"})})]}),e.jsxs("div",{className:"pb-1 md:pb-6 flex-1 flex flex-col items-center md:items-start text-center md:text-left w-full md:w-auto mt-1 md:mt-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-1.5 md:gap-3 mb-2 md:mb-3",children:[e.jsx("h1",{className:"text-2xl md:text-5xl font-black text-slate-900 dark:text-white tracking-tight leading-tight uppercase",children:g.personal.full_name}),g.financial.balance<=0&&e.jsx("div",{className:"flex justify-center md:justify-start",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-[9px] md:text-xs font-black bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border border-emerald-500/20 shadow-sm backdrop-blur-md",children:[e.jsx(Ye,{size:12,className:"mr-1 md:mr-1.5"}),"CLEARED"]})})]}),e.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start items-center gap-2 md:gap-4",children:[e.jsxs("div",{className:"bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm px-3 py-1.5 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex items-center gap-2 text-xs md:text-sm font-bold text-slate-700 dark:text-slate-300",children:[e.jsx(Mt,{size:14,className:"text-primary-500"}),"ID: ",g.personal.admission_number]}),e.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-semibold text-xs md:text-sm px-1",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(gt,{size:16,className:"text-slate-400"}),g.personal.location]}),e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-slate-300 dark:bg-slate-700"}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(Ze,{size:16,className:"text-slate-400"}),g.personal.dob]})]})]})]})]})]}),e.jsx("div",{className:"flex md:justify-start overflow-x-auto pb-2 md:pb-0 no-scrollbar -mx-4 px-4 sm:mx-0 sm:px-0",children:e.jsxs("div",{className:"flex p-1 bg-white dark:bg-slate-900 rounded-full border border-slate-200 dark:border-slate-800 shadow-xl shadow-slate-200/50 dark:shadow-none min-w-max",children:[e.jsx(Gc,{id:"overview",label:"Overview",icon:hs,active:_==="overview",onClick:E}),u("FINANCE_MANAGEMENT")&&e.jsx(Gc,{id:"financial",label:"Financials",icon:It,active:_==="financial",onClick:E}),e.jsx(Gc,{id:"academic",label:"Academics",icon:Lt,active:_==="academic",onClick:E}),e.jsx(Gc,{id:"attendance",label:"Attendance",icon:dt,active:_==="attendance",onClick:E})]})}),e.jsx(vt,{mode:"wait",children:e.jsxs(he.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[_==="overview"&&Ue(),_==="financial"&&Rt(),_==="academic"&&e.jsx(Yj,{studentId:n,student:g,isManageable:b}),_==="attendance"&&e.jsx("div",{className:"space-y-4",children:k?e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-slate-200 border-t-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Loading attendance records..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-emerald-50/50 to-teal-50/50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-3 md:p-4 border border-emerald-100 dark:border-emerald-800/30",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 text-left",children:[e.jsx("div",{className:"h-8 w-8 md:h-10 md:w-10 bg-emerald-500 rounded-lg flex items-center justify-center shrink-0 shadow-sm",children:e.jsx(Ye,{size:16,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-emerald-700 dark:text-emerald-400 font-bold uppercase",children:"Rate"}),e.jsxs("p",{className:"text-xl md:text-2xl font-black text-emerald-900 dark:text-emerald-300 leading-none",children:[ue.rate,"%"]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50/50 to-indigo-50/50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-3 md:p-4 border border-blue-100 dark:border-blue-800/30",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 text-left",children:[e.jsx("div",{className:"h-8 w-8 md:h-10 md:w-10 bg-blue-500 rounded-lg flex items-center justify-center shrink-0 shadow-sm",children:e.jsx(Ze,{size:16,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-blue-700 dark:text-blue-400 font-bold uppercase",children:"Present"}),e.jsx("p",{className:"text-xl md:text-2xl font-black text-blue-900 dark:text-blue-300 leading-none",children:ue.present})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-rose-50/50 to-pink-50/50 dark:from-rose-900/20 dark:to-pink-900/20 rounded-xl p-3 md:p-4 border border-rose-100 dark:border-rose-800/30",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 text-left",children:[e.jsx("div",{className:"h-8 w-8 md:h-10 md:w-10 bg-rose-500 rounded-lg flex items-center justify-center shrink-0 shadow-sm",children:e.jsx(ua,{size:16,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-rose-700 dark:text-rose-400 font-bold uppercase",children:"Absent"}),e.jsx("p",{className:"text-xl md:text-2xl font-black text-rose-900 dark:text-rose-300 leading-none",children:ue.absent})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-amber-50/50 to-orange-50/50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-3 md:p-4 border border-amber-100 dark:border-amber-800/30",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 text-left",children:[e.jsx("div",{className:"h-8 w-8 md:h-10 md:w-10 bg-amber-500 rounded-lg flex items-center justify-center shrink-0 shadow-sm",children:e.jsx(dt,{size:16,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-amber-700 dark:text-amber-400 font-bold uppercase",children:"Late"}),e.jsx("p",{className:"text-xl md:text-2xl font-black text-amber-900 dark:text-amber-300 leading-none",children:ue.late})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-sm",children:"Recent Attendance"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Last 7 days"})]}),b&&e.jsxs(W,{size:"sm",className:"text-xs h-8",onClick:()=>$(!0),children:[e.jsx(nt,{size:14,className:"mr-1"}),"Mark Attendance"]})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800 max-h-80 overflow-y-auto",children:ke.length>0?ke.map((K,Ne)=>e.jsx("div",{className:"px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`h-8 w-8 rounded-lg flex items-center justify-center ${K.status==="PRESENT"?"bg-emerald-100 dark:bg-emerald-900/30":K.status==="LATE"?"bg-amber-100 dark:bg-amber-900/30":"bg-rose-100 dark:bg-rose-900/30"}`,children:K.status==="PRESENT"?e.jsx(Ye,{size:16,className:"text-emerald-600 dark:text-emerald-400"}):K.status==="LATE"?e.jsx(dt,{size:16,className:"text-amber-600 dark:text-amber-400"}):e.jsx(ua,{size:16,className:"text-rose-600 dark:text-rose-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-slate-900 dark:text-white",children:new Date(K.date).toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:K.date})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:K.time_in||"-"}),e.jsx("span",{className:`text-xs font-bold uppercase ${K.status==="PRESENT"?"text-emerald-600 dark:text-emerald-400":K.status==="LATE"?"text-amber-600 dark:text-amber-400":"text-rose-600 dark:text-rose-400"}`,children:K.status})]})]})},Ne)):e.jsxs("div",{className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:[e.jsx(dt,{size:32,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No attendance records yet"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-sm",children:Se}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:e.jsx(Ls,{size:16,className:"text-slate-600 dark:text-slate-400"})}),e.jsx("button",{className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:e.jsx(Ls,{size:16,className:"text-slate-600 dark:text-slate-400 rotate-180"})})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["S","M","T","W","T","F","S"].map((K,Ne)=>e.jsx("div",{className:"text-center py-1",children:e.jsx("span",{className:"text-xs font-bold text-slate-400 dark:text-slate-500",children:K})},Ne)),we.map((K,Ne)=>e.jsx("div",{className:`aspect-square rounded-md flex items-center justify-center text-xs font-semibold cursor-pointer transition-all hover:scale-110 ${K.status==="present"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":K.status==="late"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":K.status==="absent"?"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400":"bg-slate-100 text-slate-400 dark:bg-slate-800 dark:text-slate-500"}`,children:K.day},Ne))]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 pt-4 border-t border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"h-3 w-3 rounded bg-emerald-500"}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Present"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"h-3 w-3 rounded bg-amber-500"}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Late"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"h-3 w-3 rounded bg-rose-500"}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Absent"})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-4 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-sm",children:"Weekly Trend"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Last 7 days pattern"})]})}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:ke.slice(0,7).reverse().map((K,Ne)=>{const Ae=K.status.toLowerCase(),Ce=Ae==="present"?90:Ae==="late"?75:0;return e.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[e.jsx("div",{className:"w-full h-20 bg-slate-100 dark:bg-slate-800 rounded-lg relative overflow-hidden",children:e.jsx("div",{className:`absolute bottom-0 w-full transition-all duration-500 ${Ae==="present"?"bg-gradient-to-t from-emerald-500 to-emerald-400":Ae==="late"?"bg-gradient-to-t from-amber-500 to-amber-400":"bg-gradient-to-t from-rose-500 to-rose-400"}`,style:{height:`${Ce}%`}})}),e.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400",children:new Date(K.date).toLocaleDateString("en-US",{weekday:"short"})})]},Ne)})})]})]})})]},_)})]}),e.jsx(vt,{children:F&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:e.jsxs(he.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-slate-900 rounded-3xl w-full max-w-lg shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Record Fee Payment"}),e.jsxs("p",{className:"text-xs text-slate-500 font-medium uppercase tracking-wider mt-0.5",children:["Payment for ",g.personal.full_name]})]}),e.jsx("button",{onClick:()=>Z(!1),className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition-colors",children:e.jsx(Ve,{size:20})})]}),e.jsxs("form",{onSubmit:Me,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Payment Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 font-bold text-slate-400",children:c.currency}),e.jsx("input",{type:"number",required:!0,placeholder:"0.00",className:"w-full pl-12 pr-4 py-3 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-primary-500 focus:bg-white dark:focus:bg-slate-900 rounded-2xl outline-none transition-all font-bold text-lg",value:xe.amount,onChange:K=>I({...xe,amount:K.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Term"}),e.jsxs("select",{required:!0,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-primary-500 focus:bg-white dark:focus:bg-slate-900 rounded-2xl outline-none transition-all font-semibold",value:xe.term,onChange:K=>I({...xe,term:K.target.value}),children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Payment Method"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{id:"CASH",label:"Cash",icon:Ss},{id:"MPESA",label:"M-Pesa",icon:Am},{id:"BANK",label:"Bank",icon:Pp},{id:"CHEQUE",label:"Cheque",icon:Rn}].map(K=>e.jsxs("button",{type:"button",onClick:()=>I({...xe,payment_method:K.id}),className:`flex flex-col items-center gap-2 p-3 rounded-2xl border-2 transition-all ${xe.payment_method===K.id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20 text-primary-600":"border-slate-100 dark:border-slate-800 text-slate-400 hover:border-slate-200 dark:hover:border-slate-700"}`,children:[e.jsx(K.icon,{size:20}),e.jsx("span",{className:"text-[10px] font-bold uppercase",children:K.label})]},K.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Reference Number / Description"}),e.jsx("input",{type:"text",placeholder:"M-Pesa Code, Bank Ref, or Description",className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-primary-500 focus:bg-white dark:focus:bg-slate-900 rounded-2xl outline-none transition-all",value:xe.reference,onChange:K=>I({...xe,reference:K.target.value})})]}),e.jsxs("div",{className:"pt-4 flex gap-3",children:[e.jsx(W,{variant:"outline",className:"flex-1 rounded-2xl py-4",onClick:()=>Z(!1),type:"button",children:"Cancel"}),e.jsx(W,{variant:"primary",className:"flex-[2] rounded-2xl py-4 shadow-lg shadow-primary-500/25",type:"submit",disabled:ae,children:ae?"Recording...":"Complete Payment"})]})]})]})})}),e.jsx(vt,{children:ee&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:e.jsxs(he.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-slate-900 rounded-3xl w-full max-w-md shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Mark Attendance"}),e.jsx("p",{className:"text-xs text-slate-500 font-medium uppercase tracking-wider mt-0.5",children:g.personal.full_name})]}),e.jsx("button",{onClick:()=>$(!1),className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition-colors",children:e.jsx(Ve,{size:20})})]}),e.jsxs("form",{onSubmit:Be,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Date"}),e.jsx("input",{type:"date",required:!0,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-primary-500 focus:bg-white dark:focus:bg-slate-900 rounded-2xl outline-none transition-all font-semibold",value:B.date,onChange:K=>le({...B,date:K.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Status"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{id:"PRESENT",label:"Present",icon:Ye,color:"emerald"},{id:"LATE",label:"Late",icon:dt,color:"amber"},{id:"ABSENT",label:"Absent",icon:ua,color:"rose"}].map(K=>e.jsxs("button",{type:"button",onClick:()=>le({...B,status:K.id}),className:`flex flex-col items-center gap-2 p-4 rounded-2xl border-2 transition-all ${B.status===K.id?`border-${K.color}-500 bg-${K.color}-50 dark:bg-${K.color}-900/20 text-${K.color}-600`:"border-slate-100 dark:border-slate-800 text-slate-400 hover:border-slate-200 dark:hover:border-slate-700"}`,children:[e.jsx(K.icon,{size:24}),e.jsx("span",{className:"text-[10px] font-bold uppercase",children:K.label})]},K.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Remark (Optional)"}),e.jsx("textarea",{placeholder:"Reason for late/absent, etc.",rows:"2",className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-primary-500 focus:bg-white dark:focus:bg-slate-900 rounded-2xl outline-none transition-all resize-none",value:B.remark,onChange:K=>le({...B,remark:K.target.value})})]}),e.jsxs("div",{className:"pt-4 flex gap-3",children:[e.jsx(W,{variant:"outline",className:"flex-1 rounded-2xl py-4",onClick:()=>$(!1),type:"button",children:"Cancel"}),e.jsx(W,{variant:"primary",className:"flex-[2] rounded-2xl py-4 shadow-lg shadow-primary-500/25",type:"submit",disabled:Q,children:Q?"Saving...":"Save Record"})]})]})]})})})]})},Vj=({teacher:n,onClick:m,onDelete:c})=>e.jsxs(he.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},whileHover:{y:-5},className:"bg-white dark:bg-slate-900 rounded-2xl p-4 md:p-6 shadow-sm border border-slate-100 dark:border-slate-800 cursor-pointer group hover:shadow-xl transition-all relative overflow-hidden",onClick:m,children:[e.jsx("div",{className:"absolute top-4 left-4 z-20 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("button",{onClick:u=>{u.stopPropagation(),c&&c(u,n.id,n.full_name)},className:"p-1.5 bg-white/90 dark:bg-slate-800/90 rounded-lg text-slate-400 hover:text-red-500 shadow-sm border border-slate-100 dark:border-slate-800",children:e.jsx(Cs,{size:14})})}),e.jsx("div",{className:"absolute top-4 right-4 z-10",children:e.jsx("span",{className:`flex h-2.5 w-2.5 rounded-full ring-4 ring-white dark:ring-slate-900 ${n.status==="ACTIVE"?"bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.5)]":n.status==="ON_LEAVE"?"bg-amber-500 shadow-[0_0_10px_rgba(245,158,11,0.5)]":"bg-rose-500 shadow-[0_0_10px_rgba(244,63,94,0.5)]"}`})}),e.jsxs("div",{className:"flex flex-col items-center md:items-start text-center md:text-left gap-4",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-2xl bg-slate-100 dark:bg-slate-800 overflow-hidden shadow-inner group-hover:scale-105 transition-transform duration-300",children:n.avatar?e.jsx("img",{src:n.avatar,alt:n.full_name,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-gradient-to-br from-indigo-500 via-indigo-600 to-primary-600 text-white font-bold text-2xl",children:n.full_name.charAt(0)})})}),e.jsxs("div",{className:"min-w-0 w-full",children:[e.jsx("h3",{className:"text-base md:text-lg font-bold text-slate-900 dark:text-white truncate group-hover:text-primary-600 transition-colors",children:n.full_name}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-2 mt-1",children:[e.jsx("span",{className:"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 px-2 py-0.5 rounded-lg text-[10px] font-bold uppercase tracking-widest border border-slate-200 dark:border-slate-700/50",children:n.tsc_number||"N/A"}),e.jsx("span",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-tighter",children:n.role||"Teacher"})]})]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-800/30",children:[e.jsx(Lt,{size:16,className:"text-primary-500 shrink-0"}),e.jsxs("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300 truncate",children:[n.subjects&&n.subjects.length>0?n.subjects[0]:"No Subjects",n.subjects&&n.subjects.length>1&&e.jsxs("span",{className:"text-primary-500 ml-1",children:["+",n.subjects.length-1]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("a",{href:`mailto:${n.email}`,onClick:u=>u.stopPropagation(),className:"flex items-center justify-center gap-2 py-2.5 rounded-xl bg-slate-100 dark:bg-slate-800 hover:bg-white dark:hover:bg-slate-700 text-slate-600 dark:text-slate-400 hover:text-primary-600 dark:hover:text-primary-400 shadow-sm border border-slate-200 dark:border-slate-700/50 transition-all text-[11px] font-bold uppercase tracking-wider",children:[e.jsx(Gt,{size:14})," Email"]}),e.jsxs("a",{href:`tel:${n.phone}`,onClick:u=>u.stopPropagation(),className:"flex items-center justify-center gap-2 py-2.5 rounded-xl bg-slate-100 dark:bg-slate-800 hover:bg-white dark:hover:bg-slate-700 text-slate-600 dark:text-slate-400 hover:text-emerald-600 dark:hover:text-emerald-400 shadow-sm border border-slate-200 dark:border-slate-700/50 transition-all text-[11px] font-bold uppercase tracking-wider",children:[e.jsx(Es,{size:14})," Call"]})]})]})]}),Kj=({mode:n,setMode:m})=>e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900 p-1 rounded-xl flex items-center",children:[e.jsx("button",{onClick:()=>m("grid"),className:`p-2 rounded-lg transition-all ${n==="grid"?"bg-white dark:bg-slate-800 text-primary-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:e.jsxs("div",{className:"grid grid-cols-2 gap-0.5 w-4 h-4",children:[e.jsx("div",{className:"bg-current rounded-[1px]"}),e.jsx("div",{className:"bg-current rounded-[1px]"}),e.jsx("div",{className:"bg-current rounded-[1px]"}),e.jsx("div",{className:"bg-current rounded-[1px]"})]})}),e.jsx("button",{onClick:()=>m("list"),className:`p-2 rounded-lg transition-all ${n==="list"?"bg-white dark:bg-slate-800 text-primary-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:e.jsxs("div",{className:"flex flex-col gap-0.5 w-4 h-4",children:[e.jsx("div",{className:"bg-current h-[2px] w-full rounded-[1px]"}),e.jsx("div",{className:"bg-current h-[2px] w-full rounded-[1px]"}),e.jsx("div",{className:"bg-current h-[2px] w-full rounded-[1px]"})]})})]}),Xj=()=>{const n=Le(),[m,c]=f.useState([]),[u,g]=f.useState(!0),[v,j]=f.useState("grid"),[S,_]=f.useState({search:"",status:""}),[E,z]=f.useState({page:1,total:0,pages:1}),h=async()=>{m.length===0&&g(!0);try{const A=await V.get("/api/teachers/",{params:{search:S.search,status:S.status,page:E.page,per_page:v==="grid"?12:10}});c(A.data.teachers||[]),z(M=>({...M,total:A.data.total||0,pages:A.data.pages||1,page:A.data.current_page||1}))}catch(A){console.error("Error fetching teachers:",A),c([]),z(M=>({...M,total:0,pages:1,page:1}))}finally{g(!1)}},b=async(A,M,k)=>{if(A&&A.stopPropagation(),window.confirm(`Are you sure you want to delete Teacher ${k}? This will also remove their user account and cannot be undone.`))try{await V.delete(`/api/teachers/${M}/`),c(T=>T.filter(D=>D.id!==M)),z(T=>({...T,total:T.total-1}))}catch(T){alert(T.response?.data?.error||"Failed to delete teacher")}};f.useEffect(()=>{const A=setTimeout(()=>{h()},300);return()=>clearTimeout(A)},[S,E.page,v]);const C={total:E.total,active:Array.isArray(m)?m.filter(A=>A.status==="ACTIVE").length:0,onLeave:Array.isArray(m)?m.filter(A=>A.status==="ON_LEAVE").length:0};return e.jsxs("div",{className:"p-4 md:p-8 max-w-7xl mx-auto space-y-6 md:space-y-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 pb-4 md:pb-0 border-b md:border-none border-slate-100 dark:border-slate-800 text-center md:text-left",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Staff & Faculty"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium",children:"Coordinate and manage institutional educators and leadership."})]}),e.jsxs("div",{className:"flex gap-3 w-full md:w-auto",children:[e.jsxs(W,{variant:"outline",size:"md",className:"flex-1 md:flex-none h-11 rounded-xl bg-white dark:bg-slate-900 shadow-sm",onClick:()=>{},children:[e.jsx(Ms,{size:18,className:"mr-2"})," ",e.jsx("span",{className:"sr-only sm:not-sr-only",children:"Export"})]}),e.jsxs(W,{size:"md",onClick:()=>n("/teachers/create"),className:"flex-[2] md:flex-none h-11 rounded-xl bg-indigo-600 hover:bg-indigo-700 shadow-lg shadow-indigo-500/10 font-bold",children:[e.jsx(nt,{size:20,className:"mr-2"})," Add Teacher"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 md:gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900/50 backdrop-blur-md p-5 rounded-2xl border border-slate-100 dark:border-slate-800 shadow-sm flex flex-col md:flex-row items-center md:items-start text-center md:text-left gap-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-blue-50 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400 shrink-0",children:e.jsx(id,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] md:text-xs font-bold text-slate-500 uppercase tracking-widest mb-1",children:"Total"}),e.jsx("h3",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-white leading-none",children:C.total})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900/50 backdrop-blur-md p-5 rounded-2xl border border-slate-100 dark:border-slate-800 shadow-sm flex flex-col md:flex-row items-center md:items-start text-center md:text-left gap-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-emerald-50 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400 shrink-0",children:e.jsx(Pr,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] md:text-xs font-bold text-slate-500 uppercase tracking-widest mb-1",children:"Active"}),e.jsx("h3",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-white leading-none",children:C.active})]})]}),e.jsxs("div",{className:"col-span-2 md:col-span-1 bg-white dark:bg-slate-900/50 backdrop-blur-md p-5 rounded-2xl border border-slate-100 dark:border-slate-800 shadow-sm flex flex-col md:flex-row items-center md:items-start text-center md:text-left gap-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-amber-50 dark:bg-amber-900/30 flex items-center justify-center text-amber-600 dark:text-amber-400 shrink-0",children:e.jsx(dt,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] md:text-xs font-bold text-slate-500 uppercase tracking-widest mb-1",children:"On Leave"}),e.jsx("h3",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-white leading-none",children:C.onLeave})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900/80 backdrop-blur-xl p-3 md:p-4 rounded-3xl border border-slate-200 dark:border-slate-800 shadow-lg flex flex-col md:flex-row gap-3 md:gap-4 justify-between items-center sticky top-4 z-20",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row flex-1 gap-3 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-1 md:max-w-md",children:[e.jsx(jt,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{type:"text",placeholder:"Find staff members...",className:"w-full pl-12 pr-4 py-2.5 rounded-xl bg-slate-100 dark:bg-slate-800/50 border-2 border-transparent focus:border-indigo-500/30 focus:bg-white dark:focus:bg-slate-900 transition-all text-sm font-semibold placeholder:text-slate-400 dark:text-white",value:S.search,onChange:A=>_(M=>({...M,search:A.target.value}))})]}),e.jsxs("select",{className:"px-6 py-2.5 rounded-xl bg-slate-100 dark:bg-slate-800/50 border-2 border-transparent focus:border-indigo-500/30 text-sm font-bold text-slate-700 dark:text-slate-200 cursor-pointer appearance-none uppercase tracking-widest",value:S.status,onChange:A=>_(M=>({...M,status:A.target.value})),children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"on_leave",children:"On Leave"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto justify-between md:justify-end",children:[e.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:[m.length," Professionals"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-px bg-slate-200 dark:bg-slate-700/50 hidden md:block"}),e.jsx(Kj,{mode:v,setMode:j})]})]})]}),m.length>0?e.jsxs(e.Fragment,{children:[v==="grid"?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-8",children:e.jsx(vt,{mode:"popLayout",children:m.map((A,M)=>e.jsx(Vj,{teacher:A,onClick:()=>n(`/teachers/${A.id}`),onDelete:b},A.id))})}):e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-100 dark:border-slate-800 shadow-sm overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50/50 dark:bg-slate-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Teacher"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider hidden sm:table-cell",children:"Role & Subjects"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider hidden md:table-cell",children:"Contact"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:m.map(A=>e.jsxs("tr",{onClick:()=>n(`/teachers/${A.id}`),className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors cursor-pointer",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-100 dark:bg-slate-800 overflow-hidden",children:A.avatar?e.jsx("img",{src:A.avatar,alt:"",className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-indigo-100 text-indigo-600 font-bold text-sm",children:A.full_name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900 dark:text-white text-sm",children:A.full_name}),e.jsxs("p",{className:"text-xs text-slate-500",children:["TSC: ",A.tsc_number]})]})]})}),e.jsxs("td",{className:"px-6 py-4 hidden sm:table-cell",children:[e.jsx("p",{className:"text-sm text-slate-900 dark:text-white font-medium",children:A.role||"Teacher"}),e.jsx("p",{className:"text-xs text-slate-500 mt-0.5 truncate max-w-[200px]",children:A.subjects?.join(", ")})]}),e.jsx("td",{className:"px-6 py-4 hidden md:table-cell",children:e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gt,{size:12})," ",A.email]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Es,{size:12})," ",A.phone]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2.5 py-1 rounded-full text-xs font-bold ${A.status==="ACTIVE"?"bg-green-100 text-green-700":A.status==="ON_LEAVE"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:A.status})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",onClick:M=>M.stopPropagation(),children:[e.jsx("button",{className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg text-slate-400 hover:text-primary-600",children:e.jsx(ha,{size:16})}),e.jsx("button",{onClick:M=>b(M,A.id,A.full_name),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg text-slate-400 hover:text-red-600 transition-colors",children:e.jsx(Cs,{size:16})})]})})]},A.id))})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 pt-8 border-t border-slate-200 dark:border-slate-800",children:[e.jsxs("p",{className:"text-[10px] md:text-xs font-bold text-slate-400 uppercase tracking-widest",children:["Page ",E.page," ",e.jsx("span",{className:"text-slate-200 dark:text-slate-700 mx-2",children:"/"})," ",E.pages]}),e.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[e.jsxs(W,{variant:"secondary",size:"sm",disabled:E.page<=1,onClick:()=>z(A=>({...A,page:A.page-1})),className:"flex-1 sm:flex-none h-10 px-6 rounded-xl border-slate-200 dark:border-slate-800 text-xs font-bold uppercase tracking-widest",children:[e.jsx(Ls,{size:16,className:"mr-1"})," Prev"]}),e.jsxs(W,{variant:"secondary",size:"sm",disabled:E.page>=E.pages,onClick:()=>z(A=>({...A,page:A.page+1})),className:"flex-1 sm:flex-none h-10 px-6 rounded-xl border-slate-200 dark:border-slate-800 text-xs font-bold uppercase tracking-widest",children:["Next ",e.jsx(ds,{size:16,className:"ml-1"})]})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-24 bg-slate-50 dark:bg-slate-900/50 rounded-2xl border-2 border-dashed border-slate-200 dark:border-slate-800 text-center",children:[e.jsx("div",{className:"h-20 w-20 bg-white dark:bg-slate-800 rounded-full flex items-center justify-center shadow-sm mb-6",children:e.jsx(jt,{size:40,className:"text-slate-300 dark:text-slate-600"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"No Teachers Found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 max-w-md",children:"We couldn't find any teachers matching your search. Try adjusting filters or add a new teacher."}),e.jsx(W,{onClick:()=>_({search:"",status:""}),className:"mt-6",variant:"secondary",children:"Clear Filters"})]})]})},Qj=({currentStep:n})=>{const m=[{id:1,label:"Personal Details",icon:Qe},{id:2,label:"Professional Details",icon:qa},{id:3,label:"Employment & Payroll",icon:Wt}];return e.jsx("div",{className:"flex items-center justify-between w-full mb-8 px-4",children:m.map((c,u)=>e.jsxs(js.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center relative z-10 w-24",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 border-2 ${n>=c.id?"bg-secondary-600 border-secondary-600 text-white shadow-lg shadow-secondary-500/30":"bg-white border-slate-200 text-slate-400"}`,children:e.jsx(c.icon,{size:18})}),e.jsx("span",{className:`text-xs mt-2 font-medium text-center ${n>=c.id?"text-secondary-700":"text-slate-400"}`,children:c.label})]}),u<m.length-1&&e.jsx("div",{className:"flex-1 h-[2px] mx-2 -mt-6 bg-slate-100 relative",children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-secondary-500 transition-all duration-500 ease-out",style:{width:n>c.id?"100%":"0%"}})})]},c.id))})},Jj=()=>{const n=Le(),[m,c]=f.useState(1),[u,g]=f.useState(!1),[v,j]=f.useState([]),[S,_]=f.useState([]),[E,z]=f.useState([]),[h,b]=f.useState([]),[C,A]=f.useState(null),[M,k]=f.useState({first_name:"",last_name:"",email:"",phone:"",national_id:"",date_of_birth:"",gender:"M",marital_status:"SINGLE",religion:"CHRISTIAN",nationality:"Kenyan",address:"",tsc_number:"",position:"TEACHER",department:"",qualifications:"DEG",years_of_experience:0,subjects:[],is_class_teacher:!1,grade:"",basic_salary:"",branch:"",profile_picture:null,certificate:null});f.useEffect(()=>{(async()=>{try{const[F,Z,ae,H]=await Promise.all([V.get("/api/grades/"),V.get("/api/subjects/"),V.get("/api/branches/"),V.get("/api/departments/")]),xe=Array.from(new Map(F.data.grades.map(I=>[I.name,I])).values());j(xe),z(Z.data.subjects),_(ae.data.branches),b(H.data.departments)}catch(F){console.error("Error fetching form options:",F),h.length||b([{id:1,name:"Languages"},{id:2,name:"Sciences"},{id:3,name:"Humanities"}])}})()},[]);const T=U=>{const{name:F,value:Z,type:ae,checked:H,files:xe,options:I}=U.target;if(ae==="file")k(ee=>({...ee,[F]:xe[0]}));else if(ae==="checkbox")k(ee=>({...ee,[F]:H}));else if(F==="subjects"){const ee=Array.from(I).filter($=>$.selected).map($=>$.value);k($=>({...$,[F]:ee}))}else k(ee=>({...ee,[F]:Z}))},D=U=>{const Z={1:["first_name","last_name","email","national_id","phone","date_of_birth","nationality"],2:["position","qualifications"],3:["basic_salary"]}[U];for(const ae of Z)if(!M[ae])return!1;return!0},y=()=>{D(m)?(c(U=>U+1),A(null)):A("Please fill in all required fields marked with *")},P=async()=>{if(!D(3)){A("Please fill in required employment details");return}g(!0),A(null);const U=new FormData;Object.keys(M).forEach(F=>{M[F]!==null&&(F==="subjects"&&Array.isArray(M[F])?M[F].forEach(Z=>U.append("subjects",Z)):U.append(F,M[F]))});try{(await V.post("/api/teachers/create/",U)).data.success&&n("/teachers?success=true")}catch(F){console.error("Submission error:",F.response?.data);const Z=F.response?.data;if(Z?.errors){const H=Object.keys(Z.errors)[0],xe=Z.errors[H];A(`${H.replace("_"," ").toUpperCase()}: ${Array.isArray(xe)?xe[0]:xe}`)}else A(Z?.error||"Failed to create teacher. Please check all fields.")}finally{g(!1)}};return e.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{onClick:()=>n("/teachers"),className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 cursor-pointer transition-colors",children:[e.jsx(Ls,{size:20}),e.jsx("span",{children:"Back to Teachers"})]})}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-xl overflow-hidden border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"bg-gradient-to-r from-secondary-900 to-secondary-800 px-8 py-8 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white opacity-5 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),e.jsx("h2",{className:"text-3xl font-bold relative z-10",children:"New Teacher Registration"}),e.jsx("p",{className:"text-secondary-100 text-sm mt-2 relative z-10 max-w-lg",children:"Complete the form below to register a new teaching staff member. Credentials will be generated automatically."})]}),e.jsxs("div",{className:"p-8",children:[e.jsx(Qj,{currentStep:m}),C&&e.jsxs(he.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8 bg-red-50 text-red-600 p-4 rounded-xl flex items-center gap-3 text-sm border border-red-100",children:[e.jsx(ot,{size:20,className:"shrink-0"}),C]}),e.jsx("div",{className:"min-h-[400px]",children:e.jsxs(vt,{mode:"wait",children:[m===1&&e.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{label:"First Name",name:"first_name",value:M.first_name,onChange:T,required:!0,placeholder:"e.g. John"}),e.jsx(fe,{label:"Last Name",name:"last_name",value:M.last_name,onChange:T,required:!0,placeholder:"e.g. Doe"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{type:"email",label:"Email Address",name:"email",value:M.email,onChange:T,required:!0,placeholder:"john.doe@school.com"}),e.jsx(fe,{label:"Phone Number",name:"phone",value:M.phone,onChange:T,placeholder:"+254..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{label:"National ID",name:"national_id",value:M.national_id,onChange:T,required:!0}),e.jsx(fe,{type:"date",label:"Date of Birth",name:"date_of_birth",value:M.date_of_birth,onChange:T,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Gender"}),e.jsxs("select",{name:"gender",value:M.gender,onChange:T,className:"w-full h-11 rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 focus:ring-2 focus:ring-secondary-100 focus:border-secondary-500 transition-all outline-none",children:[e.jsx("option",{value:"M",children:"Male"}),e.jsx("option",{value:"F",children:"Female"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Marital Status"}),e.jsxs("select",{name:"marital_status",value:M.marital_status,onChange:T,className:"w-full h-11 rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 focus:ring-2 focus:ring-secondary-100 focus:border-secondary-500 transition-all outline-none",children:[e.jsx("option",{value:"SINGLE",children:"Single"}),e.jsx("option",{value:"MARRIED",children:"Married"}),e.jsx("option",{value:"DIVORCED",children:"Divorced"}),e.jsx("option",{value:"WIDOWED",children:"Widowed"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Religion"}),e.jsxs("select",{name:"religion",value:M.religion,onChange:T,className:"w-full h-11 rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 focus:ring-2 focus:ring-secondary-100 focus:border-secondary-500 transition-all outline-none",children:[e.jsx("option",{value:"CHRISTIAN",children:"Christian"}),e.jsx("option",{value:"MUSLIM",children:"Muslim"}),e.jsx("option",{value:"HINDU",children:"Hindu"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsx(fe,{label:"Nationality",name:"nationality",value:M.nationality,onChange:T})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Home Address"}),e.jsx("textarea",{name:"address",value:M.address,onChange:T,rows:"3",className:"w-full rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 py-3 focus:ring-2 focus:ring-secondary-100 focus:border-secondary-500 transition-all outline-none resize-none"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-slate-50 dark:bg-slate-900 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[M.profile_picture?e.jsxs("div",{className:"w-32 h-32 rounded-full flex items-center justify-center mb-4 shadow-sm border border-slate-100 overflow-hidden relative group",children:[e.jsx("img",{src:URL.createObjectURL(M.profile_picture),alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:e.jsx(Dn,{className:"text-white",size:24})}),e.jsx("input",{type:"file",name:"profile_picture",onChange:T,className:"absolute inset-0 opacity-0 cursor-pointer",accept:"image/*"})]}):e.jsxs("div",{className:"w-32 h-32 bg-white rounded-full flex items-center justify-center mb-4 shadow-sm border border-slate-100 overflow-hidden relative group",children:[e.jsx(Qe,{size:48,className:"text-slate-300"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:e.jsx(Dn,{className:"text-white",size:24})}),e.jsx("input",{type:"file",name:"profile_picture",onChange:T,className:"absolute inset-0 opacity-0 cursor-pointer",accept:"image/*"})]}),e.jsxs(W,{variant:"outline",size:"sm",className:"relative",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Dn,{size:14})," Upload Photo"]}),e.jsx("input",{type:"file",name:"profile_picture",onChange:T,className:"absolute inset-0 opacity-0 cursor-pointer",accept:"image/*"})]}),e.jsxs("p",{className:"text-xs text-slate-400 mt-3",children:["Allowed *.jpeg, *.jpg, *.png, *.gif ",e.jsx("br",{})," Max size of 3 MB"]})]})}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-5 rounded-2xl",children:[e.jsxs("h4",{className:"font-bold text-blue-800 dark:text-blue-300 flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})," Registration Guide"]}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400 leading-relaxed",children:["Fill out all sections to register a new teacher. Mandatory fields include name, email, and position.",e.jsx("br",{}),e.jsx("br",{}),"The teacher uses their ",e.jsx("b",{children:"email address"})," as username and the default portal password set in Settings."]})]})]})]},"step1"),m===2&&e.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{label:"TSC Number (Optional)",name:"tsc_number",value:M.tsc_number,onChange:T}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Position / Role"}),e.jsxs("select",{name:"position",value:M.position,onChange:T,className:"w-full h-11 rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 focus:ring-2 focus:ring-secondary-100 focus:border-secondary-500 transition-all outline-none",children:[e.jsx("option",{value:"TEACHER",children:"Teacher"}),e.jsx("option",{value:"HOD",children:"Head of Department"}),e.jsx("option",{value:"DEPUTY",children:"Deputy Principal"}),e.jsx("option",{value:"PRINCIPAL",children:"Principal"}),e.jsx("option",{value:"ADMIN",children:"Administrator"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Department"}),e.jsxs("select",{name:"department",value:M.department,onChange:T,className:"w-full h-11 rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 focus:ring-2 focus:ring-secondary-100 focus:border-secondary-500 transition-all outline-none",children:[e.jsx("option",{value:"",children:"Select Department"}),h.map(U=>e.jsx("option",{value:U.id,children:U.name},U.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Qualification"}),e.jsxs("select",{name:"qualifications",value:M.qualifications,onChange:T,className:"w-full h-11 rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 focus:ring-2 focus:ring-secondary-100 focus:border-secondary-500 transition-all outline-none",children:[e.jsx("option",{value:"CERT",children:"Certificate"}),e.jsx("option",{value:"DIP",children:"Diploma"}),e.jsx("option",{value:"DEG",children:"Degree"}),e.jsx("option",{value:"MAST",children:"Masters"}),e.jsx("option",{value:"PHD",children:"PhD"})]})]})]}),e.jsx("div",{className:"max-w-md",children:e.jsx(fe,{type:"number",label:"Years of Experience",name:"years_of_experience",value:M.years_of_experience,onChange:T})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Subjects (Hold Ctrl/Cmd to select multiple)"}),e.jsx("select",{name:"subjects",multiple:!0,value:M.subjects,onChange:T,className:"w-full h-40 rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:text-white dark:border-slate-700 px-4 py-3 focus:ring-2 focus:ring-secondary-100 focus:border-secondary-500 transition-all outline-none scrollbar-thin",children:E.map(U=>e.jsxs("option",{value:U.id,className:"py-1",children:[U.name," (",U.code,")"]},U.id))}),e.jsx("p",{className:"text-xs text-slate-400",children:"Select all subjects this teacher is qualified to teach."})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"is_class_teacher",checked:M.is_class_teacher,onChange:T,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 dark:bg-slate-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-100 dark:peer-focus:ring-blue-900/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-secondary-600"})]}),e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Designate as Class Teacher"})]})}),M.is_class_teacher&&e.jsxs(he.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"Enable this to assign this teacher to a specific grade and section"}),e.jsxs("select",{name:"grade",value:M.grade,onChange:T,className:"w-full md:w-1/2 h-11 rounded-xl border border-slate-200 bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 focus:ring-2 focus:ring-secondary-100 outline-none",children:[e.jsx("option",{value:"",children:"Select Grade"}),v.map(U=>e.jsx("option",{value:U.id,children:U.name},U.id))]})]})]})]},"step2"),m===3&&e.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{type:"number",label:"Basic Salary (KES) *",name:"basic_salary",value:M.basic_salary,onChange:T,required:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"School Branch (Optional)"}),e.jsxs("select",{name:"branch",value:M.branch,onChange:T,className:"w-full h-11 rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 focus:ring-2 focus:ring-secondary-100 focus:border-secondary-500 transition-all outline-none",children:[e.jsx("option",{value:"",children:"Select Branch (Default: Main School)"}),S.map(U=>e.jsx("option",{value:U.id,children:U.name},U.id))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-base font-medium text-slate-800 dark:text-slate-200",children:"Certificate Upload"}),e.jsxs("div",{className:"border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-2xl p-8 flex flex-col items-center justify-center text-center transition-colors bg-slate-50 dark:bg-slate-900/50 relative group",onDragOver:U=>{U.preventDefault(),U.currentTarget.classList.add("border-secondary-500","bg-secondary-50/50")},onDragLeave:U=>{U.preventDefault(),U.currentTarget.classList.remove("border-secondary-500","bg-secondary-50/50")},onDrop:U=>{U.preventDefault(),U.currentTarget.classList.remove("border-secondary-500","bg-secondary-50/50"),U.dataTransfer.files&&U.dataTransfer.files[0]&&k(F=>({...F,certificate:U.dataTransfer.files[0]}))},children:[e.jsx("div",{className:"w-16 h-16 bg-blue-50 dark:bg-blue-900/20 text-blue-500 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:e.jsx(Wt,{size:32})}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mb-1 font-medium",children:M.certificate?M.certificate.name:"Choose file or drag & drop"}),e.jsx("p",{className:"text-xs text-slate-400",children:"PDF or Image of highest qualification"}),e.jsx("input",{type:"file",name:"certificate",onChange:T,className:"hidden",id:"cert-upload",accept:".pdf,image/*"}),e.jsx(W,{variant:"outline",size:"sm",className:"mt-4 relative z-10",onClick:()=>document.getElementById("cert-upload").click(),children:M.certificate?"Change File":"Browse Files"})]})]})]},"step3")]})}),e.jsxs("div",{className:"flex justify-between pt-8 border-t border-slate-100 mt-8",children:[e.jsx(W,{variant:"secondary",onClick:m===1?()=>n("/teachers"):()=>c(U=>U-1),className:"bg-slate-100 text-slate-600 hover:bg-slate-200 border-none",children:m===1?"Cancel":"Back"}),e.jsxs(W,{onClick:m===3?P:y,isLoading:u,className:"w-36 bg-secondary-600 hover:bg-secondary-700 text-white shadow-lg shadow-secondary-500/30",children:[m===3?"Complete Registration":"Next Step",m!==3&&e.jsx(ds,{size:18,className:"ml-2"})]})]})]})]})]})},cl=({children:n,className:m=""})=>e.jsx("div",{className:`bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-800 overflow-hidden ${m}`,children:n}),um=({children:n,color:m="slate"})=>{const c={green:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",blue:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",yellow:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",red:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",slate:"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-400",primary:"bg-primary-50 text-primary-700 dark:bg-primary-900/20 dark:text-primary-400"};return e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-bold tracking-wide uppercase ${c[m]||c.slate}`,children:n})},hm=({icon:n,label:m,value:c,trend:u,color:g="primary"})=>e.jsxs(cl,{className:"p-4 md:p-5 flex items-center gap-4 hover:shadow-md transition-shadow cursor-default",children:[e.jsx("div",{className:`p-3 md:p-4 rounded-xl bg-${g}-50 dark:bg-${g}-900/20 text-${g}-600 dark:text-${g}-400 shrink-0`,children:e.jsx(n,{className:"w-5 h-5 md:w-6 md:h-6"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px] md:text-xs font-bold text-slate-400 uppercase tracking-widest mb-0.5",children:m}),e.jsx("h4",{className:"text-lg md:text-xl font-bold text-slate-900 dark:text-white truncate",children:c})]})]}),Wp=({isOpen:n,onClose:m,title:c,children:u})=>n?e.jsx(vt,{children:e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:m,className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md"}),e.jsxs(he.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white dark:bg-slate-900 rounded-[2.5rem] w-full max-w-lg shadow-[0_20px_50px_rgba(0,0,0,0.3)] border border-white/20 dark:border-slate-800 overflow-hidden relative z-10",children:[e.jsxs("div",{className:"px-8 py-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50/50 dark:bg-slate-800/50",children:[e.jsx("h3",{className:"text-sm font-black text-slate-900 dark:text-white uppercase tracking-[0.2em]",children:c}),e.jsx("button",{onClick:m,className:"h-10 w-10 flex items-center justify-center text-slate-400 hover:text-slate-900 dark:hover:text-white transition-all bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:e.jsx(Ve,{size:18})})]}),e.jsx("div",{className:"p-8",children:u})]})]})}):null,Wj=({active:n,onClick:m,children:c,icon:u})=>e.jsxs("button",{onClick:m,className:`flex items-center gap-2 px-6 py-4 text-xs font-bold uppercase tracking-widest transition-all relative shrink-0 ${n?"text-primary-600 dark:text-primary-400":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[u&&e.jsx(u,{className:"w-4 h-4"}),e.jsx("span",{children:c}),n&&e.jsx(he.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary-600 dark:bg-primary-400"})]}),eN=()=>{const{id:n}=Zt(),m=Le(),[c,u]=f.useState(null),[g,v]=f.useState(!0),[j,S]=f.useState("overview"),[_,E]=f.useState([]),[z,h]=f.useState([]),[b,C]=f.useState([]),[A,M]=f.useState([]),[k,T]=f.useState(!1),[D,y]=f.useState({}),[P,U]=f.useState(null),[F,Z]=f.useState(null),[ae,H]=f.useState(null),[xe,I]=f.useState(!1),[ee,$]=f.useState(!1),[Q,re]=f.useState(!1),[B,le]=f.useState({leave_type:"SICK",start_date:"",end_date:"",reason:""}),[G,J]=f.useState({amount:"",reason:""}),[oe,ue]=f.useState("Monday");f.useEffect(()=>{ye(),ke()},[n]);const ke=async()=>{try{const[K,Ne,Ae,Ce]=await Promise.all([V.get("/api/grades/"),V.get("/api/subjects/"),V.get("/api/branches/"),V.get("/api/departments/")]);E(K.data.grades),C(Ne.data.subjects),h(Ae.data.branches),M(Ce.data.departments)}catch(K){console.error("Error fetching options:",K),A.length||M([{id:1,name:"Languages"},{id:2,name:"Sciences"},{id:3,name:"Humanities"}])}},ye=async()=>{try{const Ne=(await V.get(`/api/teachers/${n}/`)).data.teacher;u(Ne),y({first_name:Ne.personal.first_name,last_name:Ne.personal.last_name,email:Ne.personal.email,phone:Ne.personal.phone,national_id:Ne.personal.national_id,address:Ne.personal.address,dob:Ne.personal.dob,gender:Ne.personal.gender,marital_status:Ne.personal.marital_status,religion:Ne.personal.religion,nationality:Ne.personal.nationality,tsc_number:Ne.personal.tsc_number,date_joined:Ne.professional.date_joined,status:Ne.professional.status,position:Ne.professional.position,qualifications:Ne.professional.qualifications,years_of_experience:Ne.professional.years_of_experience,department:Ne.professional.department_id,branch:Ne.professional.branch_id,is_class_teacher:Ne.professional.is_class_teacher,grade:Ne.professional.grade_id,subjects:Ne.professional.subject_ids||[]})}catch(K){console.error("Error fetching teacher details:",K)}finally{v(!1)}},we=async()=>{const K=new FormData;Object.keys(D).forEach(Ne=>{Ne==="subjects"&&Array.isArray(D[Ne])?D[Ne].forEach(Ae=>K.append("subjects",Ae)):D[Ne]!==null&&D[Ne]!==void 0&&K.append(Ne,D[Ne])}),P&&K.append("avatar",P),ae&&K.append("certificate",ae);try{v(!0),await V.post(`/api/teachers/${n}/`,K),T(!1),U(null),H(null),ye()}catch(Ne){alert(Ne.response?.data?.error||"Failed to update teacher.")}finally{v(!1)}},Se=async K=>{K.preventDefault();try{re(!0),await V.post(`/api/teachers/${n}/request-leave/`,B),I(!1),ye(),le({leave_type:"SICK",start_date:"",end_date:"",reason:""})}catch(Ne){alert(Ne.response?.data?.error||"Failed to submit request")}finally{re(!1)}},Me=async K=>{K.preventDefault();try{re(!0),await V.post(`/api/teachers/${n}/request-advance/`,G),$(!1),ye(),J({amount:"",reason:""})}catch(Ne){alert(Ne.response?.data?.error||"Failed to submit request")}finally{re(!1)}},Be=async()=>{if(window.confirm("Are you sure you want to delete this teacher? This will also remove their user account and cannot be undone."))try{v(!0),await V.delete(`/api/teachers/${n}/`),m("/teachers?deleted=true")}catch(K){alert(K.response?.data?.error||"Failed to delete teacher"),v(!1)}},Ue=K=>{const{name:Ne,value:Ae,type:Ce,checked:ct,files:Ge,options:pt}=K.target;if(Ce!=="file")if(Ce==="checkbox")y(ft=>({...ft,[Ne]:ct}));else if(Ne==="subjects"){const ft=Array.from(pt).filter(Ot=>Ot.selected).map(Ot=>Ot.value);y(Ot=>({...Ot,[Ne]:ft}))}else y(ft=>({...ft,[Ne]:Ae}))};if(g&&!c)return e.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-50 dark:bg-slate-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!c)return e.jsx("div",{className:"p-8 text-center bg-slate-50 dark:bg-slate-900 h-screen",children:"Teacher Not Found"});const Rt=[{id:"overview",label:"Overview",icon:pf},{id:"schedule",label:"Schedule",icon:Ze},{id:"financials",label:"Financials & Requests",icon:it}];return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 pb-20",children:[e.jsxs("div",{className:"h-48 md:h-80 bg-gradient-to-br from-indigo-900 via-indigo-800 to-indigo-950 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950/60 to-transparent"})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 -mt-24 md:-mt-32 relative z-10",children:[e.jsxs(cl,{className:"mb-6 border-none shadow-2xl",children:[e.jsx("div",{className:"p-6 md:p-10",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 md:gap-10 items-center md:items-end",children:[e.jsxs("div",{className:"relative group shrink-0 -mt-16 md:mt-0",children:[e.jsx("div",{className:"h-28 w-28 md:h-40 md:w-40 rounded-2xl ring-[4px] md:ring-[8px] ring-white dark:ring-slate-900 overflow-hidden bg-white dark:bg-slate-800 shadow-xl group-hover:scale-[1.02] transition-transform duration-500",children:F||c.personal&&c.personal.avatar?e.jsx("img",{src:F||c.personal.avatar,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-indigo-500 to-indigo-600 text-white text-4xl md:text-6xl font-bold",children:c.personal?c.personal.first_name[0]:"?"})}),k&&e.jsxs("label",{className:"absolute inset-0 flex items-center justify-center bg-indigo-600/60 backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-all duration-300 cursor-pointer rounded-2xl ring-4 ring-transparent border-4 border-white dark:border-slate-900",children:[e.jsx(zm,{className:"text-white",size:24}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:K=>{const Ne=K.target.files[0];Ne&&(U(Ne),Z(URL.createObjectURL(Ne)))}})]})]}),e.jsx("div",{className:"flex-1 w-full text-center md:text-left",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-3",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:c.personal.full_name}),!k&&e.jsx(um,{color:c.professional.status==="ACTIVE"?"green":"red",children:c.professional.status})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-x-4 gap-y-2.5 text-[9px] md:text-[10px] font-bold uppercase tracking-widest text-slate-500 dark:text-slate-400",children:[e.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-100 dark:border-slate-800 md:bg-transparent md:border-none md:p-0",children:[e.jsx(qa,{size:14,className:"text-indigo-500"})," ",c.professional.position_display]}),e.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-100 dark:border-slate-800 md:bg-transparent md:border-none md:p-0",children:[e.jsx(Gt,{size:14,className:"text-indigo-500"})," ",c.personal.email]}),e.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-100 dark:border-slate-800 md:bg-transparent md:border-none md:p-0",children:[e.jsx(Es,{size:14,className:"text-indigo-500"})," ",c.personal.phone]}),e.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-100 dark:border-slate-800 md:bg-transparent md:border-none md:p-0 opacity-70",children:[e.jsx(Mt,{size:14,className:"text-indigo-500"})," TSC: ",c.personal.tsc_number||"N/A"]})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:k?e.jsxs(e.Fragment,{children:[e.jsxs(W,{onClick:we,isLoading:g,className:"w-full h-11 rounded-xl bg-indigo-600 shadow-lg shadow-indigo-500/10 font-bold px-6",children:[e.jsx(ma,{size:18,className:"mr-2"})," Save Changes"]}),e.jsxs(W,{variant:"secondary",onClick:()=>T(!1),className:"w-full h-11 rounded-xl font-bold px-6",children:[e.jsx(Ve,{size:18,className:"mr-2"})," Cancel"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{size:"lg",className:"w-full h-11 md:h-12 rounded-xl bg-slate-900 dark:bg-white dark:text-slate-900 font-bold px-8",onClick:()=>T(!0),children:"Edit Profile"}),e.jsx(W,{size:"lg",variant:"outline",className:"w-full h-11 md:h-12 rounded-xl border-rose-200 text-rose-600 hover:bg-rose-50 font-bold px-8",onClick:Be,children:"Delete"})]})})]})})]})}),e.jsx("div",{className:"px-2 md:px-10 border-t border-slate-100 dark:border-slate-800 flex gap-2 overflow-x-auto no-scrollbar scroll-smooth",children:Rt.map(K=>e.jsx(Wj,{active:j===K.id,onClick:()=>S(K.id),icon:K.icon,children:K.label},K.id))})]}),e.jsx(vt,{mode:"wait",children:e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:[j==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-6 md:col-span-2",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsx(hm,{icon:Ye,label:"Class Assigned",value:c.professional.grade_assigned||"None",color:"indigo"}),e.jsx(hm,{icon:Lt,label:"Subjects",value:c.professional.subjects.length,color:"indigo"}),e.jsx("div",{className:"col-span-2 lg:col-span-1",children:e.jsx(hm,{icon:dt,label:"Years Exp.",value:c.professional.experience,color:"indigo"})})]}),e.jsx(cl,{children:e.jsxs("div",{className:"p-6 md:p-8",children:[e.jsxs("h3",{className:"text-lg font-bold mb-6 text-slate-800 dark:text-white flex items-center gap-3",children:[e.jsx("div",{className:"h-9 w-9 md:h-10 md:w-10 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600",children:e.jsx(Qe,{size:18})}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-10 gap-y-8",children:[e.jsx(fe,{label:"First Name",name:"first_name",value:k?D.first_name:c.personal.first_name,disabled:!k,onChange:Ue,className:"font-bold"}),e.jsx(fe,{label:"Last Name",name:"last_name",value:k?D.last_name:c.personal.last_name,disabled:!k,onChange:Ue,className:"font-bold"}),e.jsx(fe,{label:"Date of Birth",name:"dob",value:k?D.dob:c.personal.dob,type:"date",disabled:!k,onChange:Ue,className:"font-bold"}),e.jsx(fe,{label:"Address",name:"address",value:k?D.address:c.personal.address,disabled:!k,onChange:Ue,className:"font-bold"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:"Gender"}),k?e.jsxs("select",{name:"gender",value:D.gender,onChange:Ue,className:"w-full rounded-xl h-11 border-slate-200 dark:border-slate-700 dark:bg-slate-800 focus:ring-primary-500 font-bold px-4",children:[e.jsx("option",{value:"M",children:"Male"}),e.jsx("option",{value:"F",children:"Female"})]}):e.jsx("div",{className:"h-11 flex items-center px-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-100 dark:border-slate-800/50 text-sm font-bold",children:c.personal.gender_display})]}),e.jsx(fe,{label:"Date of Birth",name:"dob",value:k?D.dob:c.personal.dob,type:"date",disabled:!k,onChange:Ue,className:"font-bold"}),e.jsx(fe,{label:"Address",name:"address",value:k?D.address:c.personal.address,disabled:!k,onChange:Ue,className:"font-bold"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:"Marital Status"}),k?e.jsx("select",{name:"marital_status",value:D.marital_status,onChange:Ue,className:"w-full rounded-xl h-11 border-slate-200 dark:border-slate-700 dark:bg-slate-800 focus:ring-primary-500 font-bold px-4",children:["SINGLE","MARRIED","DIVORCED","WIDOWED"].map(K=>e.jsx("option",{value:K,children:K},K))}):e.jsx("div",{className:"h-11 flex items-center px-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-100 dark:border-slate-800/50 text-sm font-bold capitalize",children:c.personal.marital_status?.toLowerCase()})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:"Religion"}),k?e.jsx("select",{name:"religion",value:D.religion,onChange:Ue,className:"w-full rounded-xl h-11 border-slate-200 dark:border-slate-700 dark:bg-slate-800 focus:ring-primary-500 font-bold px-4",children:["CHRISTIAN","MUSLIM","HINDU","OTHER"].map(K=>e.jsx("option",{value:K,children:K},K))}):e.jsx("div",{className:"h-12 flex items-center px-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-800/50 text-sm font-bold capitalize",children:c.personal.religion?.toLowerCase()})]}),e.jsx(fe,{label:"Nationality",name:"nationality",value:k?D.nationality:c.personal.nationality||"Kenyan",disabled:!k,onChange:Ue,className:"font-bold"})]})]})}),e.jsx(cl,{children:e.jsxs("div",{className:"p-6 md:p-10",children:[e.jsxs("h3",{className:"text-xl font-black mb-8 text-slate-800 dark:text-white flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 md:h-12 md:w-12 rounded-2xl bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-600",children:e.jsx(qa,{size:20})}),"Employment Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-10 gap-y-8",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:"Position"}),k?e.jsx("select",{name:"position",value:D.position,onChange:Ue,className:"w-full rounded-2xl h-12 border-slate-200 dark:border-slate-700 dark:bg-slate-800 focus:ring-primary-500 font-bold px-4",children:["TEACHER","HOD","DEPUTY","PRINCIPAL","ADMIN"].map(K=>e.jsx("option",{value:K,children:K},K))}):e.jsx("div",{className:"h-12 flex items-center px-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-800/50 text-sm font-bold",children:c.professional.position_display})]}),e.jsx(fe,{label:"TSC Number",name:"tsc_number",value:k?D.tsc_number:c.personal.tsc_number,disabled:!k,onChange:Ue,className:"font-bold"}),e.jsx(fe,{label:"Date Joined",name:"date_joined",value:k?D.date_joined:c.professional.date_joined,type:"date",disabled:!k,onChange:Ue,className:"font-bold"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:"Status"}),k?e.jsxs("select",{name:"status",value:D.status,onChange:Ue,className:"w-full rounded-2xl h-12 border-slate-200 dark:border-slate-700 dark:bg-slate-800 font-bold px-4",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"ON_LEAVE",children:"On Leave"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"})]}):e.jsx("div",{className:"h-12 flex items-center px-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-800/50 text-sm font-bold",children:c.professional.status})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:"Department"}),k?e.jsxs("select",{name:"department",value:D.department||"",onChange:Ue,className:"w-full rounded-2xl h-12 border-slate-200 dark:border-slate-700 dark:bg-slate-800 font-bold px-4",children:[e.jsx("option",{value:"",children:"Select Dept"}),A.map(K=>e.jsx("option",{value:K.id,children:K.name},K.id))]}):e.jsx("div",{className:"h-12 flex items-center px-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-800/50 text-sm font-bold",children:c.professional.department_name||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:"Campus/Branch"}),k?e.jsxs("select",{name:"branch",value:D.branch||"",onChange:Ue,className:"w-full rounded-2xl h-12 border-slate-200 dark:border-slate-700 dark:bg-slate-800 font-bold px-4",children:[e.jsx("option",{value:"",children:"Select Branch"}),z.map(K=>e.jsx("option",{value:K.id,children:K.name},K.id))]}):e.jsx("div",{className:"h-12 flex items-center px-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-800/50 text-sm font-bold",children:c.professional.branch_name||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1",children:"Qualification"}),k?e.jsx("select",{name:"qualifications",value:D.qualifications,onChange:Ue,className:"w-full rounded-2xl h-12 border-slate-200 dark:border-slate-700 dark:bg-slate-800 font-bold px-4",children:["CERT","DIP","DEG","MAST","PHD"].map(K=>e.jsx("option",{value:K,children:K},K))}):e.jsx("div",{className:"h-12 flex items-center px-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-800/50 text-sm font-bold",children:c.professional.qualifications_display})]}),e.jsx(fe,{type:"number",label:"Years Experience",name:"years_of_experience",value:k?D.years_of_experience:c.professional.years_of_experience,disabled:!k,onChange:Ue,className:"font-bold"}),e.jsxs("div",{className:"md:col-span-2 p-6 bg-slate-100/30 dark:bg-slate-800/30 rounded-3xl border border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[k?e.jsx("input",{type:"checkbox",name:"is_class_teacher",checked:D.is_class_teacher,onChange:Ue,className:"w-6 h-6 rounded-lg border-slate-300 text-indigo-600 focus:ring-indigo-500"}):c.professional.is_class_teacher&&e.jsx(Ye,{size:24,className:"text-emerald-500"}),e.jsx("span",{className:"text-sm font-black uppercase tracking-widest text-slate-700 dark:text-slate-300",children:"Class Teacher Responsibilities"})]}),(k?D.is_class_teacher:c.professional.is_class_teacher)&&e.jsxs("div",{className:"pl-10 space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Assigned Class / Grade"}),k?e.jsxs("select",{name:"grade",value:D.grade||"",onChange:Ue,className:"w-full md:w-1/2 block rounded-2xl h-12 border-slate-200 dark:border-slate-700 dark:bg-slate-800 font-bold px-4",children:[e.jsx("option",{value:"",children:"Select Grade"}),_.map(K=>e.jsx("option",{value:K.id,children:K.name},K.id))]}):e.jsx("p",{className:"text-xl font-black text-indigo-600 dark:text-indigo-400",children:c.professional.grade_assigned})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 ml-1",children:"Highest Qualification Certificate"}),k?e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"file",onChange:K=>H(K.target.files[0]),className:"block w-full text-xs text-slate-400 file:mr-4 file:py-2.5 file:px-6 file:rounded-2xl file:border-0 file:text-[10px] file:font-black file:uppercase file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 transition-all"})}):c.professional.certificate?e.jsxs("a",{href:c.professional.certificate,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-3 px-6 py-3 bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 text-xs font-black uppercase tracking-widest text-indigo-600 hover:scale-[1.02] transition-transform",children:[e.jsx(Wt,{size:18})," View Document"]}):e.jsx("span",{className:"text-slate-400 italic text-xs font-bold uppercase tracking-widest",children:"No document available"})]})]})]})})]}),e.jsx("div",{className:"space-y-6",children:e.jsx(cl,{className:"h-full",children:e.jsxs("div",{className:"p-6 md:p-8",children:[e.jsx("h3",{className:"text-lg font-black mb-6 text-slate-800 dark:text-white uppercase tracking-widest",children:"Assigned Subjects"}),k?e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Hold Ctrl/Cmd to select multiple"}),e.jsx("select",{name:"subjects",multiple:!0,value:D.subjects,onChange:Ue,className:"w-full h-64 rounded-2xl border border-slate-200 dark:border-slate-700 dark:bg-slate-800 p-4 text-sm font-bold focus:ring-4 focus:ring-indigo-500/10 outline-none no-scrollbar",children:b.map(K=>e.jsxs("option",{value:K.id,className:"py-2",children:[K.name," (",K.code,")"]},K.id))})]}):e.jsx("div",{className:"flex flex-wrap gap-2.5 mb-8",children:c.professional.subjects.length>0?c.professional.subjects.map(K=>e.jsx("div",{className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-[10px] font-black uppercase tracking-widest border border-indigo-100 dark:border-indigo-800/50",children:K.name},K.id)):e.jsx("p",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest bg-slate-50 dark:bg-slate-800/50 w-full p-4 rounded-xl text-center",children:"No assignments"})}),e.jsx("h3",{className:"text-lg font-black mb-6 text-slate-800 dark:text-white uppercase tracking-widest mt-12",children:"Performance"}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-2xl p-8 text-center border border-slate-100 dark:border-slate-800",children:[e.jsx("div",{className:"h-14 w-14 rounded-full bg-white dark:bg-slate-800 shadow-sm flex items-center justify-center mx-auto mb-4 text-slate-300",children:e.jsx(hs,{size:24})}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 leading-relaxed",children:"System performance analytical module coming soon."})]})]})})})]}),j==="schedule"&&e.jsx(cl,{className:"min-h-[500px] border-none shadow-2xl overflow-visible",children:e.jsxs("div",{className:"p-6 md:p-12",children:[e.jsxs("div",{className:"flex flex-wrap md:flex-row justify-between items-center gap-6 mb-10",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h3",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-white uppercase tracking-tight mb-1.5",children:"Weekly Master Schedule"}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Academic Delivery Plan  FY 2024"})]}),e.jsxs("button",{className:"w-full md:w-auto h-12 px-8 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-xs uppercase tracking-widest shadow-lg shadow-indigo-500/10 transition-all active:scale-95 flex items-center justify-center gap-3",onClick:()=>m(`/teachers/${n}/schedule`),children:[e.jsx(Ze,{size:18})," Configure Schedule"]})]}),e.jsx("div",{className:"md:hidden flex overflow-x-auto gap-2 pb-6 scrollbar-none",children:["Monday","Tuesday","Wednesday","Thursday","Friday"].map(K=>e.jsx("button",{onClick:()=>ue(K),className:`px-5 py-2.5 rounded-xl text-[10px] font-bold uppercase tracking-widest whitespace-nowrap transition-all border ${oe===K?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white dark:bg-slate-900 text-slate-500 border-slate-200 dark:border-slate-800"}`,children:K},K))}),c.schedule&&c.schedule.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 md:gap-6",children:["Monday","Tuesday","Wednesday","Thursday","Friday"].map((K,Ne)=>{const Ae=c.schedule.filter(Ce=>Ce.day.toUpperCase()===K.toUpperCase());return e.jsxs("div",{className:`${oe===K?"flex":"hidden md:flex"} rounded-2xl p-5 md:p-6 border-2 h-full flex flex-col min-h-[300px] md:min-h-[350px] transition-all hover:shadow-lg ${Ne%2===0?"bg-slate-50/50 dark:bg-slate-800/30 border-slate-100 dark:border-slate-800":"bg-white dark:bg-slate-900 border-indigo-500/5"}`,children:[e.jsxs("h4",{className:"font-bold text-indigo-600 dark:text-indigo-400 mb-6 flex justify-between items-center",children:[e.jsx("span",{className:"text-xs uppercase tracking-widest",children:K}),e.jsxs("span",{className:"text-[10px] bg-white dark:bg-slate-800 px-3 py-1 rounded-lg border border-slate-100 dark:border-slate-700 shadow-sm",children:[Ae.length," sessions"]})]}),e.jsx("div",{className:"space-y-4 flex-1",children:Ae.length>0?Ae.map(Ce=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 md:p-5 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700/50 group hover:border-indigo-500/30 transition-all",children:[e.jsx("div",{className:"flex justify-between items-start mb-2.5",children:e.jsx("div",{className:"text-[9px] font-bold text-indigo-500 uppercase tracking-widest bg-indigo-50 dark:bg-indigo-900/50 px-2 py-1 rounded-lg border border-indigo-100/50 dark:border-indigo-800/30",children:Ce.time})}),e.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-sm mb-2.5 leading-tight group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors uppercase tracking-tight",children:Ce.subject}),e.jsxs("div",{className:"flex items-center gap-2 pt-2.5 border-t border-slate-50 dark:border-slate-700",children:[e.jsx("div",{className:"h-6 w-6 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-slate-400 text-[8px] font-bold",children:Ce.grade?.charAt(0)}),e.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:Ce.grade})]})]},Ce.id)):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center opacity-20 py-10 scale-90",children:[e.jsx("div",{className:"h-16 w-16 bg-slate-200 dark:bg-slate-800 rounded-3xl mb-4 flex items-center justify-center text-slate-400",children:e.jsx(dt,{size:24})}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:"No Lectures"})]})})]},K)})}):e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-2xl p-10 md:p-20 text-center border-2 border-dashed border-slate-200 dark:border-slate-800",children:[e.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 bg-white dark:bg-slate-800 rounded-xl md:rounded-[2rem] shadow-xl flex items-center justify-center mx-auto mb-6 md:mb-8 text-slate-300",children:e.jsx(Ze,{size:32})}),e.jsx("h4",{className:"text-lg md:text-xl font-bold text-slate-900 dark:text-white uppercase tracking-widest mb-3 md:mb-4",children:"No Schedule Configured"}),e.jsx("p",{className:"text-xs md:text-sm text-slate-400 max-w-sm mx-auto mb-8 md:mb-10 leading-relaxed font-medium",children:"This teacher hasn't been assigned any academic sessions for the current semester yet."}),e.jsx("button",{className:"h-12 px-10 bg-slate-900 dark:bg-white dark:text-slate-900 text-white rounded-xl font-bold text-xs uppercase tracking-widest shadow-xl transition-all active:scale-95",onClick:()=>m(`/teachers/${n}/schedule`),children:"Assign Classes"})]})]})}),j==="financials"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 md:gap-10",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(cl,{className:"p-6 md:p-8 bg-gradient-to-br from-slate-900 to-indigo-950 text-white border-none shadow-xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 h-32 w-32 bg-indigo-500/10 rounded-full -mr-16 -mt-16 blur-2xl group-hover:bg-indigo-500/20 transition-colors"}),e.jsxs("div",{className:"flex items-center gap-4 mb-4 opacity-50",children:[e.jsx(it,{size:18,className:"text-indigo-400"}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.2em]",children:"Gross Monthly Package"})]}),e.jsxs("div",{className:"text-3xl md:text-4xl font-bold tracking-tighter mb-4",children:[e.jsx("span",{className:"text-lg md:text-xl opacity-40 mr-2 font-bold uppercase tracking-normal",children:"KES"}),c.financial.basic_salary?.toLocaleString()]}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-white/5 border border-white/10 rounded-lg text-[9px] font-bold uppercase tracking-widest text-indigo-300",children:[e.jsx(hs,{size:10})," Fully Taxable"]})]}),e.jsxs(cl,{className:"p-6 md:p-8 bg-white dark:bg-slate-900 border-2 border-indigo-500/10 shadow-lg relative overflow-hidden group",children:[e.jsx("div",{className:"absolute bottom-0 right-0 h-32 w-32 bg-emerald-500/5 rounded-full -mr-16 -mb-16 blur-2xl"}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"p-2 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 rounded-lg",children:e.jsx(It,{size:18})}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-400",children:"Net Take Home"})]}),e.jsxs("div",{className:"text-3xl md:text-4xl font-bold tracking-tighter mb-4 text-slate-900 dark:text-white",children:[e.jsx("span",{className:"text-lg md:text-xl opacity-20 mr-2 font-bold uppercase tracking-normal",children:"KES"}),c.financial.net_salary?.toLocaleString()]}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg text-[9px] font-bold uppercase tracking-widest text-emerald-600 dark:text-emerald-400",children:[e.jsx(Di,{size:10})," Audit Verified"]})]})]}),e.jsxs(cl,{className:"overflow-hidden border-2 border-slate-100 dark:border-slate-800 shadow-lg",children:[e.jsxs("div",{className:"p-5 bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-[0.3em] flex items-center gap-3",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-indigo-500 animate-pulse"}),"Compensation Architecture"]}),e.jsx("span",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 px-3 py-1 rounded-full uppercase tracking-widest",children:"FY 2024-25"})]}),e.jsx("div",{className:"p-0",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-slate-100 dark:divide-slate-800",children:[e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:"Base Allowances"}),e.jsxs("span",{className:"text-lg font-bold text-emerald-600",children:["+ KES ",c.financial.allowances?.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center opacity-40 grayscale",children:[e.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Statutory Benefits"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-900 dark:text-white uppercase tracking-widest",children:"Included"})]})]}),e.jsxs("div",{className:"p-6 space-y-4 bg-slate-50/20 dark:bg-slate-900/20",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"PAYE / Regular Deductions"}),e.jsxs("span",{className:"text-xs font-bold text-rose-500",children:["- KES ",c.financial.deductions?.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Social Security (NSSF)"}),e.jsxs("span",{className:"text-xs font-bold text-rose-500",children:["- KES ",c.financial.nssf?.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center border-t border-slate-100 dark:border-slate-800 pt-5",children:[e.jsx("span",{className:"text-[10px] text-indigo-500 font-bold uppercase tracking-widest",children:"Internal Liabilities"}),e.jsxs("span",{className:"text-xs font-bold text-rose-600 underline decoration-rose-200",children:["- KES ",c.financial.loans?.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] text-orange-500 font-bold uppercase tracking-widest",children:"Salary Advance Deduction"}),e.jsxs("span",{className:"text-xs font-bold text-orange-600 underline decoration-orange-200",children:["- KES ",c.financial.advances?.toLocaleString()||"0"]})]})]})]})})]}),e.jsx(cl,{className:"border-none shadow-lg",children:e.jsxs("div",{className:"p-6 md:p-8",children:[e.jsxs("h4",{className:"text-lg font-bold text-slate-900 dark:text-white uppercase tracking-widest mb-8 flex items-center gap-4",children:[e.jsx("div",{className:"h-9 w-9 rounded-xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-400",children:e.jsx(hs,{size:18})}),"Audit Trail & Requests"]}),e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{children:[e.jsxs("h5",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-indigo-500 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-indigo-500"}),"Vacation & Personal Leave Log"]}),c.leaves&&c.leaves.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.leaves.map((K,Ne)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50/50 dark:bg-slate-800/50 rounded-xl border border-slate-100 dark:border-slate-800/50 group hover:border-indigo-500/20 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2.5 bg-white dark:bg-slate-900 rounded-lg text-slate-400 group-hover:text-indigo-500 transition-colors shadow-sm",children:e.jsx(Ze,{size:16})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-800 dark:text-white uppercase tracking-widest mb-0.5",children:K.type}),e.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-tighter",children:[K.start_date,"  ",K.end_date]})]})]}),e.jsx(um,{color:K.status==="APPROVED"?"green":K.status==="REJECTED"?"red":"yellow",children:K.status})]},Ne))}):e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-300 bg-slate-50 dark:bg-slate-800/30 p-6 rounded-xl text-center border border-dashed border-slate-200 dark:border-slate-800",children:"No active leave records found."})]}),e.jsxs("div",{className:"pt-8 border-t border-slate-100 dark:border-slate-800",children:[e.jsxs("h5",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-emerald-500 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500"}),"Financial Advances / Short-term Credit"]}),c.advances&&c.advances.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.advances.map((K,Ne)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50/50 dark:bg-slate-800/50 rounded-xl border border-slate-100 dark:border-slate-800/50 group hover:border-emerald-500/20 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2.5 bg-white dark:bg-slate-900 rounded-lg text-slate-400 group-hover:text-emerald-500 transition-colors shadow-sm",children:e.jsx(It,{size:16})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-slate-800 dark:text-white",children:["KES ",K.amount.toLocaleString()]}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:K.date})]})]}),e.jsx(um,{color:K.status==="DEDUCTED"?"blue":K.status==="APPROVED"?"green":K.status==="REJECTED"?"red":"yellow",children:K.status==="DEDUCTED"?"RECOUPED":K.status})]},Ne))}):e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-300 bg-slate-50 dark:bg-slate-800/30 p-6 rounded-xl text-center border border-dashed border-slate-200 dark:border-slate-800",children:"No advance requests initiated."})]})]})]})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-slate-900 dark:bg-slate-900 text-white rounded-2xl p-6 shadow-xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-24 bg-indigo-500/10 rounded-full blur-3xl -mr-20 -mt-20 group-hover:bg-indigo-500/20 transition-colors"}),e.jsx("h3",{className:"text-lg font-bold mb-2 relative z-10 tracking-tight",children:"Executive Actions"}),e.jsx("p",{className:"text-slate-400 text-[10px] font-bold uppercase tracking-widest mb-8 relative z-10 opacity-60",children:"Operations management console"}),e.jsxs("div",{className:"space-y-3 relative z-10",children:[e.jsxs("button",{onClick:()=>I(!0),className:"w-full h-14 px-5 bg-white/5 hover:bg-white/10 rounded-xl flex items-center justify-between transition-all border border-white/5 active:scale-95 group/btn",children:[e.jsxs("span",{className:"font-bold text-xs uppercase tracking-widest flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-lg text-indigo-400 group-hover/btn:scale-110 transition-transform",children:e.jsx(Ze,{size:16})}),"Initiate Leave"]}),e.jsx(ds,{size:16,className:"text-slate-600"})]}),e.jsxs("button",{onClick:()=>$(!0),className:"w-full h-14 px-5 bg-white/5 hover:bg-white/10 rounded-xl flex items-center justify-between transition-all border border-white/5 active:scale-95 group/btn",children:[e.jsxs("span",{className:"font-bold text-xs uppercase tracking-widest flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg text-emerald-400 group-hover/btn:scale-110 transition-transform",children:e.jsx(it,{size:16})}),"Salary Advance"]}),e.jsx(ds,{size:16,className:"text-slate-600"})]})]})]}),e.jsxs("div",{className:"bg-indigo-50/50 dark:bg-slate-800/50 rounded-2xl p-8 border-2 border-indigo-500/5 text-center shadow-sm",children:[e.jsx("div",{className:"h-12 w-12 bg-white dark:bg-slate-900 rounded-xl shadow-sm flex items-center justify-center mx-auto mb-6 text-indigo-500",children:e.jsx(Dt,{size:20})}),e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-500 mb-6 leading-relaxed",children:"Adjust salary structures or view historical payroll records?"}),e.jsx(W,{className:"w-full h-12 rounded-xl bg-slate-900 dark:bg-white dark:text-slate-900 font-bold text-xs uppercase tracking-widest shadow-lg shadow-slate-900/5 active:scale-95",onClick:()=>m("/finance/salaries",{state:{search:c.personal.full_name}}),children:"Manage Payroll"})]})]})]})]},j)}),e.jsx(Wp,{isOpen:xe,onClose:()=>I(!1),title:"Request Leave",children:e.jsxs("form",{onSubmit:Se,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Leave Type"}),e.jsxs("select",{className:"w-full rounded-lg border-slate-200 dark:border-slate-700 dark:bg-slate-800 focus:ring-primary-500",value:B.leave_type,onChange:K=>le({...B,leave_type:K.target.value}),children:[e.jsx("option",{value:"SICK",children:"Sick Leave"}),e.jsx("option",{value:"ANNUAL",children:"Annual Leave"}),e.jsx("option",{value:"MATERNITY",children:"Maternity Leave"}),e.jsx("option",{value:"PATERNITY",children:"Paternity Leave"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{type:"date",label:"Start Date",value:B.start_date,onChange:K=>le({...B,start_date:K.target.value}),required:!0}),e.jsx(fe,{type:"date",label:"End Date",value:B.end_date,onChange:K=>le({...B,end_date:K.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Reason"}),e.jsx("textarea",{className:"w-full rounded-lg border-slate-200 dark:border-slate-700 dark:bg-slate-800 focus:ring-primary-500 p-2",rows:"3",value:B.reason,onChange:K=>le({...B,reason:K.target.value}),required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(W,{type:"button",variant:"secondary",onClick:()=>I(!1),children:"Cancel"}),e.jsx(W,{type:"submit",isLoading:Q,children:"Submit Request"})]})]})}),e.jsx(Wp,{isOpen:ee,onClose:()=>$(!1),title:"Request Salary Advance",children:e.jsxs("form",{onSubmit:Me,className:"space-y-4",children:[e.jsx(fe,{type:"number",label:"Amount (KES)",value:G.amount,onChange:K=>J({...G,amount:K.target.value}),required:!0,min:"100"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Reason for Advance"}),e.jsx("textarea",{className:"w-full rounded-lg border-slate-200 dark:border-slate-700 dark:bg-slate-800 focus:ring-primary-500 p-2",rows:"3",value:G.reason,onChange:K=>J({...G,reason:K.target.value}),required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(W,{type:"button",variant:"secondary",onClick:()=>$(!1),children:"Cancel"}),e.jsx(W,{type:"submit",isLoading:Q,children:"Submit Request"})]})]})})]})]})},ed=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY"],tN=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00"],sN=()=>{const{id:n}=Zt(),m=Le(),[c,u]=f.useState(null),[g,v]=f.useState([]),[j,S]=f.useState([]),[_,E]=f.useState([]),[z,h]=f.useState(!0),[b,C]=f.useState(!1),[A,M]=f.useState(!1),[k,T]=f.useState(null),[D,y]=f.useState("MONDAY"),[P,U]=f.useState({grade:"",subject:"",day:"MONDAY",start_time:"08:00",end_time:"09:00"}),F=async()=>{h(!0);try{const[I,ee,$,Q]=await Promise.all([V.get(`/api/teachers/${n}/`),V.get(`/api/schedule/?teacher=${n}`),V.get("/api/grades/"),V.get("/api/subjects/")]);u(I.data.teacher),v(ee.data.schedule||[]),S($.data.grades||[]),E(Q.data.subjects||[])}catch(I){console.error("Error fetching data:",I)}finally{h(!1)}};f.useEffect(()=>{F()},[n]),f.useEffect(()=>{if(c&&j.length>0){const I=j.find(ee=>ee.id===c.professional?.grade_id||ee.name===c.professional?.grade_assigned);I&&!P.grade&&U(ee=>({...ee,grade:I.id}))}if(c&&_.length>0&&!P.subject&&c.professional?.subjects?.length===1){const I=c.professional.subjects[0],ee=_.find($=>$.name===I||$.code===I);ee&&U($=>({...$,subject:ee.id}))}},[c,j,_]);const Z=async I=>{I.preventDefault(),M(!0),T(null);try{await V.post("/api/schedule/",{...P,teacher:n}),C(!1),F(),U(ee=>({...ee,start_time:"08:00",end_time:"09:00"}))}catch(ee){T(ee.response?.data?.error||"Failed to create session")}finally{M(!1)}},ae=async I=>{if(window.confirm("Are you sure you want to remove this session?"))try{await V.delete(`/api/schedule/delete/${I}/`),F()}catch{alert("Failed to delete session")}},H=ed.reduce((I,ee)=>(I[ee]=g.filter($=>$.day===ee),I),{}),xe=(I,ee)=>H[I]?.filter($=>$.start_time.startsWith(ee.split(":")[0]))||[];return z?e.jsx("div",{className:"flex items-center justify-center min-h-[600px]",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-24 w-24 rounded-full border-t-4 border-b-4 border-indigo-600 animate-spin"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(Ze,{className:"text-indigo-600 animate-pulse",size:32})})]})}):e.jsxs("div",{className:"p-4 md:p-10 max-w-full mx-auto space-y-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>m(`/teachers/${n}`),className:"flex items-center gap-2 text-slate-400 hover:text-indigo-600 transition-colors font-bold text-[10px] uppercase tracking-widest",children:[e.jsx(Ls,{size:16})," Back to Teacher Profile"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white uppercase tracking-tight",children:"Manage Schedule"}),e.jsxs("div",{className:"flex items-center gap-2.5 mt-1.5",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-emerald-500"}),e.jsxs("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-widest",children:["Timetable Configurator for ",c?.personal?.full_name]})]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("button",{onClick:()=>C(!0),className:"h-12 px-8 bg-indigo-600 hover:bg-slate-900 text-white rounded-xl font-bold text-xs uppercase tracking-widest shadow-lg flex items-center gap-3 transition-all active:scale-95",children:[e.jsx(nt,{size:18})," Add Session"]})})]}),e.jsx("div",{className:"md:hidden flex overflow-x-auto gap-2 pb-2 scrollbar-none",children:ed.map(I=>e.jsx("button",{onClick:()=>y(I),className:`px-5 py-2.5 rounded-xl text-[10px] font-bold uppercase tracking-widest whitespace-nowrap transition-all border ${D===I?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white dark:bg-slate-900 text-slate-500 border-slate-200 dark:border-slate-800"}`,children:I},I))}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-xl border border-slate-100 dark:border-slate-800 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto md:overflow-visible",children:e.jsxs("div",{className:"min-w-[320px] md:min-w-full",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-10",children:[e.jsx("div",{className:"p-5 md:p-8 font-bold text-slate-400 text-[10px] uppercase tracking-widest border-r border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800",children:"Timeline"}),ed.map(I=>e.jsx("div",{className:`${D===I?"flex":"hidden md:flex"} p-5 md:p-8 text-center items-center justify-center font-bold text-slate-900 dark:text-white text-xs uppercase tracking-widest border-r border-slate-200 dark:border-slate-700 last:border-r-0`,children:I},I))]}),tN.map((I,ee)=>e.jsxs("div",{className:`grid grid-cols-2 md:grid-cols-6 border-b border-slate-100 dark:border-slate-800 ${ee%2===0?"bg-white dark:bg-slate-900":"bg-slate-50/20 dark:bg-slate-800/10"}`,children:[e.jsxs("div",{className:"p-6 md:p-8 border-r border-slate-200 dark:border-slate-700 flex flex-col items-center justify-center gap-1 md:gap-2",children:[e.jsx("span",{className:"text-base md:text-lg font-bold text-slate-900 dark:text-white",children:I}),e.jsx("span",{className:"text-[9px] md:text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Start"})]}),ed.map($=>{const Q=xe($,I);return e.jsxs("div",{className:`${D===$?"block":"hidden md:block"} p-3 md:p-4 border-r border-slate-200 dark:border-slate-700 last:border-r-0 min-h-[140px] md:min-h-[160px] relative group`,children:[Q.map(re=>e.jsxs(he.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-slate-800 border-2 border-indigo-500/10 shadow-md rounded-xl p-4 md:p-5 h-full flex flex-col justify-between hover:shadow-lg hover:border-indigo-500/30 transition-all group/card relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 bg-indigo-500/5 rounded-full blur-2xl -mr-4 -mt-4"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-3 md:mb-4",children:[e.jsxs("div",{className:"text-[9px] font-bold text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 px-2.5 py-1 rounded-lg uppercase tracking-widest",children:[re.start_time,"-",re.end_time]}),e.jsx("button",{onClick:()=>ae(re.id),className:"opacity-0 group-hover/card:opacity-100 p-2 text-rose-400 hover:text-rose-600 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-xl transition-all",children:e.jsx(Cs,{size:14})})]}),e.jsx("p",{className:"font-bold text-sm text-slate-900 dark:text-white leading-tight mb-2",children:re.subject})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-3 md:pt-4 border-t border-slate-50 dark:border-slate-700/50",children:[e.jsx("div",{className:"h-6 w-6 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-[8px] font-bold text-slate-500",children:re.grade?.charAt(0)}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:re.grade})]})]},re.id)),Q.length===0&&e.jsx("button",{onClick:()=>{U({...P,day:$,start_time:I,end_time:`${parseInt(I)+1}:00`}),C(!0)},className:"w-full h-full opacity-0 hover:opacity-100 transition-all flex items-center justify-center bg-indigo-50/30 dark:bg-indigo-900/10 rounded-2xl border-2 border-dashed border-indigo-200 dark:border-indigo-800",children:e.jsx(nt,{className:"text-indigo-400",size:24})})]},`${$}-${I}`)})]},I))]})})}),e.jsx(vt,{children:b&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>C(!1),className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md"}),e.jsxs(he.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-xl shadow-2xl border border-white/20 dark:border-slate-800 overflow-hidden relative z-10",children:[e.jsxs("div",{className:"p-6 md:p-10 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50/50 dark:bg-slate-800/50",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white uppercase tracking-tight",children:"Plan New Session"}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Configure academic delivery parameters"})]}),e.jsx("button",{onClick:()=>C(!1),className:"h-10 w-10 flex items-center justify-center text-slate-400 hover:text-rose-500 transition-all bg-white dark:bg-slate-800 rounded-xl shadow-sm",children:e.jsx(Ve,{size:18})})]}),e.jsxs("form",{onSubmit:Z,className:"p-6 md:p-10 space-y-6 md:space-y-8",children:[k&&e.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/20 text-rose-600 dark:text-rose-400 p-5 rounded-xl text-xs font-bold uppercase tracking-widest flex items-center gap-3 border-2 border-rose-500/10",children:[e.jsx(ot,{size:18}),k]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8",children:[e.jsxs("div",{className:"space-y-2.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-3",children:"Target Grade / Class"}),e.jsxs("select",{className:"w-full h-12 px-5 rounded-xl bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-indigo-500/50 focus:bg-white dark:focus:bg-slate-900 outline-none transition-all font-semibold text-slate-900 dark:text-white text-sm",required:!0,value:P.grade,onChange:I=>U({...P,grade:I.target.value}),children:[e.jsx("option",{value:"",children:"Select Class"}),j.map(I=>e.jsx("option",{value:I.id,children:I.name},I.id))]})]}),e.jsxs("div",{className:"space-y-2.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-3",children:"Academic Subject"}),e.jsxs("select",{className:"w-full h-12 px-5 rounded-xl bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-indigo-500/50 focus:bg-white dark:focus:bg-slate-900 outline-none transition-all font-semibold text-slate-900 dark:text-white text-sm",required:!0,value:P.subject,onChange:I=>U({...P,subject:I.target.value}),children:[e.jsx("option",{value:"",children:"Select Subject"}),_.map(I=>e.jsxs("option",{value:I.id,children:[I.name," (",I.code,")"]},I.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-3",children:"Delivery Day"}),e.jsx("select",{className:"w-full h-12 px-5 rounded-xl bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-indigo-500/50 outline-none font-semibold text-slate-900 dark:text-white text-sm",value:P.day,onChange:I=>U({...P,day:I.target.value}),children:ed.map(I=>e.jsx("option",{value:I,children:I},I))})]}),e.jsxs("div",{className:"space-y-2.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-3",children:"Start"}),e.jsx("input",{type:"time",className:"w-full h-12 px-5 rounded-xl bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-indigo-500/50 outline-none font-semibold text-slate-900 dark:text-white text-sm",required:!0,value:P.start_time,onChange:I=>U({...P,start_time:I.target.value})})]}),e.jsxs("div",{className:"space-y-2.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-3",children:"End"}),e.jsx("input",{type:"time",className:"w-full h-12 px-5 rounded-xl bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-indigo-500/50 outline-none font-semibold text-slate-900 dark:text-white text-sm",required:!0,value:P.end_time,onChange:I=>U({...P,end_time:I.target.value})})]})]}),e.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>C(!1),className:"h-12 px-8 rounded-xl font-bold text-[10px] uppercase tracking-widest text-slate-400 hover:text-slate-900 dark:hover:text-white transition-all",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:A,className:"h-12 px-10 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold text-[10px] uppercase tracking-widest shadow-xl transition-all active:scale-95 disabled:opacity-50",children:A?"Processing...":"Authorize Session"})]})]})]})]})})]})},aN=()=>e.jsxs("div",{className:"space-y-6 animate-pulse p-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-7 w-48 bg-slate-200 dark:bg-slate-700 rounded-lg"}),e.jsx("div",{className:"h-4 w-64 bg-slate-200 dark:bg-slate-700 rounded-lg"})]}),e.jsx("div",{className:"h-9 w-32 bg-slate-200 dark:bg-slate-700 rounded-lg"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(n=>e.jsx("div",{className:"h-32 bg-slate-200 dark:bg-slate-700 rounded-2xl"},n))}),e.jsx("div",{className:"h-64 bg-slate-200 dark:bg-slate-700 rounded-2xl"})]}),a0=()=>{Le();const n=Ya(),[m,c]=f.useState([]),[u,g]=f.useState(!0),[v,j]=f.useState(n.state?.search||""),[S,_]=f.useState("All"),[E,z]=f.useState(""),[h,b]=f.useState(!1),[C,A]=f.useState(null),[M,k]=f.useState(!1),[T,D]=f.useState({base_salary:0,allowances:0,deductions:0,nssf:0,loans:0,advances:0}),[y,P]=f.useState(!1),[U,F]=f.useState(null);f.useEffect(()=>{Z()},[]);const Z=async()=>{try{const G=await V.get("/api/finance/salaries/");G.data&&(c(G.data.employees||[]),z(G.data.current_month||"Current Month"))}catch(G){console.error(G)}finally{g(!1)}},ae=async(G,J)=>{b(!0);try{await V.post("/api/finance/salaries/process/",{user_ids:G,action:J}),Z()}catch(oe){console.error("Error processing payroll",oe)}finally{b(!1)}},H=G=>{F(G),D({base_salary:G.base_salary,allowances:G.allowances,deductions:G.deductions,nssf:G.nssf||0,loans:G.loans||0,advances:G.advances||0}),k(!0)},xe=async G=>{G.preventDefault(),P(!0);try{await V.post(`/api/finance/salaries/${U.id}/update/`,T),k(!1),Z()}catch(J){console.error("Error updating salary",J),alert("Failed to update salary")}finally{P(!1)}},I=(m||[]).filter(G=>G.status==="UNPROCESSED").map(G=>G.id),ee=(m||[]).filter(G=>G.status==="PROCESSED").map(G=>G.id),$=(m||[]).filter(G=>{const J=G.name.toLowerCase().includes(v.toLowerCase()),oe=S==="All"||G.role===S;return J&&oe}),Q=(m||[]).reduce((G,J)=>G+J.net_salary,0),re=(m||[]).filter(G=>G.status!=="PAID").length,B=(m||[]).filter(G=>G.status==="PAID").length,le=({status:G})=>{const J={PAID:{icon:Di,color:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-50 dark:bg-emerald-500/10",border:"border-emerald-100 dark:border-emerald-500/20",label:"Paid"},PROCESSED:{icon:Ye,color:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-500/10",border:"border-blue-100 dark:border-blue-500/20",label:"Processed"},PENDING:{icon:dt,color:"text-amber-600 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-500/10",border:"border-amber-100 dark:border-amber-500/20",label:"Pending"},UNPROCESSED:{icon:ua,color:"text-slate-500 dark:text-slate-400",bg:"bg-slate-50 dark:bg-slate-500/10",border:"border-slate-100 dark:border-slate-500/20",label:"Unprocessed"}},oe=J[G]||J.UNPROCESSED,ue=oe.icon;return e.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border ${oe.bg} ${oe.color} ${oe.border}`,children:[e.jsx(ue,{size:12,className:"stroke-[3]"}),oe.label]})};return u?e.jsx(aN,{}):e.jsxs("div",{className:"min-h-screen bg-[#f8fafc] dark:bg-[#020617] p-4 lg:p-8",children:[e.jsxs("div",{className:"max-w-[1400px] mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:["Salaries & Payroll",e.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 text-xs font-bold border border-indigo-100 dark:border-indigo-800",children:[e.jsx(Ze,{size:14})," ",E]})]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium",children:"Manage compensation and track payment status across the organization"})]}),e.jsxs("div",{className:"flex gap-2",children:[I.length>0&&e.jsxs("button",{onClick:()=>ae(I,"GENERATE"),disabled:h,className:"flex items-center gap-2 px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl text-sm font-bold shadow-lg shadow-indigo-500/20 transition-all active:scale-95 disabled:opacity-50",children:[h?e.jsx(ul,{className:"animate-spin",size:16}):e.jsx(Ze,{size:16}),"Generate Payroll"]}),ee.length>0&&e.jsxs("button",{onClick:()=>ae(ee,"PAY"),disabled:h,className:"flex items-center gap-2 px-4 py-2.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl text-sm font-bold shadow-lg shadow-emerald-500/20 transition-all active:scale-95 disabled:opacity-50",children:[h?e.jsx(ul,{className:"animate-spin",size:16}):e.jsx(It,{size:16}),"Pay All (",ee.length,")"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-5 rounded-2xl border border-slate-200/60 dark:border-slate-800 shadow-sm relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-[0.03] group-hover:scale-110 transition-transform duration-500 group-hover:opacity-[0.07]",children:e.jsx(Ss,{size:80,className:"text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{className:"space-y-3 relative",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400",children:[e.jsx(Ss,{size:16,className:"text-indigo-500"}),e.jsx("span",{className:"text-[11px] font-bold uppercase tracking-widest",children:"Total Monthly Payroll"})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("h3",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:Q.toLocaleString()}),e.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"KES"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"px-2 py-0.5 rounded-md bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 text-[10px] font-bold",children:[(m||[]).length," Staff Members"]})})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-900 p-5 rounded-2xl border border-slate-200/60 dark:border-slate-800 shadow-sm relative overflow-hidden group",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400",children:[e.jsx(dt,{size:16,className:"text-amber-500"}),e.jsx("span",{className:"text-[11px] font-bold uppercase tracking-widest",children:"Pending Disbursals"})]}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("h3",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:re}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400 block uppercase",children:"Progress"}),e.jsxs("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:[Math.round(((m||[]).length-re)/((m||[]).length||1)*100),"%"]})]})]}),e.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-800 rounded-full h-1.5 overflow-hidden",children:e.jsx(he.div,{className:"h-full bg-amber-500",initial:{width:0},animate:{width:`${re/((m||[]).length||1)*100}%`},transition:{duration:1,ease:"easeOut"}})})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-900 p-5 rounded-2xl border border-slate-200/60 dark:border-slate-800 shadow-sm relative overflow-hidden group",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400",children:[e.jsx(Dt,{size:16,className:"text-emerald-500"}),e.jsx("span",{className:"text-[11px] font-bold uppercase tracking-widest",children:"Liquidity Success"})]}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("h3",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:[(m||[]).length>0?Math.round(B/(m||[]).length*100):0,"%"]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400 block uppercase",children:"Completed"}),e.jsxs("span",{className:"text-sm font-bold text-emerald-600",children:[B," Paid"]})]})]}),e.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-800 rounded-full h-1.5 overflow-hidden",children:e.jsx(he.div,{className:"h-full bg-emerald-500",initial:{width:0},animate:{width:`${B/((m||[]).length||1)*100}%`},transition:{duration:1,ease:"easeOut"}})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200/60 dark:border-slate-800 shadow-sm overflow-hidden backdrop-blur-md",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 flex flex-col sm:flex-row gap-4 justify-between items-center bg-slate-50/50 dark:bg-slate-900/50",children:[e.jsxs("div",{className:"relative w-full sm:max-w-xs",children:[e.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search employees...",value:v,onChange:G=>j(G.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm text-slate-700 dark:text-slate-200 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),e.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-auto",children:[e.jsx(za,{size:14,className:"text-slate-400"}),e.jsxs("select",{value:S,onChange:G=>_(G.target.value),className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-xs font-bold text-slate-600 dark:text-slate-300 py-2 pl-3 pr-8 focus:outline-none focus:ring-2 focus:ring-indigo-500/20",children:[e.jsx("option",{value:"All",children:"All Roles"}),e.jsx("option",{value:"Driver",children:"Drivers"}),e.jsx("option",{value:"Teacher",children:"Teachers"}),e.jsx("option",{value:"Admin",children:"Admin"}),e.jsx("option",{value:"Staff",children:"Staff"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest bg-slate-50/50 dark:bg-slate-900/50",children:[e.jsx("th",{className:"px-6 py-3",children:"Employee"}),e.jsx("th",{className:"px-6 py-3",children:"Department/Role"}),e.jsx("th",{className:"px-6 py-3",children:"Monthly Net"}),e.jsx("th",{className:"px-6 py-3",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:$.map((G,J)=>e.jsxs("tr",{className:"group hover:bg-slate-50/50 dark:hover:bg-slate-800/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-3.5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`h-9 w-9 rounded-lg flex items-center justify-center text-sm font-bold shadow-sm ${["bg-indigo-100 text-indigo-600","bg-emerald-100 text-emerald-600","bg-rose-100 text-rose-600","bg-amber-100 text-amber-600"][J%4]}`,children:G.name[0]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white leading-tight",children:G.name}),e.jsxs("div",{className:"text-[10px] font-medium text-slate-500",children:["ID: #",G.id.toString().padStart(4,"0")]})]})]})}),e.jsx("td",{className:"px-6 py-3.5",children:e.jsx("span",{className:"text-[11px] font-bold text-slate-600 dark:text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded-md",children:G.role})}),e.jsx("td",{className:"px-6 py-3.5",children:e.jsxs("div",{className:"text-sm font-bold text-slate-900 dark:text-white",children:[G.net_salary.toLocaleString(),e.jsx("span",{className:"ml-1 text-[10px] text-slate-400 font-medium",children:"KES"})]})}),e.jsx("td",{className:"px-6 py-3.5",children:e.jsx(le,{status:G.status})}),e.jsx("td",{className:"px-6 py-3.5",children:e.jsxs("div",{className:"flex items-center justify-end gap-1.5",children:[e.jsx("button",{onClick:()=>H(G),className:"p-1.5 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/20 text-slate-400 hover:text-indigo-600 transition-colors",title:"Edit Structure",children:e.jsx(ha,{size:16})}),G.status==="UNPROCESSED"&&e.jsx("button",{onClick:()=>ae([G.id],"GENERATE"),className:"p-1.5 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 text-slate-400 hover:text-blue-600 transition-colors",title:"Generate",children:e.jsx(Ze,{size:16})}),G.status==="PROCESSED"&&e.jsx("button",{onClick:()=>ae([G.id],"PAY"),className:"p-1.5 rounded-lg hover:bg-emerald-50 dark:hover:bg-emerald-900/20 text-slate-400 hover:text-emerald-600 transition-colors",title:"Disburse",children:e.jsx(It,{size:16})}),(G.status==="PAID"||G.status==="PROCESSED")&&e.jsx("button",{onClick:()=>A(G),className:"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors",title:"View Slip",children:e.jsx(Wt,{size:16})})]})})]},G.id))})]})}),$.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"h-12 w-12 bg-slate-50 dark:bg-slate-800 rounded-full flex items-center justify-center mb-4",children:e.jsx(jt,{className:"text-slate-300",size:24})}),e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"No results found"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Try adjusting your filters or search keywords"})]})]})]}),e.jsx(vt,{children:C&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[e.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-slate-950/40 backdrop-blur-sm",onClick:()=>A(null)}),e.jsx(he.div,{initial:{scale:.95,y:10,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.95,y:10,opacity:0},className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden relative z-10 border border-slate-200 dark:border-slate-800",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-lg font-bold text-slate-900 dark:text-white",children:C.name[0]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-bold text-slate-900 dark:text-white",children:C.name}),e.jsxs("p",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-tighter",children:[C.role,"  Slip #",C.id]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Period"}),e.jsx("p",{className:"text-xs font-bold text-indigo-600",children:E})]})]}),e.jsxs("div",{className:"space-y-3 bg-slate-50 dark:bg-slate-800/40 p-4 rounded-xl border border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500 font-medium",children:"Basic Salary"}),e.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:C.base_salary.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500 font-medium",children:"Allowances"}),e.jsxs("span",{className:"font-bold text-emerald-600",children:["+ ",C.allowances.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500 font-medium",children:"Standard Deductions"}),e.jsxs("span",{className:"font-bold text-rose-600",children:["- ",C.deductions.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500 font-medium",children:"NSSF Contribution"}),e.jsxs("span",{className:"font-bold text-rose-600",children:["- ",C.nssf?.toLocaleString()||"0"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500 font-medium",children:"Loan Repayments"}),e.jsxs("span",{className:"font-bold text-rose-600",children:["- ",C.loans?.toLocaleString()||"0"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500 font-medium font-bold",children:"Salary Advance Deduction"}),e.jsxs("span",{className:"font-bold text-rose-600",children:["- ",C.advances?.toLocaleString()||"0"]})]}),e.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 my-1"}),e.jsxs("div",{className:"flex justify-between items-center pt-1",children:[e.jsx("span",{className:"text-xs text-slate-900 dark:text-white font-bold",children:"Total Net Pay"}),e.jsxs("span",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["KES ",C.net_salary.toLocaleString()]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:()=>A(null),className:"py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-xs font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 transition-colors",children:"Cancel"}),e.jsxs("button",{className:"py-2.5 bg-indigo-600 text-white rounded-xl text-xs font-bold shadow-lg shadow-indigo-500/20 hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Gt,{size:14})," Send Email"]})]})]})})]})}),e.jsx(vt,{children:M&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[e.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-slate-950/40 backdrop-blur-sm",onClick:()=>k(!1)}),e.jsxs(he.div,{initial:{scale:.95,y:10,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.95,y:10,opacity:0},className:"bg-white dark:bg-slate-900 w-full max-w-sm rounded-2xl shadow-2xl overflow-hidden relative z-10 border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"p-5 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-tight",children:"Salary Configuration"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-tight",children:U?.name})]}),e.jsx("button",{onClick:()=>k(!1),className:"text-slate-400 hover:text-slate-600 p-1",children:e.jsx(nt,{className:"rotate-45",size:20})})]}),e.jsxs("form",{onSubmit:xe,className:"p-5 space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Base Salary"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-indigo-500 rounded-xl outline-none transition-all font-bold text-sm",value:T.base_salary,onChange:G=>D({...T,base_salary:parseFloat(G.target.value)||0}),required:!0}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-bold text-slate-400 uppercase",children:"KES"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Allowances"}),e.jsx("input",{type:"number",className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-emerald-500/50 rounded-xl outline-none transition-all font-bold text-sm",value:T.allowances,onChange:G=>D({...T,allowances:parseFloat(G.target.value)||0})})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Other Deductions"}),e.jsx("input",{type:"number",className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-rose-500/50 rounded-xl outline-none transition-all font-bold text-sm",value:T.deductions,onChange:G=>D({...T,deductions:parseFloat(G.target.value)||0})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"NSSF"}),e.jsx("input",{type:"number",className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-rose-500/50 rounded-xl outline-none transition-all font-bold text-sm",value:T.nssf,onChange:G=>D({...T,nssf:parseFloat(G.target.value)||0})})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Loans"}),e.jsx("input",{type:"number",className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-rose-500/50 rounded-xl outline-none transition-all font-bold text-sm",value:T.loans,onChange:G=>D({...T,loans:parseFloat(G.target.value)||0})})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Salary Advance (Pre-filled from Approvals)"}),e.jsx("input",{type:"number",className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-rose-500/50 rounded-xl outline-none transition-all font-bold text-sm opacity-80",value:T.advances,readOnly:!0})]}),e.jsx("div",{className:"bg-slate-900 border border-slate-800 p-3 rounded-xl",children:e.jsxs("div",{className:"flex justify-between items-center text-white",children:[e.jsx("span",{className:"text-[9px] font-bold uppercase tracking-widest opacity-60",children:"Calculated Net"}),e.jsxs("span",{className:"text-lg font-bold",children:["KES ",(T.base_salary+T.allowances-T.deductions-T.nssf-T.loans-T.advances).toLocaleString()]})]})}),e.jsxs("div",{className:"pt-2 flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>k(!1),className:"flex-1 py-2.5 bg-slate-100 dark:bg-slate-800 rounded-xl text-xs font-bold text-slate-600 dark:text-slate-400 hover:bg-slate-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:y,className:"flex-[2] py-2.5 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl text-xs font-bold shadow-xl transition-all hover:brightness-110 active:scale-95 disabled:opacity-50",children:y?"Saving...":"Apply Changes"})]})]})]})]})})]})},_m=()=>{const[n,m]=f.useState("income"),[c,u]=f.useState([]),[g,v]=f.useState([]),[j,S]=f.useState([]),[_,E]=f.useState(!0);f.useEffect(()=>{z()},[n]);const z=async()=>{E(!0);try{if(n==="expenses"){const C=await V.get("/api/transport/finance/expenses/");u(C.data.expenses||[])}else if(n==="advances"){const C=await V.get("/api/transport/finance/advances/");v(C.data.advances||[])}else{const C=await V.get("/api/finance/transactions/all/?source=TRANSPORT");S(C.data.transactions||[])}}catch(C){console.error(C)}finally{E(!1)}},h=({status:C})=>e.jsx("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wide border ${C==="APPROVED"||C==="INCOME"||C==="COMPLETED"?"bg-emerald-50 border-emerald-200 text-emerald-600 dark:bg-emerald-500/10 dark:border-emerald-500/20 dark:text-emerald-400":C==="REJECTED"?"bg-rose-50 border-rose-200 text-rose-600 dark:bg-rose-500/10 dark:border-rose-500/20 dark:text-rose-400":"bg-amber-50 border-amber-200 text-amber-600 dark:bg-amber-500/10 dark:border-amber-200 text-amber-500"}`,children:C}),b=()=>n==="income"?j:n==="expenses"?c:g;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-black text-slate-900 dark:text-white flex items-center gap-3",children:[e.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 p-2 rounded-xl text-indigo-600 dark:text-indigo-400",children:e.jsx(sa,{size:24})}),"Transport Finance"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium ml-14 mt-1",children:"Income and Expenditure tracking for the fleet"})]}),e.jsxs("div",{className:"bg-white/50 dark:bg-slate-900/50 backdrop-blur-md rounded-xl p-1 flex border border-slate-200 dark:border-slate-800 shadow-sm overflow-x-auto no-scrollbar",children:[e.jsxs("button",{onClick:()=>m("income"),className:`px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 transition-all whitespace-nowrap ${n==="income"?"bg-white dark:bg-slate-800 text-emerald-600 dark:text-emerald-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:[e.jsx(Dt,{size:14})," Revenue"]}),e.jsxs("button",{onClick:()=>m("expenses"),className:`px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 transition-all whitespace-nowrap ${n==="expenses"?"bg-white dark:bg-slate-800 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:[e.jsx(it,{size:14})," Expenses"]}),e.jsxs("button",{onClick:()=>m("advances"),className:`px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 transition-all whitespace-nowrap ${n==="advances"?"bg-white dark:bg-slate-800 text-amber-600 dark:text-amber-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:[e.jsx(Ss,{size:14})," Advances"]})]})]}),_?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"w-10 h-10 rounded-full border-4 border-slate-200 border-t-indigo-600 animate-spin"})}):e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-[2rem] border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800",children:e.jsxs("tr",{className:"text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest",children:[e.jsx("th",{className:"px-6 py-4",children:"Participant/Source"}),e.jsx("th",{className:"px-6 py-4",children:"Details"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"}),e.jsx("th",{className:"px-6 py-4",children:"Method/Ref"}),e.jsx("th",{className:"px-6 py-4",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:b().map((C,A)=>e.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-xs font-bold text-slate-500",children:(C.driver||C.title||"U")[0]}),e.jsx("span",{className:"text-sm font-bold",children:C.driver||C.title})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-xs text-slate-500 font-medium truncate max-w-[200px]",title:C.description||C.reason||C.title,children:C.description||C.reason||C.title})}),e.jsxs("td",{className:`px-6 py-4 text-right font-black text-sm ${n==="income"?"text-emerald-600":"text-rose-600"}`,children:["KES ",C.amount.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase",children:C.method||"CASH"}),e.jsx("p",{className:"text-[10px] font-mono whitespace-nowrap",children:C.reference||"-"})]}),e.jsx("td",{className:"px-6 py-4 text-xs font-medium text-slate-500",children:C.date}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx(h,{status:C.status||(n==="income"?"PAID":"PENDING")})})]},A))})]}),b().length===0&&e.jsx("div",{className:"text-center py-20 text-slate-400 font-bold uppercase tracking-widest text-xs",children:"No records found"})]})})]})},Vf=()=>{const[n,m]=f.useState([]),[c,u]=f.useState(!0);f.useEffect(()=>{g()},[]);const g=async()=>{u(!0);try{const v=await V.get("/api/finance/transactions/all/?source=FOOD");m(v.data.transactions||[])}catch(v){console.error(v)}finally{u(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-black text-slate-900 dark:text-white flex items-center gap-3",children:[e.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/30 p-2 rounded-xl text-orange-600 dark:text-orange-400",children:e.jsx(Tm,{size:24})}),"Food Finance"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium ml-14 mt-1",children:"Cafeteria revenue and meal payment tracking"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-500/10 px-4 py-2 rounded-xl border border-emerald-100 dark:border-emerald-500/20",children:[e.jsx("p",{className:"text-[10px] font-bold text-emerald-600 uppercase",children:"Total Realized"}),e.jsxs("p",{className:"text-lg font-black text-emerald-700",children:["KES ",n.reduce((v,j)=>v+j.amount,0).toLocaleString()]})]})})]}),c?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"w-10 h-10 rounded-full border-4 border-slate-200 border-t-orange-600 animate-spin"})}):e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2rem] border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-slate-500",children:"Revenue Ledger"}),e.jsx("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"})," Realized Income"]})})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800",children:e.jsxs("tr",{className:"text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest",children:[e.jsx("th",{className:"px-6 py-4",children:"Student/Recipient"}),e.jsx("th",{className:"px-6 py-4",children:"Transaction Details"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"}),e.jsx("th",{className:"px-6 py-4",children:"Method"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Reference"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:n.map((v,j)=>e.jsxs("tr",{className:"hover:bg-orange-50/30 dark:hover:bg-orange-500/5 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 group-hover:scale-110 transition-transform",children:e.jsx(Hs,{size:14})}),e.jsx("span",{className:"text-sm font-bold",children:v.title})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-xs text-slate-500 font-medium",children:[v.source," Payment"]})}),e.jsxs("td",{className:"px-6 py-4 text-right font-black text-emerald-600 text-sm",children:["+ KES ",v.amount.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"text-[10px] font-black bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded uppercase",children:v.method||"CASH"})}),e.jsx("td",{className:"px-6 py-4 text-center text-xs font-mono text-slate-400",children:v.reference}),e.jsx("td",{className:"px-6 py-4 text-right text-xs font-medium text-slate-500",children:v.date})]},j))})]}),n.length===0&&e.jsxs("div",{className:"text-center py-24",children:[e.jsx(bf,{size:48,className:"mx-auto text-slate-200 mb-4"}),e.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-xs",children:"No food revenue recorded yet"})]})]})]})]})},lN=()=>{const{config:n}=Nt(),[m,c]=f.useState([]),[u,g]=f.useState([]),[v,j]=f.useState(!0),[S,_]=f.useState(!1),[E,z]=f.useState(""),[h,b]=f.useState(null),[C,A]=f.useState(!1),[M,k]=f.useState(null),[T,D]=f.useState({}),[y,P]=f.useState("2024-2025"),U=js.useMemo(()=>{const $={};return m.forEach(Q=>{const re=Q.grade;$[re]||($[re]={1:[],2:[],3:[]}),$[re][Q.term].push(Q)}),$},[m]);f.useEffect(()=>{F()},[y]);const F=async()=>{j(!0);try{const[$,Q]=await Promise.all([V.get("/api/finance/fee-structures/"),V.get("/api/finance/fee-categories/")]);c($.data.fee_structures||[]),g(Q.data.categories||[])}catch($){console.error("Error fetching data:",$),Z("error","Failed to load fee structures")}finally{j(!1)}},Z=($,Q)=>{b({type:$,text:Q}),setTimeout(()=>b(null),4e3)},ae=($,Q)=>{k($);const re={};Object.values(Q).flat().forEach(B=>{re[B.id]=B.amount}),D(re)},H=()=>{k(null),D({})},xe=($,Q)=>{D(re=>({...re,[$]:Q}))},I=async $=>{_(!0);try{const Q=Object.entries(T).map(([B,le])=>({id:parseInt(B),amount:parseFloat(le)})),re=await V.post("/api/finance/fee-structures/update/",{updates:Q});Z("success",`Updated ${$} fees. ${re.data.updated_students||0} students synced.`),await F(),k(null)}catch(Q){console.error("Failed to update fees",Q),Z("error","Failed to update fees")}finally{_(!1)}},ee=Object.keys(U).filter($=>$.toLowerCase().includes(E.toLowerCase()));return v?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(gm,{className:"w-12 h-12 animate-spin text-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading fee structures..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Fee Structure Management"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Configure school fees by class, term, and category"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search class...",value:E,onChange:$=>z($.target.value),className:"pl-10 pr-4 py-2 w-full sm:w-64 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-sm outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("select",{value:y,onChange:$=>P($.target.value),className:"px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-sm font-medium outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"2024-2025",children:"2024-2025"}),e.jsx("option",{value:"2025-2026",children:"2025-2026"}),e.jsx("option",{value:"2026-2027",children:"2026-2027"})]}),e.jsxs(W,{onClick:()=>A(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white border-none shadow-sm",children:[e.jsx(nt,{size:18,className:"mr-2"}),"Add Fee Item"]})]})]}),e.jsx(vt,{children:h&&e.jsxs(he.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`p-4 rounded-lg flex items-center gap-3 ${h.type==="success"?"bg-emerald-50 text-emerald-700 border border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-400":"bg-red-50 text-red-700 border border-red-200 dark:bg-red-900/20 dark:text-red-400"}`,children:[h.type==="success"?e.jsx(Ye,{size:20}):e.jsx(ot,{size:20}),e.jsx("span",{className:"font-medium",children:h.text})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ee.map($=>e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-slate-900 dark:text-white tracking-tight",children:$}),e.jsxs("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mt-1",children:["Academic Year ",y]})]}),M===$?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>I($),disabled:S,className:"p-2 rounded-lg bg-emerald-500 hover:bg-emerald-600 text-white shadow transition-colors disabled:opacity-50",children:S?e.jsx(gm,{size:16,className:"animate-spin"}):e.jsx(ma,{size:16})}),e.jsx("button",{onClick:H,className:"p-2 rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:e.jsx(Ve,{size:16})})]}):e.jsx("button",{onClick:()=>ae($,U[$]),className:"p-2 rounded-lg bg-slate-50 dark:bg-slate-800 text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:e.jsx(Br,{size:16})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[1,2,3].map(Q=>e.jsxs("div",{className:"bg-slate-50/50 dark:bg-slate-800/30 rounded-lg p-3 border border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"text-xs font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-widest",children:["Term ",Q]}),e.jsx(it,{size:12,className:"text-slate-400"})]}),e.jsx("div",{className:"space-y-3 min-h-[60px]",children:U[$][Q]&&U[$][Q].length>0?U[$][Q].map(re=>e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase leading-none",children:re.category}),M===$?e.jsxs("div",{className:"relative group",children:[e.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-[10px] text-slate-400",children:n.currency}),e.jsx("input",{type:"number",value:T[re.id]||0,onChange:B=>xe(re.id,B.target.value),className:"w-full pl-8 pr-2 py-1.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded text-xs font-bold outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 transition-all shadow-sm"})]}):e.jsxs("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:[n.currency," ",re.amount.toLocaleString()]})]},re.id)):e.jsx("span",{className:"text-[10px] italic text-slate-400",children:"No fees configured"})})]},Q))})]},$))}),ee.length===0&&e.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsx(Lt,{className:"w-16 h-16 text-slate-300 dark:text-slate-700 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:E?"No classes found matching your search":"No fee structures configured yet"}),e.jsxs(W,{onClick:()=>A(!0),className:"mt-4 bg-indigo-600 hover:bg-indigo-700 text-white border-none",children:[e.jsx(nt,{size:18,className:"mr-2"}),"Add First Fee Structure"]})]})]})},qc=["#6366f1","#10b981","#f59e0b","#ef4444","#8b5cf6"],Mr=({title:n,value:m,subtext:c,icon:u,color:g,trend:v,delay:j,net:S})=>e.jsx(he.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:j,duration:.4},className:"bg-white dark:bg-slate-900 p-5 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow duration-200",children:e.jsxs("div",{className:"flex flex-col items-center text-center sm:flex-row sm:items-start sm:justify-between sm:text-left gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center sm:items-start gap-3",children:[e.jsxs("div",{className:"flex flex-col items-center sm:flex-row gap-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${g} bg-opacity-10 dark:bg-opacity-20`,children:e.jsx(u,{size:18,className:`${g.replace("bg-","text-")} dark:text-opacity-90`})}),e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:n})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-2xl font-semibold tracking-tight ${S?m.includes("-")?"text-rose-600":"text-emerald-600":"text-slate-900 dark:text-white"}`,children:m}),e.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1 font-medium",children:c})]})]}),v!==void 0&&e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-md text-[11px] font-semibold ${v>=0?"text-emerald-600 bg-emerald-50 dark:bg-emerald-500/10":"text-rose-600 bg-rose-50 dark:bg-rose-500/10"}`,children:[v>=0?e.jsx(Dt,{size:12}):e.jsx(Ca,{size:12}),e.jsxs("span",{children:[Math.abs(v),"%"]})]})]})}),rN=()=>{const{config:n}=Nt();Le();const[m,c]=f.useState(null),[u,g]=f.useState(!0),[v,j]=f.useState("overview"),[S,_]=f.useState(""),E=js.useMemo(()=>!m||!m.recent_collections?[]:m.recent_collections.filter(D=>D.student.toLowerCase().includes(S.toLowerCase())||D.reference.toLowerCase().includes(S.toLowerCase())||D.admission_no.toLowerCase().includes(S.toLowerCase())),[m,S]);f.useEffect(()=>{z()},[]);const z=async()=>{g(!0);try{const D=await V.get("/api/finance/");c(D.data)}catch(D){console.error("Error fetching finance:",D)}finally{g(!1)}};if(u)return e.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-50 dark:bg-slate-950",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-24 w-24 rounded-full border-4 border-slate-200 dark:border-slate-800 border-t-indigo-600 animate-spin"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center font-black text-[10px] tracking-widest text-indigo-600 animate-pulse",children:"SYNCING"})]})});if(!m)return null;const h=m.summary||{},b=m.chart_data||[];m.recent_collections;const C=m.recent_expenses||[],A=h.total_expenses||0,M=h.expense_breakdown||{},k=[{name:"Salaries",value:M.salaries||0},{name:"Transport",value:M.transport||0},{name:"Food",value:M.food||0},{name:"Other",value:M.other||0}].filter(D=>D.value>0),T=({id:D,label:y,icon:P})=>e.jsxs("button",{onClick:()=>j(D),className:`flex items-center gap-2 px-4 py-2 text-sm font-semibold transition-all rounded-lg whitespace-nowrap ${v===D?"text-indigo-600 bg-indigo-50 dark:text-indigo-400 dark:bg-indigo-900/30":"text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[e.jsx(P,{size:16}),y]});return e.jsxs("div",{className:"p-4 md:p-8 max-w-[1400px] mx-auto space-y-6 min-h-screen bg-slate-50/50 dark:bg-slate-950/20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 pb-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Finance Management"}),e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Manage fees, payroll, and school expenditures"})]}),e.jsxs("div",{className:"flex bg-white dark:bg-slate-900 p-1 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-x-auto no-scrollbar gap-1",children:[e.jsx(T,{id:"overview",label:"Overview",icon:Bn}),e.jsx(T,{id:"collections",label:"Collections",icon:Ss}),e.jsx(T,{id:"fee-structure",label:"Fee Structure",icon:it}),n.subscription?.plan!=="Basic"&&e.jsxs(e.Fragment,{children:[e.jsx(T,{id:"payroll",label:"Payroll",icon:Ie}),e.jsx(T,{id:"expenses",label:"Expenses",icon:Wt})]})]})]}),e.jsxs(vt,{mode:"wait",children:[v==="overview"&&e.jsxs(he.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"space-y-6",children:[e.jsxs("div",{className:`grid grid-cols-2 ${n.subscription?.plan==="Basic"?"lg:grid-cols-2":"lg:grid-cols-4"} gap-4`,children:[e.jsx(Mr,{title:"Net Balance",value:`${n.currency} ${((h.net_profit||0)/1e3).toFixed(1)}k`,subtext:"Income - Expenses",icon:it,color:"bg-indigo-600",net:!0,delay:0}),e.jsx(Mr,{title:"Total Income",value:`${n.currency} ${((h.total_revenue||0)/1e3).toFixed(1)}k`,subtext:"Fees & others",icon:Dt,color:"bg-emerald-600",trend:12,delay:.1}),n.subscription?.plan!=="Basic"&&e.jsxs(e.Fragment,{children:[e.jsx(Mr,{title:"Total Expenses",value:`${n.currency} ${(A/1e3).toFixed(1)}k`,subtext:"Salaries & Ops",icon:Ca,color:"bg-rose-600",delay:.2}),e.jsx(Mr,{title:"Runway",value:`${h.runway||0} Mo`,subtext:"Burn rate based",icon:hs,color:"bg-amber-600",delay:.3})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Cash Flow"}),e.jsx("p",{className:"text-xs font-medium text-slate-500",children:"Revenue vs Expenditure"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"hidden sm:flex items-center gap-4 text-[11px] font-semibold text-slate-500",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-600"}),"Income"]}),n.subscription?.plan!=="Basic"&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-rose-500"}),"Expenses"]})]}),e.jsxs("select",{className:"bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-xs font-semibold text-slate-600 dark:text-slate-300 p-2 outline-none",children:[e.jsx("option",{children:"This Year"}),e.jsx("option",{children:"Last Year"})]})]})]}),e.jsx("div",{className:"h-[350px] w-full",children:b.length>0?e.jsx(es,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(Bi,{data:b,margin:{top:10,right:10,left:-20,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorIncome",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#4f46e5",stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:"#4f46e5",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorExpense",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#f43f5e",stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:"#f43f5e",stopOpacity:0})]})]}),e.jsx(pl,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0"}),e.jsx(Ea,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:10,fontWeight:600},dy:10}),e.jsx(Aa,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:10,fontWeight:600},tickFormatter:D=>`${D/1e3}k`}),e.jsx(ts,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"12px"}}),e.jsx(Zl,{type:"monotone",dataKey:"revenue",stroke:"#4f46e5",strokeWidth:3,fill:"url(#colorIncome)"}),n.subscription?.plan!=="Basic"&&e.jsx(Zl,{type:"monotone",dataKey:"expenses",stroke:"#f43f5e",strokeWidth:3,fill:"url(#colorExpense)"})]})}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-slate-400 font-medium text-sm",children:"No data available"})})]}),n.subscription?.plan!=="Basic"&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1",children:"Expenses"}),e.jsx("p",{className:"text-xs font-medium text-slate-500 mb-6",children:"By Category"}),e.jsxs("div",{className:"h-64 relative w-full mb-6",children:[e.jsx(es,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(Ir,{children:[e.jsx(Gr,{data:k,innerRadius:60,outerRadius:80,paddingAngle:4,dataKey:"value",cornerRadius:4,children:k.map((D,y)=>e.jsx($a,{fill:qc[y%qc.length]},`cell-${y}`))}),e.jsx(ts,{})]})}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center flex-col pointer-events-none",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Total"}),e.jsxs("span",{className:"text-xl font-bold text-slate-900 dark:text-white",children:[(A/1e3).toFixed(0),"k"]})]})]}),e.jsx("div",{className:"space-y-3",children:(k||[]).map((D,y)=>e.jsxs("div",{className:"flex justify-between items-center text-xs font-medium",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:qc[y%qc.length]}}),e.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:D.name})]}),e.jsxs("span",{className:"text-slate-900 dark:text-white uppercase",children:[n.currency," ",D.value.toLocaleString()]})]},y))})]})]})]},"overview"),v==="collections"&&e.jsxs(he.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Mr,{title:"Total Collected",value:`${n.currency} ${((h.total_revenue||0)/1e3).toFixed(1)}k`,subtext:"Total revenue",icon:Ss,color:"bg-emerald-600"}),e.jsx(Mr,{title:"Expected Fees",value:`${n.currency} ${((h.expected_fees||0)/1e3).toFixed(1)}k`,subtext:"Total billings",icon:Ze,color:"bg-blue-600"}),e.jsx(Mr,{title:"Outstanding",value:`${n.currency} ${((h.fees_arrears||0)/1e3).toFixed(1)}k`,subtext:"Unpaid total",icon:Ca,color:"bg-red-600"}),e.jsx(Mr,{title:"Collection Rate",value:`${h.collection_rate||0}%`,subtext:"Target: 85%",icon:Pi,color:"bg-violet-600"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex flex-col xl:flex-row xl:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white tracking-tight",children:"Recent Collections"}),e.jsx("p",{className:"text-xs font-medium text-slate-500 mt-1",children:"Real-time ledger of incoming fee payments"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(jt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{placeholder:"Search by student, admission or ref...",className:"pl-9 pr-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm font-medium text-slate-600 dark:text-slate-300 outline-none w-full sm:w-64 focus:ring-2 focus:ring-indigo-500/20 transition-all",value:S,onChange:D=>_(D.target.value)})]}),e.jsxs(W,{variant:"outline",className:"h-9 px-3 text-xs font-semibold",children:[e.jsx(za,{size:14,className:"mr-2"})," Filter"]}),e.jsxs(W,{variant:"primary",className:"h-9 px-4 text-xs font-semibold bg-indigo-600 border-none shadow-sm",children:[e.jsx(nt,{size:14,className:"mr-2"})," Record Payment"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800",children:e.jsxs("tr",{className:"text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:[e.jsx("th",{className:"px-6 py-4",children:"Student"}),e.jsx("th",{className:"px-6 py-4",children:"Reference"}),e.jsx("th",{className:"px-6 py-4",children:"Amount"}),e.jsx("th",{className:"px-6 py-4",children:"Channel"}),e.jsx("th",{className:"px-6 py-4",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:(E||[]).length>0?E.map((D,y)=>e.jsxs("tr",{className:"group hover:bg-slate-50/50 dark:hover:bg-slate-800/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-indigo-600 font-bold text-xs ring-1 ring-slate-200 dark:ring-slate-700",children:D.student[0]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:D.student}),e.jsxs("p",{className:"text-[10px] font-medium text-slate-500",children:["ADM: ",D.admission_no]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-xs font-mono font-medium text-slate-500 bg-slate-50/50 dark:bg-slate-800/50 px-2 py-1 rounded-md border border-slate-100 dark:border-slate-800",children:D.reference})}),e.jsxs("td",{className:"px-6 py-4 text-sm font-bold text-emerald-600",children:[n.currency," ",D.amount.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider ${D.method==="MPESA"?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-blue-50 text-blue-600 border border-blue-100"}`,children:D.method})}),e.jsx("td",{className:"px-6 py-4 text-xs font-medium text-slate-500",children:D.date}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-1 text-[10px] font-bold text-emerald-600 bg-emerald-50 px-2 py-1 rounded-full border border-emerald-100",children:[e.jsx(Ye,{size:10})," Verified"]})})]},y)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-8 py-16 text-center text-slate-400 font-medium",children:"No results found"})})})]})})]})]},"collections"),v==="expenses"&&e.jsx(he.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white tracking-tight",children:"Expenditure Ledger"}),e.jsx("p",{className:"text-xs font-medium text-slate-500",children:"Detailed record of school outflows"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(W,{variant:"primary",className:"h-9 px-4 text-xs font-semibold bg-rose-600 border-none shadow-sm",children:[e.jsx(nt,{size:14,className:"mr-2"})," Record Expense"]}),e.jsxs(W,{variant:"outline",className:"h-9 px-3 text-xs font-semibold",children:[e.jsx(Ms,{size:14,className:"mr-2"})," Export"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800",children:e.jsxs("tr",{className:"text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:[e.jsx("th",{className:"px-6 py-4",children:"Title"}),e.jsx("th",{className:"px-6 py-4",children:"Category"}),e.jsx("th",{className:"px-6 py-4",children:"Amount"}),e.jsx("th",{className:"px-6 py-4",children:"Payee"}),e.jsx("th",{className:"px-6 py-4",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:(C||[]).map((D,y)=>e.jsxs("tr",{className:"hover:bg-slate-50/50 dark:hover:bg-slate-800/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 font-semibold text-sm text-slate-900 dark:text-white",children:D.title}),e.jsx("td",{className:"px-6 py-4 text-[10px] font-bold uppercase tracking-wider text-slate-500",children:D.category}),e.jsxs("td",{className:"px-6 py-4 text-sm font-bold text-rose-600",children:[n.currency," ",D.amount.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 text-xs font-medium text-slate-500",children:D.vendor||"Staff"}),e.jsx("td",{className:"px-6 py-4 text-xs font-medium text-slate-500",children:D.date}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("button",{className:"p-1.5 rounded bg-slate-100 dark:bg-slate-800 text-slate-400 hover:text-slate-600 transition-colors",children:e.jsx(Un,{size:14})})})]},y))})]})})]})},"expenses"),v==="fee-structure"&&e.jsx(lN,{}),v==="payroll"&&e.jsx(a0,{}),v==="transport"&&e.jsx(_m,{}),v==="food"&&e.jsx(Vf,{})]})]})},iN=()=>{const n=Le(),[m,c]=f.useState([]),[u,g]=f.useState(!0),[v,j]=f.useState(""),[S,_]=f.useState("ALL"),[E,z]=f.useState(1),h=15;f.useEffect(()=>{(async()=>{try{const D=await V.get("/api/finance/transactions/");c(D.data.transactions||[])}catch(D){console.error("Error fetching transactions:",D)}finally{g(!1)}})()},[]);const b=m.filter(T=>{const D=T.student.toLowerCase().includes(v.toLowerCase())||T.reference.toLowerCase().includes(v.toLowerCase())||T.admission_no.toLowerCase().includes(v.toLowerCase()),y=S==="ALL"||T.method===S;return D&&y}),C=Math.ceil(b.length/h),A=(E-1)*h,M=b.slice(A,A+h),k=b.reduce((T,D)=>T+D.amount,0);return u?e.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-50 dark:bg-slate-950",children:e.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-slate-200 dark:border-slate-800 border-t-indigo-600 animate-spin"})}):e.jsxs("div",{className:"p-4 md:p-8 max-w-[1400px] mx-auto space-y-6 min-h-screen bg-slate-50/50 dark:bg-slate-950/20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>n("/finance"),className:"p-2.5 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-sm hover:bg-slate-50 transition-colors",children:e.jsx(fl,{size:20,className:"text-slate-600 dark:text-slate-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Transaction Ledger"}),e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Complete payment history and financial records"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(W,{variant:"outline",className:"h-10 px-4 text-xs font-semibold bg-white dark:bg-slate-900 shadow-sm border-slate-200 dark:border-slate-800",children:[e.jsx(Fn,{size:16,className:"mr-2"})," Print"]}),e.jsxs(W,{variant:"primary",className:"h-10 px-4 text-xs font-semibold bg-indigo-600 border-none shadow-sm",children:[e.jsx(Ms,{size:16,className:"mr-2"})," Export CSV"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-5 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-emerald-50 dark:bg-emerald-500/10 rounded-lg",children:e.jsx(it,{size:18,className:"text-emerald-600"})}),e.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Total Volume"})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["KES ",k.toLocaleString()]}),e.jsx("span",{className:"text-[10px] font-bold text-emerald-600 px-1.5 py-0.5 bg-emerald-50 dark:bg-emerald-500/10 rounded tracking-tight",children:"+12%"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-5 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-500/10 rounded-lg",children:e.jsx(Ze,{size:18,className:"text-indigo-600"})}),e.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Count"})]}),e.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:b.length})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-5 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm sm:col-span-2 lg:col-span-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-slate-50 dark:bg-slate-800 rounded-lg",children:e.jsx(za,{size:18,className:"text-slate-500"})}),e.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Active Filters"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-[10px] font-bold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:[S," Method"]}),v&&e.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-[10px] font-bold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:["Search: ",v]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(jt,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search student, ref, admission...",value:v,onChange:T=>j(T.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-800 border-none rounded-lg text-sm font-medium text-slate-600 dark:text-slate-300 outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:S,onChange:T=>_(T.target.value),className:"px-4 py-2 bg-slate-50 dark:bg-slate-800 border-none rounded-lg text-sm font-semibold text-slate-600 dark:text-slate-300 outline-none focus:ring-2 focus:ring-indigo-500/20",children:[e.jsx("option",{value:"ALL",children:"All Methods"}),e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"MPESA",children:"M-Pesa"}),e.jsx("option",{value:"BANK",children:"Bank Transfer"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800",children:e.jsxs("tr",{className:"text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:[e.jsx("th",{className:"px-6 py-4",children:"Reference"}),e.jsx("th",{className:"px-6 py-4",children:"Student"}),e.jsx("th",{className:"px-6 py-4",children:"Date"}),e.jsx("th",{className:"px-6 py-4",children:"Method"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:M.map((T,D)=>e.jsxs("tr",{className:"group hover:bg-slate-50/50 dark:hover:bg-slate-800/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-xs font-mono font-medium text-slate-500 bg-slate-50 dark:bg-slate-800 px-2 py-1 rounded border border-slate-200 dark:border-slate-700",children:T.reference})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-indigo-600 font-bold text-xs border border-slate-200 dark:border-slate-700",children:T.student.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white leading-tight",children:T.student}),e.jsx("p",{className:"text-[10px] font-medium text-slate-500",children:T.admission_no})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:T.date})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider ${T.method==="MPESA"?"bg-emerald-50 text-emerald-600 border border-emerald-100":T.method==="CASH"?"bg-blue-50 text-blue-600 border border-blue-100":"bg-indigo-50 text-indigo-600 border border-indigo-100"}`,children:T.method})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("span",{className:"text-sm font-bold text-emerald-600",children:["KES ",T.amount.toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("button",{className:"p-1.5 rounded bg-slate-100 dark:bg-slate-800 text-slate-400 hover:text-slate-600 transition-colors",children:e.jsx(Un,{size:14})})})]},T.id))})]})}),C>1&&e.jsxs("div",{className:"p-4 bg-slate-50/50 dark:bg-slate-800/30 border-t border-slate-100 dark:border-slate-800 flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("p",{className:"text-xs font-medium text-slate-500",children:["Showing ",A+1," to ",Math.min(A+h,b.length)," of ",b.length]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>z(T=>Math.max(1,T-1)),disabled:E===1,className:"p-2 rounded-lg bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 text-slate-500 disabled:opacity-50",children:e.jsx(Ls,{size:16})}),[...Array(C)].map((T,D)=>e.jsx("button",{onClick:()=>z(D+1),className:`w-9 h-9 rounded-lg text-xs font-bold transition-all ${E===D+1?"bg-indigo-600 text-white shadow-sm":"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 text-slate-500 hover:bg-slate-50"}`,children:D+1},D+1)),e.jsx("button",{onClick:()=>z(T=>Math.min(C,T+1)),disabled:E===C,className:"p-2 rounded-lg bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 text-slate-500 disabled:opacity-50",children:e.jsx(ds,{size:16})})]})]})]})]})},nN=()=>{const n=Le(),[m,c]=f.useState(!1),[u,g]=f.useState(!1),[v,j]=f.useState(!1),[S,_]=f.useState(null),[E,z]=f.useState(""),[h,b]=f.useState([]),[C,A]=f.useState(null),[M,k]=f.useState({amount:"",payment_method:"CASH",reference_number:"",description:"Tuition Fee Payment",term:1});f.useEffect(()=>{const F=setTimeout(()=>{E.length>=2?T():b([])},300);return()=>clearTimeout(F)},[E]);const T=async()=>{g(!0);try{const F=await V.get(`/api/students/?search=${E}`);F.data.students&&b(F.data.students)}catch(F){console.error(F)}finally{g(!1)}},D=F=>{A(F),z(""),b([])},y=F=>{k({...M,[F.target.name]:F.target.value})},P=async F=>{if(F.preventDefault(),!C){_("Please select a student first");return}c(!0),_(null);try{const Z={student_id:C.id,...M};(await V.post("/api/finance/payment/",Z)).data.success&&(j(!0),setTimeout(()=>{n("/finance")},2e3))}catch(Z){_(Z.response?.data?.error||"Failed to record payment")}finally{c(!1)}},U=[{id:"CASH",label:"Cash",icon:Ag,color:"text-green-600",bg:"bg-green-50",border:"border-green-100"},{id:"MPESA",label:"M-Pesa",icon:Am,color:"text-emerald-600",bg:"bg-emerald-50",border:"border-emerald-100"},{id:"BANK",label:"Bank Transfer",icon:It,color:"text-blue-600",bg:"bg-blue-50",border:"border-blue-100"}];return v?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-950 p-6",children:e.jsxs(he.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white dark:bg-slate-900 p-8 rounded-2xl shadow-xl text-center max-w-md w-full border border-slate-100 dark:border-slate-800",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Ye,{size:40,className:"text-green-600 dark:text-green-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Payment Recorded!"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"The payment has been successfully recorded to the student's account."}),e.jsx(W,{onClick:()=>n("/finance"),className:"w-full",children:"Back to Finance"})]})}):e.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("button",{onClick:()=>n("/finance"),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:e.jsx(fl,{size:24,className:"text-slate-600 dark:text-slate-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Record Payment"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Add a new payment transaction"})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-800 overflow-hidden",children:e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Select Student"}),C?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-primary-50 dark:bg-primary-900/10 rounded-xl border border-primary-100 dark:border-primary-800",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white dark:bg-slate-800 text-primary-600 dark:text-primary-400 flex items-center justify-center font-bold shadow-sm",children:C.full_name?.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-primary-900 dark:text-primary-100",children:C.full_name}),e.jsxs("p",{className:"text-sm text-primary-700 dark:text-primary-300",children:["ADM: ",C.admission_number]})]})]}),e.jsx("button",{onClick:()=>A(null),className:"text-primary-600 hover:text-primary-800 text-sm font-medium",children:"Change"})]}):e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx(jt,{size:20})}),e.jsx("input",{type:"text",placeholder:"Search by name or admission number...",className:"w-full h-12 pl-12 pr-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:ring-2 focus:ring-primary-100 focus:border-primary-500 transition-all outline-none",value:E,onChange:F=>z(F.target.value)}),h.length>0&&e.jsx("div",{className:"absolute top-14 left-0 right-0 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 z-10 max-h-60 overflow-y-auto",children:h.map(F=>e.jsxs("button",{onClick:()=>D(F),className:"w-full p-4 flex items-center gap-4 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-left border-b border-slate-50 dark:border-slate-700 last:border-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 flex items-center justify-center font-bold text-sm",children:F.full_name?.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:F.full_name}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["ADM: ",F.admission_number,"  ",F.grade]})]})]},F.id))})]})]}),e.jsxs("div",{className:`space-y-6 transition-opacity duration-300 ${C?"opacity-100":"opacity-50 pointer-events-none filter blur-[1px]"}`,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{label:"Amount (KES)",name:"amount",type:"number",value:M.amount,onChange:y,placeholder:"0.00",required:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Term"}),e.jsxs("select",{name:"term",value:M.term,onChange:y,className:"w-full h-11 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white px-4 focus:ring-2 focus:ring-primary-100 focus:border-primary-500 transition-all outline-none",children:[e.jsx("option",{value:1,children:"Term 1"}),e.jsx("option",{value:2,children:"Term 2"}),e.jsx("option",{value:3,children:"Term 3"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Payment Method"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:U.map(F=>e.jsxs("button",{type:"button",onClick:()=>k({...M,payment_method:F.id}),className:`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${M.payment_method===F.id?`${F.bg} dark:bg-opacity-10 ${F.border} dark:border-opacity-30 ring-2 ring-primary-500 ring-offset-2 dark:ring-offset-slate-900`:"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-primary-200 dark:hover:border-primary-700"}`,children:[e.jsx(F.icon,{className:M.payment_method===F.id?F.color:"text-slate-400 dark:text-slate-500",size:24}),e.jsx("span",{className:`text-sm font-medium ${M.payment_method===F.id?"text-slate-900 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:F.label})]},F.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{label:"Reference Number",name:"reference_number",value:M.reference_number,onChange:y,placeholder:M.payment_method==="CASH"?"Optional for Cash":"Required",required:M.payment_method!=="CASH"}),e.jsx(fe,{label:"Description",name:"description",value:M.description,onChange:y,placeholder:"e.g. Tuition Fee"})]}),S&&e.jsxs("div",{className:"p-4 bg-red-50 text-red-600 rounded-xl flex items-center gap-2 text-sm",children:[e.jsx(ot,{size:18}),S]}),e.jsx("div",{className:"pt-4",children:e.jsx(W,{onClick:P,isLoading:m,className:"w-full h-12 text-lg",disabled:!C,children:"Record Payment"})})]})]})})]})},Mi=({options:n,value:m,onChange:c,placeholder:u="Select option...",searchPlaceholder:g="Search...",className:v=""})=>{const[j,S]=f.useState(!1),[_,E]=f.useState(""),z=f.useRef(null),h=n.filter(C=>C.label.toLowerCase().includes(_.toLowerCase())),b=n.find(C=>C.value===m);return f.useEffect(()=>{const C=A=>{z.current&&!z.current.contains(A.target)&&S(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),e.jsxs("div",{className:`relative ${v}`,ref:z,children:[e.jsxs("div",{onClick:()=>S(!j),className:"w-full pl-4 pr-10 py-3 rounded-xl bg-slate-50 dark:bg-slate-800 border-none focus:ring-2 focus:ring-indigo-500 text-slate-900 dark:text-white font-medium cursor-pointer flex items-center justify-between",children:[e.jsx("span",{className:b?"":"text-slate-400",children:b?b.label:u}),e.jsx(xl,{size:18,className:`text-slate-400 transition-transform ${j?"rotate-180":""}`})]}),j&&e.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-slate-100 dark:border-slate-800 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"p-2 border-b border-slate-50 dark:border-slate-800 flex items-center gap-2",children:[e.jsx(jt,{size:16,className:"text-slate-400"}),e.jsx("input",{type:"text",placeholder:g,value:_,onChange:C=>E(C.target.value),className:"w-full bg-transparent border-none focus:ring-0 text-sm py-1 text-slate-900 dark:text-white",autoFocus:!0})]}),e.jsx("div",{className:"max-h-60 overflow-y-auto p-1 custom-scrollbar",children:h.length>0?h.map(C=>e.jsxs("div",{onClick:()=>{c(C.value),S(!1),E("")},className:`flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer text-sm transition-colors ${m===C.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{children:C.label}),m===C.value&&e.jsx(Pr,{size:14})]},C.value)):e.jsx("div",{className:"p-4 text-center text-xs text-slate-500",children:"No results found"})})]})]})},Zc=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY"],oN=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00"],dN=()=>{const[n,m]=f.useState([]),[c,u]=f.useState([]),[g,v]=f.useState([]),[j,S]=f.useState([]),[_,E]=f.useState(!0),[z,h]=f.useState(!1),[b,C]=f.useState(!1),[A,M]=f.useState(null),[k,T]=f.useState({grade:"",teacher:""}),[D,y]=f.useState({grade:"",teacher:"",subject:"",day:"MONDAY",start_time:"08:00",end_time:"09:00"}),P=async()=>{E(!0);try{const H=await V.get("/api/schedule/",{params:k});m(H.data.schedule||[])}catch(H){console.error("Error fetching schedule:",H)}finally{E(!1)}},U=async()=>{try{const[H,xe,I]=await Promise.all([V.get("/api/grades/"),V.get("/api/subjects/"),V.get("/api/teachers/?per_page=100")]);u(H.data.grades||[]),v(xe.data.subjects||[]),S(I.data.teachers||[])}catch(H){console.error("Error fetching options:",H)}};f.useEffect(()=>{U()},[]),f.useEffect(()=>{P()},[k]);const F=async H=>{H.preventDefault(),C(!0),M(null);try{await V.post("/api/schedule/",D),h(!1),P(),y(xe=>({...xe,start_time:"08:00",end_time:"09:00"}))}catch(xe){M(xe.response?.data?.error||"Failed to create session")}finally{C(!1)}},Z=Zc.reduce((H,xe)=>(H[xe]=n.filter(I=>I.day===xe),H),{}),ae=(H,xe)=>Z[H]?.filter(I=>I.start_time.startsWith(xe.split(":")[0]))||[];return _&&!c.length?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"p-6 max-w-full mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Class Schedule"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Weekly timetable and lesson planning"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(W,{variant:"secondary",className:"hidden md:flex",children:[e.jsx(Ms,{size:18,className:"mr-2"}),"Export PDF"]}),e.jsxs(W,{onClick:()=>h(!0),children:[e.jsx(nt,{size:18,className:"mr-2"}),"Add Session"]})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-2xl border border-slate-100 dark:border-slate-800 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsx(za,{size:20,className:"text-slate-400 hidden md:block"}),e.jsx("div",{className:"w-full md:w-64",children:e.jsx(Mi,{options:c.map(H=>({value:H.id,label:H.name})),value:k.grade,onChange:H=>T(xe=>({...xe,grade:H})),placeholder:"All Grades/Classes"})}),e.jsx("div",{className:"w-full md:w-64",children:e.jsx(Mi,{options:j.map(H=>({value:H.id,label:H.full_name})),value:k.teacher,onChange:H=>T(xe=>({...xe,teacher:H})),placeholder:"All Teachers"})}),e.jsx(W,{variant:"ghost",onClick:()=>T({grade:"",teacher:""}),className:"ml-auto text-slate-500",children:"Clear Filters"})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-800 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[1000px]",children:[e.jsxs("div",{className:"grid grid-cols-6 bg-slate-50 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-10",children:[e.jsx("div",{className:"p-4 font-semibold text-slate-600 dark:text-slate-400 text-sm border-r border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800",children:"Time"}),Zc.map(H=>e.jsx("div",{className:"p-4 text-center font-bold text-slate-800 dark:text-slate-200 text-sm border-r border-slate-200 dark:border-slate-700 last:border-r-0",children:H.charAt(0)+H.slice(1).toLowerCase()},H))]}),oN.map((H,xe)=>e.jsxs("div",{className:`grid grid-cols-6 border-b border-slate-100 dark:border-slate-800 ${xe%2===0?"bg-white dark:bg-slate-900":"bg-slate-50/30 dark:bg-slate-800/20"}`,children:[e.jsx("div",{className:"p-4 border-r border-slate-200 dark:border-slate-700 flex items-start justify-center pt-6",children:e.jsxs("div",{className:"flex flex-col items-center gap-1 text-slate-500 dark:text-slate-400",children:[e.jsx("span",{className:"text-sm font-bold",children:H}),e.jsx("span",{className:"text-[10px] uppercase text-slate-400",children:"00"})]})}),Zc.map(I=>{const ee=ae(I,H);return e.jsxs("div",{className:"p-1 border-r border-slate-200 dark:border-slate-700 last:border-r-0 min-h-[100px] relative",children:[ee.map($=>e.jsxs(he.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-slate-800/50 border-l-4 border-l-secondary-500 shadow-sm rounded-r-lg p-2 mb-2 hover:shadow-md transition-all cursor-pointer group border border-slate-100 dark:border-slate-700",children:[e.jsx("p",{className:"font-bold text-xs text-slate-800 dark:text-white truncate",children:$.subject}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("span",{className:"text-[10px] font-medium bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-slate-600 dark:text-slate-300",children:$.grade}),e.jsxs("span",{className:"text-[10px] text-slate-400",children:[$.start_time,"-",$.end_time]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-2 pt-2 border-t border-slate-50 dark:border-slate-700/50",children:[$.avatar?e.jsx("img",{src:$.avatar,className:"w-4 h-4 rounded-full object-cover",alt:""}):e.jsx("div",{className:"w-4 h-4 rounded-full bg-secondary-100 text-secondary-600 flex items-center justify-center text-[8px] font-bold",children:$.teacher.charAt(0)}),e.jsx("span",{className:"text-[10px] text-slate-500 truncate max-w-[80px]",children:$.teacher})]})]},$.id)),ee.length===0&&e.jsx("div",{className:"w-full h-full min-h-[80px] hover:bg-slate-50/50 dark:hover:bg-white/5 transition-colors flex items-center justify-center opacity-0 hover:opacity-100 group",children:e.jsx(nt,{className:"text-slate-300",size:20})})]},`${I}-${H}`)})]},H))]})})}),e.jsx(vt,{children:z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs(he.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-slate-900 rounded-2xl shadow-xl w-full max-w-lg overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Planning Session"}),e.jsx("button",{onClick:()=>h(!1),className:"text-slate-400 hover:text-slate-600 transition-colors",children:e.jsx(Ve,{size:24})})]}),e.jsxs("form",{onSubmit:F,className:"p-6 space-y-4",children:[A&&e.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(ot,{size:16}),A]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Target Class *"}),e.jsx(Mi,{options:c.map(H=>({value:H.id,label:H.name})),value:D.grade,onChange:H=>{const xe=c.find(I=>I.id.toString()===H.toString());y(I=>({...I,grade:H,teacher:xe?.class_teacher_id||I.teacher}))},placeholder:"Select Class"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Subject *"}),e.jsx(Mi,{options:g.map(H=>({value:H.id,label:`${H.name} (${H.code})`})),value:D.subject,onChange:H=>y({...D,subject:H}),placeholder:"Select Subject"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Assigned Teacher *"}),e.jsx(Mi,{options:j.map(H=>({value:H.id,label:H.full_name})),value:D.teacher,onChange:H=>y({...D,teacher:H}),placeholder:"Select Teacher"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Day"}),e.jsx("select",{className:"w-full px-4 py-2.5 rounded-xl bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 dark:text-white outline-none",value:D.day,onChange:H=>y({...D,day:H.target.value}),children:Zc.map(H=>e.jsx("option",{value:H,children:H.charAt(0)+H.slice(1).toLowerCase()},H))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Start Time"}),e.jsx("input",{type:"time",className:"w-full px-4 py-2.5 rounded-xl bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 dark:text-white outline-none",required:!0,value:D.start_time,onChange:H=>y({...D,start_time:H.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"End Time"}),e.jsx("input",{type:"time",className:"w-full px-4 py-2.5 rounded-xl bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 dark:text-white outline-none",required:!0,value:D.end_time,onChange:H=>y({...D,end_time:H.target.value})})]})]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[e.jsx(W,{type:"button",variant:"secondary",onClick:()=>h(!1),children:"Cancel"}),e.jsxs(W,{type:"submit",isLoading:b,children:[e.jsx(Pr,{size:18,className:"mr-2"})," Save Session"]})]})]})]})})})]})},ea=({title:n,icon:m,children:c})=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-800 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 dark:border-slate-800 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-slate-50 dark:bg-slate-800 rounded-lg",children:e.jsx(m,{size:20,className:"text-slate-600 dark:text-slate-400"})}),e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:n})]}),e.jsx("div",{className:"p-6",children:c})]}),cN=()=>{const n=JSON.parse(localStorage.getItem("user")||"{}"),{fetchConfig:m,updateConfig:c,hasFeature:u}=Nt(),[g,v]=f.useState("profile"),[j,S]=f.useState(!1),[_,E]=f.useState(!0),[z,h]=f.useState(null),[b,C]=f.useState({first_name:n.first_name||"",last_name:n.last_name||"",email:n.email||"",current_password:"",new_password:"",confirm_password:"",school_name:"",school_code:"",school_email:"",school_phone:"",school_address:"",admission_number_format:"",admission_counter:0,school_logo:null,school_logo_preview:null,school_logo_file:null,portal_slug:"",teacher_portal_password:"",student_portal_password:"",accountant_portal_password:"",food_portal_password:"",transport_portal_password:"",driver_portal_password:"",admission_fee:0}),[A,M]=f.useState([]),[k,T]=f.useState({name:"",address:"",phone:""}),[D,y]=f.useState([]),[P,U]=f.useState(!1),[F,Z]=f.useState({first_name:"",last_name:"",email:"",phone:"",position:"ACCOUNTANT",national_id:"",date_of_birth:"1990-01-01"}),ae=async()=>{U(!0);try{const J=await V.get("/api/hr/staff/"),oe=["ACCOUNTANT","FOOD_MANAGER","TRANSPORT_MANAGER"],ue=J.data.staff.filter(ke=>oe.includes(ke.position));y(ue)}catch(J){console.error("Error fetching portal users:",J)}finally{U(!1)}},H=async()=>{if(!F.first_name||!F.email||!F.position){h({type:"error",text:"Please fill in all required fields"});return}S(!0);try{await V.post("/api/hr/staff/create/",{...F,staff_type:"SUPPORT",gender:"M",date_joined:new Date().toISOString().split("T")[0]}),h({type:"success",text:`${F.position.replace("_"," ")} user created successfully!`}),Z({first_name:"",last_name:"",email:"",phone:"",position:"ACCOUNTANT",national_id:"",date_of_birth:"1990-01-01"}),ae()}catch(J){h({type:"error",text:J.response?.data?.error||"Failed to create portal user"})}finally{S(!1),setTimeout(()=>h(null),3e3)}},xe=async()=>{try{const J=await V.get("/api/branches/");M(J.data.branches||[])}catch(J){console.error("Error fetching branches:",J)}},I=async()=>{if(k.name)try{await V.post("/api/branches/",k),T({name:"",address:"",phone:""}),xe(),h({type:"success",text:"Branch added successfully"}),setTimeout(()=>h(null),3e3)}catch(J){h({type:"error",text:J.response?.data?.error||"Failed to add branch"}),setTimeout(()=>h(null),3e3)}},ee=async J=>{if(window.confirm("Are you sure you want to delete this branch?"))try{await V.delete(`/ api / branches / ${J}/`),xe(),h({type:"success",text:"Branch deleted successfully"}),setTimeout(()=>h(null),3e3)}catch(oe){console.error("Error deleting branch:",oe),h({type:"error",text:"Failed to delete branch"}),setTimeout(()=>h(null),3e3)}};f.useEffect(()=>{g==="branches"?xe():g==="portal-users"&&ae()},[g]),f.useEffect(()=>{(async()=>{E(!0);try{const oe=await V.get("/api/config/"),ue=oe.data?.config||oe.data||{};C(ke=>({...ke,school_name:ue?.school_name||"",school_code:ue?.school_code||"",school_email:ue?.school_email||"",school_phone:ue?.school_phone||"",school_address:ue?.school_address||"",admission_number_format:ue?.admission_number_format||"",admission_counter:ue?.admission_counter||0,school_logo:ue?.school_logo||null,portal_slug:ue?.portal_slug||"",teacher_portal_password:ue?.teacher_portal_password||"",student_portal_password:ue?.student_portal_password||"",accountant_portal_password:ue?.accountant_portal_password||"",food_portal_password:ue?.food_portal_password||"",transport_portal_password:ue?.transport_portal_password||"",driver_portal_password:ue?.driver_portal_password||"",admission_fee:ue?.admission_fee||0}))}catch(oe){console.error("Error fetching config:",oe)}finally{E(!1)}})()},[]);const $=J=>{C(oe=>({...oe,[J.target.name]:J.target.value}))},Q=async()=>{S(!0);try{const J=await V.post("/api/auth/profile/update/",{first_name:b.first_name,last_name:b.last_name,email:b.email});if(J.data.success){const ue={...JSON.parse(localStorage.getItem("user")||"{}"),...J.data.user};localStorage.setItem("user",JSON.stringify(ue)),h({type:"success",text:"Profile updated successfully!"}),await m()}}catch(J){h({type:"error",text:J.response?.data?.error||"Failed to update profile"})}finally{S(!1),setTimeout(()=>h(null),3e3)}},re=async()=>{if(!b.current_password||!b.new_password){h({type:"error",text:"Please fill in all password fields"});return}if(b.new_password!==b.confirm_password){h({type:"error",text:"New passwords do not match"});return}S(!0);try{(await V.post("/api/auth/password/change/",{current_password:b.current_password,new_password:b.new_password})).data.success&&(h({type:"success",text:"Password changed successfully!"}),C(oe=>({...oe,current_password:"",new_password:"",confirm_password:""})))}catch(J){h({type:"error",text:J.response?.data?.error||"Failed to change password"})}finally{S(!1),setTimeout(()=>h(null),3e3)}},B=async()=>{S(!0);try{const J=new FormData;J.append("school_name",b.school_name),J.append("school_code",b.school_code),J.append("school_email",b.school_email),J.append("school_phone",b.school_phone),J.append("school_address",b.school_address),J.append("admission_number_format",b.admission_number_format),J.append("admission_fee",b.admission_fee),J.append("teacher_portal_password",b.teacher_portal_password),J.append("student_portal_password",b.student_portal_password),J.append("accountant_portal_password",b.accountant_portal_password),J.append("food_portal_password",b.food_portal_password),J.append("transport_portal_password",b.transport_portal_password),J.append("driver_portal_password",b.driver_portal_password),b.school_logo_file&&J.append("school_logo",b.school_logo_file);const oe=await V.post("/api/config/update/",J),ue=oe.data?.config||oe.data?.saved_data||oe.data?.configuration;if(oe.data?.success&&ue){if(c(ue),oe.data.user){const ye={...JSON.parse(localStorage.getItem("user")||"{}"),...oe.data.user};localStorage.setItem("user",JSON.stringify(ye))}C(ke=>({...ke,...oe.data.user?{first_name:oe.data.user.first_name||ke.first_name,last_name:oe.data.user.last_name||ke.last_name,email:oe.data.user.email||ke.email}:{},school_name:ue.school_name||"",school_code:ue.school_code||"",school_email:ue.school_email||"",school_phone:ue.school_phone||"",school_address:ue.school_address||"",admission_number_format:ue.admission_number_format||"",admission_counter:ue.admission_counter||0,school_logo:ue.school_logo||null,school_logo_preview:null,school_logo_file:null,admission_fee:ue.admission_fee||0})),h({type:"success",text:"Institutional settings saved successfully!"})}else if(console.warn("Config save returned unusual data:",oe.data),oe.data?.success)await m(),h({type:"success",text:"Institutional settings saved!"});else{const ke=oe.data?.error||oe.data?.message||"Sync failed";h({type:"error",text:`Settings saved but sync issue: ${ke}`})}setTimeout(()=>h(null),5e3)}catch(J){console.error("Error saving config:",J),h({type:"error",text:J.response?.data?.error||"Server error while saving configuration"}),setTimeout(()=>h(null),5e3)}finally{S(!1)}},le=()=>{const J=b.admission_number_format||"{SCHOOL_CODE}/{YEAR}/{COUNTER:04d}",oe=b.school_code||"EDU",ue=new Date().getFullYear(),ke=(b.admission_counter||0)+1;let ye=J;return ye=ye.replace("{SCHOOL_CODE}",oe),ye=ye.replace("{YEAR}",ue.toString()),ye=ye.replace("{COUNTER:04d}",ke.toString().padStart(4,"0")),ye=ye.replace("{COUNTER:05d}",ke.toString().padStart(5,"0")),ye=ye.replace("{COUNTER:03d}",ke.toString().padStart(3,"0")),ye=ye.replace("{COUNTER}",ke.toString()),ye=ye.replace("{GRADE}","Grade1"),ye},G=[{id:"profile",label:"Profile",icon:Qe},{id:"security",label:"Security",icon:Mt},{id:"notifications",label:"Notifications",icon:rd},{id:"appearance",label:"Appearance",icon:Uc},...u("MULTI_BRANCH")?[{id:"branches",label:"Branches",icon:gt}]:[],...u("FINANCE_MANAGEMENT")?[{id:"portals",label:"Portal Access",icon:Bp},{id:"portal-passwords",label:"Portal Passwords",icon:im},{id:"portal-users",label:"Portal Users",icon:id}]:[],{id:"admission",label:"Admission",icon:Wt},{id:"system",label:"System",icon:ld}];return e.jsxs("div",{className:"p-4 max-w-7xl mx-auto space-y-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-black text-slate-900 dark:text-white tracking-widest uppercase mb-0.5",children:"Settings"}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-medium tracking-wide",children:"Manage your account and application preferences"})]}),z&&e.jsx("div",{className:`p-4 rounded-xl ${z.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:z.text}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-800 p-2",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto",children:G.map(J=>e.jsxs("button",{onClick:()=>v(J.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${g===J.id?"bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-400":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[e.jsx(J.icon,{size:16}),J.label]},J.id))})}),g==="profile"&&e.jsx("div",{className:"space-y-6",children:e.jsx(ea,{title:"Profile Information",icon:Qe,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[e.jsxs("div",{className:"h-20 w-20 rounded-full bg-primary-100 flex items-center justify-center text-primary-700 font-bold text-2xl",children:[n.first_name?.[0]||"U",n.last_name?.[0]||""]}),e.jsxs("div",{children:[e.jsx(W,{variant:"secondary",size:"sm",children:"Change Photo"}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"JPG, PNG or GIF. Max size 2MB"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{label:"First Name",name:"first_name",value:b.first_name,onChange:$}),e.jsx(fe,{label:"Last Name",name:"last_name",value:b.last_name,onChange:$})]}),e.jsx(fe,{type:"email",label:"Email Address",name:"email",value:b.email,onChange:$}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(W,{onClick:Q,isLoading:j,children:[e.jsx(ma,{size:18,className:"mr-2"}),"Save Changes"]})})]})})}),g==="security"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(ea,{title:"Change Password",icon:Tt,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{type:"password",label:"Current Password",name:"current_password",value:b.current_password,onChange:$}),e.jsx(fe,{type:"password",label:"New Password",name:"new_password",value:b.new_password,onChange:$}),e.jsx(fe,{type:"password",label:"Confirm New Password",name:"confirm_password",value:b.confirm_password,onChange:$}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(W,{onClick:re,isLoading:j,children:[e.jsx(Tt,{size:18,className:"mr-2"}),"Update Password"]})})]})}),e.jsx(ea,{title:"Two-Factor Authentication",icon:Mt,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:"Enable 2FA"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Add an extra layer of security to your account"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-100 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})})]}),g==="notifications"&&e.jsx(ea,{title:"Notification Preferences",icon:rd,children:e.jsx("div",{className:"space-y-4",children:[{id:"email_notifications",label:"Email Notifications",description:"Receive email updates about important events"},{id:"sms_notifications",label:"SMS Notifications",description:"Get text messages for urgent alerts"},{id:"payment_alerts",label:"Payment Alerts",description:"Notify when payments are received"},{id:"attendance_alerts",label:"Attendance Alerts",description:"Daily attendance summary reports"}].map(J=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100 last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:J.label}),e.jsx("p",{className:"text-sm text-slate-500",children:J.description})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-100 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]},J.id))})}),g==="appearance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(ea,{title:"Theme Preferences",icon:Uc,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-4",children:"Choose Theme"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>{localStorage.setItem("theme","light"),document.documentElement.classList.remove("dark"),h({type:"success",text:"Light theme applied!"}),setTimeout(()=>h(null),2e3)},className:`p-4 border-2 rounded-xl transition-all hover:scale-105 ${localStorage.getItem("theme")==="light"?"border-primary-500 bg-primary-50":"border-slate-200 hover:border-primary-300"}`,children:[e.jsx("div",{className:"h-24 rounded-lg mb-3 bg-white border-2 border-slate-200 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-lg mx-auto mb-2"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"h-2 w-16 bg-slate-200 rounded mx-auto"}),e.jsx("div",{className:"h-2 w-12 bg-slate-200 rounded mx-auto"})]})]})}),e.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Light"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Clean and bright interface"})]}),e.jsxs("button",{onClick:()=>{localStorage.setItem("theme","dark"),document.documentElement.classList.add("dark"),h({type:"success",text:"Dark theme applied!"}),setTimeout(()=>h(null),2e3)},className:`p-4 border-2 rounded-xl transition-all hover:scale-105 ${!localStorage.getItem("theme")||localStorage.getItem("theme")==="dark"?"border-primary-500 bg-primary-50":"border-slate-200 hover:border-primary-300"}`,children:[e.jsx("div",{className:"h-24 rounded-lg mb-3 bg-slate-900 border-2 border-slate-700 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-800 rounded-lg mx-auto mb-2"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"h-2 w-16 bg-slate-700 rounded mx-auto"}),e.jsx("div",{className:"h-2 w-12 bg-slate-700 rounded mx-auto"})]})]})}),e.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Dark"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Easy on the eyes"})]}),e.jsxs("button",{onClick:()=>{localStorage.setItem("theme","auto"),window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),h({type:"success",text:"Auto theme applied!"}),setTimeout(()=>h(null),2e3)},className:`p-4 border-2 rounded-xl transition-all hover:scale-105 ${localStorage.getItem("theme")==="auto"?"border-primary-500 bg-primary-50":"border-slate-200 hover:border-primary-300"}`,children:[e.jsx("div",{className:"h-24 rounded-lg mb-3 bg-gradient-to-br from-white via-slate-200 to-slate-900 border-2 border-slate-300 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white/50 backdrop-blur rounded-lg mx-auto mb-2"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"h-2 w-16 bg-white/70 rounded mx-auto"}),e.jsx("div",{className:"h-2 w-12 bg-white/70 rounded mx-auto"})]})]})}),e.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Auto"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Follows system settings"})]})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:e.jsx(Uc,{className:"text-white",size:18})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-blue-900",children:"Current Theme"}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:localStorage.getItem("theme")==="dark"?"Dark Mode":localStorage.getItem("theme")==="auto"?"Auto (System Preference)":"Light Mode"})]})]})})]})}),e.jsx(ea,{title:"Accent Color",icon:Uc,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Choose Accent Color"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:[{name:"Blue",color:"bg-blue-500",value:"blue"},{name:"Green",color:"bg-green-500",value:"green"},{name:"Violet",color:"bg-violet-500",value:"violet"},{name:"Red",color:"bg-red-500",value:"red"},{name:"Orange",color:"bg-orange-500",value:"orange"},{name:"Pink",color:"bg-pink-500",value:"pink"},{name:"Indigo",color:"bg-indigo-500",value:"indigo"},{name:"Teal",color:"bg-teal-500",value:"teal"}].map(({name:J,color:oe,value:ue})=>e.jsxs("button",{onClick:()=>{localStorage.setItem("accentColor",ue),h({type:"success",text:`${J} accent applied!`}),setTimeout(()=>h(null),2e3)},className:"group relative",title:J,children:[e.jsx("div",{className:`w-12 h-12 rounded-full ${oe} hover:scale-110 transition-transform shadow-lg ${localStorage.getItem("accentColor")===ue?"ring-4 ring-offset-2 ring-slate-400":""}`}),e.jsx("span",{className:"absolute -bottom-6 left-1/2 -translate-x-1/2 text-xs text-slate-600 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:J})]},ue))}),e.jsx("p",{className:"text-xs text-slate-500 mt-4",children:"Note: Accent color changes will be applied in future updates"})]})})]}),g==="admission"&&e.jsx(ea,{title:"Admission Number Configuration",icon:Wt,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Format Template"}),e.jsx(fe,{name:"admission_number_format",value:b.admission_number_format||"",onChange:$,placeholder:"{SCHOOL_CODE}/{YEAR}/{COUNTER:04d}"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Available placeholders: ",e.jsx("code",{className:"bg-slate-100 px-1 py-0.5 rounded",children:"{SCHOOL_CODE}"}),",",e.jsx("code",{className:"bg-slate-100 px-1 py-0.5 rounded ml-1",children:"{YEAR}"}),",",e.jsx("code",{className:"bg-slate-100 px-1 py-0.5 rounded ml-1",children:"{COUNTER:04d}"}),",",e.jsx("code",{className:"bg-slate-100 px-1 py-0.5 rounded ml-1",children:"{GRADE}"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Admission Fee (",b.default_currency||"KES",")"]}),e.jsx(fe,{type:"number",name:"admission_fee",value:b.admission_fee,onChange:$,placeholder:"0.00"}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"This one-time fee will be charged to all new students upon registration."})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:e.jsx(Wt,{className:"text-white",size:20})}),e.jsx("p",{className:"text-sm font-semibold text-blue-900",children:"Live Preview"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border-2 border-blue-300",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Next Admission Number:"}),e.jsx("div",{className:"font-mono text-2xl font-bold text-blue-700",children:le()})]}),e.jsxs("p",{className:"text-xs text-blue-700 mt-3 flex items-center gap-1",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"This format will be applied to all new student registrations"]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 border border-slate-200",children:[e.jsxs("p",{className:"text-sm font-semibold text-slate-700 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-1 h-4 bg-primary-500 rounded"}),"Format Examples"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-slate-200",children:[e.jsxs("code",{className:"text-slate-600 text-sm",children:["{SCHOOL_CODE}","/","{YEAR}","/","{COUNTER:04d}"]}),e.jsx("span",{className:"text-slate-400 mx-3",children:""}),e.jsx("span",{className:"font-mono text-slate-900 font-semibold",children:"EDU/2024/0001"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-slate-200",children:[e.jsxs("code",{className:"text-slate-600 text-sm",children:["{YEAR}","-","{SCHOOL_CODE}","-","{COUNTER:05d}"]}),e.jsx("span",{className:"text-slate-400 mx-3",children:""}),e.jsx("span",{className:"font-mono text-slate-900 font-semibold",children:"2024-EDU-00001"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-slate-200",children:[e.jsxs("code",{className:"text-slate-600 text-sm",children:["{SCHOOL_CODE}","{YEAR}","{COUNTER:03d}"]}),e.jsx("span",{className:"text-slate-400 mx-3",children:""}),e.jsx("span",{className:"font-mono text-slate-900 font-semibold",children:"EDU2024001"})]})]})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm font-semibold text-amber-900 mb-3",children:"Placeholder Guide:"}),e.jsxs("div",{className:"space-y-2 text-sm text-amber-800",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("code",{className:"bg-amber-100 px-2 py-0.5 rounded font-mono",children:"{SCHOOL_CODE}"}),e.jsx("span",{children:"- Your school's unique code (e.g., EDU, ABC)"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("code",{className:"bg-amber-100 px-2 py-0.5 rounded font-mono",children:"{YEAR}"}),e.jsx("span",{children:"- Current year (e.g., 2024, 2025)"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("code",{className:"bg-amber-100 px-2 py-0.5 rounded font-mono",children:"{COUNTER:04d}"}),e.jsx("span",{children:"- Auto-incrementing number with 4-digit padding (0001, 0002...)"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("code",{className:"bg-amber-100 px-2 py-0.5 rounded font-mono",children:"{GRADE}"}),e.jsx("span",{children:"- Student's grade/class (optional)"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-200",children:e.jsxs(W,{onClick:B,isLoading:j,children:[e.jsx(ma,{size:18,className:"mr-2"}),"Save Admission Format"]})})]})}),g==="portals"&&e.jsx("div",{className:"space-y-6",children:e.jsx(ea,{title:"Portal Access Links",icon:Bp,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-2 border-blue-200 dark:border-blue-800 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:e.jsx(Mt,{className:"text-white",size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-100 mb-1",children:"Secure Portal Access"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Each user role has a unique portal link. Share these links with the respective users to grant them access to their dedicated portals. You can regenerate the access code anytime for security purposes."})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{role:"Teachers",icon:"",color:"blue",path:"teacher"},{role:"Students",icon:"",color:"green",path:"student"},{role:"Accountant",icon:"",color:"purple",path:"accountant"},...u("FOOD_MANAGEMENT")?[{role:"Food Manager",icon:"",color:"orange",path:"food"}]:[],...u("TRANSPORT_MANAGEMENT")?[{role:"Transport Manager",icon:"",color:"yellow",path:"transport"},{role:"Drivers",icon:"",color:"red",path:"driver"}]:[]].map(({role:J,icon:oe,color:ue,path:ke})=>{const ye=`${window.location.origin}/portal/${b.portal_slug||"loading"}/${ke}`;return e.jsxs("div",{className:`bg-white dark:bg-slate-900 rounded-xl border-2 border-${ue}-200 dark:border-${ue}-800 p-5 hover:shadow-lg transition-all`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`text-3xl bg-${ue}-50 dark:bg-${ue}-900/20 p-2 rounded-lg`,children:oe}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:J}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Portal Access"})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-3 mb-3",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Portal Link:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 text-xs font-mono text-slate-700 dark:text-slate-300 truncate",children:ye}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(ye),h({type:"success",text:`${J} portal link copied!`}),setTimeout(()=>h(null),2e3)},className:`p-2 bg-${ue}-500 hover:bg-${ue}-600 text-white rounded-lg transition-colors`,title:"Copy link",children:e.jsx(Em,{size:14})})]})]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Share this link with ",J.toLowerCase()," to access their portal"]})]},J)})}),e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-500 rounded-lg",children:e.jsx(ul,{className:"text-white",size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-900 dark:text-amber-100 mb-1",children:"Regenerate Access Code"}),e.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300 mb-3",children:["Current Code: ",e.jsx("code",{className:"bg-amber-100 dark:bg-amber-900/40 px-2 py-1 rounded font-mono font-bold",children:b.portal_slug||"Not set"})]}),e.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:"Regenerating will invalidate all existing portal links. You'll need to share the new links with all users."})]})]}),e.jsxs(W,{variant:"secondary",size:"sm",onClick:async()=>{if(window.confirm("Are you sure? This will change all portal access links."))try{S(!0);const J=await V.post("/api/config/regenerate-portal/");J.data.success&&(C(oe=>({...oe,portal_slug:J.data.portal_slug})),h({type:"success",text:J.data.message}))}catch(J){h({type:"error",text:J.response?.data?.error||"Failed to regenerate"})}finally{S(!1),setTimeout(()=>h(null),5e3)}},isLoading:j,children:[e.jsx(ul,{size:16,className:"mr-2"}),"Regenerate"]})]})})]})})}),g==="portal-passwords"&&e.jsx("div",{className:"space-y-6",children:e.jsx(ea,{title:"Portal Authentication Settings",icon:im,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 flex gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg h-fit text-white",children:e.jsx(Mt,{size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-100",children:"Portal User Credentials"}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Except for students who use their ",e.jsx("strong",{children:"Admission Numbers"})," as usernames, all other portal users use their ",e.jsx("strong",{children:"Email Addresses"})," as usernames. Set the default access passwords for each portal role below."]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white border-b pb-2",children:"Academic & Student Portals"}),e.jsx(fe,{label:"Teacher Portal Password",name:"teacher_portal_password",type:"text",value:b.teacher_portal_password,onChange:$,placeholder:"Set password for teachers",icon:Tt}),e.jsx(fe,{label:"Student Portal Password",name:"student_portal_password",type:"text",value:b.student_portal_password,onChange:$,placeholder:"Set password for students",icon:Tt})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white border-b pb-2",children:"Finance & Operations Portals"}),e.jsx(fe,{label:"Accountant Portal Password",name:"accountant_portal_password",type:"text",value:b.accountant_portal_password,onChange:$,placeholder:"Set password for accountants",icon:Tt}),u("FOOD_MANAGEMENT")&&e.jsx(fe,{label:"Food Manager Portal Password",name:"food_portal_password",type:"text",value:b.food_portal_password,onChange:$,placeholder:"Set password for food managers",icon:Tt})]}),u("TRANSPORT_MANAGEMENT")&&e.jsxs("div",{className:"space-y-4 md:col-span-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white border-b pb-2",children:"Transport & Logistics Portals"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Transport Manager Password",name:"transport_portal_password",type:"text",value:b.transport_portal_password,onChange:$,placeholder:"Set password for transport managers",icon:Tt}),e.jsx(fe,{label:"Driver Portal Password",name:"driver_portal_password",type:"text",value:b.driver_portal_password,onChange:$,placeholder:"Set password for drivers",icon:Tt})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-100 dark:border-slate-800",children:e.jsxs(W,{onClick:B,isLoading:j,children:[e.jsx(ma,{size:18,className:"mr-2"}),"Save Portal Passwords"]})})]})})}),g==="portal-users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(ea,{title:"Create Portal User",icon:id,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4 flex gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-500 rounded-lg h-fit text-white",children:e.jsx(im,{size:18})}),e.jsxs("div",{className:"text-sm text-amber-800 dark:text-amber-200",children:[e.jsx("p",{className:"font-bold mb-1",children:"Password Connection"}),e.jsxs("p",{children:["New users will be created with the password: ",e.jsx("strong",{className:"bg-amber-100 dark:bg-amber-900/40 px-2 py-0.5 rounded font-mono",children:F.position==="ACCOUNTANT"?b.accountant_portal_password:F.position==="FOOD_MANAGER"?b.food_portal_password:b.transport_portal_password})]}),e.jsxs("p",{className:"mt-1",children:["You can change this default in the ",e.jsx("strong",{className:"cursor-pointer underline",onClick:()=>v("portal-passwords"),children:"Portal Passwords"})," tab."]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{label:"First Name",value:F.first_name,onChange:J=>Z({...F,first_name:J.target.value}),placeholder:"Enter first name",required:!0}),e.jsx(fe,{label:"Last Name",value:F.last_name,onChange:J=>Z({...F,last_name:J.target.value}),placeholder:"Enter last name"}),e.jsx(fe,{label:"Email Address",type:"email",value:F.email,onChange:J=>Z({...F,email:J.target.value}),placeholder:"user@example.com",required:!0,icon:Gt}),e.jsx(fe,{label:"Phone Number",value:F.phone,onChange:J=>Z({...F,phone:J.target.value}),placeholder:"+254..."}),e.jsx(fe,{label:"National ID",value:F.national_id,onChange:J=>Z({...F,national_id:J.target.value}),placeholder:"ID Number",required:!0}),e.jsx(fe,{label:"Date of Birth",type:"date",value:F.date_of_birth,onChange:J=>Z({...F,date_of_birth:J.target.value}),required:!0}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Role/Position"}),e.jsxs("select",{className:"w-full h-10 px-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",value:F.position,onChange:J=>Z({...F,position:J.target.value}),children:[e.jsx("option",{value:"ACCOUNTANT",children:"Accountant (Finance Portal)"}),u("FOOD_MANAGEMENT")&&e.jsx("option",{value:"FOOD_MANAGER",children:"Food Manager (Food Portal)"}),u("TRANSPORT_MANAGEMENT")&&e.jsx("option",{value:"TRANSPORT_MANAGER",children:"Transport Manager (Transport Portal)"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(W,{onClick:H,isLoading:j,children:[e.jsx(nt,{size:18,className:"mr-2"}),"Create User Account"]})})]})}),e.jsx(ea,{title:"Existing Portal Users",icon:Qe,children:P?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(ul,{className:"animate-spin text-primary-600",size:24})}):D.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500",children:"No portal users created yet"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("th",{className:"py-3 px-4 font-semibold text-sm text-slate-700 dark:text-slate-300",children:"Name"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-sm text-slate-700 dark:text-slate-300",children:"Email"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-sm text-slate-700 dark:text-slate-300",children:"Role"}),e.jsx("th",{className:"py-3 px-4 font-semibold text-sm text-slate-700 dark:text-slate-300",children:"Status"})]})}),e.jsx("tbody",{children:D.map(J=>e.jsxs("tr",{className:"border-b border-slate-50 dark:border-slate-800/50 last:border-0",children:[e.jsxs("td",{className:"py-3 px-4 text-sm text-slate-900 dark:text-white font-medium",children:[J.first_name," ",J.last_name]}),e.jsx("td",{className:"py-3 px-4 text-sm text-slate-500 dark:text-slate-400",children:J.email}),e.jsx("td",{className:"py-3 px-4 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${J.position==="ACCOUNTANT"?"bg-purple-100 text-purple-700 dark:bg-purple-900/30":J.position==="FOOD_MANAGER"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30"}`,children:J.position.replace("_"," ")})}),e.jsx("td",{className:"py-3 px-4 text-sm",children:e.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(Ye,{size:14}),"Active"]})})]},J.id))})]})})})]}),g==="system"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(ea,{title:"School Information",icon:Hn,children:_?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary-600"}),e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Loading school configuration..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 pb-6 border-b border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"h-24 w-24 rounded-2xl bg-slate-100 dark:bg-slate-800 border-2 border-dashed border-slate-300 dark:border-slate-700 flex items-center justify-center overflow-hidden transition-all group-hover:border-primary-500",children:b.school_logo_preview||b.school_logo?e.jsx("img",{src:b.school_logo_preview||b.school_logo,alt:"School Logo",className:"h-full w-full object-contain"}):e.jsx(e0,{className:"text-slate-400",size:32})}),e.jsxs("label",{className:"absolute -bottom-2 -right-2 p-2 bg-primary-600 hover:bg-primary-700 text-white rounded-xl shadow-lg cursor-pointer transition-all hover:scale-110",children:[e.jsx(zm,{size:14}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:J=>{const oe=J.target.files[0];if(oe){const ue=new FileReader;ue.onloadend=()=>{C(ke=>({...ke,school_logo_file:oe,school_logo_preview:ue.result}))},ue.readAsDataURL(oe)}}})]})]}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:"Institution Logo"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1 max-w-xs",children:"This logo will appear on all sidebars, login pages, and official receipts. Recommended size: 512x512px."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{label:"School Name",name:"school_name",value:b.school_name||"",onChange:$}),e.jsx(fe,{label:"School Code",name:"school_code",value:b.school_code||"",onChange:$}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Phone Number",name:"school_phone",value:b.school_phone||"",onChange:$}),e.jsx(fe,{type:"email",label:"School Email",name:"school_email",value:b.school_email||"",onChange:$})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"School Address"}),e.jsx("textarea",{name:"school_address",value:b.school_address||"",onChange:$,className:"w-full px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none min-h-[100px]",placeholder:"Enter school physical address..."})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(W,{onClick:B,children:[e.jsx(ma,{size:18,className:"mr-2"}),"Save Changes"]})})]})]})}),e.jsx(ea,{title:"Database & Backup",icon:ld,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:"Automatic Backups"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Daily database backups at 2:00 AM"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-100 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),e.jsx("div",{className:"pt-2",children:e.jsxs(W,{variant:"secondary",children:[e.jsx(ld,{size:18,className:"mr-2"}),"Backup Now"]})})]})})]}),g==="branches"&&e.jsx("div",{className:"space-y-6",children:e.jsx(ea,{title:"Manage Branches",icon:gt,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 bg-slate-50 dark:bg-slate-800 p-4 rounded-xl border border-slate-100 dark:border-slate-700",children:[e.jsx(fe,{placeholder:"Branch Name",value:k.name,onChange:J=>T({...k,name:J.target.value})}),e.jsx(fe,{placeholder:"Address (Optional)",value:k.address,onChange:J=>T({...k,address:J.target.value})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(fe,{placeholder:"Phone (Optional)",value:k.phone,onChange:J=>T({...k,phone:J.target.value})}),e.jsx(W,{onClick:I,disabled:!k.name,children:e.jsx(nt,{size:18})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-slate-900 dark:text-white",children:"Existing Branches"}),A.length===0?e.jsx("p",{className:"text-slate-500 italic",children:"No branches added yet."}):e.jsx("div",{className:"grid gap-3",children:A.map(J=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:J.name}),e.jsxs("div",{className:"flex gap-4 text-sm text-slate-500",children:[J.address&&e.jsx("span",{children:J.address}),J.phone&&e.jsx("span",{children:J.phone})]})]}),e.jsx(W,{variant:"ghost",className:"text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:()=>ee(J.id),children:e.jsx(Cs,{size:18})})]},J.id))})]})]})})})]})},xN=()=>{const n=Ya();Le();const[m,c]=f.useState("record"),[u,g]=f.useState(!1),[v,j]=f.useState([]),[S,_]=f.useState([]),[E,z]=f.useState([]),[h,b]=f.useState({grade_id:"",term:"1",type:"mid-term",date:new Date().toISOString().split("T")[0]}),[C,A]=f.useState(null),[M,k]=f.useState({}),[T,D]=f.useState(null),[y,P]=f.useState(!1),[U,F]=f.useState(""),[Z,ae]=f.useState(null);f.useEffect(()=>{(async()=>{try{const[le,G]=await Promise.all([V.get("/api/grades/"),V.get("/api/subjects/")]);j(le.data.grades||[]),_(G.data.subjects||[])}catch(le){console.error("Failed to load metadata",le)}})()},[]),f.useEffect(()=>{const B=new URLSearchParams(n.search),le=B.get("student"),G=B.get("grade"),J=B.get("term"),oe=B.get("type"),ue=B.get("edit");G&&b(ke=>({...ke,grade_id:G,term:J||ke.term,type:oe||ke.type})),ue==="true"&&le&&(sessionStorage.setItem("editMode","true"),sessionStorage.setItem("editStudentId",le),c("record"))},[n.search]),f.useEffect(()=>{m==="reports"&&h.grade_id&&h.term&&(async()=>{g(!0);try{const le=await V.get("/api/assessments/analytics/",{params:{grade_id:h.grade_id,term:h.term,type:h.type}});ae(le.data.analytics||null)}catch(le){console.error("Failed to load analytics",le)}finally{g(!1)}})()},[m,h.grade_id,h.term,h.type]),f.useEffect(()=>{if(m!=="record"||!h.grade_id)return;z([]),(async()=>{g(!0);try{const le=await V.get(`/api/students/?grade=${h.grade_id}&per_page=1000`),G=le.data.students||le.data.results||[];z(G);const oe=new URLSearchParams(n.search).get("student");if(oe){const ue=G.find(ke=>ke.id===parseInt(oe));ue&&I(ue,G)}}catch(le){console.error("Failed to load students",le)}finally{g(!1)}})()},[h.grade_id,m]);const H=(B,le)=>{if(le===""){k(G=>({...G,[B]:""}));return}k(G=>({...G,[B]:le}))},xe=B=>{const le=parseFloat(B);return isNaN(le)?"-":le>=80?{label:"EE",class:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}:le>=60?{label:"ME",class:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}:le>=40?{label:"AE",class:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400"}:{label:"BE",class:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}},I=async(B,le)=>{A(B),k({}),D(null),P(!1);const G=sessionStorage.getItem("editMode")==="true",J=sessionStorage.getItem("editStudentId");if(G&&(sessionStorage.removeItem("editMode"),sessionStorage.removeItem("editStudentId")),G&&J===B.id.toString()){console.log("Fetching existing marks for editing...");let oe=S;if(oe.length===0){console.log("Subjects not loaded yet, fetching...");try{oe=(await V.get("/api/subjects/")).data.subjects||[],_(oe)}catch(ue){console.error("Failed to fetch subjects:",ue),D({type:"error",text:"Failed to load subjects. Please refresh the page."});return}}try{const ue=await V.get(`/api/students/${B.id}/academics/`);if(ue.data.success&&ue.data.records){const ke=`Term ${h.term}`,ye=ue.data.records[ke];if(ye&&ye[h.type]){const we=ye[h.type],Se={};we.subjects.forEach(Me=>{const Be=oe.find(Ue=>Ue.name===Me.subject_name||Ue.code===Me.subject_code||Ue.name.toLowerCase()===Me.subject_name.toLowerCase());Be&&(Se[Be.id]=Me.marks)}),Object.keys(Se).length>0?(k(Se),P(!0),D({type:"info",text:`Editing existing assessment. Loaded ${Object.keys(Se).length} subject marks.`})):D({type:"error",text:"Could not load existing marks. Subject mismatch detected."})}else D({type:"error",text:`No existing ${h.type} assessment found for Term ${h.term}.`})}}catch(ue){console.error("Error fetching existing marks:",ue),D({type:"error",text:"Failed to load existing marks. Please try again."})}}},ee=async()=>{if(!C||!h.grade_id)return;g(!0),D(null);const B=Object.entries(M).map(([G,J])=>({subject_id:G,marks:J})).filter(G=>G.marks!=="");if(B.length===0){D({type:"error",text:"Please enter at least one mark."}),g(!1);return}const le={student_id:C.id,grade_id:h.grade_id,term:h.term,assessment_type:h.type,date:h.date,results:B};try{const G=await V.post("/api/assessments/batch-save/",le);G.data.success&&(D({type:"success",text:`Saved ${G.data.saved_count} scores for ${C.full_name}!`}),setTimeout(()=>A(null),1500))}catch(G){console.error(G),D({type:"error",text:"Failed to save results. Please try again."})}finally{g(!1)}},$=()=>{const B=Object.values(M).map(G=>parseFloat(G)).filter(G=>!isNaN(G));if(B.length===0)return{total:0,average:0,count:0};const le=B.reduce((G,J)=>G+J,0);return{total:le,average:(le/B.length).toFixed(1),count:B.length}},Q=js.useMemo(()=>U?E.filter(B=>B.full_name.toLowerCase().includes(U.toLowerCase())||B.admission_number.toLowerCase().includes(U.toLowerCase())):E,[E,U]),re=$();return e.jsxs("div",{className:"p-4 max-w-7xl mx-auto space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-3 md:gap-4 pb-3 md:pb-4 border-b border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-black text-slate-900 dark:text-white tracking-tight leading-none uppercase tracking-widest",children:"Academics"}),e.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1 md:mt-1.5 font-medium tracking-wide",children:"Manage assessments, record marks, and view analytics."})]}),e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-1 rounded-2xl flex items-center w-full md:w-auto",children:[e.jsxs("button",{onClick:()=>{c("record"),A(null)},className:`flex-1 md:flex-none flex items-center justify-center gap-2 px-3 md:px-5 py-2 rounded-xl text-[11px] md:text-xs font-black transition-all duration-200 uppercase tracking-widest ${m==="record"?"bg-white dark:bg-slate-700 text-primary-600 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,children:[e.jsx(Lt,{size:14,className:"md:w-[16px] md:h-[16px]"}),"Record Marks"]}),e.jsxs("button",{onClick:()=>{c("reports"),A(null)},className:`flex-1 md:flex-none flex items-center justify-center gap-2 px-3 md:px-5 py-2 rounded-xl text-[11px] md:text-xs font-black transition-all duration-200 uppercase tracking-widest ${m==="reports"?"bg-white dark:bg-slate-700 text-primary-600 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,children:[e.jsx(Up,{size:14,className:"md:w-[16px] md:h-[16px]"}),"Analytics"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 md:p-5 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 grid grid-cols-2 lg:flex lg:flex-wrap gap-3 md:gap-4 items-center",children:[e.jsx("div",{className:"col-span-2 lg:flex lg:items-center lg:gap-2 text-slate-500 dark:text-slate-400 md:mr-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(za,{size:18,className:"md:w-5 md:h-5 text-primary-500"}),e.jsx("span",{className:"font-bold text-xs uppercase tracking-wider",children:"Filters:"})]})}),e.jsxs("div",{className:"relative col-span-2 sm:col-span-1 lg:min-w-[220px]",children:[e.jsxs("select",{className:"w-full pl-4 pr-10 py-3 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-primary-500 rounded-xl text-sm font-bold focus:ring-0 appearance-none text-slate-700 dark:text-slate-200 transition-all cursor-pointer",value:h.grade_id,onChange:B=>b(le=>({...le,grade_id:B.target.value})),children:[e.jsx("option",{value:"",children:"Select Class / Grade"}),v.map(B=>e.jsx("option",{value:B.id,children:B.name},B.id))]}),e.jsx(xl,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"})]}),e.jsxs("div",{className:"relative col-span-1 lg:min-w-[180px]",children:[e.jsxs("select",{className:"w-full pl-4 pr-10 py-3 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-primary-500 rounded-xl text-sm font-bold focus:ring-0 appearance-none text-slate-700 dark:text-slate-200 transition-all cursor-pointer",value:h.type,onChange:B=>b(le=>({...le,type:B.target.value})),children:[e.jsx("option",{value:"opener",children:"Opener"}),e.jsx("option",{value:"mid-term",children:"Mid Term"}),e.jsx("option",{value:"end-term",children:"End Term"}),e.jsx("option",{value:"weekly",children:"Weekly"})]}),e.jsx(xl,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"})]}),e.jsxs("div",{className:"relative col-span-1 lg:min-w-[140px]",children:[e.jsxs("select",{className:"w-full pl-4 pr-10 py-3 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-primary-500 rounded-xl text-sm font-bold focus:ring-0 appearance-none text-slate-700 dark:text-slate-200 transition-all cursor-pointer",value:h.term,onChange:B=>b(le=>({...le,term:B.target.value})),children:[e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]}),e.jsx(xl,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"})]}),e.jsx("div",{className:"col-span-2 lg:ml-auto",children:e.jsx("input",{type:"date",value:h.date,onChange:B=>b(le=>({...le,date:B.target.value})),className:"w-full lg:w-auto px-4 py-3 md:py-2.5 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-primary-500 rounded-xl text-sm font-bold focus:ring-0 text-slate-700 dark:text-slate-200 transition-all cursor-pointer"})})]}),e.jsx(vt,{mode:"wait",children:T&&e.jsxs(he.div,{initial:{opacity:0,y:-20,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,height:0},className:`px-4 py-3 rounded-lg flex items-center justify-between gap-4 ${T.type==="success"?"bg-green-50 text-green-700 border border-green-200 dark:bg-green-900/20 dark:border-green-800":T.type==="info"?"bg-blue-50 text-blue-700 border border-blue-200 dark:bg-blue-900/20 dark:border-blue-800":"bg-red-50 text-red-700 border border-red-200 dark:bg-red-900/20 dark:border-red-800"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[T.type==="success"?e.jsx(Ye,{size:18}):T.type==="info"?e.jsx(Br,{size:18}):e.jsx(ot,{size:18}),T.text]}),e.jsx("button",{onClick:()=>D(null),className:"opacity-50 hover:opacity-100",children:e.jsx(Ve,{size:16})})]})}),m==="record"&&e.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:[!C&&h.grade_id&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative max-w-md mx-auto md:mx-0",children:[e.jsx(jt,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search student by name or admission...",className:"w-full pl-12 pr-4 py-3 bg-white dark:bg-slate-900 border-2 border-slate-100 dark:border-slate-800 focus:border-primary-500 rounded-2xl text-sm font-bold focus:ring-0 text-slate-700 dark:text-slate-200 shadow-sm transition-all",value:U,onChange:B=>F(B.target.value)})]})}),C?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-900 rounded-2xl shadow-xl border border-slate-100 dark:border-slate-800 overflow-hidden",children:[e.jsxs("div",{className:"p-4 md:p-6 border-b border-slate-100 dark:border-slate-800 flex flex-col sm:flex-row justify-between items-center bg-slate-50/50 dark:bg-slate-800/50 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 md:gap-4 w-full sm:w-auto",children:[e.jsx("button",{onClick:()=>A(null),className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-colors text-slate-500",children:e.jsx(xl,{className:"rotate-90 w-5 h-5 md:w-6 md:h-6"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h2",{className:"text-lg md:text-xl font-black text-slate-900 dark:text-white flex flex-wrap items-center gap-2 truncate",children:[C.full_name,y&&e.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-[10px] font-bold rounded-md uppercase tracking-wide",children:"Edit"})]}),e.jsxs("p",{className:"text-[10px] md:text-sm text-slate-500 mt-0.5 font-medium",children:["Recording ",e.jsx("span",{className:"text-primary-600 font-bold uppercase",children:h.type}),"  T",h.term]})]})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsx(W,{variant:"secondary",className:"flex-1 sm:flex-none py-2 text-xs",onClick:()=>A(null),children:"Cancel"}),e.jsxs(W,{className:"flex-[2] sm:flex-none py-2 text-xs shadow-lg shadow-primary-500/20",onClick:ee,isLoading:u,children:[e.jsx(ma,{className:"mr-1.5 w-3.5 h-3.5 md:w-[18px] md:h-[18px]"}),"Save Grades"]})]})]}),e.jsx("div",{className:"p-6 md:p-8",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-6",children:S.map(B=>{const le=xe(M[B.id]);return e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:B.name}),M[B.id]&&e.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${le.class}`,children:le.label})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",max:"100",placeholder:"",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 focus:ring-2 focus:ring-primary-500 focus:bg-white dark:focus:bg-slate-800 outline-none transition-all font-mono text-lg font-semibold text-center",value:M[B.id]||"",onChange:G=>H(B.id,G.target.value)}),e.jsx("div",{className:"absolute inset-y-0 right-3 flex items-center text-slate-400 text-xs font-bold pointer-events-none",children:"/100"})]})]},B.id)})})})]}),e.jsx("div",{className:"space-y-4 md:space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-5 md:p-6 shadow-xl border border-slate-100 dark:border-slate-800 sticky top-6",children:[e.jsxs("h3",{className:"font-black text-slate-900 dark:text-white mb-4 flex items-center gap-2 text-sm md:text-base",children:[e.jsx(Ur,{className:"text-amber-500 w-[18px] h-[18px] md:w-5 md:h-5"}),"Performance Stats"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-2xl",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Subjects Graded"}),e.jsxs("p",{className:"text-xl md:text-2xl font-black text-slate-900 dark:text-white",children:[re.count," ",e.jsxs("span",{className:"text-xs font-bold text-slate-400",children:["/ ",S.length]})]}),e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 h-1.5 rounded-full mt-2 overflow-hidden",children:e.jsx("div",{className:"bg-primary-500 h-full rounded-full transition-all duration-300",style:{width:`${re.count/S.length*100}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-2xl text-center",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase mb-1",children:"Total"}),e.jsx("p",{className:"text-lg md:text-xl font-black text-slate-900 dark:text-white",children:re.total})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-2xl text-center",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase mb-1",children:"Average"}),e.jsxs("p",{className:`text-lg md:text-xl font-black ${parseFloat(re.average)>=60?"text-green-600":parseFloat(re.average)>=40?"text-amber-600":"text-slate-900 dark:text-white"}`,children:[re.average,"%"]})]})]})]}),e.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 dark:border-slate-800",children:e.jsx("p",{className:"text-[10px] font-medium text-slate-400 text-center leading-relaxed",children:"Auto-calculates grade levels and totals upon saving."})})]})})]}):h.grade_id?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 md:gap-4",children:[Q.map((B,le)=>e.jsxs(he.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:le*.03},onClick:()=>I(B),className:"bg-white dark:bg-slate-900 p-3 md:p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-800 hover:border-primary-500 dark:hover:border-primary-500 hover:shadow-md transition-all cursor-pointer group relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2 md:p-4 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"bg-primary-50 text-primary-600 rounded-full p-1",children:e.jsx(Br,{size:12,className:"md:w-[14px] md:h-[14px]"})})}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-3 md:gap-4 text-center md:text-left",children:[e.jsx("div",{className:"h-10 w-10 md:h-12 md:w-12 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-700 flex items-center justify-center text-sm md:text-lg font-bold text-slate-500 uppercase shrink-0",children:B.photo?e.jsx("img",{src:B.photo,alt:"Student",className:"w-full h-full object-cover rounded-xl"}):B.full_name?.[0]||"S"}),e.jsxs("div",{className:"min-w-0 w-full",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white group-hover:text-primary-600 transition-colors text-xs md:text-base truncate",children:B.full_name}),e.jsxs("p",{className:"text-[10px] md:text-xs font-medium text-slate-500 dark:text-slate-400 mt-0.5",children:["Adm: ",e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:B.admission_number})]}),e.jsx("div",{className:"mt-2 text-[10px] text-slate-400 hidden md:flex items-center gap-1",children:"Click to record marks"})]})]})]},B.id)),E.length===0&&e.jsx("div",{className:"col-span-full py-12 md:py-20 text-center text-slate-400 bg-slate-50 dark:bg-slate-900/50 rounded-2xl border-2 border-dashed border-slate-200 dark:border-slate-800",children:"No students found in this class."})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-slate-50 dark:bg-slate-900/50 rounded-3xl border-2 border-dashed border-slate-200 dark:border-slate-800",children:[e.jsx("div",{className:"h-16 w-16 bg-white dark:bg-slate-800 rounded-2xl flex items-center justify-center shadow-sm mb-4",children:e.jsx(Ie,{size:32,className:"text-primary-500"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Select a Class"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 max-w-sm text-center",children:"Please select a Grade from the filters above to view the student list and start recording marks."})]})]}),m==="reports"&&e.jsx(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:Z?e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6",children:Object.entries(Z.distribution).map(([B,le])=>{const G={exceeding:"text-green-600 bg-green-50 dark:bg-green-900/20 dark:text-green-400",meeting:"text-blue-600 bg-blue-50 dark:bg-blue-900/20 dark:text-blue-400",approaching:"text-amber-600 bg-amber-50 dark:bg-amber-900/20 dark:text-amber-400",below:"text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400"},J={exceeding:{title:"Exceeding",desc:"80% - 100%"},meeting:{title:"Meeting",desc:"60% - 79%"},approaching:{title:"Approaching",desc:"40% - 59%"},below:{title:"Below",desc:"0% - 39%"}};return e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 md:p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-800 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2 md:mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-xs md:text-base",children:J[B].title}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-0.5 hidden md:block",children:J[B].desc})]}),e.jsxs("div",{className:`px-1.5 md:px-2.5 py-0.5 md:py-1 rounded-lg text-[10px] md:text-xs font-black uppercase ${G[B]}`,children:[(le/(Z.merit_list.length||1)*100).toFixed(0),"%"]})]}),e.jsx("div",{className:"text-2xl md:text-4xl font-black text-slate-900 dark:text-white my-1 md:my-2",children:le}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-tighter",children:"Students"})]},B)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-900 p-5 md:p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-800",children:[e.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white mb-6",children:"Subject Performance"}),e.jsx("div",{className:"h-64 md:h-80 w-full",children:e.jsx(es,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(In,{data:Z.subject_performance,margin:{top:10,right:10,left:-20,bottom:0},children:[e.jsx(pl,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),e.jsx(Ea,{dataKey:"subject__code",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:10},dy:10}),e.jsx(Aa,{axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:10}}),e.jsx(ts,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},cursor:{fill:"#f8fafc"}}),e.jsx(Ri,{dataKey:"avg_score",radius:[4,4,0,0],maxBarSize:40,children:Z.subject_performance.map((B,le)=>e.jsx($a,{fill:B.avg_score>=60?"#3b82f6":B.avg_score>=40?"#f59e0b":"#ef4444"},`cell-${le}`))})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-800",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-6",children:"Top Performers"}),e.jsxs("div",{className:"space-y-4",children:[Z.merit_list.slice(0,5).map((B,le)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-colors",children:[e.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center font-bold text-sm border-2 shrink-0 ${le===0?"bg-yellow-50 border-yellow-200 text-yellow-700":le===1?"bg-slate-50 border-slate-200 text-slate-700":le===2?"bg-orange-50 border-orange-200 text-orange-700":"bg-transparent border-transparent text-slate-500"}`,children:le+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-bold text-slate-900 dark:text-white truncate",children:B.full_name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[B.average,"% Average"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-mono font-bold text-primary-600",children:B.total_marks}),e.jsx("p",{className:"text-[10px] text-slate-400 uppercase",children:"Total"})]})]},B.id)),Z.merit_list.length===0&&e.jsx("p",{className:"text-center text-slate-400 py-8",children:"No data available."})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-800 overflow-hidden",children:[e.jsxs("div",{className:"p-5 md:p-6 border-b border-slate-100 dark:border-slate-800 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:"Merit List"}),e.jsx("p",{className:"text-xs md:text-sm text-slate-500 font-medium",children:"Complete class ranking based on assessment results"})]}),e.jsxs(W,{variant:"outline",size:"sm",className:"w-full md:w-auto rounded-xl",children:[e.jsx(Dt,{size:16,className:"mr-2 text-primary-500"}),"Download Report"]})]}),e.jsx("div",{className:"md:hidden divide-y divide-slate-100 dark:divide-slate-800",children:Z.merit_list.map(B=>e.jsxs("div",{className:"p-4 flex items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center h-10 w-8 font-mono text-sm font-black text-slate-400 dark:text-slate-600",children:["#",B.rank]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("p",{className:"font-bold text-slate-900 dark:text-white truncate text-sm",children:B.full_name}),e.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded uppercase tracking-tighter ${B.grade==="Exceeding"?"bg-emerald-50 text-emerald-600 border border-emerald-100":B.grade==="Meeting"?"bg-blue-50 text-blue-600 border border-blue-100":B.grade==="Approaching"?"bg-amber-50 text-amber-600 border border-amber-100":"bg-rose-50 text-rose-600 border border-rose-100"}`,children:B.grade})]}),e.jsxs("p",{className:"text-[10px] text-slate-500 font-medium",children:[B.admission_number,"  ",B.subjects_sat," Subjects"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-black text-slate-900 dark:text-white",children:[B.average,"%"]}),e.jsxs("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-tighter",children:[B.total_marks," Pts"]})]})]},B.id))}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-500 uppercase tracking-widest",children:"Rank"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-500 uppercase tracking-widest",children:"Student"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-black text-slate-500 uppercase tracking-widest",children:"Subjects"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-black text-slate-500 uppercase tracking-widest",children:"Total"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-black text-slate-500 uppercase tracking-widest",children:"Average"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-black text-slate-500 uppercase tracking-widest",children:"Level"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:Z.merit_list.map(B=>e.jsxs("tr",{className:"hover:bg-slate-50/50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 font-mono font-bold text-slate-500",children:["#",B.rank]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-9 w-9 rounded-xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-xs font-bold text-slate-500 uppercase",children:B.full_name?.[0]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900 dark:text-white text-sm",children:B.full_name}),e.jsx("p",{className:"text-xs text-slate-400 font-medium",children:B.admission_number})]})]})}),e.jsx("td",{className:"px-6 py-4 text-center text-slate-600 dark:text-slate-400 font-medium",children:B.subjects_sat}),e.jsx("td",{className:"px-6 py-4 text-right font-mono font-black text-primary-600",children:B.total_marks}),e.jsxs("td",{className:"px-6 py-4 text-right font-black text-slate-900 dark:text-white",children:[B.average,"%"]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wide border ${B.grade==="Exceeding"?"bg-green-50 text-green-700 border-green-100":B.grade==="Meeting"?"bg-blue-50 text-blue-700 border-blue-100":B.grade==="Approaching"?"bg-yellow-50 text-yellow-700 border-yellow-100":"bg-red-50 text-red-700 border-red-100"}`,children:B.grade})})]},B.id))})]})})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-24 bg-slate-50 dark:bg-slate-900/50 rounded-3xl border-2 border-dashed border-slate-200 dark:border-slate-800 text-center",children:[e.jsx("div",{className:"h-20 w-20 bg-white dark:bg-slate-800 rounded-full flex items-center justify-center shadow-sm mb-6",children:e.jsx(Up,{size:40,className:"text-slate-300 dark:text-slate-600"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"No Analytics Data"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 max-w-md",children:h.grade_id?"No assessment records found for the selected criteria. Try changing the filters or recording some marks first.":"Please select a Class and Term using the filters above to view the analysis report."})]})})]})},ef=()=>{const{id:n}=Zt(),m=Le(),{config:c}=Nt(),[u,g]=f.useState(null),[v,j]=f.useState(null),[S,_]=f.useState(!0),[E,z]=f.useState("all"),h=()=>window.location.pathname.startsWith("/teacher/"),b=()=>{const y=JSON.parse(localStorage.getItem("user")||"{}");return y?.teacher?.pk||y?.id||""};if(f.useEffect(()=>{(async()=>{try{const[P,U]=await Promise.all([V.get(`/api/students/${n}/academics/`),V.get(`/api/students/${n}/`)]);g(P.data),j(U.data.student)}catch(P){console.error("Error fetching data:",P)}finally{_(!1)}})()},[n]),S)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-950",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-slate-200 border-t-primary-600"}),e.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Loading Report..."})]})});if(!u||!v)return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 dark:bg-slate-950 gap-4",children:[e.jsx(Ur,{size:48,className:"text-slate-300"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Report Not Found"}),e.jsx(W,{onClick:()=>{if(h()){const y=b();m(`/teacher/${y}/student/${n}`)}else m(`/students/${n}`)},children:"Back to Profile"})]});const C=y=>({4:"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800",3:"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400 border-blue-200 dark:border-blue-800",2:"bg-amber-50 text-amber-700 dark:bg-amber-900/20 dark:text-amber-400 border-amber-200 dark:border-amber-800",1:"bg-rose-50 text-rose-700 dark:bg-rose-900/20 dark:text-rose-400 border-rose-200 dark:border-rose-800"})[y]||"bg-slate-50 text-slate-700 border-slate-200",A=y=>({4:"bg-emerald-500",3:"bg-blue-500",2:"bg-amber-500",1:"bg-rose-500"})[y]||"bg-slate-400",M=E==="all"?u.records:{[E]:u.records[E]},k={};Object.values(u.records).forEach(y=>{Object.values(y).forEach(P=>{P.subjects.forEach(U=>{k[U.subject_name]||(k[U.subject_name]={total:0,count:0}),k[U.subject_name].total+=U.marks,k[U.subject_name].count+=1})})});const T=Object.entries(k).map(([y,P])=>({name:y,average:(P.total/P.count).toFixed(1)})).sort((y,P)=>P.average-y.average),D=Math.max(...T.map(y=>parseFloat(y.average)));return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950",children:[e.jsx("div",{className:"sticky top-0 z-20 bg-white/95 dark:bg-slate-900/95 backdrop-blur-lg border-b border-slate-200 dark:border-slate-800 shadow-sm",children:e.jsx("div",{className:"max-w-[1600px] mx-auto px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>{const y=JSON.parse(localStorage.getItem("user")||"{}");if(h()){const P=b();m(`/teacher/${P}/student/${n}`)}else y.role==="student"?m(`/student/${n}`):m(`/students/${n}`)},className:"group flex items-center gap-2 text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white transition-colors",children:[e.jsx(Ls,{size:18,className:"group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{className:"text-sm font-medium",children:"Back to Profile"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(W,{variant:"ghost",size:"sm",className:"text-xs",children:[e.jsx(zg,{size:14,className:"mr-1.5"}),"Share"]}),e.jsxs(W,{variant:"ghost",size:"sm",className:"text-xs",children:[e.jsx(Fn,{size:14,className:"mr-1.5"}),"Print"]}),e.jsxs(W,{variant:"primary",size:"sm",className:"text-xs",children:[e.jsx(Ms,{size:14,className:"mr-1.5"}),"Export PDF"]})]})]})})}),e.jsxs("div",{className:"max-w-[1600px] mx-auto px-6 py-6 space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"h-10 w-10 bg-primary-100 dark:bg-primary-900/30 rounded-xl flex items-center justify-center",children:e.jsx(Ur,{size:20,className:"text-primary-600 dark:text-primary-400"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[c.school_name," Academic Report"]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:"Comprehensive Assessment Analysis"})]})]})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Generated"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:new Date().toLocaleDateString()})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-6 pt-6 border-t border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"Student Name"}),e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:v.personal.full_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"Admission No."}),e.jsx("p",{className:"text-sm font-mono font-semibold text-slate-900 dark:text-white",children:v.personal.admission_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"Grade/Class"}),e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:v.personal.grade})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"Overall Average"}),e.jsxs("p",{className:"text-sm font-bold text-primary-600 dark:text-primary-400",children:[u.stats.average_score,"%"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Performance Distribution"}),e.jsx(Oi,{size:16,className:"text-slate-400"})]}),e.jsx("div",{className:"space-y-3",children:[{level:"4",label:"Exceeding",count:u.performance_distribution.exceeding,color:"emerald"},{level:"3",label:"Meeting",count:u.performance_distribution.meeting,color:"blue"},{level:"2",label:"Approaching",count:u.performance_distribution.approaching,color:"amber"},{level:"1",label:"Below",count:u.performance_distribution.below,color:"rose"}].map(y=>{const P=(y.count/(u.stats.total_assessments||1)*100).toFixed(0);return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:[y.label," (",y.level,")"]}),e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[y.count," ",e.jsxs("span",{className:"text-slate-400",children:["(",P,"%)"]})]})]}),e.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-${y.color}-500 transition-all duration-500`,style:{width:`${P}%`}})})]},y.level)})})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Subject Performance Overview"}),e.jsx(Pi,{size:16,className:"text-slate-400"})]}),e.jsx("div",{className:"space-y-2.5",children:T.map((y,P)=>e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:y.name}),e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[y.average,"%"]})]}),e.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary-500 to-primary-600 group-hover:from-primary-600 group-hover:to-primary-700 transition-all duration-300",style:{width:`${parseFloat(y.average)/D*100}%`}})})]},P))})]})]}),e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:[e.jsx("button",{onClick:()=>z("all"),className:`px-4 py-1.5 rounded-lg text-xs font-semibold transition-all whitespace-nowrap ${E==="all"?"bg-slate-900 dark:bg-primary-600 text-white shadow-sm":"bg-white dark:bg-slate-900 text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-slate-800 hover:border-slate-300 dark:hover:border-slate-700"}`,children:"All Terms"}),Object.keys(u.records).map(y=>e.jsx("button",{onClick:()=>z(y),className:`px-4 py-1.5 rounded-lg text-xs font-semibold transition-all whitespace-nowrap ${E===y?"bg-slate-900 dark:bg-primary-600 text-white shadow-sm":"bg-white dark:bg-slate-900 text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-slate-800 hover:border-slate-300 dark:hover:border-slate-700"}`,children:y},y))]}),Object.entries(M).map(([y,P])=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-0.5 w-8 bg-primary-500 rounded-full"}),e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:y})]}),Object.entries(P).map(([U,F])=>{const Z=(F.subjects.reduce((ae,H)=>ae+H.marks,0)/F.subjects.length).toFixed(1);return e.jsxs(he.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-5 py-3 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 bg-primary-100 dark:bg-primary-900/30 rounded-lg flex items-center justify-center",children:e.jsx(Lt,{size:14,className:"text-primary-600 dark:text-primary-400"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-white capitalize",children:[U.replace("-"," ")," Assessment"]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:F.date})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Subjects"}),e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:F.subjects.length})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Average"}),e.jsxs("p",{className:"text-sm font-bold text-primary-600 dark:text-primary-400",children:[Z,"%"]})]}),JSON.parse(localStorage.getItem("user")||"{}").role!=="student"&&e.jsxs(W,{size:"sm",variant:"ghost",className:"text-xs",onClick:()=>{const ae=v?.academic?.grade_id||v?.grade_id||"",H=y.replace("Term ","");if(h()){const xe=b();m(`/teacher/${xe}/academics?student=${n}&grade=${ae}&term=${H}&type=${U}&edit=true`)}else m(`/academics?student=${n}&grade=${ae}&term=${H}&type=${U}&edit=true`)},children:[e.jsx(Br,{size:14,className:"mr-1.5"}),"Edit"]})]})]})}),e.jsx("div",{className:"p-5",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Subject"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Code"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Score"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Performance"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Grade"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:F.subjects.map((ae,H)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-slate-900 dark:text-white",children:ae.subject_name}),e.jsx("td",{className:"px-4 py-3 text-xs text-slate-500 dark:text-slate-400 font-mono",children:ae.subject_code}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("div",{className:"h-1.5 w-16 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${A(ae.performance_level)}`,style:{width:`${ae.marks}%`}})}),e.jsxs("span",{className:"text-sm font-bold text-slate-900 dark:text-white w-12 text-right",children:[ae.marks,"%"]})]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 rounded-md text-xs font-semibold border ${C(ae.performance_level)}`,children:ae.performance_label})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("div",{className:`inline-flex h-7 w-7 rounded-lg ${A(ae.performance_level)} items-center justify-center text-white text-xs font-bold shadow-sm`,children:ae.performance_level})})]},H))})]})})})]},U)})]},y))]})]})},mN=({staff:n,onView:m,onEdit:c,onDelete:u})=>{const[g,v]=f.useState(!1),j=S=>{switch(S){case"ACTIVE":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";case"ON_LEAVE":return"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400";case"INACTIVE":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";default:return"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-400"}};return e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-5 md:p-6 hover:shadow-lg transition-all relative group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-5",children:[e.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[e.jsxs("div",{className:"h-14 w-14 md:h-16 md:w-16 rounded-2xl bg-indigo-50 dark:bg-indigo-900/20 flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold text-xl border border-indigo-100 dark:border-indigo-800/50",children:[n.first_name[0],n.last_name[0]]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base md:text-lg font-bold text-slate-900 dark:text-white leading-tight",children:[n.first_name," ",n.last_name]}),e.jsx("p",{className:"text-[10px] md:text-xs font-bold text-slate-400 uppercase tracking-widest mt-1 uppercase",children:n.staff_type_display})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>v(!g),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-colors bg-slate-50 dark:bg-slate-800/50",children:e.jsx(gf,{size:18,className:"text-slate-400"})}),g&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-slate-900 rounded-2xl shadow-2xl border border-slate-100 dark:border-slate-800 py-2 z-20",children:[e.jsxs("button",{onClick:()=>{m(n),v(!1)},className:"w-full px-4 py-2.5 text-left text-sm font-bold text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 flex items-center gap-3 transition-colors",children:[e.jsx(Un,{size:16,className:"text-indigo-500"})," View Details"]}),e.jsxs("button",{onClick:()=>{c(n),v(!1)},className:"w-full px-4 py-2.5 text-left text-sm font-bold text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 flex items-center gap-3 transition-colors",children:[e.jsx(ha,{size:16,className:"text-indigo-500"})," Edit Profile"]}),e.jsx("div",{className:"h-px bg-slate-100 dark:bg-slate-800 my-1 mx-4"}),e.jsxs("button",{onClick:()=>{u(n),v(!1)},className:"w-full px-4 py-2.5 text-left text-sm font-bold text-rose-600 hover:bg-rose-50 dark:hover:bg-rose-900/10 flex items-center gap-3 transition-colors",children:[e.jsx(Cs,{size:16})," Delete Record"]})]})]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-xs font-bold text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-800/50 p-2 rounded-xl border border-slate-100 dark:border-slate-800/50",children:[e.jsx(Es,{size:14,className:"text-indigo-500"}),e.jsx("span",{children:n.phone})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs font-bold text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-800/50 p-2 rounded-xl border border-slate-100 dark:border-slate-800/50",children:[e.jsx(Gt,{size:14,className:"text-indigo-500"}),e.jsx("span",{className:"truncate",children:n.email})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs font-bold text-slate-500 dark:text-slate-400",children:[e.jsx(Ze,{size:14,className:"text-indigo-500"}),e.jsxs("span",{children:["Joined: ",new Date(n.date_joined).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-5 border-t border-slate-100 dark:border-slate-800",children:[e.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider ${j(n.status)}`,children:n.status}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-0.5",children:"Salary"}),e.jsxs("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:["KES ",parseFloat(n.basic_salary).toLocaleString()]})]})]})]})},uN=()=>{const n=Le(),[m,c]=f.useState([]),[u,g]=f.useState(!0),[v,j]=f.useState(""),[S,_]=f.useState("ALL"),[E,z]=f.useState("ALL");f.useEffect(()=>{h()},[]);const h=async()=>{try{const T=await V.get("/api/hr/staff/");c(T.data.staff)}catch(T){console.error("Error fetching staff:",T)}finally{g(!1)}},b=T=>{T.is_teacher?n(`/teachers/${T.id}`):T.is_driver?n(`/transport-portal/drivers/${T.id}`):n(`/hr/staff/${T.id}`)},C=T=>{T.is_teacher?n(`/teachers/${T.id}`):T.is_driver?n(`/transport-portal/drivers/${T.id}`):n(`/hr/staff/${T.id}/edit`)},A=async T=>{let D=`/api/hr/staff/${T.id}/delete/`,y=`Are you sure you want to delete ${T.first_name} ${T.last_name}?`;if(T.is_teacher?(D=`/api/teachers/${T.id}/`,y=`Are you sure you want to delete Teacher ${T.first_name} ${T.last_name}? This will also delete their user account.`):T.is_driver&&(D=`/api/transport/drivers/${T.id}/`,y=`Are you sure you want to delete Driver ${T.first_name} ${T.last_name}?`),window.confirm(y))try{await V.delete(D),h()}catch(P){alert(P.response?.data?.error||"Error deleting staff member")}},M=async()=>{if(window.confirm("CRITICAL WARNING: You are about to delete ALL staff members (Teachers, Drivers, and Non-teaching staff). This will also delete their associated user accounts and cannot be undone. Are you absolutely sure?")&&window.confirm("Final Confirmation: Removal of all institutional staff is a destructive action. Proceed?"))try{await V.delete("/api/hr/staff/bulk-delete/"),h()}catch(y){alert(y.response?.data?.error||"Failed to delete all staff")}},k=m.filter(T=>{const D=`${T.first_name} ${T.last_name} ${T.email}`.toLowerCase().includes(v.toLowerCase()),y=S==="ALL"||T.staff_type===S,P=E==="ALL"||T.status===E;return D&&y&&P});return u?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsx("div",{className:"p-6 md:p-8 bg-slate-50 dark:bg-slate-950 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-14 w-14 md:h-16 md:w-16 bg-indigo-600 rounded-2xl flex items-center justify-center shadow-lg shadow-indigo-500/20",children:e.jsx(Mn,{size:28,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Staff Management"}),e.jsx("p",{className:"text-[10px] md:text-xs font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Manage non-teaching staff members"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(W,{variant:"outline",className:"flex-1 md:flex-none h-11 md:h-12 rounded-xl font-bold text-xs text-red-600 border-red-100 hover:bg-red-50",onClick:M,children:[e.jsx(Cs,{size:18,className:"mr-2"})," Delete All"]}),e.jsxs(W,{variant:"outline",className:"flex-1 md:flex-none h-11 md:h-12 rounded-xl font-bold text-xs",onClick:()=>n("/hr/staff/import"),children:[e.jsx(Dn,{size:18,className:"mr-2 text-indigo-500"})," Import"]}),e.jsxs(W,{className:"flex-1 md:flex-none h-11 md:h-12 rounded-xl font-bold text-xs bg-indigo-600 shadow-lg shadow-indigo-500/10",onClick:()=>n("/hr/staff/create"),children:[e.jsx(nt,{size:18,className:"mr-2"})," Add Staff"]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-100 dark:border-slate-800 p-5 md:p-6 mb-8 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-5",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(fe,{placeholder:"Search by name or email...",value:v,onChange:T=>j(T.target.value),icon:jt,className:"h-11 md:h-12 rounded-xl font-bold"})}),e.jsx("div",{children:e.jsxs("select",{value:S,onChange:T=>_(T.target.value),className:"w-full h-11 md:h-12 rounded-xl border-slate-200 dark:border-slate-800 dark:bg-slate-800 focus:ring-indigo-500 font-bold text-xs px-4",children:[e.jsx("option",{value:"ALL",children:"All Staff Types"}),e.jsx("option",{value:"TEACHER",children:"Teaching Staff"}),e.jsx("option",{value:"DRIVER",children:"Drivers"}),e.jsx("option",{value:"ADMIN",children:"Administrative"}),e.jsx("option",{value:"SUPPORT",children:"Support Staff"}),e.jsx("option",{value:"SECURITY",children:"Security"}),e.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),e.jsx("option",{value:"KITCHEN",children:"Kitchen"}),e.jsx("option",{value:"LIBRARIAN",children:"Librarian"}),e.jsx("option",{value:"LAB_TECH",children:"Lab Technician"}),e.jsx("option",{value:"NURSE",children:"Nurse"}),e.jsx("option",{value:"CLEANER",children:"Cleaner"}),e.jsx("option",{value:"OTHER",children:"Other"})]})}),e.jsx("div",{children:e.jsxs("select",{value:E,onChange:T=>z(T.target.value),className:"w-full h-11 md:h-12 rounded-xl border-slate-200 dark:border-slate-800 dark:bg-slate-800 focus:ring-indigo-500 font-bold text-xs px-4",children:[e.jsx("option",{value:"ALL",children:"All Active Status"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"ON_LEAVE",children:"On Leave"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"})]})})]})}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-8",children:[{label:"Total Staff",value:m.length,icon:Ie,color:"indigo"},{label:"Active",value:m.filter(T=>T.status==="ACTIVE").length,icon:Mn,color:"emerald"},{label:"On Leave",value:m.filter(T=>T.status==="ON_LEAVE").length,icon:Ze,color:"amber"},{label:"Inactive",value:m.filter(T=>T.status==="INACTIVE").length,icon:qa,color:"rose"}].map((T,D)=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-100 dark:border-slate-800 p-5 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("div",{className:`p-2.5 rounded-xl bg-${T.color}-50 dark:bg-${T.color}-900/20 text-${T.color}-600 dark:text-${T.color}-400`,children:e.jsx(T.icon,{size:20})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1",children:T.label}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:T.value})]})]},D))}),k.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(T=>e.jsx(mN,{staff:T,onView:b,onEdit:C,onDelete:A},`${T.staff_type}-${T.id}`))}):e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-12 text-center",children:[e.jsx(Mn,{size:48,className:"mx-auto text-slate-300 dark:text-slate-700 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2",children:"No staff members found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Get started by adding your first staff member"}),e.jsxs(W,{onClick:()=>n("/hr/staff/create"),children:[e.jsx(nt,{size:18,className:"mr-2"})," Add Staff Member"]})]})]})})},tf=({children:n,className:m=""})=>e.jsx("div",{className:`bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden ${m}`,children:n}),hN=()=>{const{id:n}=Zt(),m=Le(),[c,u]=f.useState(null),[g,v]=f.useState(!0),[j,S]=f.useState("overview");f.useEffect(()=>{_()},[n]);const _=async()=>{try{const h=await V.get(`/api/hr/staff/${n}/`);u(h.data.staff)}catch(h){console.error("Error fetching staff details:",h)}finally{v(!1)}},E=async()=>{if(window.confirm(`Are you sure you want to delete ${c.personal.full_name}?`))try{await V.delete(`/api/hr/staff/${c.id}/delete/`),m("/hr/staff")}catch{alert("Error deleting staff member")}};if(g)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!c)return e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Staff member not found"}),e.jsx(W,{variant:"outline",className:"mt-4",onClick:()=>m("/hr/staff"),children:"Back to Staff List"})]});const z=[{id:"overview",label:"Overview",icon:Qe},{id:"professional",label:"Professional",icon:qa},{id:"financial",label:"Financial",icon:it},{id:"leaves",label:"Leave & Attendance",icon:dt}];return e.jsx("div",{className:"p-6 md:p-8 bg-slate-50 dark:bg-slate-950 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(W,{variant:"ghost",onClick:()=>m("/hr/staff"),children:[e.jsx(Ls,{size:20,className:"mr-1"})," Back to Staff"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(W,{variant:"outline",onClick:()=>m(`/hr/staff/${n}/edit`),children:[e.jsx(ha,{size:18,className:"mr-2"})," Edit Profile"]}),e.jsxs(W,{variant:"destructive",onClick:E,children:[e.jsx(Cs,{size:18,className:"mr-2"})," Delete"]})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-800",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[e.jsxs("div",{className:"h-32 w-32 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-4xl font-bold text-slate-400 border-4 border-white dark:border-slate-900 shadow-md",children:[c.personal.first_name[0],c.personal.last_name[0]]}),e.jsxs("div",{className:"flex-1 text-center md:text-left space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:c.personal.full_name}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-3 text-slate-500 dark:text-slate-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(qa,{size:16})," ",c.professional.position]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(gt,{size:16})," ",c.personal.address||"No Address"]}),e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-bold border ${c.professional.status==="ACTIVE"?"bg-green-50 text-green-700 border-green-200":c.professional.status==="ON_LEAVE"?"bg-yellow-50 text-yellow-700 border-yellow-200":"bg-red-50 text-red-700 border-red-200"}`,children:c.professional.status})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 min-w-[200px]",children:[e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-100 dark:border-slate-800 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg text-blue-600",children:e.jsx(Es,{size:18})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium",children:c.personal.phone})]})]}),e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-100 dark:border-slate-800 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg text-purple-600",children:e.jsx(Gt,{size:18})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Email"}),e.jsx("p",{className:"text-sm font-medium truncate max-w-[150px]",children:c.personal.email})]})]})]})]})}),e.jsx("div",{className:"flex overflow-x-auto border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 rounded-t-xl px-2",children:z.map(h=>e.jsxs("button",{onClick:()=>S(h.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${j===h.id?"border-primary-600 text-primary-600 dark:text-primary-400":"border-transparent text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(h.icon,{size:16}),h.label]},h.id))}),e.jsxs("div",{className:"space-y-6",children:[j==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(Qe,{size:20,className:"text-primary-500"})," Personal Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Fs,{label:"First Name",value:c.personal.first_name}),e.jsx(Fs,{label:"Last Name",value:c.personal.last_name}),e.jsx(Fs,{label:"National ID",value:c.personal.national_id}),e.jsx(Fs,{label:"Date of Birth",value:c.personal.date_of_birth}),e.jsx(Fs,{label:"Gender",value:c.personal.gender}),e.jsx(Fs,{label:"Nationality",value:c.personal.nationality}),e.jsx(Fs,{label:"Marital Status",value:c.personal.marital_status}),e.jsx(Fs,{label:"Religion",value:c.personal.religion})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(Mt,{size:20,className:"text-red-500"})," Emergency Contact"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Fs,{label:"Name",value:c.emergency.contact_name||"Not provided"}),e.jsx(Fs,{label:"Phone",value:c.emergency.contact_phone||"Not provided"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(Wt,{size:20,className:"text-amber-500"})," Job Description"]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm leading-relaxed",children:c.professional.job_description||"No job description available."})]})]})]}),j==="professional"&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(qa,{size:20,className:"text-blue-500"})," Employment Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Fs,{label:"Staff Type",value:c.professional.staff_type_display}),e.jsx(Fs,{label:"Position",value:c.professional.position}),e.jsx(Fs,{label:"Date Joined",value:c.professional.date_joined}),e.jsx(Fs,{label:"Current Status",value:c.professional.status}),e.jsx(Fs,{label:"Supervisor",value:c.professional.supervisor_name||"None"})]})]}),j==="financial"&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(It,{size:20,className:"text-green-500"})," Financial Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[e.jsxs(tf,{className:"p-6 bg-gradient-to-br from-indigo-500 to-indigo-600 text-white border-none shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 opacity-80",children:[e.jsx(it,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:"Basic Salary"})]}),e.jsxs("div",{className:"text-3xl font-bold",children:["KES ",c.financial.basic_salary?.toLocaleString()]}),e.jsx("div",{className:"mt-4 text-[10px] opacity-70 bg-white/10 px-2 py-1 rounded inline-block uppercase font-bold tracking-wider",children:"Base Rate"})]}),e.jsxs(tf,{className:"p-6 bg-gradient-to-br from-emerald-500 to-emerald-600 text-white border-none shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 opacity-80",children:[e.jsx(It,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:"Net Pay"})]}),e.jsxs("div",{className:"text-3xl font-bold",children:["KES ",c.financial.net_salary?.toLocaleString()]}),e.jsx("div",{className:"mt-4 text-[10px] opacity-70 bg-white/10 px-2 py-1 rounded inline-block uppercase font-bold tracking-wider",children:"Take Home"})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/30 rounded-xl border border-slate-100 dark:border-slate-800 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest",children:"Financial Breakdown"}),e.jsx(W,{variant:"ghost",size:"sm",className:"text-[10px] h-7",onClick:()=>m("/finance/salaries",{state:{search:c.personal.full_name}}),children:"Manage in Payroll"})]}),e.jsxs("div",{className:"p-5 grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Monthly Allowances"}),e.jsxs("span",{className:"text-sm font-bold text-emerald-600",children:["+ KES ",c.financial.allowances?.toLocaleString()]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"PAYE/Other Deductions"}),e.jsxs("span",{className:"font-bold text-rose-500",children:["- KES ",c.financial.deductions?.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"NSSF Contribution"}),e.jsxs("span",{className:"font-bold text-rose-500",children:["- KES ",c.financial.nssf?.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"Loan Repayments"}),e.jsxs("span",{className:"font-bold text-rose-500",children:["- KES ",c.financial.loans?.toLocaleString()]})]})]})]})]}),e.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Salary Advances History"}),c.advances.length>0?e.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-200 dark:border-slate-800",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Date"}),e.jsx("th",{className:"px-4 py-3",children:"Amount"}),e.jsx("th",{className:"px-4 py-3",children:"Status"}),e.jsx("th",{className:"px-4 py-3",children:"Reason"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-800",children:c.advances.map((h,b)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3",children:h.date}),e.jsxs("td",{className:"px-4 py-3 font-medium",children:["KES ",h.amount.toLocaleString()]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${h.status==="APPROVED"?"bg-green-100 text-green-700":h.status==="REJECTED"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:h.status})}),e.jsx("td",{className:"px-4 py-3 text-slate-500",children:h.reason})]},b))})]})}):e.jsx("p",{className:"text-sm text-slate-500 italic",children:"No salary advance history found."})]}),j==="leaves"&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(pN,{size:20,className:"text-purple-500"})," Recent Leave History"]}),c.leaves.length>0?e.jsx("div",{className:"space-y-4",children:c.leaves.map((h,b)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:h.type}),e.jsxs("p",{className:"text-sm text-slate-500",children:[h.start_date," - ",h.end_date]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${h.status==="APPROVED"?"bg-green-100 text-green-700":h.status==="REJECTED"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:h.status})})]},b))}):e.jsx("p",{className:"text-sm text-slate-500 italic",children:"No leave history found."})]})]})]})})},Fs=({label:n,value:m})=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center py-3 border-b border-slate-100 dark:border-slate-800 last:border-0",children:[e.jsx("span",{className:"text-sm text-slate-500 w-1/3",children:n}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white flex-1",children:m||"-"})]}),pN=({size:n,className:m})=>e.jsx(hs,{size:n,className:m}),fN=()=>{const n=Le(),[m,c]=f.useState(1),[u,g]=f.useState(!1),[v,j]=f.useState([]),[S,_]=f.useState(null),[E,z]=f.useState({first_name:"",last_name:"",email:"",phone:"",national_id:"",staff_type:"SUPPORT",position:"Staff",date_of_birth:"",date_joined:new Date().toISOString().split("T")[0],address:"",basic_salary:0,status:"ACTIVE",gender:"M",religion:"CHRISTIAN",marital_status:"SINGLE",nationality:"Kenyan",job_description:"",supervisor_id:"",emergency_contact_name:"",emergency_contact_phone:""});f.useEffect(()=>{(async()=>{try{const T=await V.get("/api/hr/staff/");j(T.data.staff||[])}catch(T){console.error("Error fetching staff for supervisors:",T)}})()},[]);const h=k=>{const{name:T,value:D}=k.target;z(y=>({...y,[T]:D}))},b=()=>c(k=>k+1),C=()=>c(k=>k-1),A=async k=>{k.preventDefault(),g(!0),_(null);try{(await V.post("/api/hr/staff/create/",E)).data.success&&n("/hr/staff")}catch(T){_(T.response?.data?.error||"Failed to create staff member")}finally{g(!1)}},M=[{value:"ADMIN",label:"Administrative"},{value:"SUPPORT",label:"Support Staff"},{value:"SECURITY",label:"Security"},{value:"MAINTENANCE",label:"Maintenance"},{value:"KITCHEN",label:"Kitchen"},{value:"LIBRARIAN",label:"Librarian"},{value:"LAB_TECH",label:"Lab Technician"},{value:"NURSE",label:"Nurse"},{value:"CLEANER",label:"Cleaner"},{value:"OTHER",label:"Other"}];return e.jsx("div",{className:"p-6 md:p-8 bg-slate-50 dark:bg-slate-950 min-h-screen",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Add New Staff"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Register a new non-teaching staff member"})]}),e.jsxs(W,{variant:"ghost",onClick:()=>n("/hr/staff"),children:[e.jsx(Ve,{size:20,className:"mr-2"})," Cancel"]})]}),S&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 flex items-center gap-3",children:[e.jsx(ot,{size:20}),e.jsx("p",{className:"text-sm font-medium",children:S})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-800",children:[e.jsx(pm,{step:1,currentStep:m,label:"Personal Info",icon:Qe}),e.jsx(pm,{step:2,currentStep:m,label:"Job & Financial",icon:qa}),e.jsx(pm,{step:3,currentStep:m,label:"Additional Details",icon:Mt})]}),e.jsxs("form",{onSubmit:A,className:"p-8",children:[m===1&&e.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{label:"First Name",name:"first_name",value:E.first_name,onChange:h,required:!0}),e.jsx(fe,{label:"Last Name",name:"last_name",value:E.last_name,onChange:h,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{type:"email",label:"Email Address",name:"email",value:E.email,onChange:h,required:!0,icon:Gt}),e.jsx(fe,{label:"Phone Number",name:"phone",value:E.phone,onChange:h,required:!0,icon:Es})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{label:"National ID / Passport",name:"national_id",value:E.national_id,onChange:h,required:!0}),e.jsx(fe,{type:"date",label:"Date of Birth",name:"date_of_birth",value:E.date_of_birth,onChange:h,icon:Ze})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(zn,{label:"Gender",name:"gender",value:E.gender,onChange:h,options:[{value:"M",label:"Male"},{value:"F",label:"Female"},{value:"O",label:"Other"}]}),e.jsx(zn,{label:"Marital Status",name:"marital_status",value:E.marital_status,onChange:h,options:[{value:"SINGLE",label:"Single"},{value:"MARRIED",label:"Married"}]}),e.jsx(fe,{label:"Nationality",name:"nationality",value:E.nationality,onChange:h})]}),e.jsx(fe,{label:"Current Address",name:"address",value:E.address,onChange:h,icon:gt})]}),m===2&&e.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(zn,{label:"Staff Type",name:"staff_type",value:E.staff_type,onChange:h,options:M}),e.jsx(fe,{label:"Job Title / Position",name:"position",value:E.position,onChange:h})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{type:"date",label:"Date Joined",name:"date_joined",value:E.date_joined,onChange:h,icon:Ze}),e.jsx(zn,{label:"Supervisor",name:"supervisor_id",value:E.supervisor_id,onChange:h,options:[{value:"",label:"No Supervisor"},...v.map(k=>({value:k.id,label:`${k.first_name} ${k.last_name} (${k.position})`}))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{type:"number",label:"Basic Salary (KES)",name:"basic_salary",value:E.basic_salary,onChange:h}),e.jsx(zn,{label:"Employment Status",name:"status",value:E.status,onChange:h,options:[{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"ON_LEAVE",label:"On Leave"}]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Job Description"}),e.jsx("textarea",{name:"job_description",value:E.job_description,onChange:h,rows:4,className:"w-full rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 py-3 focus:ring-2 focus:ring-primary-100 focus:border-primary-500 transition-all outline-none",placeholder:"Describe the main responsibilities..."})]})]}),m===3&&e.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Mt,{className:"text-red-500",size:20})," Emergency Contact"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{label:"Contact Name",name:"emergency_contact_name",value:E.emergency_contact_name,onChange:h}),e.jsx(fe,{label:"Contact Phone",name:"emergency_contact_phone",value:E.emergency_contact_phone,onChange:h,icon:Es})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-800",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"Other Information"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsx(zn,{label:"Religion",name:"religion",value:E.religion,onChange:h,options:[{value:"CHRISTIAN",label:"Christian"},{value:"MUSLIM",label:"Muslim"},{value:"OTHER",label:"Other"}]})})]})]}),e.jsxs("div",{className:"flex justify-between mt-12 pt-8 border-t border-slate-200 dark:border-slate-800",children:[m>1?e.jsxs(W,{type:"button",variant:"outline",onClick:C,children:[e.jsx(Ls,{size:20,className:"mr-2"})," Back"]}):e.jsx("div",{}),m<3?e.jsxs(W,{type:"button",onClick:b,children:["Next Step ",e.jsx(ds,{size:20,className:"ml-2"})]}):e.jsxs(W,{type:"submit",isLoading:u,children:[e.jsx(ma,{size:20,className:"mr-2"})," Save Staff Member"]})]})]})]})]})})},pm=({step:n,currentStep:m,label:c,icon:u})=>{const g=m===n,v=m>n;return e.jsxs("div",{className:`flex-1 flex flex-col items-center py-4 transition-colors relative ${g?"text-primary-600 dark:text-primary-400":v?"text-green-600 dark:text-green-500":"text-slate-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(u,{size:18}),e.jsxs("span",{className:"text-sm font-bold uppercase tracking-wider",children:["Step ",n]})]}),e.jsx("span",{className:"text-xs font-medium",children:c}),g&&e.jsx(he.div,{layoutId:"stepUnderline",className:"absolute bottom-0 h-1 bg-primary-600 dark:bg-primary-400 w-full"})]})},zn=({label:n,name:m,value:c,onChange:u,options:g,required:v})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:n}),e.jsx("select",{name:m,value:c,onChange:u,required:v,className:"w-full h-11 rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 focus:ring-2 focus:ring-primary-100 focus:border-primary-500 transition-all outline-none",children:g.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))})]}),bN=()=>{const{id:n}=Zt(),m=Le(),[c,u]=f.useState(1),[g,v]=f.useState(!0),[j,S]=f.useState(!1),[_,E]=f.useState([]),[z,h]=f.useState(null),[b,C]=f.useState({first_name:"",last_name:"",email:"",phone:"",national_id:"",staff_type:"SUPPORT",position:"Staff",date_of_birth:"",address:"",basic_salary:0,status:"ACTIVE",gender:"M",religion:"CHRISTIAN",marital_status:"SINGLE",nationality:"Kenyan",job_description:"",supervisor_id:"",emergency_contact_name:"",emergency_contact_phone:""});f.useEffect(()=>{A(),M()},[n]);const A=async()=>{try{const F=(await V.get(`/api/hr/staff/${n}/`)).data.staff;C({first_name:F.personal.first_name,last_name:F.personal.last_name,email:F.personal.email,phone:F.personal.phone,national_id:F.personal.national_id,date_of_birth:F.personal.date_of_birth,address:F.personal.address,gender:F.personal.gender,religion:F.personal.religion,marital_status:F.personal.marital_status,nationality:F.personal.nationality,staff_type:F.professional.staff_type,position:F.professional.position,status:F.professional.status,job_description:F.professional.job_description,supervisor_id:F.professional.supervisor_id||"",basic_salary:F.financial.basic_salary,emergency_contact_name:F.emergency.contact_name,emergency_contact_phone:F.emergency.contact_phone})}catch(U){h("Failed to load staff data"),console.error(U)}finally{v(!1)}},M=async()=>{try{const U=await V.get("/api/hr/staff/");E(U.data.staff.filter(F=>F.id!==parseInt(n)))}catch(U){console.error("Error fetching staff for supervisors:",U)}},k=U=>{const{name:F,value:Z}=U.target;C(ae=>({...ae,[F]:Z}))},T=async U=>{U.preventDefault(),S(!0),h(null);try{(await V.put(`/api/hr/staff/${n}/update/`,b)).data.success&&m(`/hr/staff/${n}`)}catch(F){h(F.response?.data?.error||"Failed to update staff member")}finally{S(!1)}},D=()=>u(U=>U+1),y=()=>u(U=>U-1);if(g)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});const P=[{value:"ADMIN",label:"Administrative"},{value:"SUPPORT",label:"Support Staff"},{value:"SECURITY",label:"Security"},{value:"MAINTENANCE",label:"Maintenance"},{value:"KITCHEN",label:"Kitchen"},{value:"LIBRARIAN",label:"Librarian"},{value:"LAB_TECH",label:"Lab Technician"},{value:"NURSE",label:"Nurse"},{value:"CLEANER",label:"Cleaner"},{value:"OTHER",label:"Other"}];return e.jsx("div",{className:"p-6 md:p-8 bg-slate-50 dark:bg-slate-950 min-h-screen",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Edit Staff Profile"}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Update information for ",b.first_name," ",b.last_name]})]}),e.jsxs(W,{variant:"ghost",onClick:()=>m(`/hr/staff/${n}`),children:[e.jsx(Ve,{size:20,className:"mr-2"})," Cancel"]})]}),z&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 flex items-center gap-3",children:[e.jsx(ot,{size:20}),e.jsx("p",{className:"text-sm font-medium",children:z})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-800",children:[e.jsx(fm,{step:1,currentStep:c,label:"Personal Info",icon:Qe}),e.jsx(fm,{step:2,currentStep:c,label:"Job & Financial",icon:qa}),e.jsx(fm,{step:3,currentStep:c,label:"Additional Details",icon:Mt})]}),e.jsxs("form",{onSubmit:T,className:"p-8",children:[c===1&&e.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{label:"First Name",name:"first_name",value:b.first_name,onChange:k,required:!0}),e.jsx(fe,{label:"Last Name",name:"last_name",value:b.last_name,onChange:k,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{type:"email",label:"Email Address",name:"email",value:b.email,onChange:k,required:!0,icon:Gt}),e.jsx(fe,{label:"Phone Number",name:"phone",value:b.phone,onChange:k,required:!0,icon:Es})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(Tn,{label:"Gender",name:"gender",value:b.gender,onChange:k,options:[{value:"M",label:"Male"},{value:"F",label:"Female"},{value:"O",label:"Other"}]}),e.jsx(Tn,{label:"Marital Status",name:"marital_status",value:b.marital_status,onChange:k,options:[{value:"SINGLE",label:"Single"},{value:"MARRIED",label:"Married"}]}),e.jsx(fe,{label:"Nationality",name:"nationality",value:b.nationality,onChange:k})]}),e.jsx(fe,{label:"Current Address",name:"address",value:b.address,onChange:k,icon:gt})]}),c===2&&e.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Tn,{label:"Staff Type",name:"staff_type",value:b.staff_type,onChange:k,options:P}),e.jsx(fe,{label:"Job Title / Position",name:"position",value:b.position,onChange:k})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Tn,{label:"Supervisor",name:"supervisor_id",value:b.supervisor_id,onChange:k,options:[{value:"",label:"No Supervisor"},..._.map(U=>({value:U.id,label:`${U.first_name} ${U.last_name} (${U.position})`}))]}),e.jsx(Tn,{label:"Employment Status",name:"status",value:b.status,onChange:k,options:[{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"ON_LEAVE",label:"On Leave"}]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsx(fe,{type:"number",label:"Basic Salary (KES)",name:"basic_salary",value:b.basic_salary,onChange:k})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Job Description"}),e.jsx("textarea",{name:"job_description",value:b.job_description,onChange:k,rows:4,className:"w-full rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 py-3 focus:ring-2 focus:ring-primary-100 focus:border-primary-500 transition-all outline-none"})]})]}),c===3&&e.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Mt,{className:"text-red-500",size:20})," Emergency Contact"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{label:"Contact Name",name:"emergency_contact_name",value:b.emergency_contact_name,onChange:k}),e.jsx(fe,{label:"Contact Phone",name:"emergency_contact_phone",value:b.emergency_contact_phone,onChange:k,icon:Es})]})]}),e.jsx("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-800",children:e.jsx(Tn,{label:"Religion",name:"religion",value:b.religion,onChange:k,options:[{value:"CHRISTIAN",label:"Christian"},{value:"MUSLIM",label:"Muslim"},{value:"OTHER",label:"Other"}]})})]}),e.jsxs("div",{className:"flex justify-between mt-12 pt-8 border-t border-slate-200 dark:border-slate-800",children:[c>1?e.jsxs(W,{type:"button",variant:"outline",onClick:y,children:[e.jsx(Ls,{size:20,className:"mr-2"})," Back"]}):e.jsx("div",{}),c<3?e.jsxs(W,{type:"button",onClick:D,children:["Next Step ",e.jsx(ds,{size:20,className:"ml-2"})]}):e.jsxs(W,{type:"submit",isLoading:j,children:[e.jsx(ma,{size:20,className:"mr-2"})," Update Profile"]})]})]})]})]})})},fm=({step:n,currentStep:m,label:c,icon:u})=>{const g=m===n,v=m>n;return e.jsxs("div",{className:`flex-1 flex flex-col items-center py-4 transition-colors relative ${g?"text-primary-600 dark:text-primary-400":v?"text-green-600 dark:text-green-500":"text-slate-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(u,{size:18}),e.jsxs("span",{className:"text-sm font-bold uppercase tracking-wider",children:["Step ",n]})]}),e.jsx("span",{className:"text-xs font-medium",children:c}),g&&e.jsx(he.div,{layoutId:"stepUnderline",className:"absolute bottom-0 h-1 bg-primary-600 dark:bg-primary-400 w-full"})]})},Tn=({label:n,name:m,value:c,onChange:u,options:g,required:v})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:n}),e.jsx("select",{name:m,value:c,onChange:u,required:v,className:"w-full h-11 rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 focus:ring-2 focus:ring-primary-100 focus:border-primary-500 transition-all outline-none",children:g.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))})]}),sf=({request:n,type:m,onApprove:c,onReject:u,userRole:g})=>{const[v,j]=f.useState(!1),[S,_]=f.useState(""),[E,z]=f.useState(null),h=M=>{switch(M){case"APPROVED":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";case"REJECTED":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";case"PENDING":return"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400";default:return"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-400"}},b=M=>{z(M),j(!0)},C=()=>{E==="approve"?c(n.id,S):u(n.id,S),j(!1),_("")},A=()=>g==="ADMIN"?n.status==="PENDING"||n.hr_status==="PENDING":g==="SUPERVISOR"?n.supervisor_status==="PENDING":g==="HR"?n.supervisor_status==="APPROVED"&&n.hr_status==="PENDING":!1;return e.jsxs(e.Fragment,{children:[e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-5 md:p-6 hover:shadow-lg transition-all relative group",children:[e.jsx("div",{className:"flex items-start justify-between mb-5",children:e.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[e.jsx("div",{className:`h-14 w-14 md:h-16 md:w-16 rounded-2xl flex items-center justify-center border ${m==="leave"?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border-blue-100 dark:border-blue-800/50":"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 border-emerald-100 dark:border-emerald-800/50"}`,children:m==="leave"?e.jsx(Ze,{size:24}):e.jsx(it,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-bold text-slate-900 dark:text-white leading-tight",children:n.employee_name}),e.jsx("p",{className:"text-[10px] md:text-xs font-bold text-slate-400 uppercase tracking-widest mt-1",children:m==="leave"?n.leave_type_display:"Salary Advance"})]})]})}),m==="leave"?e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-xs font-bold text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-800/50 p-3 rounded-xl border border-slate-100 dark:border-slate-800/50",children:[e.jsx(Ze,{size:14,className:"text-indigo-500"}),e.jsxs("span",{children:[n.start_date,"  ",n.end_date]}),e.jsxs("span",{className:"ml-auto bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded text-[10px] text-indigo-600",children:[n.duration," days"]})]}),e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-100 dark:border-slate-800/50",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1.5",children:"Reason for leave"}),e.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-300 leading-relaxed italic",children:['"',n.reason,'"']})]})]}):e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-xs font-bold text-slate-500 dark:text-slate-400 bg-emerald-50 dark:bg-emerald-900/10 p-3 rounded-xl border border-emerald-100 dark:border-emerald-800/20",children:[e.jsx(it,{size:14,className:"text-emerald-500"}),e.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:"Advance Amount:"}),e.jsxs("span",{className:"ml-auto text-sm",children:["KES ",parseFloat(n.amount).toLocaleString()]})]}),e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-100 dark:border-slate-800/50",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1.5",children:"Justification"}),e.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-300 leading-relaxed italic",children:['"',n.reason,'"']})]})]}),e.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-800 pt-5 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Verification Status"}),e.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[10px] font-bold uppercase tracking-widest ${h(n.status)}`,children:n.status})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex flex-col items-center gap-1.5 flex-1",children:[e.jsx("div",{className:`w-8 h-8 rounded-xl flex items-center justify-center shadow-sm border ${n.supervisor_status==="APPROVED"?"bg-emerald-500 border-emerald-400 text-white":n.supervisor_status==="REJECTED"?"bg-rose-500 border-rose-400 text-white":"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-400"}`,children:n.supervisor_status==="APPROVED"?e.jsx(Pr,{size:16}):n.supervisor_status==="REJECTED"?e.jsx(Ve,{size:16}):e.jsx(dt,{size:16})}),e.jsx("span",{className:"text-[9px] font-bold uppercase tracking-tighter text-slate-500",children:"Supervisor"})]}),e.jsx("div",{className:"w-8 h-px bg-slate-100 dark:bg-slate-800 mt-[-14px]"}),e.jsxs("div",{className:"flex flex-col items-center gap-1.5 flex-1",children:[e.jsx("div",{className:`w-8 h-8 rounded-xl flex items-center justify-center shadow-sm border ${n.hr_status==="APPROVED"?"bg-emerald-500 border-emerald-400 text-white":n.hr_status==="REJECTED"?"bg-rose-500 border-rose-400 text-white":"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-400"}`,children:n.hr_status==="APPROVED"?e.jsx(Pr,{size:16}):n.hr_status==="REJECTED"?e.jsx(Ve,{size:16}):e.jsx(dt,{size:16})}),e.jsx("span",{className:"text-[9px] font-bold uppercase tracking-tighter text-slate-500",children:"HR/Finance"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-6",children:[e.jsx("span",{children:"Date Requested"}),e.jsx("span",{children:new Date(n.date_requested).toLocaleDateString()})]}),A()&&e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100 dark:border-slate-800",children:[e.jsxs(W,{variant:"outline",className:"flex-1 h-11 rounded-xl border-rose-200 text-rose-600 hover:bg-rose-50 font-bold text-xs uppercase",onClick:()=>b("reject"),children:[e.jsx(Ve,{size:16,className:"mr-2"})," Reject"]}),e.jsxs(W,{className:"flex-1 h-11 rounded-xl bg-emerald-600 shadow-lg shadow-emerald-500/10 font-bold text-xs uppercase",onClick:()=>b("approve"),children:[e.jsx(Pr,{size:16,className:"mr-2"})," Approve"]})]})]}),e.jsx(vt,{children:v&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs(he.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-md shadow-2xl border border-slate-200 dark:border-slate-800",children:[e.jsx("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800",children:e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:E==="approve"?"Approve Request":"Reject Request"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Comments (Optional)"}),e.jsx("textarea",{value:S,onChange:M=>_(M.target.value),className:"w-full rounded-lg border-slate-200 dark:border-slate-700 dark:bg-slate-800 focus:ring-primary-500 p-3",rows:"4",placeholder:"Add any comments or notes..."})]}),e.jsxs("div",{className:"p-6 border-t border-slate-100 dark:border-slate-800 flex gap-3 justify-end",children:[e.jsx(W,{variant:"secondary",onClick:()=>j(!1),children:"Cancel"}),e.jsx(W,{onClick:C,children:E==="approve"?"Approve":"Reject"})]})]})})})]})},gN=()=>{const[n,m]=f.useState("leave"),[c,u]=f.useState([]),[g,v]=f.useState([]),[j,S]=f.useState(!0),[_,E]=f.useState("PENDING"),[z,h]=f.useState(""),[b,C]=f.useState("ADMIN");f.useEffect(()=>{A()},[]);const A=async()=>{try{const[U,F]=await Promise.all([V.get("/api/hr/leave-requests/"),V.get("/api/hr/advance-requests/")]);u(U.data.requests||[]),v(F.data.requests||[])}catch(U){console.error("Error fetching requests:",U)}finally{S(!1)}},M=async(U,F)=>{try{await V.post(`/api/hr/leave-requests/${U}/approve/`,{comments:F}),A()}catch{alert("Error approving request")}},k=async(U,F)=>{try{await V.post(`/api/hr/leave-requests/${U}/reject/`,{comments:F}),A()}catch{alert("Error rejecting request")}},T=async(U,F)=>{try{await V.post(`/api/hr/advance-requests/${U}/approve/`,{comments:F}),A()}catch{alert("Error approving request")}},D=async(U,F)=>{try{await V.post(`/api/hr/advance-requests/${U}/reject/`,{comments:F}),A()}catch{alert("Error rejecting request")}},y=(c||[]).filter(U=>{const F=(U.employee_name||"").toLowerCase().includes(z.toLowerCase()),Z=_==="ALL"||U.status===_;return F&&Z}),P=(g||[]).filter(U=>{const F=(U.employee_name||"").toLowerCase().includes(z.toLowerCase()),Z=_==="ALL"||U.status===_;return F&&Z});return j?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsx("div",{className:"p-6 md:p-8 bg-slate-50 dark:bg-slate-950 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-14 w-14 md:h-16 md:w-16 bg-indigo-600 rounded-2xl flex items-center justify-center shadow-lg shadow-indigo-500/20",children:e.jsx(uf,{size:28,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Staff Approvals"}),e.jsx("p",{className:"text-[10px] md:text-xs font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Review and action staff requests"})]})]})}),e.jsxs("div",{className:"flex gap-2 border-b border-slate-100 dark:border-slate-800 overflow-x-auto no-scrollbar scroll-smooth",children:[e.jsxs("button",{onClick:()=>m("leave"),className:`px-6 py-4 text-xs font-bold uppercase tracking-widest transition-all relative shrink-0 ${n==="leave"?"text-indigo-600 dark:text-indigo-400":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(Ze,{size:18,className:"inline mr-2"}),"Leave Requests",n==="leave"&&e.jsx(he.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary-600 dark:bg-primary-400"})]}),e.jsxs("button",{onClick:()=>m("advance"),className:`px-6 py-4 text-xs font-bold uppercase tracking-widest transition-all relative shrink-0 ${n==="advance"?"text-indigo-600 dark:text-indigo-400":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(it,{size:18,className:"inline mr-2"}),"Salary Advances",n==="advance"&&e.jsx(he.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary-600 dark:bg-primary-400"})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-100 dark:border-slate-800 p-5 md:p-6 mb-8 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsx(fe,{placeholder:"Search by employee name...",value:z,onChange:U=>h(U.target.value),icon:jt,className:"h-11 md:h-12 rounded-xl font-bold"}),e.jsxs("select",{value:_,onChange:U=>E(U.target.value),className:"w-full h-11 md:h-12 rounded-xl border-slate-200 dark:border-slate-800 dark:bg-slate-800 focus:ring-indigo-500 font-bold text-xs px-4",children:[e.jsx("option",{value:"ALL",children:"All Status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"APPROVED",children:"Approved"}),e.jsx("option",{value:"REJECTED",children:"Rejected"})]})]})}),e.jsx(vt,{mode:"wait",children:e.jsx(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:n==="leave"?y.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(U=>e.jsx(sf,{request:U,type:"leave",onApprove:M,onReject:k,userRole:b},U.id))}):e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-12 text-center",children:[e.jsx(Ze,{size:48,className:"mx-auto text-slate-300 dark:text-slate-700 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2",children:"No leave requests found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"All caught up!"})]}):P.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(U=>e.jsx(sf,{request:U,type:"advance",onApprove:T,onReject:D,userRole:b},U.id))}):e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-12 text-center",children:[e.jsx(it,{size:48,className:"mx-auto text-slate-300 dark:text-slate-700 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2",children:"No advance requests found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"All caught up!"})]})},n)})]})})},vN=({leave:n,onApprove:m,onReject:c})=>{const[u,g]=f.useState(!1),[v,j]=f.useState(""),[S,_]=f.useState(null),E=h=>{_(h),g(!0)},z=()=>{S==="approve"?m(n.id,v):c(n.id,v),g(!1),j("")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-100 dark:border-blue-900/50",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white",children:n.employee_name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:n.leave_type_display})]}),e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400 rounded text-xs font-bold",children:"PENDING"})]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:[" ",n.start_date," to ",n.end_date," (",n.duration," days)"]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:[e.jsx("strong",{children:"Reason:"})," ",n.reason]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>E("approve"),className:"flex-1 py-2 px-3 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(Pr,{size:16})," Approve"]}),e.jsxs("button",{onClick:()=>E("reject"),className:"flex-1 py-2 px-3 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ve,{size:16})," Reject"]})]})]}),e.jsx(vt,{children:u&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs(he.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-md shadow-2xl border border-slate-200 dark:border-slate-800",children:[e.jsx("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800",children:e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:S==="approve"?"Approve Leave Request":"Reject Leave Request"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Comments (Optional)"}),e.jsx("textarea",{value:v,onChange:h=>j(h.target.value),className:"w-full rounded-lg border-slate-200 dark:border-slate-700 dark:bg-slate-800 focus:ring-primary-500 p-3",rows:"4",placeholder:"Add any comments or notes..."})]}),e.jsxs("div",{className:"p-6 border-t border-slate-100 dark:border-slate-800 flex gap-3 justify-end",children:[e.jsx(W,{variant:"secondary",onClick:()=>g(!1),children:"Cancel"}),e.jsx(W,{onClick:z,children:S==="approve"?"Approve":"Reject"})]})]})})})]})},jN=({advance:n,onApprove:m,onReject:c})=>{const[u,g]=f.useState(!1),[v,j]=f.useState(""),[S,_]=f.useState(null),E=h=>{_(h),g(!0)},z=()=>{S==="approve"?m(n.id,v):c(n.id,v),g(!1),j("")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-100 dark:border-green-900/50",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white",children:n.employee_name}),e.jsxs("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:["KES ",parseFloat(n.amount).toLocaleString()]})]}),e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400 rounded text-xs font-bold",children:"PENDING"})]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:[e.jsx("strong",{children:"Reason:"})," ",n.reason]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>E("approve"),className:"flex-1 py-2 px-3 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(Pr,{size:16})," Approve"]}),e.jsxs("button",{onClick:()=>E("reject"),className:"flex-1 py-2 px-3 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ve,{size:16})," Reject"]})]})]}),e.jsx(vt,{children:u&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs(he.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-md shadow-2xl border border-slate-200 dark:border-slate-800",children:[e.jsx("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800",children:e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:S==="approve"?"Approve Salary Advance":"Reject Salary Advance"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Comments (Optional)"}),e.jsx("textarea",{value:v,onChange:h=>j(h.target.value),className:"w-full rounded-lg border-slate-200 dark:border-slate-700 dark:bg-slate-800 focus:ring-primary-500 p-3",rows:"4",placeholder:"Add any comments or notes..."})]}),e.jsxs("div",{className:"p-6 border-t border-slate-100 dark:border-slate-800 flex gap-3 justify-end",children:[e.jsx(W,{variant:"secondary",onClick:()=>g(!1),children:"Cancel"}),e.jsx(W,{onClick:z,children:S==="approve"?"Approve":"Reject"})]})]})})})]})},NN=({supervisor:n,onView:m})=>{const c=n.pending_leaves||0,u=n.pending_advances||0,g=n.supervised_count||0;return e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 hover:shadow-lg transition-all cursor-pointer",onClick:()=>m(n),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center text-white font-bold text-xl shadow-lg",children:[n.first_name[0],n.last_name[0]]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:[n.first_name," ",n.last_name]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:n.position}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Mt,{size:14,className:"text-primary-500"}),e.jsx("span",{className:"text-xs font-medium text-primary-600 dark:text-primary-400",children:"Supervisor"})]})]})]}),e.jsx(ds,{size:20,className:"text-slate-400"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-3 text-center",children:[e.jsx(Ie,{size:20,className:"mx-auto text-slate-400 mb-1"}),e.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:g}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Staff"})]}),e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-3 text-center",children:[e.jsx(Ze,{size:20,className:"mx-auto text-yellow-500 mb-1"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:c}),e.jsx("div",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:"Leave"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 text-center",children:[e.jsx(it,{size:20,className:"mx-auto text-green-500 mb-1"}),e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:u}),e.jsx("div",{className:"text-xs text-green-600 dark:text-green-400",children:"Advance"})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-100 dark:border-slate-800",children:e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 space-y-1",children:[e.jsxs("div",{children:[" ",n.email]}),e.jsxs("div",{children:[" ",n.phone]})]})})]})},yN=({supervisor:n,isOpen:m,onClose:c})=>{const[u,g]=f.useState("team"),[v,j]=f.useState([]),[S,_]=f.useState({leaves:[],advances:[]}),[E,z]=f.useState(!1);f.useEffect(()=>{m&&n&&h()},[m,n]);const h=async()=>{z(!0);try{const[b,C]=await Promise.all([V.get(`/api/hr/supervisors/${n.id}/team/`),V.get(`/api/hr/supervisors/${n.id}/pending-requests/`)]);j(b.data.team),_(C.data)}catch(b){console.error("Error fetching supervisor details:",b)}finally{z(!1)}};return!m||!n?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs(he.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-4xl shadow-2xl border border-slate-200 dark:border-slate-800 max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 bg-gradient-to-r from-primary-50 to-blue-50 dark:from-primary-900/20 dark:to-blue-900/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center text-white font-bold text-2xl shadow-lg",children:[n.first_name[0],n.last_name[0]]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[n.first_name," ",n.last_name]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:n.position})]})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-white/50 dark:hover:bg-slate-800/50 rounded-lg transition-colors",children:e.jsx(Ve,{size:24,className:"text-slate-500"})})]})}),e.jsxs("div",{className:"flex gap-2 px-6 border-b border-slate-200 dark:border-slate-800",children:[e.jsxs("button",{onClick:()=>g("team"),className:`px-4 py-3 font-medium transition-colors relative ${u==="team"?"text-primary-600 dark:text-primary-400":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(Ie,{size:18,className:"inline mr-2"}),"Team Members (",v.length,")",u==="team"&&e.jsx(he.div,{layoutId:"activeDetailTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary-600 dark:bg-primary-400"})]}),e.jsxs("button",{onClick:()=>g("requests"),className:`px-4 py-3 font-medium transition-colors relative ${u==="requests"?"text-primary-600 dark:text-primary-400":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(ot,{size:18,className:"inline mr-2"}),"Pending Requests (",(S.leaves?.length||0)+(S.advances?.length||0),")",u==="requests"&&e.jsx(he.div,{layoutId:"activeDetailTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary-600 dark:bg-primary-400"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:E?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs(e.Fragment,{children:[u==="team"&&e.jsx("div",{className:"space-y-3",children:v.length>0?v.map(b=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800 rounded-lg hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"h-10 w-10 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-700 dark:text-primary-400 font-bold",children:[b.first_name[0],b.last_name[0]]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-slate-900 dark:text-white",children:[b.first_name," ",b.last_name]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:b.staff_type_display||b.position})]})]}),e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-bold ${b.status==="ACTIVE"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":b.status==="ON_LEAVE"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:b.status})]},b.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ie,{size:48,className:"mx-auto text-slate-300 dark:text-slate-700 mb-4"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No team members assigned yet"})]})}),u==="requests"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(Ze,{size:18,className:"text-blue-500"}),"Leave Requests"]}),S.leaves?.length>0?e.jsx("div",{className:"space-y-3",children:S.leaves.map(b=>e.jsx(vN,{leave:b,onApprove:async(C,A)=>{try{await V.post(`/api/hr/supervisors/leave-requests/${C}/approve/`,{comments:A}),h()}catch{alert("Error approving request")}},onReject:async(C,A)=>{try{await V.post(`/api/hr/supervisors/leave-requests/${C}/reject/`,{comments:A}),h()}catch{alert("Error rejecting request")}}},b.id))}):e.jsx("p",{className:"text-sm text-slate-400 italic",children:"No pending leave requests"})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-100 dark:border-slate-800",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(it,{size:18,className:"text-green-500"}),"Salary Advance Requests"]}),S.advances?.length>0?e.jsx("div",{className:"space-y-3",children:S.advances.map(b=>e.jsx(jN,{advance:b,onApprove:async(C,A)=>{try{await V.post(`/api/hr/supervisors/advance-requests/${C}/approve/`,{comments:A}),h()}catch{alert("Error approving request")}},onReject:async(C,A)=>{try{await V.post(`/api/hr/supervisors/advance-requests/${C}/reject/`,{comments:A}),h()}catch{alert("Error rejecting request")}}},b.id))}):e.jsx("p",{className:"text-sm text-slate-400 italic",children:"No pending advance requests"})]})]})]})}),e.jsx("div",{className:"p-6 border-t border-slate-100 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/50",children:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(W,{variant:"secondary",onClick:c,children:"Close"}),e.jsx(W,{onClick:()=>window.location.href="/hr/approvals",children:"View All Approvals"})]})})]})})},wN=()=>{Le();const[n,m]=f.useState([]),[c,u]=f.useState(!0),[g,v]=f.useState(""),[j,S]=f.useState(null),[_,E]=f.useState(!1);f.useEffect(()=>{z()},[]);const z=async()=>{try{const k=await V.get("/api/hr/supervisors/");m(k.data.supervisors)}catch(k){console.error("Error fetching supervisors:",k)}finally{u(!1)}},h=k=>{S(k),E(!0)},b=n.filter(k=>`${k.first_name} ${k.last_name} ${k.email}`.toLowerCase().includes(g.toLowerCase())),C=n.reduce((k,T)=>k+(T.pending_leaves||0),0),A=n.reduce((k,T)=>k+(T.pending_advances||0),0),M=n.reduce((k,T)=>k+(T.supervised_count||0),0);return c?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"p-6 md:p-8 bg-slate-50 dark:bg-slate-950 min-h-screen",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-primary-100 dark:bg-primary-900/30 rounded-xl",children:e.jsx(Mt,{size:28,className:"text-primary-600 dark:text-primary-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Supervisors"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Manage supervisor assignments and team oversight"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Total Supervisors"}),e.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:n.length})]}),e.jsx(Mt,{size:24,className:"text-primary-500"})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Staff Supervised"}),e.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:M})]}),e.jsx(Ie,{size:24,className:"text-blue-500"})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Pending Leaves"}),e.jsx("h3",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:C})]}),e.jsx(Ze,{size:24,className:"text-yellow-500"})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Pending Advances"}),e.jsx("h3",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:A})]}),e.jsx(it,{size:24,className:"text-green-500"})]})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6",children:e.jsx(fe,{placeholder:"Search supervisors by name or email...",value:g,onChange:k=>v(k.target.value),icon:jt})})]}),b.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(k=>e.jsx(NN,{supervisor:k,onView:h},k.id))}):e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-12 text-center",children:[e.jsx(Mt,{size:48,className:"mx-auto text-slate-300 dark:text-slate-700 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2",children:"No supervisors found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Assign supervisors to staff members in the Staff Management section"})]})]}),e.jsx(yN,{supervisor:j,isOpen:_,onClose:()=>E(!1)})]})},kN=()=>{const[n,m]=f.useState(!1),[c,u]=f.useState(null),[g,v]=f.useState("2"),j=async()=>{if(window.confirm("Are you sure you want to promote ALL students to the next class? This action cannot be undone.")){m(!0),u(null);try{const _=await V.post("/api/students/promote/");u({type:"success",text:_.data.message})}catch(_){console.error(_),u({type:"error",text:_.response?.data?.error||"Failed to promote students"})}finally{m(!1)}}},S=async()=>{if(window.confirm(`Are you sure you want to move ALL students to Term ${g}?`)){m(!0),u(null);try{const _=await V.post("/api/students/update-term/",{term:g});u({type:"success",text:_.data.message})}catch(_){console.error(_),u({type:"error",text:_.response?.data?.error||"Failed to update term"})}finally{m(!1)}}};return e.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto space-y-6 md:space-y-10",children:[e.jsxs("div",{className:"text-center md:text-left space-y-2",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Academic Management"}),e.jsx("p",{className:"text-sm md:text-base text-slate-500 dark:text-slate-400 font-medium",children:"Orchestrate class promotions and seasonal term transitions"})]}),c&&e.jsxs(he.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`p-4 md:p-6 rounded-2xl flex items-center gap-4 ${c.type==="success"?"bg-emerald-50 text-emerald-700 border-2 border-emerald-100 dark:bg-emerald-900/20 dark:text-emerald-400 dark:border-emerald-800/30":"bg-rose-50 text-rose-700 border-2 border-rose-100 dark:bg-rose-900/20 dark:text-rose-400 dark:border-rose-800/30"}`,children:[e.jsx("div",{className:`p-2 rounded-full ${c.type==="success"?"bg-emerald-100 dark:bg-emerald-800":"bg-rose-100 dark:bg-rose-800"}`,children:c.type==="success"?e.jsx(Ye,{size:20}):e.jsx(On,{size:20})}),e.jsx("span",{className:"font-bold text-sm md:text-base",children:c.text})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:gap-10",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900/50 backdrop-blur-md rounded-2xl border border-slate-200 dark:border-slate-800 p-6 md:p-10 shadow-lg shadow-indigo-500/5 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-12 opacity-5 -mr-12 -mt-12 group-hover:scale-110 transition-transform",children:e.jsx(Ie,{size:160,className:"text-indigo-600"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6 md:gap-8 mb-8",children:[e.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 bg-gradient-to-br from-indigo-500 to-indigo-700 rounded-2xl flex items-center justify-center shadow-lg shadow-indigo-500/30 shrink-0",children:e.jsx(Ie,{className:"text-white",size:32})}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Annual Promotion"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium text-sm md:text-base max-w-2xl",children:"Move all students to their next grade level. Grade 12 students will be graduated while others advance their academic standing."})]})]}),e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-2xl p-5 md:p-8 border border-amber-200/50 dark:border-amber-800/30 mb-8",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"h-10 w-10 bg-amber-500 rounded-xl flex items-center justify-center shrink-0",children:e.jsx(On,{className:"text-white",size:20})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"font-bold text-amber-900 dark:text-amber-200 uppercase tracking-widest text-xs",children:"Security Checkpointing"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm font-semibold text-amber-800/80 dark:text-amber-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-amber-500"}),"Advancement of all students"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-amber-500"}),"Automatic transition to Term 1"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-amber-500"}),"Graduation of final year students"]}),e.jsxs("div",{className:"flex items-center gap-2 underline decoration-amber-500/30",children:[e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-amber-500"}),"Irreversible database action"]})]})]})]})}),e.jsx(W,{onClick:j,disabled:n,className:"w-full md:w-auto h-12 px-10 rounded-xl bg-indigo-600 hover:bg-slate-900 dark:hover:bg-primary-600 text-white shadow-lg shadow-indigo-500/10 transition-all font-bold",children:n?e.jsxs(e.Fragment,{children:[e.jsx(ul,{size:20,className:"mr-3 animate-spin"}),"Synchronizing..."]}):e.jsxs(e.Fragment,{children:["Advance Academic Year",e.jsx(Za,{size:20,className:"ml-3 group-hover:translate-x-1 transition-transform"})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900/50 backdrop-blur-md rounded-2xl border border-slate-200 dark:border-slate-800 p-6 md:p-10 shadow-lg shadow-emerald-500/5 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-12 opacity-5 -mr-12 -mt-12 group-hover:scale-110 transition-transform",children:e.jsx(Ze,{size:160,className:"text-emerald-600"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6 md:gap-8 mb-8",children:[e.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 bg-gradient-to-br from-emerald-500 to-emerald-700 rounded-2xl flex items-center justify-center shadow-lg shadow-emerald-500/30 shrink-0",children:e.jsx(Ze,{className:"text-white",size:32})}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Term Transition"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium text-sm md:text-base max-w-2xl",children:"Set the current active term for the entire institution. This will recalculate all financial obligations and term-specific analytics."})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-8 mb-8",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] md:text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 text-center md:text-left",children:"Institution Objective Term"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[1,2,3].map(_=>e.jsxs("button",{onClick:()=>v(_.toString()),className:`p-6 rounded-2xl border-2 transition-all flex flex-col items-center justify-center gap-2 ${g===_.toString()?"border-emerald-500 bg-emerald-500 text-white shadow-lg shadow-emerald-500/20 scale-[1.02]":"border-slate-100 dark:border-slate-800 bg-slate-50 dark:bg-slate-900 hover:border-slate-300 dark:hover:border-slate-700 text-slate-600 dark:text-slate-400"}`,children:[e.jsxs("span",{className:`text-3xl font-bold ${g===_.toString()?"text-white":"text-slate-900 dark:text-white opacity-40"}`,children:["0",_]}),e.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest ${g===_.toString()?"text-emerald-100":"text-slate-400"}`,children:["Term ",_]})]},_))})]})}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-2xl p-5 md:p-6 border border-blue-200/50 dark:border-blue-800/30 mb-8",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-9 w-9 bg-blue-500 rounded-xl flex items-center justify-center shrink-0",children:e.jsx(On,{className:"text-white",size:18})}),e.jsx("p",{className:"text-xs font-semibold text-blue-800/80 dark:text-blue-400",children:"Fee structures and academic snapshot datasets will be recalibrated to the selected term immediately."})]})}),e.jsx(W,{onClick:S,disabled:n,className:"w-full md:w-auto h-12 px-10 rounded-xl bg-emerald-600 hover:bg-slate-900 dark:hover:bg-primary-600 text-white shadow-lg shadow-emerald-500/10 transition-all font-bold",children:n?e.jsxs(e.Fragment,{children:[e.jsx(ul,{size:20,className:"mr-3 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:["Initiate Term ",g,e.jsx(Za,{size:20,className:"ml-3 group-hover:translate-x-1 transition-transform"})]})})]})]})]})]})},_N=({title:n,subtitle:m,icon:c,gradient:u="from-primary-600 to-primary-700"})=>e.jsxs(he.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`bg-gradient-to-r ${u} rounded-3xl p-8 text-white shadow-xl relative overflow-hidden`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-20 -mt-20"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-black/10 rounded-full blur-3xl -ml-10 -mb-10"}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[c&&e.jsx("div",{className:"p-4 bg-white/20 backdrop-blur-md rounded-2xl shadow-inner border border-white/30",children:c}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-black tracking-tight mb-2",children:n}),m&&e.jsx("p",{className:"text-white/80 font-medium text-sm md:text-base max-w-xl leading-relaxed",children:m})]})]}),e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"px-4 py-2 bg-white/10 backdrop-blur-sm rounded-xl border border-white/20 text-xs font-bold uppercase tracking-widest",children:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})})})]})]}),Ln=({children:n,className:m="",hover:c=!1})=>e.jsx("div",{className:`
            bg-white dark:bg-slate-900 
            rounded-3xl border border-slate-100 dark:border-slate-800/50 
            shadow-sm transition-all duration-300
            ${c?"hover:shadow-xl hover:border-primary-500/30":""}
            ${m}
        `,children:n}),SN=()=>{const{config:n}=Nt(),[m,c]=f.useState("send"),[u,g]=f.useState([]),[v,j]=f.useState([]),[S,_]=f.useState(!1),[E,z]=f.useState(!1),[h,b]=f.useState({recipient_type:"ALL_STUDENTS",message:"",specific_grade:"",specific_student:"",specific_employee:"",fee_min:"",fee_max:"",assessment_term:1,assessment_type:"mid-term"}),[C,A]=f.useState([]),[M,k]=f.useState([]),[T,D]=f.useState([]);f.useEffect(()=>{y(),P()},[]);const y=async()=>{_(!0);try{const[I,ee,$,Q]=await Promise.all([V.get("/api/sms/"),V.get("/api/grades/"),V.get("/api/students/"),V.get("/api/hr/staff/")]);g(I.data.messages||[]);const re=ee.data.grades||[],B=[],le=new Set;for(const G of re)le.has(G.name)||(le.add(G.name),B.push(G));A(B),k($.data.students||[]),D(Q.data.staff||[])}catch(I){console.error("Error fetching communication data:",I),Ht.error("Failed to load data")}finally{_(!1)}},P=async()=>{try{const I=await V.get("/api/communication/templates/");j(I.data.templates||[])}catch(I){console.error("Error fetching templates:",I)}},U=async I=>{if(I&&I.preventDefault(),!h.message){Ht.error("Please enter a message");return}z(!0);try{const ee=await V.post("/api/sms/send/bulk/",h);ee.data.success&&(Ht.success(`Message sent to ${ee.data.recipients} recipients`),b({...h,message:""}),y(),c("history"))}catch(ee){console.error("Error sending SMS:",ee),Ht.error(ee.response?.data?.error||"Failed to send message")}finally{z(!1)}},F=I=>{b(ee=>({...ee,message:I.message})),Ht.success(`Template "${I.name}" applied`)},Z=I=>{b(ee=>({...ee,message:ee.message+I}))},ae=[{id:"ALL_STUDENTS",label:"All Parents",icon:Ie,color:"text-blue-500",bg:"bg-blue-50 dark:bg-blue-900/20"},{id:"GRADE",label:"Specific Class",icon:ta,color:"text-indigo-500",bg:"bg-indigo-50 dark:bg-indigo-900/20"},{id:"FEES_REMINDER",label:"Fee Reminders",icon:ot,color:"text-amber-500",bg:"bg-amber-50 dark:bg-amber-900/20"},{id:"ASSESSMENT_RESULTS",label:"Assessment Results",icon:vf,color:"text-emerald-500",bg:"bg-emerald-50 dark:bg-emerald-900/20"},{id:"ALL_TEACHERS",label:"All Teachers",icon:Qe,color:"text-violet-500",bg:"bg-violet-50 dark:bg-violet-900/20"},{id:"ALL_STAFF",label:"All Staff",icon:Lg,color:"text-rose-500",bg:"bg-rose-50 dark:bg-rose-900/20"},{id:"INDIVIDUAL",label:"Individual Student",icon:Qe,color:"text-sky-500",bg:"bg-sky-50 dark:bg-sky-900/20"},{id:"INDIVIDUAL_STAFF",label:"Individual Staff",icon:Qe,color:"text-purple-500",bg:"bg-purple-50 dark:bg-purple-900/20"}],H=[{tag:"{student_name}",label:"Student Name"},{tag:"{parent_name}",label:"Parent Name"},{tag:"{balance}",label:"Fee Balance"},{tag:"{results}",label:"Exam Results"},{tag:"{term}",label:"Term"},{tag:"{exam_type}",label:"Exam Type"},{tag:"{school_name}",label:"School Name"}],xe=I=>{switch(I){case"SENT":return e.jsxs("span",{className:"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-400 px-2.5 py-1 rounded-full text-xs font-semibold flex items-center gap-1",children:[e.jsx(hl,{size:12})," Sent"]});case"FAILED":return e.jsxs("span",{className:"bg-rose-50 text-rose-700 dark:bg-rose-900/20 dark:text-rose-400 px-2.5 py-1 rounded-full text-xs font-semibold flex items-center gap-1",children:[e.jsx(ua,{size:12})," Failed"]});case"PENDING":return e.jsxs("span",{className:"bg-amber-50 text-amber-700 dark:bg-amber-900/20 dark:text-amber-400 px-2.5 py-1 rounded-full text-xs font-semibold flex items-center gap-1",children:[e.jsx(dt,{size:12})," Pending"]});default:return I}};return e.jsxs("div",{className:"p-4 md:p-8 space-y-8 min-h-screen bg-slate-50 dark:bg-slate-900/50",children:[e.jsx(_N,{title:"Communication Portal",subtitle:"Manage mass SMS and school-wide communications",icon:e.jsx(Jc,{className:"text-white"}),gradient:"from-indigo-600 via-violet-600 to-purple-700"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{label:"Messages Sent",val:u.filter(I=>I.status==="SENT").length,icon:Kc,color:"indigo"},{label:"Deliveries",val:u.reduce((I,ee)=>I+(ee.status==="SENT"?ee.recipients_count:0),0),icon:hl,color:"emerald"},{label:"Failed",val:u.filter(I=>I.status==="FAILED").length,icon:ot,color:"rose"},{label:"SMS Balance",val:"Unlimited",icon:Gt,color:"amber"}].map((I,ee)=>e.jsx(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:ee*.1},children:e.jsx(Ln,{className:"p-6 border-none bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-all group",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-bold uppercase tracking-wider",children:I.label}),e.jsx("h3",{className:"text-3xl font-black mt-2 text-slate-900 dark:text-white tabular-nums",children:I.val})]}),e.jsx("div",{className:`p-4 bg-${I.color}-50 dark:bg-${I.color}-900/20 rounded-2xl text-${I.color}-600 dark:text-${I.color}-400 group-hover:scale-110 transition-transform`,children:e.jsx(I.icon,{size:24})})]})})},ee))}),e.jsxs("div",{className:"flex p-1 bg-white dark:bg-slate-800 rounded-2xl w-fit border border-slate-200 dark:border-slate-700",children:[e.jsxs("button",{onClick:()=>c("send"),className:`px-8 py-3 rounded-xl font-bold transition-all flex items-center gap-2 ${m==="send"?"bg-indigo-600 text-white shadow-lg shadow-indigo-200 dark:shadow-indigo-900/50":"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200"}`,children:[e.jsx(Kc,{size:18})," Compose"]}),e.jsxs("button",{onClick:()=>c("history"),className:`px-8 py-3 rounded-xl font-bold transition-all flex items-center gap-2 ${m==="history"?"bg-indigo-600 text-white shadow-lg shadow-indigo-200 dark:shadow-indigo-900/50":"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200"}`,children:[e.jsx(nd,{size:18})," Logs"]})]}),m==="send"?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-8",children:[e.jsxs(Ln,{className:"p-8 bg-white dark:bg-slate-800 border-none shadow-sm relative z-20 overflow-visible",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 overflow-hidden",children:e.jsx(Ie,{size:120})}),e.jsxs("h3",{className:"text-xl font-black text-slate-900 dark:text-white mb-8 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-600 rounded-lg",children:e.jsx(Tg,{size:20,className:"text-white"})}),"Target Audience"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:ae.map(I=>e.jsxs("button",{onClick:()=>b({...h,recipient_type:I.id}),className:`flex flex-col items-center justify-center p-6 rounded-2xl border-2 transition-all gap-3 group relative overflow-hidden ${h.recipient_type===I.id?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 shadow-inner":"border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 hover:border-slate-300 dark:hover:border-slate-500"}`,children:[e.jsx("div",{className:`p-3 rounded-xl ${h.recipient_type===I.id?"bg-indigo-600 text-white":I.bg+" "+I.color}`,children:e.jsx(I.icon,{size:24})}),e.jsx("span",{className:`text-xs font-black text-center ${h.recipient_type===I.id?"text-indigo-900 dark:text-indigo-100":"text-slate-600 dark:text-slate-400"}`,children:I.label})]},I.id))}),e.jsx(vt,{mode:"wait",children:e.jsxs(he.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8 pt-8 border-t border-slate-100 dark:border-slate-700",children:[(h.recipient_type==="GRADE"||h.recipient_type==="FEES_REMINDER"||h.recipient_type==="ASSESSMENT_RESULTS")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase mb-2",children:"Target Grade / Class"}),e.jsxs("select",{value:h.specific_grade,onChange:I=>b({...h,specific_grade:I.target.value}),className:"w-full p-4 rounded-xl bg-slate-50 dark:bg-slate-900 border-2 border-slate-100 dark:border-slate-700 focus:border-indigo-500 text-slate-900 dark:text-white font-bold outline-none transition-all",children:[e.jsx("option",{value:"",children:"All Classes"}),C.map(I=>e.jsx("option",{value:I.id,children:I.name},I.id))]})]}),h.recipient_type==="FEES_REMINDER"&&e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase mb-2",children:"Min Owed Balance (KES)"}),e.jsx("input",{type:"number",value:h.fee_min,onChange:I=>b({...h,fee_min:I.target.value}),placeholder:"0",className:"w-full p-4 rounded-xl bg-slate-50 dark:bg-slate-900 border-2 border-slate-100 dark:border-slate-700 focus:border-indigo-500 text-slate-900 dark:text-white font-bold outline-none"})]})}),h.recipient_type==="ASSESSMENT_RESULTS"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase mb-2",children:"Academic Term"}),e.jsxs("select",{value:h.assessment_term,onChange:I=>b({...h,assessment_term:I.target.value}),className:"w-full p-4 rounded-xl bg-slate-50 dark:bg-slate-900 border-2 border-slate-100 dark:border-slate-700 focus:border-indigo-500 text-slate-900 dark:text-white font-bold outline-none",children:[e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase mb-2",children:"Assessment Type"}),e.jsxs("select",{value:h.assessment_type,onChange:I=>b({...h,assessment_type:I.target.value}),className:"w-full p-4 rounded-xl bg-slate-50 dark:bg-slate-900 border-2 border-slate-100 dark:border-slate-700 focus:border-indigo-500 text-slate-900 dark:text-white font-bold outline-none",children:[e.jsx("option",{value:"opener",children:"Opener Results"}),e.jsx("option",{value:"mid-term",children:"Mid-Term Results"}),e.jsx("option",{value:"end-term",children:"End-Term Results"})]})]})]}),h.recipient_type==="INDIVIDUAL"&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase mb-2",children:"Select Student"}),e.jsx(Mi,{options:M.map(I=>({value:I.id,label:`${I.full_name} (${I.admission_number})`})),value:h.specific_student,onChange:I=>b({...h,specific_student:I}),placeholder:"Type to search student...",className:"z-50"})]}),h.recipient_type==="INDIVIDUAL_STAFF"&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase mb-2",children:"Select Staff member"}),e.jsx(Mi,{options:T.map(I=>({value:I.id,label:`${I.first_name} ${I.last_name} (${I.position})`})),value:h.specific_employee,onChange:I=>b({...h,specific_employee:I}),placeholder:"Type to search staff...",className:"z-50"})]})]},h.recipient_type)})]}),e.jsxs(Ln,{className:"p-8 bg-white dark:bg-slate-800 border-none shadow-sm relative",children:[e.jsxs("h3",{className:"text-xl font-black text-slate-900 dark:text-white mb-8 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-600 rounded-lg",children:e.jsx(Jc,{size:20,className:"text-white"})}),"Compose Message"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase",children:"Message Content"}),e.jsxs("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full ${h.message.length>160?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-500"}`,children:[h.message.length," / 160 (",Math.ceil(h.message.length/160)||1," SMS)"]})]}),e.jsx("textarea",{value:h.message,onChange:I=>b({...h,message:I.target.value}),placeholder:"Type your message here...",className:"w-full h-48 p-6 rounded-2xl bg-slate-50 dark:bg-slate-900 border-2 border-slate-100 dark:border-slate-800 focus:border-indigo-500 text-slate-900 dark:text-white font-medium outline-none resize-none transition-all placeholder:text-slate-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase mb-3",children:"Quick Insert Placeholders"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:H.map((I,ee)=>e.jsxs("button",{onClick:()=>Z(I.tag),className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 hover:bg-indigo-600 hover:text-white text-slate-600 dark:text-slate-300 rounded-lg text-xs font-bold transition-all flex items-center gap-1 group",children:[e.jsx(nt,{size:12,className:"group-hover:rotate-90 transition-transform"}),I.label]},ee))})]}),e.jsx(W,{onClick:U,disabled:E||!h.message,className:"w-full py-4 text-lg font-black bg-indigo-600 hover:bg-indigo-700 shadow-xl shadow-indigo-200 dark:shadow-none flex items-center justify-center gap-3 transition-all active:scale-[0.98]",children:E?e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Kc,{size:24}),"SEND MESSAGE NOW"]})})]})]})]}),e.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[e.jsxs(Ln,{className:"p-6 bg-indigo-600 text-white border-none shadow-xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute -bottom-8 -right-8 opacity-20 rotate-12",children:e.jsx(jf,{size:160})}),e.jsx("h4",{className:"text-lg font-black mb-1",children:"AI Smart Templates"}),e.jsx("p",{className:"text-indigo-100 text-sm mb-6 font-medium",children:"Ready-made formats for common school scenarios."}),e.jsx("div",{className:"space-y-3 relative z-10",children:v.map(I=>e.jsxs("button",{onClick:()=>F(I),className:"w-full text-left p-4 rounded-xl bg-white/10 hover:bg-white/20 border border-white/5 transition-all group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-indigo-200",children:I.category}),e.jsx(Em,{size:12,className:"opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsx("p",{className:"font-bold text-sm mb-2",children:I.name}),e.jsxs("p",{className:"text-[11px] text-indigo-100 line-clamp-2 italic",children:['"',I.message,'"']})]},I.id))})]}),e.jsxs(Ln,{className:"p-6 bg-white dark:bg-slate-800 border-none shadow-sm",children:[e.jsx("h4",{className:"text-sm font-black text-slate-400 uppercase mb-4",children:"Tips for Results"}),e.jsxs("ul",{className:"space-y-3 text-xs font-bold text-slate-600 dark:text-slate-400",children:[e.jsxs("li",{className:"flex gap-2",children:[e.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"The system automatically pulls the latest marks for the selected term & type."})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500 mt-1.5 shrink-0"}),e.jsxs("span",{children:["Use ",e.jsx("b",{children:"{results}"})," to insert the list of subjects and marks."]})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Individual messages are sent to parents of the selected class."})]})]})]})]})]}):e.jsx(Ln,{className:"bg-white dark:bg-slate-800 border-none shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-900/50 text-[10px] font-black uppercase tracking-widest text-slate-500 dark:text-slate-400",children:[e.jsx("th",{className:"p-6",children:"Time & Author"}),e.jsx("th",{className:"p-6",children:"Audience"}),e.jsx("th",{className:"p-6",children:"Content"}),e.jsx("th",{className:"p-6",children:"Recipients"}),e.jsx("th",{className:"p-6 text-center",children:"Status"}),e.jsx("th",{className:"p-6 text-center",children:"Action"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[u.map((I,ee)=>e.jsxs("tr",{className:"group hover:bg-slate-50/50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsx("td",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-black text-slate-900 dark:text-white uppercase",children:new Date(I.sent_at||I.created_at).toLocaleDateString("en-GB")}),e.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-tighter mt-1",children:I.sent_by})]})}),e.jsx("td",{className:"p-6",children:e.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/20 px-3 py-1.5 rounded-lg border border-indigo-100 dark:border-indigo-800",children:I.recipient_type_display})}),e.jsx("td",{className:"p-6",children:e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-[280px] font-medium",title:I.message,children:I.message})}),e.jsx("td",{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-slate-100 dark:bg-slate-900 rounded-lg text-slate-500",children:e.jsx(Ie,{size:14})}),e.jsx("span",{className:"text-sm font-black text-slate-900 dark:text-white",children:I.recipients_count})]})}),e.jsx("td",{className:"p-6 text-center",children:e.jsx("div",{className:"flex justify-center",children:xe(I.status)})}),e.jsx("td",{className:"p-6 text-center",children:e.jsx("button",{className:"p-2 hover:bg-white dark:hover:bg-slate-700 border border-transparent hover:border-slate-200 dark:hover:border-slate-600 rounded-xl text-slate-400 hover:text-indigo-600 transition-all shadow-sm",children:e.jsx(ds,{size:18})})})]},ee)),u.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"p-20 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-6",children:[e.jsx("div",{className:"w-24 h-24 bg-slate-50 dark:bg-slate-900 rounded-3xl flex items-center justify-center",children:e.jsx(nd,{size:48,className:"text-slate-300"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-900 dark:text-white font-black text-2xl",children:"No Message Logs"}),e.jsx("p",{className:"text-slate-500 font-medium max-w-xs mx-auto mt-2",children:"Historical communication records will be displayed here for auditing purposes."})]})]})})})]})]})})})]})},CN=()=>{const{config:n}=Nt(),{subscription:m}=n,[c,u]=f.useState(!1),[g,v]=f.useState(""),[j,S]=f.useState(!1),[_,E]=f.useState("idle"),[z,h]=f.useState(""),[b,C]=f.useState(""),A={Basic:{icon:ql,color:"emerald",price:1499,priceLabel:"1,499"},Standard:{icon:Wc,color:"blue",price:2499,priceLabel:"2,499"},Enterprise:{icon:ad,color:"violet",price:3499,priceLabel:"3,499"}},M=m?.plan||"Basic",[k,T]=f.useState(M),D=A[M],y=A[k],P=y.icon,F=!m||m.status!=="Active"&&m.status!=="Trial"||m.status==="Trial"?y.price:y.price>D.price?y.price-D.price:y.price,Z=m?.trial_end?Math.ceil((new Date(m.trial_end)-new Date)/(1e3*60*60*24)):0,ae=async xe=>{xe.preventDefault(),S(!0),E("processing");try{const I=await V.post("/api/mpesa/stk-push/",{phone:g,amount:F,account_ref:n.school_name?.substring(0,12)||"SUB_UPGRADE",description:`Upgrade to ${k} Plan`,is_subscription:!0,target_plan:k});if(I.data.success||I.data.message){const ee=I.data.reference;C(ee),E("waiting"),S(!1),H(ee)}else E("error"),S(!1)}catch(I){console.error("Payment Error:",I);const ee=I.response?.data?.error||I.response?.data?.message||"Something went wrong while initiating the payment.";E("error"),h(ee),S(!1)}},H=async xe=>{let I=0;const ee=40,$=async()=>{try{const Q=await V.post("/api/paystack/verify-subscription/",{reference:xe||b});if(Q.data.success&&Q.data.upgraded){E("success"),setTimeout(()=>{window.location.reload()},2e3);return}I++,I<ee?setTimeout($,3e3):E("success")}catch(Q){console.error("Error checking payment status:",Q),I++,I<ee?setTimeout($,3e3):E("success")}};setTimeout($,5e3)};return e.jsxs("div",{className:"p-6 lg:p-10 max-w-6xl mx-auto space-y-8",children:[e.jsx("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight",children:"Subscription Plan"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Manage your institution's subscription and billing."})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2.5rem] p-8 border border-slate-100 dark:border-slate-800 shadow-sm relative overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 right-0 w-64 h-64 bg-${D.color}-500/5 blur-[100px] -z-10`}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center bg-${D.color}-50 dark:bg-${D.color}-900/20 text-${D.color}-600 dark:text-${D.color}-400 shadow-sm shadow-${D.color}-500/10`,children:e.jsx(P,{size:40})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("h2",{className:"text-2xl font-black text-slate-900 dark:text-white",children:[m?.plan," Edition"]}),e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wider bg-${D.color}-100 dark:bg-${D.color}-900/30 text-${D.color}-700 dark:text-${D.color}-400`,children:m?.status})]}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 font-medium leading-relaxed",children:["Your institution is currently on the ",e.jsx("b",{children:m?.plan})," plan."]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Monthly Billing"}),e.jsxs("p",{className:"text-3xl font-black text-slate-900 dark:text-white leading-none",children:["KES ",D.priceLabel,e.jsx("span",{className:"text-sm font-medium text-slate-400",children:"/mo"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-12",children:[e.jsxs("div",{className:"p-5 rounded-3xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-800 flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-white dark:bg-slate-900 flex items-center justify-center text-slate-400 shadow-sm",children:e.jsx(dt,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Next Billing Date"}),e.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:m?.trial_end?new Date(m.trial_end).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}):"N/A"})]})]}),e.jsxs("div",{className:"p-5 rounded-3xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-800 flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-white dark:bg-slate-900 flex items-center justify-center text-slate-400 shadow-sm",children:e.jsx(Di,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Payment Status"}),e.jsxs("p",{className:"font-bold text-emerald-600 dark:text-emerald-400 flex items-center gap-1",children:["Active ",m?.status==="Trial"?"Trial":"Subscription",e.jsx(hl,{size:14})]})]})]})]})]}),m?.status==="Active"&&k!==M&&e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-800 p-6 rounded-[2.5rem] flex items-center gap-4 animate-in fade-in slide-in-from-top-4 duration-500",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white dark:bg-slate-900 flex items-center justify-center text-amber-500 shadow-sm shrink-0",children:e.jsx(Dt,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-amber-900 dark:text-amber-400",children:"Pro-rated Upgrade"}),e.jsxs("p",{className:"text-xs text-amber-700 dark:text-amber-500 leading-relaxed font-medium",children:["You are upgrading from ",M," to ",k,". You'll only pay the difference:",e.jsxs("span",{className:"font-bold ml-1",children:["KES ",F.toLocaleString()]}),"."]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white shrink-0",children:"Available Plans"}),e.jsx("div",{className:"h-px flex-1 bg-slate-100 dark:bg-slate-800"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:Object.entries(A).map(([xe,I])=>{const ee=xe===M,$=k===xe;return e.jsxs("button",{onClick:()=>T(xe),className:`p-6 rounded-[2.5rem] border-2 transition-all flex flex-col items-center text-center gap-4 relative overflow-hidden group
                                            ${$?`border-${I.color}-500 bg-${I.color}-50 dark:bg-${I.color}-900/10`:`border-slate-100 dark:border-slate-800 hover:border-${I.color}-200 dark:hover:border-${I.color}-800 bg-white dark:bg-slate-900`}`,children:[e.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shadow-lg transition-transform group-hover:scale-110
                                            ${$?`bg-${I.color}-500 text-white shadow-${I.color}-500/20`:`bg-${I.color}-50 dark:bg-${I.color}-900/20 text-${I.color}-600 dark:text-${I.color}-400`}`,children:e.jsx(I.icon,{size:28})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-black text-slate-900 dark:text-white tracking-tight",children:xe}),e.jsxs("p",{className:`text-[10px] font-bold uppercase tracking-widest ${$?`text-${I.color}-600`:"text-slate-400"}`,children:["KES ",I.priceLabel,"/mo"]})]}),ee&&e.jsx("div",{className:"absolute top-3 right-3 px-2 py-0.5 rounded-full bg-slate-900 text-[8px] font-black uppercase text-white",children:"Current"})]},xe)})})]})]}),e.jsxs("div",{className:"space-y-6",children:[m?.status==="Trial"&&e.jsxs("div",{className:"bg-slate-900 rounded-[2.5rem] p-8 text-white relative overflow-hidden shadow-2xl shadow-blue-500/20 border border-white/5",children:[e.jsx("div",{className:"absolute -top-12 -right-12 w-32 h-32 bg-blue-600/20 rounded-full blur-2xl"}),e.jsx("div",{className:"absolute -bottom-12 -left-12 w-32 h-32 bg-violet-600/20 rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10 flex flex-col",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 text-white text-[10px] font-black uppercase tracking-widest mb-6 border border-white/10",children:[e.jsx(dt,{size:12}),"Trial Countdown"]}),e.jsxs("h3",{className:"text-4xl font-black mb-2 tracking-tighter",children:[Z," ",e.jsx("span",{className:"text-lg font-bold text-slate-400 tracking-normal uppercase",children:"days"})]}),e.jsxs("p",{className:"text-slate-400 text-sm font-medium leading-relaxed mb-8",children:["Your trial expires on ",e.jsx("b",{children:new Date(m.trial_end).toLocaleDateString()}),". Upgrade now to activate your full ",e.jsx("b",{children:k})," subscription."]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(W,{onClick:()=>u(!0),className:"w-full py-4 text-base shadow-xl shadow-indigo-600/30 bg-indigo-600 hover:bg-indigo-500",children:k===M?"Activate Plan":`Upgrade to ${k}`}),e.jsx("p",{className:"text-[10px] text-center text-slate-500 font-medium",children:"Secure payment via M-Pesa"})]})]})]}),m?.status==="Active"&&k!==M&&e.jsxs("div",{className:"bg-indigo-600 rounded-[2.5rem] p-8 text-white shadow-2xl shadow-indigo-600/20",children:[e.jsx("h3",{className:"text-xl font-black mb-4",children:"Confirm Upgrade"}),e.jsxs("p",{className:"text-indigo-100 text-sm mb-6 leading-relaxed",children:["Switch to the ",e.jsx("b",{children:k})," plan immediately. Your features will update as soon as the payment is confirmed."]}),e.jsxs(W,{onClick:()=>u(!0),className:"w-full bg-white text-indigo-600 hover:bg-white/90 py-4 shadow-xl",children:["Pay KES ",F.toLocaleString()]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2.5rem] p-8 border border-slate-100 dark:border-slate-800 shadow-sm",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-400 mb-6 shadow-sm",children:e.jsx(ot,{size:24})}),e.jsx("h4",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Need help?"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm leading-relaxed mb-6",children:"Questions about our plans? Our team is here to help you scale your institution."}),e.jsx(W,{variant:"outline",className:"w-full py-3 rounded-2xl",children:"Contact Support"})]})]})]}),e.jsx(vt,{children:c&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>u(!1),className:"absolute inset-0 bg-slate-950/60 backdrop-blur-md"}),e.jsx(he.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative w-full max-w-lg bg-white dark:bg-slate-900 rounded-[3rem] shadow-2xl border border-white/10 overflow-hidden",children:e.jsxs("div",{className:"p-8 sm:p-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsx("div",{className:`w-14 h-14 rounded-2xl bg-${y.color}-100 dark:bg-${y.color}-900/30 text-${y.color}-600 dark:text-${y.color}-400 flex items-center justify-center`,children:e.jsx(y.icon,{size:32})}),e.jsx("button",{onClick:()=>u(!1),className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:e.jsx(Ve,{size:20,className:"text-slate-400"})})]}),e.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-2 tracking-tight",children:k===M?"Renew Sub":`Upgrade to ${k}`}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8 font-medium",children:m?.status==="Active"?`Confirm your upgrade to the ${k} edition.`:`Experience the full power of EduManage ${k} edition.`}),_==="idle"||_==="processing"?e.jsxs("form",{onSubmit:ae,className:"space-y-6",children:[e.jsxs("div",{className:"p-6 rounded-3xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest",children:m?.status==="Active"&&k!==M?"Upgrade Pay":"Payable"}),e.jsxs("span",{className:"text-2xl font-black text-slate-900 dark:text-white",children:["KES ",F.toLocaleString()]})]}),e.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 mb-4"}),e.jsxs("div",{className:"flex items-center gap-3 text-xs font-bold text-emerald-600 dark:text-emerald-400",children:[e.jsx(hl,{size:14}),e.jsx("span",{children:"Instant Activation after Payment"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest ml-1",children:"M-Pesa Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx(Es,{size:18})}),e.jsx("input",{type:"tel",required:!0,value:g,onChange:xe=>v(xe.target.value),placeholder:"e.g. 0712345678",className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl py-4 pl-12 pr-4 text-slate-900 dark:text-white font-bold placeholder:text-slate-500 focus:ring-2 focus:ring-violet-500 transition-all shadow-inner"})]})]}),e.jsx(W,{type:"submit",isLoading:j,className:"w-full py-4 text-base bg-emerald-600 hover:bg-emerald-500 shadow-xl shadow-emerald-600/20",children:j?"Sending Request...":`Pay KES ${F.toLocaleString()}`})]}):_==="waiting"?e.jsxs("div",{className:"text-center py-8 space-y-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center mx-auto",children:e.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 dark:border-blue-800 border-t-blue-600 dark:border-t-blue-400 rounded-full animate-spin"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white mb-2",children:"Waiting for Payment..."}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Please complete the M-Pesa payment on your phone. We're monitoring your payment and will upgrade your account automatically once confirmed."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-slate-400",children:[e.jsx(dt,{size:14,className:"animate-pulse"}),e.jsx("span",{children:"This may take up to 2 minutes"})]})]}):_==="success"?e.jsxs("div",{className:"text-center py-8 space-y-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 flex items-center justify-center mx-auto animate-bounce",children:e.jsx(hl,{size:48})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white mb-2",children:"Upgrade Complete!"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Your subscription has been upgraded successfully. Refreshing your dashboard..."})]})]}):e.jsxs("div",{className:"text-center py-8 space-y-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400 flex items-center justify-center mx-auto",children:e.jsx(ot,{size:48})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white mb-2",children:"Payment Failed"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:z||"Something went wrong while initiating the payment."})]}),e.jsx(W,{onClick:()=>E("idle"),variant:"outline",className:"w-full",children:"Try Again"})]})]})})]})})]})},Dr=({icon:n,label:m,path:c,onClick:u})=>{const g=Ya(),v=g.pathname===c||g.pathname.startsWith(`${c}/`);return e.jsxs("button",{onClick:u,className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-200 ${v?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 font-semibold shadow-sm border border-indigo-100 dark:border-indigo-800":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-slate-200"}`,children:[e.jsx(n,{size:18,className:v?"text-indigo-600 dark:text-indigo-400":"text-slate-400 dark:text-slate-500"}),e.jsx("span",{className:"text-sm",children:m}),v&&e.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-indigo-600 dark:bg-indigo-400"})]})},EN=({isOpen:n,onClose:m,user:c,onLogout:u})=>{const g=Le(),{config:v}=Nt(),j=v?.subscription?.plan||"Basic",S=v?.subscription?.status,_=(j==="Enterprise"||S==="Trial")&&j!=="Standard",E=z=>{g(z),m&&m()};return e.jsxs(e.Fragment,{children:[n&&e.jsx("div",{className:"fixed inset-0 bg-slate-950/20 backdrop-blur-[2px] z-40 lg:hidden",onClick:m}),e.jsxs("aside",{className:`
        fixed lg:static inset-y-0 left-0 z-50 w-72 bg-white dark:bg-slate-900 border-r border-slate-200 dark:border-slate-800 transform transition-transform duration-300 ease-[cubic-bezier(0.23,1,0.32,1)]
        ${n?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        flex flex-col h-full shadow-2xl lg:shadow-none
      `,children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 bg-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20 text-white overflow-hidden",children:v.school_logo?e.jsx("img",{src:v.school_logo,alt:"School Logo",className:"h-full w-full object-cover"}):e.jsx(it,{size:20})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-lg text-slate-900 dark:text-white tracking-tight block",children:v.school_name}),e.jsx("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold tracking-widest uppercase",children:"Console"})]})]}),e.jsx("button",{className:"lg:hidden p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",onClick:m,children:e.jsx(Ve,{size:20,className:"text-slate-500 dark:text-slate-400"})})]}),e.jsxs("div",{className:"p-4 space-y-1 overflow-y-auto flex-1 no-scrollbar",children:[e.jsx("div",{className:"px-4 py-2 text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em]",children:"General"}),e.jsx(Dr,{icon:Bn,label:"Overview",path:"/finance-portal/dashboard",onClick:()=>E("/finance-portal/dashboard")}),e.jsx(Dr,{icon:Ie,label:"Accounts",path:"/finance-portal/accounts",onClick:()=>E("/finance-portal/accounts")}),e.jsx(Dr,{icon:Wt,label:"Ledger",path:"/finance-portal/transactions",onClick:()=>E("/finance-portal/transactions")}),e.jsx(Dr,{icon:Rn,label:"Expenses",path:"/finance-portal/expenses",onClick:()=>E("/finance-portal/expenses")}),e.jsx(Dr,{icon:Oi,label:"Analytics",path:"/finance-portal/reports",onClick:()=>E("/finance-portal/reports")}),e.jsx("div",{className:"px-4 py-2 mt-6 text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em]",children:"Specialized"}),_&&e.jsx(Dr,{icon:sa,label:"Fleet Ops",path:"/finance-portal/transport-expenses",onClick:()=>E("/finance-portal/transport-expenses")}),e.jsx(Dr,{icon:Ss,label:"Payroll",path:"/finance-portal/salaries",onClick:()=>E("/finance-portal/salaries")}),_&&e.jsx(Dr,{icon:Hs,label:"Cafeteria",path:"/finance-portal/food",onClick:()=>E("/finance-portal/food")})]}),e.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-800 bg-slate-50/30 dark:bg-slate-900/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 p-2.5 bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm relative overflow-hidden group",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold text-xs ring-2 ring-white dark:ring-slate-800",children:c.first_name?.[0]?.toUpperCase()||"A"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white truncate",children:"Finance Staff"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-medium",children:"Standard Access"})]}),e.jsx(Ui,{})]}),e.jsxs(W,{onClick:u,variant:"ghost",className:"w-full justify-start text-rose-500 dark:text-rose-400 hover:bg-rose-50 dark:hover:bg-rose-900/20 hover:text-rose-600 h-11 px-6 rounded-xl border border-transparent hover:border-rose-100 dark:hover:border-rose-900/30",children:[e.jsx(Fr,{size:18,className:"mr-2"}),"Log Out"]})]})]})]})},AN=()=>{const[n,m]=f.useState(!1),c=Le(),{isLocked:u}=Nt(),g=JSON.parse(localStorage.getItem("user")||"{}"),v=u(),j=()=>{localStorage.removeItem("user"),c("/login")};return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex overflow-hidden transition-colors duration-200",children:[v&&e.jsx(Zn,{}),e.jsx(EN,{isOpen:n,onClose:()=>m(!1),user:g,onLogout:j}),e.jsxs("div",{className:"flex-1 flex flex-col h-screen overflow-hidden relative",children:[e.jsxs("header",{className:"bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 sticky top-0 z-30 px-6 py-3 flex justify-between items-center h-16 transition-colors duration-200",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("button",{className:"lg:hidden p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg text-slate-600 dark:text-slate-400 transition-colors",onClick:()=>m(!0),children:e.jsx(Hr,{size:24})})}),e.jsxs("div",{className:"flex items-center space-x-3 md:space-x-6",children:[e.jsx("div",{className:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 text-[10px] font-bold rounded-full border border-indigo-200 dark:border-indigo-800 uppercase tracking-wider",children:"Finance Authority"}),e.jsxs("button",{className:"relative p-2 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-500 dark:text-slate-400 transition-colors",children:[e.jsx(rd,{size:20}),e.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 rounded-full bg-red-500 border-2 border-white dark:border-slate-900"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800 p-1.5 rounded-xl transition-colors",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold border border-slate-200 dark:border-slate-700",children:g.first_name?.[0]?.toUpperCase()}),e.jsx(xl,{size:16,className:"text-slate-400 dark:text-slate-500"})]})]})]}),e.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-slate-50 dark:bg-slate-900 scroll-smooth",children:e.jsx(Sa,{})})]})]})},zN=()=>{const[n,m]=f.useState(null),[c,u]=f.useState(!0);f.useEffect(()=>{g()},[]);const g=async()=>{n||u(!0);try{const h=await V.get("/api/finance/transport-summary/");m(h.data)}catch(h){console.error("Error fetching transport finance summary:",h)}finally{u(!1)}};if(c&&!n)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-slate-200 border-t-indigo-600 animate-spin"})});if(!n)return null;const{counts:v,totals:j,route_breakdown:S,expense_breakdown:_}=n,E=[{name:"Debtors",value:v.debtors,color:"#f43f5e"},{name:"Settled",value:v.settled,color:"#10b981"}].filter(h=>h.value>0),z=({title:h,value:b,icon:C,color:A,subtext:M})=>e.jsx("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${A} text-white`,children:e.jsx(C,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-slate-500 tracking-wider font-mono",children:h}),e.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white mt-1",children:b}),M&&e.jsx("p",{className:"text-[10px] text-slate-400 mt-1 font-bold",children:M})]})]})});return e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight",children:"Transport Analytics"}),e.jsx("p",{className:"text-slate-500 font-bold uppercase text-[10px] tracking-widest mt-1",children:"Fleet Revenue & Operational Expenditure"})]}),e.jsx("button",{onClick:g,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors text-slate-400",children:e.jsx(Dt,{size:20})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(z,{title:"Active Students",value:v.total_students,icon:Ie,color:"bg-indigo-500",subtext:"Using transport services"}),e.jsx(z,{title:"Transport Debtors",value:v.debtors,icon:ot,color:"bg-rose-500",subtext:`${(v.debtors/v.total_students*100).toFixed(1)}% of users`}),e.jsx(z,{title:"Revenue",value:`KES ${(j.revenue/1e3).toFixed(1)}k`,icon:Ye,color:"bg-emerald-500",subtext:"Collected this period"}),e.jsx(z,{title:"Operations Cost",value:`KES ${(j.expenses/1e3).toFixed(1)}k`,icon:Ca,color:"bg-rose-500",subtext:"Fuel & Maintenance"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-900 p-8 rounded-[2rem] border border-slate-200 dark:border-slate-800 shadow-sm flex flex-col",children:[e.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white mb-6",children:"User Payment Status"}),e.jsx("div",{className:"h-[300px] min-h-[300px] w-full",children:e.jsx(es,{width:"100%",height:"100%",minWidth:0,minHeight:0,children:e.jsxs(Ir,{children:[e.jsx(Gr,{data:E,innerRadius:80,outerRadius:100,paddingAngle:5,dataKey:"value",animationDuration:1500,children:E.map((h,b)=>e.jsx($a,{fill:h.color,strokeWidth:0},`cell-${b}`))}),e.jsx(ts,{contentStyle:{background:"#0f172a",border:"none",borderRadius:"12px",color:"#fff"},itemStyle:{fontSize:"12px",fontWeight:"bold"}}),e.jsx(Lm,{verticalAlign:"bottom",height:36})]})})}),e.jsx("div",{className:"mt-6 flex flex-col gap-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Net Margin"})]}),e.jsxs("span",{className:`text-sm font-black ${j.net>=0?"text-emerald-600":"text-rose-600"}`,children:["KES ",(j.net/1e3).toFixed(1),"k"]})]})})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-900 p-8 rounded-[2rem] border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:"Student Enrollment by Route"}),e.jsx("div",{className:"flex items-center gap-4 text-[10px] font-black uppercase text-slate-400 font-mono tracking-tighter",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500"})," Count"]})})]}),e.jsx("div",{className:"h-[400px] min-h-[400px] w-full",children:e.jsx(es,{width:"100%",height:"100%",minWidth:0,minHeight:0,children:e.jsxs(In,{data:S,layout:"vertical",margin:{top:20,right:30,left:40,bottom:5},children:[e.jsx(pl,{strokeDasharray:"3 3",horizontal:!1,strokeOpacity:.1}),e.jsx(Ea,{type:"number",hide:!0}),e.jsx(Aa,{dataKey:"name",type:"category",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:10,fontWeight:800}}),e.jsx(ts,{cursor:{fill:"rgba(99, 102, 241, 0.05)"},contentStyle:{background:"#0f172a",border:"none",borderRadius:"12px",color:"#fff"}}),e.jsx(Ri,{dataKey:"count",fill:"#6366f1",radius:[0,6,6,0],barSize:20})]})})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2rem] border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:"Route Performance Matrix"}),e.jsx(gt,{size:20,className:"text-slate-300"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50/50 dark:bg-slate-800/50 text-[10px] font-black uppercase text-slate-500 tracking-widest border-b border-slate-100 dark:border-slate-800",children:[e.jsx("th",{className:"px-8 py-4",children:"Route Name"}),e.jsx("th",{className:"px-8 py-4",children:"Students"}),e.jsx("th",{className:"px-8 py-4 text-right",children:"Term Cost"}),e.jsx("th",{className:"px-8 py-4 text-right",children:"Est. Potential"}),e.jsx("th",{className:"px-8 py-4 text-right",children:"Realized Revenue"}),e.jsx("th",{className:"px-8 py-4 text-center",children:"Collection %"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:S.map((h,b)=>{const C=h.count*h.cost,A=C>0?h.revenue/C*100:0;return e.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[e.jsx("td",{className:"px-8 py-4 text-sm font-bold text-slate-900 dark:text-white",children:h.name}),e.jsx("td",{className:"px-8 py-4",children:e.jsxs("span",{className:"px-2.5 py-1 rounded-lg bg-indigo-50 dark:bg-indigo-500/10 text-[10px] font-bold text-indigo-600 uppercase tracking-wider",children:[h.count," Assigned"]})}),e.jsxs("td",{className:"px-8 py-4 text-right text-xs font-bold text-slate-600 dark:text-slate-400 font-mono",children:["KES ",h.cost.toLocaleString()]}),e.jsxs("td",{className:"px-8 py-4 text-right text-xs font-bold text-slate-600 dark:text-slate-400 font-mono",children:["KES ",C.toLocaleString()]}),e.jsxs("td",{className:"px-8 py-4 text-right text-xs font-black text-emerald-600 font-mono",children:["KES ",h.revenue.toLocaleString()]}),e.jsx("td",{className:"px-8 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-12 h-1.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-1000",style:{width:`${A}%`}})}),e.jsxs("span",{className:"text-[10px] font-black text-slate-500",children:[A.toFixed(0),"%"]})]})})]},b)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-slate-900 text-white font-black uppercase text-[10px] tracking-[0.2em]",children:[e.jsx("td",{className:"px-8 py-6",children:"Aggregated Fleet Data"}),e.jsxs("td",{className:"px-8 py-6",children:[v.total_students," Users"]}),e.jsx("td",{className:"px-8 py-6 text-right",children:"-"}),e.jsx("td",{className:"px-8 py-6 text-right",children:"-"}),e.jsxs("td",{className:"px-8 py-6 text-right text-emerald-400",children:["KES ",j.revenue.toLocaleString()]}),e.jsxs("td",{className:"px-8 py-6 text-center text-emerald-400",children:["Arrears: KES ",j.arrears.toLocaleString()]})]})})]})})]}),_.length>0&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-[2rem] border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white mb-6",children:"Operations Expense Breakdown"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:_.map((h,b)=>e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/30 rounded-2xl border border-slate-100 dark:border-slate-800",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1",children:h.name}),e.jsxs("h4",{className:"text-lg font-black text-rose-600",children:["KES ",h.value.toLocaleString()]}),e.jsx("div",{className:"mt-2 w-full h-1 bg-slate-200 dark:bg-slate-700 rounded-full",children:e.jsx("div",{className:"h-full bg-rose-500 rounded-full",style:{width:`${h.value/j.expenses*100}%`}})})]},b))})]})]})},af=["#f59e0b","#10b981","#6366f1","#f43f5e","#8b5cf6"],TN=()=>{const[n,m]=f.useState(null),[c,u]=f.useState(!0);f.useEffect(()=>{g()},[]);const g=async()=>{n||u(!0);try{const h=await V.get("/api/finance/catering-summary/");m(h.data)}catch(h){console.error("Error fetching food finance summary:",h)}finally{u(!1)}};if(c&&!n)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-slate-200 border-t-orange-600 animate-spin"})});if(!n)return null;const{totals:v,daily_trend:j,sources:S,counts:_,meal_breakdown:E}=n;[{name:"Debtors",value:_.debtors,color:"#f43f5e"},{name:"Settled",value:_.settled,color:"#10b981"}].filter(h=>h.value>0);const z=({title:h,value:b,icon:C,color:A,subtext:M})=>e.jsx("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm transition-all hover:shadow-md",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${A} text-white`,children:e.jsx(C,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-slate-500 tracking-wider font-mono",children:h}),e.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white mt-1",children:b}),M&&e.jsx("p",{className:"text-[10px] text-slate-400 mt-1 font-bold",children:M})]})]})});return e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight",children:"Catering Analytics"}),e.jsx("p",{className:"text-slate-500 font-bold uppercase text-[10px] tracking-widest mt-1",children:"Kitchen Revenue & Expenditure Insights"})]}),e.jsx(Tm,{size:32,className:"text-orange-500/20"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(z,{title:"Active Subscribers",value:_.total_students,icon:Ie,color:"bg-indigo-500",subtext:"Participating students"}),e.jsx(z,{title:"Meal Debtors",value:_.debtors,icon:ot,color:"bg-rose-500",subtext:`KES ${(v.arrears/1e3).toFixed(1)}k outstanding`}),e.jsx(z,{title:"Realized Revenue",value:`KES ${(v.revenue/1e3).toFixed(1)}k`,icon:Dt,color:"bg-emerald-500",subtext:"Collected meal payments"}),e.jsx(z,{title:"Net Margin",value:`KES ${(v.net/1e3).toFixed(1)}k`,icon:it,color:v.net>=0?"bg-orange-500":"bg-rose-600",subtext:"Operations surplus"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-[2rem] border border-slate-200 dark:border-slate-800 shadow-sm flex flex-col",children:[e.jsxs("h3",{className:"text-lg font-black text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[e.jsx(Oi,{size:18,className:"text-orange-500"})," Revenue Distribution"]}),e.jsx("div",{className:"h-[300px] min-h-[300px] w-full",children:e.jsx(es,{width:"100%",height:"100%",minWidth:0,minHeight:0,children:e.jsxs(Ir,{children:[e.jsx(Gr,{data:S,innerRadius:70,outerRadius:90,paddingAngle:8,dataKey:"value",animationDuration:1500,children:S.map((h,b)=>e.jsx($a,{fill:af[b%af.length],strokeWidth:0},`cell-${b}`))}),e.jsx(ts,{contentStyle:{background:"#0f172a",border:"none",borderRadius:"12px",color:"#fff"},itemStyle:{fontSize:"12px",fontWeight:"bold"}}),e.jsx(Lm,{verticalAlign:"bottom",height:36})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-[2rem] border border-slate-200 dark:border-slate-800 shadow-sm flex flex-col",children:[e.jsxs("h3",{className:"text-lg font-black text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[e.jsx(hs,{size:18,className:"text-emerald-500"})," Daily Revenue (7D)"]}),e.jsx("div",{className:"h-[300px] min-h-[300px] w-full",children:e.jsx(es,{width:"100%",height:"100%",minWidth:0,minHeight:0,children:e.jsxs(Bi,{data:j,margin:{top:10,right:10,left:0,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorAmt",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#f59e0b",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#f59e0b",stopOpacity:0})]})}),e.jsx(pl,{strokeDasharray:"3 3",vertical:!1,strokeOpacity:.05}),e.jsx(Ea,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:10,fontWeight:800}}),e.jsx(Aa,{hide:!0}),e.jsx(ts,{contentStyle:{background:"#0f172a",border:"none",borderRadius:"12px",color:"#fff"}}),e.jsx(Zl,{type:"monotone",dataKey:"amount",stroke:"#f59e0b",strokeWidth:4,fillOpacity:1,fill:"url(#colorAmt)"})]})})}),e.jsx("div",{className:"mt-4 p-4 bg-orange-50 dark:bg-orange-900/10 rounded-2xl border border-orange-100 dark:border-orange-500/20 text-center",children:e.jsxs("p",{className:"text-[10px] font-bold text-orange-600 uppercase tracking-widest",children:["Surplus from operations: KES ",v.net.toLocaleString()]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2rem] border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:"Subscription Matrix"}),e.jsx(bf,{size:20,className:"text-slate-300"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50/50 dark:bg-slate-800/50 text-[10px] font-black uppercase text-slate-500 tracking-widest border-b border-slate-100 dark:border-slate-800",children:[e.jsx("th",{className:"px-8 py-4",children:"Meal Plan"}),e.jsx("th",{className:"px-8 py-4",children:"Subscribers"}),e.jsx("th",{className:"px-8 py-4 text-right",children:"Subscription Cost"}),e.jsx("th",{className:"px-8 py-4 text-right",children:"Potential Revenue"}),e.jsx("th",{className:"px-8 py-4 text-right",children:"Realized Revenue"}),e.jsx("th",{className:"px-8 py-4 text-center",children:"Collection %"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:E.map((h,b)=>{const C=h.count*h.cost,A=C>0?h.revenue/C*100:0;return e.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[e.jsx("td",{className:"px-8 py-4 text-sm font-bold text-slate-900 dark:text-white",children:h.name}),e.jsx("td",{className:"px-8 py-4",children:e.jsxs("span",{className:"px-2.5 py-1 rounded-lg bg-orange-50 dark:bg-orange-500/10 text-[10px] font-bold text-orange-600 uppercase tracking-wider",children:[h.count," Students"]})}),e.jsxs("td",{className:"px-8 py-4 text-right text-xs font-bold text-slate-600 dark:text-slate-400 font-mono",children:["KES ",h.cost.toLocaleString()]}),e.jsxs("td",{className:"px-8 py-4 text-right text-xs font-bold text-slate-600 dark:text-slate-400 font-mono",children:["KES ",C.toLocaleString()]}),e.jsxs("td",{className:"px-8 py-4 text-right text-xs font-black text-emerald-600 font-mono",children:["KES ",h.revenue.toLocaleString()]}),e.jsx("td",{className:"px-8 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-12 h-1.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-1000",style:{width:`${A}%`}})}),e.jsxs("span",{className:"text-[10px] font-black text-slate-500",children:[A.toFixed(0),"%"]})]})})]},b)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-slate-900 text-white font-black uppercase text-[10px] tracking-[0.2em]",children:[e.jsx("td",{className:"px-8 py-6",children:"Aggregated Catering Data"}),e.jsxs("td",{className:"px-8 py-6",children:[_.total_students," Users"]}),e.jsx("td",{className:"px-8 py-6 text-right",children:"-"}),e.jsx("td",{className:"px-8 py-6 text-right",children:"-"}),e.jsxs("td",{className:"px-8 py-6 text-right text-emerald-400",children:["KES ",v.revenue.toLocaleString()]}),e.jsxs("td",{className:"px-8 py-6 text-center text-emerald-400",children:["Arrears: KES ",v.arrears.toLocaleString()]})]})})]})})]})]})},LN=()=>{const[n,m]=f.useState(null),[c,u]=f.useState(!0);f.useEffect(()=>{g()},[]);const g=async()=>{n||u(!0);try{const z=await V.get("/api/finance/student-fee-summary/");m(z.data)}catch(z){console.error("Error fetching student fee summary:",z)}finally{u(!1)}};if(c&&!n)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-slate-200 border-t-indigo-600 animate-spin"})});if(!n)return null;const v=n?.counts||{total:0,debtors:0,settled:0,credit:0},j=n?.totals||{billed:0,paid:0,outstanding:0},S=n?.grade_breakdown||[],_=[{name:"Debtors",value:v?.debtors||0,color:"#f43f5e"},{name:"Settled",value:v?.settled||0,color:"#10b981"},{name:"In Credit",value:v?.credit||0,color:"#6366f1"}].filter(z=>z.value>0),E=({title:z,value:h,icon:b,color:C,subtext:A})=>e.jsx("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${C} text-white`,children:e.jsx(b,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-slate-500 tracking-wider font-mono",children:z}),e.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white mt-1",children:h}),A&&e.jsx("p",{className:"text-[10px] text-slate-400 mt-1 font-bold",children:A})]})]})});return e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight",children:"Student Fee Analytics"}),e.jsx("p",{className:"text-slate-500 font-bold uppercase text-[10px] tracking-widest mt-1",children:"Institutional Billing & Collection Summary"})]}),e.jsx("button",{onClick:g,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors text-slate-400",children:e.jsx(Dt,{size:20})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(E,{title:"Total Students",value:v.total,icon:Ie,color:"bg-indigo-500",subtext:"Active enrollment"}),e.jsx(E,{title:"Fee Debtors",value:v.debtors,icon:ot,color:"bg-rose-500",subtext:`${(v.debtors/v.total*100).toFixed(1)}% of student body`}),e.jsx(E,{title:"Settled Accounts",value:v.settled,icon:Ye,color:"bg-emerald-500",subtext:"Full payments made"}),e.jsx(E,{title:"Total Arrears",value:`KES ${(j.outstanding/1e3).toFixed(1)}k`,icon:Ca,color:"bg-amber-500",subtext:"Collectable revenue"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-900 p-8 rounded-[2rem] border border-slate-200 dark:border-slate-800 shadow-sm flex flex-col",children:[e.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white mb-6",children:"Payment Status"}),e.jsx("div",{className:"h-[300px] w-full min-h-[300px]",children:e.jsx(es,{width:"100%",height:300,minHeight:300,children:e.jsxs(Ir,{children:[e.jsx(Gr,{data:_,innerRadius:80,outerRadius:100,paddingAngle:5,dataKey:"value",animationDuration:1500,children:_.map((z,h)=>e.jsx($a,{fill:z.color,strokeWidth:0},`cell-${h}`))}),e.jsx(ts,{contentStyle:{background:"#0f172a",border:"none",borderRadius:"12px",color:"#fff"},itemStyle:{fontSize:"12px",fontWeight:"bold"}}),e.jsx(Lm,{verticalAlign:"bottom",height:36})]})})}),e.jsx("div",{className:"mt-6 flex flex-col gap-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Collection Rate"})]}),e.jsxs("span",{className:"text-sm font-black text-emerald-600",children:[(j.paid/j.billed*100).toFixed(1),"%"]})]})})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-900 p-8 rounded-[2rem] border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:"Arrears by Grade"}),e.jsxs("div",{className:"flex items-center gap-4 text-[10px] font-black uppercase text-slate-400 font-mono tracking-tighter",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500"})," Billed"]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"})," Paid"]})]})]}),e.jsx("div",{className:"h-[400px] w-full min-h-[400px]",children:e.jsx(es,{width:"100%",height:400,minHeight:400,children:e.jsxs(In,{data:S,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(pl,{strokeDasharray:"3 3",vertical:!1,strokeOpacity:.1}),e.jsx(Ea,{dataKey:"grade",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:10,fontWeight:800}}),e.jsx(Aa,{axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:10,fontWeight:800},tickFormatter:z=>`${z/1e3}k`}),e.jsx(ts,{cursor:{fill:"rgba(99, 102, 241, 0.05)"},contentStyle:{background:"#0f172a",border:"none",borderRadius:"12px",color:"#fff"}}),e.jsx(Ri,{dataKey:"billed",fill:"#6366f1",radius:[6,6,0,0],barSize:20}),e.jsx(Ri,{dataKey:"paid",fill:"#10b981",radius:[6,6,0,0],barSize:20})]})})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2rem] border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800",children:e.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:"Grade Performance Breakdown"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50/50 dark:bg-slate-800/50 text-[10px] font-black uppercase text-slate-500 tracking-widest border-b border-slate-100 dark:border-slate-800",children:[e.jsx("th",{className:"px-8 py-4",children:"Grade"}),e.jsx("th",{className:"px-8 py-4",children:"Students"}),e.jsx("th",{className:"px-8 py-4 text-right",children:"Total Billed"}),e.jsx("th",{className:"px-8 py-4 text-right",children:"Total Paid"}),e.jsx("th",{className:"px-8 py-4 text-right",children:"Outstanding"}),e.jsx("th",{className:"px-8 py-4 text-center",children:"Collection %"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:S.map((z,h)=>e.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[e.jsx("td",{className:"px-8 py-4 text-sm font-bold text-slate-900 dark:text-white",children:z.grade}),e.jsx("td",{className:"px-8 py-4",children:e.jsxs("span",{className:"px-2.5 py-1 rounded-lg bg-slate-100 dark:bg-slate-800 text-[10px] font-bold text-slate-500 uppercase tracking-wider",children:[z.count," Students"]})}),e.jsxs("td",{className:"px-8 py-4 text-right text-xs font-bold text-slate-600 dark:text-slate-400 font-mono",children:["KES ",z.billed.toLocaleString()]}),e.jsxs("td",{className:"px-8 py-4 text-right text-xs font-black text-emerald-600 font-mono",children:["KES ",z.paid.toLocaleString()]}),e.jsxs("td",{className:"px-8 py-4 text-right text-xs font-black text-rose-600 font-mono",children:["KES ",z.balance.toLocaleString()]}),e.jsx("td",{className:"px-8 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-12 h-1.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-1000",style:{width:`${z.billed>0?z.paid/z.billed*100:0}%`}})}),e.jsxs("span",{className:"text-[10px] font-black text-slate-500",children:[z.billed>0?(z.paid/z.billed*100).toFixed(0):0,"%"]})]})})]},h))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-slate-900 text-white font-black uppercase text-[10px] tracking-[0.2em]",children:[e.jsx("td",{className:"px-8 py-6",children:"Aggregated Total"}),e.jsxs("td",{className:"px-8 py-6",children:[v.total," Total"]}),e.jsxs("td",{className:"px-8 py-6 text-right",children:["KES ",j.billed.toLocaleString()]}),e.jsxs("td",{className:"px-8 py-6 text-right text-emerald-400",children:["KES ",j.paid.toLocaleString()]}),e.jsxs("td",{className:"px-8 py-6 text-right text-rose-400",children:["KES ",j.outstanding.toLocaleString()]}),e.jsxs("td",{className:"px-8 py-6 text-center text-emerald-400",children:[(j.paid/j.billed*100).toFixed(1),"% Net"]})]})})]})})]})]})};var Qc={exports:{}},MN=Qc.exports,lf;function DN(){return lf||(lf=1,(function(n,m){(function(c,u){n.exports=u(cf())})(typeof self<"u"?self:MN,function(c){return(function(){var u={155:function(D){D.exports=c}},g={};function v(D){var y=g[D];if(y!==void 0)return y.exports;var P=g[D]={exports:{}};return u[D](P,P.exports,v),P.exports}v.d=function(D,y){for(var P in y)v.o(y,P)&&!v.o(D,P)&&Object.defineProperty(D,P,{enumerable:!0,get:y[P]})},v.o=function(D,y){return Object.prototype.hasOwnProperty.call(D,y)},v.r=function(D){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})};var j={};v.r(j),v.d(j,{useReactToPrint:function(){return T}});var S=v(155);const _="printWindow";function E({level:D="error",messages:y,suppressErrors:P=!1}){P||(D==="error"?console.error(y):D==="warning"?console.warn(y):console.debug(y))}function z(D,y){if(y||!D){const P=document.getElementById(_);P&&document.body.removeChild(P)}}function h(D){return D instanceof Error?D:new Error("Unknown Error")}function b(D,y){const{documentTitle:P,onAfterPrint:U,onPrintError:F,preserveAfterPrint:Z,print:ae,suppressErrors:H}=y;setTimeout(()=>{var xe,I;if(D.contentWindow){let ee=function(){U?.(),z(Z)};if(D.contentWindow.focus(),ae)ae(D).then(ee).catch($=>{F?F("print",h($)):E({messages:["An error was thrown by the specified `print` function"],suppressErrors:H})});else{if(D.contentWindow.print){const $=(I=(xe=D.contentDocument)===null||xe===void 0?void 0:xe.title)!==null&&I!==void 0?I:"",Q=D.ownerDocument.title;P&&(D.ownerDocument.title=P,D.contentDocument&&(D.contentDocument.title=P)),D.contentWindow.print(),P&&(D.ownerDocument.title=Q,D.contentDocument&&(D.contentDocument.title=$))}else E({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:H});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some($=>{var Q,re;return((re=(Q=navigator.userAgent)!==null&&Q!==void 0?Q:navigator.vendor)!==null&&re!==void 0?re:"opera"in window&&window.opera).match($)})?setTimeout(ee,500):ee()}}else E({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:H})},500)}function C(D){const y=[],P=document.createTreeWalker(D,NodeFilter.SHOW_ELEMENT,null);let U=P.nextNode();for(;U;)y.push(U),U=P.nextNode();return y}function A(D,y,P){const U=C(D),F=C(y);if(U.length===F.length)for(let Z=0;Z<U.length;Z++){const ae=U[Z],H=F[Z],xe=ae.shadowRoot;if(xe!==null){const I=H.attachShadow({mode:xe.mode});I.innerHTML=xe.innerHTML,A(xe,I,P)}}else E({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",D,y],suppressErrors:P})}const M=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function k(D,y,P,U){var F,Z,ae,H,xe;const{contentNode:I,clonedContentNode:ee,clonedImgNodes:$,clonedVideoNodes:Q,numResourcesToLoad:re,originalCanvasNodes:B}=P,{bodyClass:le,fonts:G,ignoreGlobalStyles:J,pageStyle:oe,nonce:ue,suppressErrors:ke,copyShadowRoots:ye}=U;D.onload=null;const we=(F=D.contentDocument)!==null&&F!==void 0?F:(Z=D.contentWindow)===null||Z===void 0?void 0:Z.document;if(we){const Se=we.body.appendChild(ee);ye&&A(I,Se,!!ke),G&&(!((ae=D.contentDocument)===null||ae===void 0)&&ae.fonts&&(!((H=D.contentWindow)===null||H===void 0)&&H.FontFace)?G.forEach(Ae=>{const Ce=new FontFace(Ae.family,Ae.source,{weight:Ae.weight,style:Ae.style});D.contentDocument.fonts.add(Ce),Ce.loaded.then(()=>{y(Ce)}).catch(ct=>{y(Ce,["Failed loading the font:",Ce,"Load error:",h(ct)])})}):(G.forEach(Ae=>{y(Ae)}),E({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:ke})));const Me=oe??M,Be=we.createElement("style");ue&&(Be.setAttribute("nonce",ue),we.head.setAttribute("nonce",ue)),Be.appendChild(we.createTextNode(Me)),we.head.appendChild(Be),le&&we.body.classList.add(...le.split(" "));const Ue=we.querySelectorAll("canvas");for(let Ae=0;Ae<B.length;++Ae){const Ce=B[Ae],ct=Ue[Ae];if(ct===void 0){E({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",Ce],suppressErrors:ke});continue}const Ge=ct.getContext("2d");Ge&&Ge.drawImage(Ce,0,0)}for(let Ae=0;Ae<$.length;Ae++){const Ce=$[Ae],ct=Ce.getAttribute("src");if(ct){const Ge=new Image;Ge.onload=()=>{y(Ce)},Ge.onerror=(pt,ft,Ot,ps,As)=>{y(Ce,["Error loading <img>",Ce,"Error",As])},Ge.src=ct}else y(Ce,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',Ce])}for(let Ae=0;Ae<Q.length;Ae++){const Ce=Q[Ae];Ce.preload="auto";const ct=Ce.getAttribute("poster");if(ct){const Ge=new Image;Ge.onload=()=>{y(Ce)},Ge.onerror=(pt,ft,Ot,ps,As)=>{y(Ce,["Error loading video poster",ct,"for video",Ce,"Error:",As])},Ge.src=ct}else Ce.readyState>=2?y(Ce):Ce.src?(Ce.onloadeddata=()=>{y(Ce)},Ce.onerror=(Ge,pt,ft,Ot,ps)=>{y(Ce,["Error loading video",Ce,"Error",ps])},Ce.onstalled=()=>{y(Ce,["Loading video stalled, skipping",Ce])}):y(Ce,["Error loading video, `src` is empty",Ce])}const Rt="select",K=I.querySelectorAll(Rt),Ne=we.querySelectorAll(Rt);for(let Ae=0;Ae<K.length;Ae++)Ne[Ae].value=K[Ae].value;if(!J){const Ae=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let Ce=0,ct=Ae.length;Ce<ct;++Ce){const Ge=Ae[Ce];if(Ge.tagName.toLowerCase()==="style"){const pt=we.createElement(Ge.tagName),ft=Ge.sheet;if(ft){let Ot="";try{const ps=ft.cssRules.length;for(let As=0;As<ps;++As)typeof ft.cssRules[As].cssText=="string"&&(Ot+=`${ft.cssRules[As].cssText}\r
`)}catch(ps){E({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",Ge,`Original error: ${h(ps).message}`],level:"warning"})}pt.setAttribute("id",`react-to-print-${Ce}`),ue&&pt.setAttribute("nonce",ue),pt.appendChild(we.createTextNode(Ot)),we.head.appendChild(pt)}}else if(Ge.getAttribute("href"))if(Ge.hasAttribute("disabled"))E({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",Ge],level:"warning"}),y(Ge);else{const pt=we.createElement(Ge.tagName);for(let ft=0,Ot=Ge.attributes.length;ft<Ot;++ft){const ps=Ge.attributes[ft];ps&&pt.setAttribute(ps.nodeName,(xe=ps.nodeValue)!==null&&xe!==void 0?xe:"")}pt.onload=()=>{y(pt)},pt.onerror=(ft,Ot,ps,As,bl)=>{y(pt,["Failed to load",pt,"Error:",bl])},ue&&pt.setAttribute("nonce",ue),we.head.appendChild(pt)}else E({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",Ge],level:"warning"}),y(Ge)}}}re===0&&b(D,U)}function T({bodyClass:D,contentRef:y,copyShadowRoots:P,documentTitle:U,fonts:F,ignoreGlobalStyles:Z,nonce:ae,onAfterPrint:H,onBeforePrint:xe,onPrintError:I,pageStyle:ee,preserveAfterPrint:$,print:Q,printIframeProps:re,suppressErrors:B}){return(0,S.useCallback)(G=>{function J(){const oe={bodyClass:D,contentRef:y,copyShadowRoots:P,documentTitle:U,fonts:F,ignoreGlobalStyles:Z,nonce:ae,onAfterPrint:H,onPrintError:I,pageStyle:ee,preserveAfterPrint:$,print:Q,suppressErrors:B},ue=(function(we){const Se=document.createElement("iframe");return Se.width=`${document.documentElement.clientWidth}px`,Se.height=`${document.documentElement.clientHeight}px`,Se.style.position="absolute",Se.style.top=`-${document.documentElement.clientHeight+100}px`,Se.style.left=`-${document.documentElement.clientWidth+100}px`,Se.id=_,Se.srcdoc="<!DOCTYPE html>",we&&(we.allow&&(Se.allow=we.allow),we.referrerPolicy!==void 0&&(Se.referrerPolicy=we.referrerPolicy),we.sandbox!==void 0&&(Se.sandbox=we.sandbox)),Se})(re),ke=(function(we,Se){const{contentRef:Me,fonts:Be,ignoreGlobalStyles:Ue,suppressErrors:Rt}=Se,K=(function({contentRef:pt,optionalContent:ft,suppressErrors:Ot}){return ft&&typeof ft=="function"?(pt&&E({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),ft()):pt?pt.current:void E({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:Ot})})({contentRef:Me,optionalContent:we,suppressErrors:Rt});if(!K)return;const Ne=K.cloneNode(!0),Ae=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),Ce=Ne.querySelectorAll("img"),ct=Ne.querySelectorAll("video"),Ge=Be?Be.length:0;return{contentNode:K,clonedContentNode:Ne,clonedImgNodes:Ce,clonedVideoNodes:ct,numResourcesToLoad:(Ue?0:Ae.length)+Ce.length+ct.length+Ge,originalCanvasNodes:K.querySelectorAll("canvas")}})(G,oe);if(!ke)return void E({messages:["There is nothing to print"],suppressErrors:B});const ye=(function(we,Se,Me){const{suppressErrors:Be}=we,Ue=[],Rt=[];return function(K,Ne){Ue.includes(K)?E({level:"debug",messages:["Tried to mark a resource that has already been handled",K],suppressErrors:Be}):(Ne?(E({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...Ne],suppressErrors:Be}),Rt.push(K)):Ue.push(K),Ue.length+Rt.length===Se&&b(Me,we))}})(oe,ke.numResourcesToLoad,ue);(function(we,Se,Me,Be){we.onload=()=>{k(we,Se,Me,Be)},document.body.appendChild(we)})(ue,ye,ke,oe)}z($,!0),xe?xe().then(()=>{J()}).catch(oe=>{I?.("onBeforePrint",h(oe))}):J()},[D,y,P,U,F,Z,ae,H,xe,I,ee,$,Q,B])}return j})()})})(Qc)),Qc.exports}var Rm=DN();const RN=()=>{const[n,m]=f.useState([]),[c,u]=f.useState([]),[g,v]=f.useState(!0),[j,S]=f.useState({grade:"ALL",min_balance:1,search:""}),_=f.useRef();f.useEffect(()=>{E(),z()},[]),f.useEffect(()=>{const A=setTimeout(()=>{z()},500);return()=>clearTimeout(A)},[j.grade,j.min_balance]);const E=async()=>{try{const A=await V.get("/api/grades/");u(A.data.grades||[])}catch(A){console.error("Error fetching grades:",A)}},z=async()=>{v(!0);try{const A=await V.get("/api/finance/arrears/",{params:{grade:j.grade,min_balance:j.min_balance}});m(A.data.students||[])}catch(A){console.error("Error fetching arrears:",A)}finally{v(!1)}},h=Rm.useReactToPrint({contentRef:_,documentTitle:`Fee_Arrears_Report_${new Date().toISOString().split("T")[0]}`}),b=n.filter(A=>A.name.toLowerCase().includes(j.search.toLowerCase())||A.admission_number.toLowerCase().includes(j.search.toLowerCase())),C=n.reduce((A,M)=>A+M.balance,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between bg-white dark:bg-slate-900/40 backdrop-blur-md p-6 rounded-[2rem] border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 w-full lg:w-auto",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(jt,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search name or admission...",className:"w-full bg-slate-50 dark:bg-slate-800/50 border-none rounded-2xl py-3 pl-12 pr-4 text-sm focus:ring-2 focus:ring-indigo-500/20 transition-all font-bold",value:j.search,onChange:A=>S(M=>({...M,search:A.target.value}))})]}),e.jsxs("select",{className:"bg-slate-50 dark:bg-slate-800/50 border-none rounded-2xl py-3 px-6 text-sm font-black uppercase tracking-widest text-slate-600 dark:text-slate-300 focus:ring-2 focus:ring-indigo-500/20",value:j.grade,onChange:A=>S(M=>({...M,grade:A.target.value})),children:[e.jsx("option",{value:"ALL",children:"All Classes"}),c.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]}),e.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 dark:bg-slate-800/50 px-4 py-3 rounded-2xl border border-transparent hover:border-slate-200 dark:hover:border-slate-700 transition-all",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Min Balance:"}),e.jsx("input",{type:"number",className:"bg-transparent border-none p-0 w-20 text-sm font-black focus:ring-0",value:j.min_balance,onChange:A=>S(M=>({...M,min_balance:A.target.value}))})]})]}),e.jsx("div",{className:"flex items-center gap-3 w-full lg:w-auto",children:e.jsxs(W,{variant:"outline",onClick:h,className:"flex-1 lg:flex-initial h-12 rounded-2xl border-slate-200 dark:border-slate-800 font-black uppercase tracking-widest text-[11px] gap-2",children:[e.jsx(Fn,{size:16})," Print Report"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-indigo-600 rounded-[2rem] p-8 text-white shadow-lg shadow-indigo-500/20",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] opacity-80 mb-2",children:"Total Arrears"}),e.jsxs("h2",{className:"text-4xl font-black tracking-tighter",children:["KES ",C.toLocaleString()]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-[10px] font-bold bg-white/10 w-fit px-3 py-1 rounded-full",children:[e.jsx(Ie,{size:12})," ",n.length," Students listed"]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2rem] p-8 border border-slate-200 dark:border-slate-800",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-2",children:"Selected Class"}),e.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white",children:j.grade==="ALL"?"Platform Wide":c.find(A=>A.id.toString()===j.grade.toString())?.name||"Loading..."})]}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-[2rem] p-8 border border-slate-200 dark:border-slate-800 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-2",children:"Filters Applied"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"px-3 py-1 bg-slate-100 dark:bg-slate-800 rounded-full text-[10px] font-black uppercase tracking-tighter",children:j.grade==="ALL"?"All Grades":"1 Grade"}),e.jsxs("span",{className:"px-3 py-1 bg-slate-100 dark:bg-slate-800 rounded-full text-[10px] font-black uppercase tracking-tighter",children:["Min KES ",parseInt(j.min_balance).toLocaleString()]})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-[2rem] border border-slate-200 dark:border-slate-800 overflow-hidden shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-800/50 text-[10px] font-black uppercase tracking-widest text-slate-500",children:[e.jsx("th",{className:"px-8 py-5",children:"Student Information"}),e.jsx("th",{className:"px-8 py-5",children:"Term 1"}),e.jsx("th",{className:"px-8 py-5",children:"Term 2"}),e.jsx("th",{className:"px-8 py-5",children:"Term 3"}),e.jsx("th",{className:"px-8 py-5",children:"Yearly Fees"}),e.jsx("th",{className:"px-8 py-5 text-right",children:"Balance Due"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:g?e.jsx("tr",{children:e.jsxs("td",{colSpan:"6",className:"px-8 py-20 text-center",children:[e.jsx("div",{className:"inline-block w-8 h-8 border-4 border-indigo-600/20 border-t-indigo-600 rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-xs font-black uppercase tracking-widest text-slate-400",children:"Fetching Records..."})]})}):b.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"6",className:"px-8 py-20 text-center",children:[e.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ot,{className:"text-slate-300",size:32})}),e.jsx("p",{className:"text-sm font-black text-slate-400 uppercase tracking-widest",children:"No arrears found matching filters"})]})}):b.map((A,M)=>e.jsxs(he.tr,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:M*.03},className:"group hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:[e.jsx("td",{className:"px-8 py-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center font-black text-xs text-slate-500 group-hover:bg-indigo-600 group-hover:text-white transition-all",children:A.name[0]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-black text-slate-900 dark:text-white",children:A.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-tighter",children:["Adm: ",A.admission_number]}),e.jsx("span",{className:"w-1 h-1 bg-slate-300 rounded-full"}),e.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-tighter bg-indigo-500/10 px-1.5 rounded",children:A.grade})]})]})]})}),e.jsxs("td",{className:"px-8 py-5 text-xs font-bold text-slate-600 dark:text-slate-400",children:["KES ",A.term1_fees.toLocaleString()]}),e.jsxs("td",{className:"px-8 py-5 text-xs font-bold text-slate-600 dark:text-slate-400",children:["KES ",A.term2_fees.toLocaleString()]}),e.jsxs("td",{className:"px-8 py-5 text-xs font-bold text-slate-600 dark:text-slate-400",children:["KES ",A.term3_fees.toLocaleString()]}),e.jsxs("td",{className:"px-8 py-5 text-xs font-black text-slate-900 dark:text-white",children:["KES ",A.yearly_fees.toLocaleString()]}),e.jsx("td",{className:"px-8 py-5 text-right",children:e.jsxs("span",{className:"text-sm font-black text-rose-600 bg-rose-50 dark:bg-rose-500/10 px-4 py-2 rounded-2xl ring-1 ring-rose-600/20",children:["KES ",A.balance.toLocaleString()]})})]},A.id))})]})})}),e.jsx("div",{style:{display:"none"},children:e.jsxs("div",{ref:_,className:"p-12 text-slate-900",style:{fontFamily:"'Inter', sans-serif"},children:[e.jsxs("div",{className:"flex justify-between items-start mb-12 border-b-2 border-slate-900 pb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight",children:"Fee Arrears Report"}),e.jsxs("p",{className:"text-slate-500 font-bold uppercase tracking-widest text-xs mt-2",children:["Class: ",j.grade==="ALL"?"All Classes":b[0]?.grade||j.grade]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-black uppercase text-slate-400",children:"Generated On"}),e.jsx("p",{className:"font-bold",children:new Date().toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})})]})]}),e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-900 text-white text-[10px] uppercase font-black tracking-widest",children:[e.jsx("th",{className:"p-4 border border-slate-900 text-left",children:"Student"}),e.jsx("th",{className:"p-4 border border-slate-900 text-left",children:"Adm No"}),e.jsx("th",{className:"p-4 border border-slate-900 text-left",children:"Class"}),e.jsx("th",{className:"p-4 border border-slate-900 text-right",children:"Term 1"}),e.jsx("th",{className:"p-4 border border-slate-900 text-right",children:"Term 2"}),e.jsx("th",{className:"p-4 border border-slate-900 text-right",children:"Term 3"}),e.jsx("th",{className:"p-4 border border-slate-900 text-right",children:"Yearly"}),e.jsx("th",{className:"p-4 border border-slate-900 text-right",children:"Balance"})]})}),e.jsx("tbody",{children:b.map(A=>e.jsxs("tr",{className:"text-[11px] font-medium border-b border-slate-200",children:[e.jsx("td",{className:"p-4 font-bold border-x border-slate-100",children:A.name}),e.jsx("td",{className:"p-4 border-r border-slate-100",children:A.admission_number}),e.jsx("td",{className:"p-4 border-r border-slate-100",children:A.grade}),e.jsx("td",{className:"p-4 text-right border-r border-slate-100",children:A.term1_fees.toLocaleString()}),e.jsx("td",{className:"p-4 text-right border-r border-slate-100",children:A.term2_fees.toLocaleString()}),e.jsx("td",{className:"p-4 text-right border-r border-slate-100",children:A.term3_fees.toLocaleString()}),e.jsx("td",{className:"p-4 text-right font-bold border-r border-slate-100",children:A.yearly_fees.toLocaleString()}),e.jsx("td",{className:"p-4 text-right font-black text-rose-600 border-x border-slate-100 bg-rose-50/30",children:A.balance.toLocaleString()})]},A.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-slate-50 font-black",children:[e.jsx("td",{colSpan:"7",className:"p-4 text-right uppercase tracking-widest text-xs",children:"Total Outstanding Arrears"}),e.jsxs("td",{className:"p-4 text-right text-lg text-rose-600 bg-rose-50 border-2 border-rose-600 uppercase",children:["KES ",C.toLocaleString()]})]})})]}),e.jsxs("div",{className:"mt-20 flex justify-between",children:[e.jsx("div",{className:"text-center w-64 pt-4 border-t border-slate-300",children:e.jsx("p",{className:"text-[10px] font-black uppercase text-slate-400",children:"Finance Manager Signature"})}),e.jsx("div",{className:"text-center w-64 pt-4 border-t border-slate-300",children:e.jsx("p",{className:"text-[10px] font-black uppercase text-slate-400",children:"School Principal Signature"})})]}),e.jsx("div",{className:"mt-12 text-center text-[8px] text-slate-300 font-bold uppercase tracking-[0.5em]",children:"Internal Use Only - Confidential Data"})]})})]})},$c=({title:n,value:m,subtext:c,icon:u,color:g,trend:v,delay:j,net:S})=>e.jsx(he.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:j,duration:.4},className:"p-6 rounded-3xl transition-all duration-300 group hover:bg-slate-100 dark:hover:bg-white/5",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"space-y-4 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl ${g} flex items-center justify-center shadow-lg shadow-${g.split("-")[1]}-500/20 group-hover:scale-110 transition-transform`,children:e.jsx(u,{size:20,className:"text-white"})}),e.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-400 dark:text-slate-500",children:n})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-2xl font-black tracking-tight ${S?m.includes("-")?"text-rose-600":"text-emerald-500":"text-slate-900 dark:text-white"}`,children:m}),e.jsx("p",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase mt-1",children:c})]})]}),v!==void 0&&e.jsxs("div",{className:`flex items-center gap-1 px-2.5 py-1 rounded-full text-[10px] font-black ${v>=0?"text-emerald-500 bg-emerald-500/10":"text-rose-500 bg-rose-500/10"}`,children:[v>=0?e.jsx(Dt,{size:12}):e.jsx(Ca,{size:12}),e.jsxs("span",{children:[Math.abs(v),"%"]})]})]})}),ON=()=>{Le();const{config:n,hasFeature:m}=Nt(),[c,u]=f.useState(null),[g,v]=f.useState([]),[j,S]=f.useState({}),[_,E]=f.useState(!1),[z,h]=f.useState(!1),[b,C]=f.useState([]),[A,M]=f.useState(!1),[k,T]=f.useState(!0),[D,y]=f.useState("overview"),P=m("TRANSPORT_MANAGEMENT"),U=m("FOOD_MANAGEMENT");f.useEffect(()=>{F()},[]),f.useEffect(()=>{D==="transactions"&&Z("ALL"),D==="expenses"&&Z("EXPENSE")},[D]);const F=async()=>{c||T(!0);try{const $=await V.get("/api/finance/");u($.data)}catch($){console.error("Error fetching finance:",$)}finally{T(!1)}},Z=async($="ALL")=>{M(!0);try{const Q=await V.get(`/api/finance/transactions/all/?source=${$}`);C(Q.data.transactions||[])}catch(Q){console.error("Error fetching all transactions:",Q)}finally{M(!1)}},ae=({id:$,label:Q,icon:re})=>e.jsxs("button",{onClick:()=>y($),className:`flex items-center gap-2 px-4 py-2 text-[11px] font-black uppercase tracking-widest transition-all rounded-xl whitespace-nowrap min-w-fit ${D===$?"text-indigo-400 bg-indigo-500/10 border border-indigo-500/20 shadow-lg shadow-indigo-500/5":"text-slate-400 hover:text-slate-200 hover:bg-slate-800 border border-transparent"}`,children:[e.jsx(re,{size:14,className:D===$?"text-indigo-400":"text-slate-500"}),Q]});if(k&&!c)return e.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-50 dark:bg-slate-950",children:e.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-slate-200 dark:border-slate-800 border-t-indigo-600 animate-spin"})});if(!c)return null;const H=c.summary||{},xe=c.chart_data||[],I=H.total_expenses||0,ee=H.expense_breakdown||{};return g.reduce(($,Q)=>($[Q.grade]||($[Q.grade]={}),$[Q.grade][Q.term]||($[Q.grade][Q.term]=[]),$[Q.grade][Q.term].push(Q),$),{}),e.jsxs("div",{className:"p-4 md:p-8 max-w-[1400px] mx-auto space-y-6 min-h-screen bg-slate-50/50 dark:bg-slate-950/20 text-slate-900 dark:text-white",children:[(k||z)&&e.jsx("div",{className:"fixed top-0 left-0 right-0 h-1 z-[60] overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-600 animate-progress w-full shadow-[0_0_10px_#4f46e5]"})}),e.jsxs("div",{className:"space-y-6 pb-2",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsx("div",{className:"space-y-1",children:e.jsxs("h1",{className:"text-4xl font-black tracking-tight flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-10 bg-indigo-600 rounded-full"}),"Finance Hub"]})})}),e.jsxs("div",{className:"flex flex-wrap items-center bg-slate-900/50 backdrop-blur-md p-1.5 rounded-2xl border border-slate-800 shadow-xl gap-1 overflow-x-auto no-scrollbar",children:[e.jsx(ae,{id:"overview",label:"Overview",icon:Bn}),e.jsx(ae,{id:"transactions",label:"Collections",icon:hs}),e.jsx(ae,{id:"payroll",label:"Payroll",icon:Ie}),e.jsx(ae,{id:"expenses",label:"Expenses",icon:Ca}),e.jsx(ae,{id:"students",label:"Student Fees",icon:It}),e.jsx(ae,{id:"arrears",label:"Fee Balances",icon:Wt}),P&&e.jsx(ae,{id:"transport",label:"Transport",icon:sa}),U&&e.jsx(ae,{id:"food",label:"Catering",icon:Hs})]})]}),e.jsx("div",{className:"relative",children:e.jsxs(vt,{mode:"wait",children:[D==="overview"&&e.jsxs(he.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx($c,{title:"Net Balance",value:`KES ${((H.net_profit||0)/1e3).toFixed(1)}k`,subtext:"Income - Expenses",icon:it,color:"bg-indigo-600",net:!0,delay:0}),e.jsx($c,{title:"Total Income",value:`KES ${((H.total_revenue||0)/1e3).toFixed(1)}k`,subtext:"Fees & others",icon:Dt,color:"bg-emerald-600",trend:12,delay:.1}),e.jsx($c,{title:"Total Expenses",value:`KES ${(I/1e3).toFixed(1)}k`,subtext:"Salaries & Ops",icon:Ca,color:"bg-rose-600",delay:.2}),e.jsx($c,{title:"Runway",value:`${H.runway||0} Mo`,subtext:"Burn rate based",icon:hs,color:"bg-amber-600",delay:.3})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsxs("div",{className:"lg:col-span-8 bg-white dark:bg-slate-900/40 backdrop-blur-md p-8 rounded-[2rem] border border-slate-200 dark:border-slate-800 shadow-sm relative overflow-hidden",children:[e.jsx("h3",{className:"text-xl font-black mb-6",children:"Cash Flow"}),e.jsx("div",{className:"h-[400px] w-full min-h-[400px]",children:e.jsx(es,{width:"100%",height:400,minHeight:400,children:e.jsxs(Bi,{data:xe.length>0?xe:[{month:"N/A",revenue:0,expenses:0}],margin:{left:-20,top:10},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"gIncome",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"gExpense",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#f43f5e",stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:"#f43f5e",stopOpacity:0})]})]}),e.jsx(pl,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0",strokeOpacity:.05}),e.jsx(Ea,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:10,fontWeight:800},dy:15}),e.jsx(Aa,{axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:10,fontWeight:800},tickFormatter:$=>`${$/1e3}k`}),e.jsx(ts,{contentStyle:{borderRadius:"20px",border:"none",background:"rgba(15, 23, 42, 0.95)",backdropFilter:"blur(10px)",padding:"15px",color:"#fff"}}),e.jsx(Zl,{type:"monotone",dataKey:"revenue",stroke:"#6366f1",strokeWidth:6,fill:"url(#gIncome)",animationDuration:1e3,dot:{r:4,fill:"#6366f1",strokeWidth:2,stroke:"#fff"}}),e.jsx(Zl,{type:"monotone",dataKey:"expenses",stroke:"#f43f5e",strokeWidth:6,fill:"url(#gExpense)",animationDuration:1e3,dot:{r:4,fill:"#f43f5e",strokeWidth:2,stroke:"#fff"}})]})})})]}),e.jsxs("div",{className:"lg:col-span-4 bg-white dark:bg-slate-900/40 p-8 rounded-[2rem] border border-slate-200 dark:border-slate-800 shadow-sm flex flex-col",children:[e.jsx("h3",{className:"text-xl font-black mb-6",children:"Breakdown"}),e.jsx("div",{className:"flex-1 space-y-8",children:[{name:"Salaries",value:ee.salaries||0,color:"#6366f1"},P&&{name:"Transport",value:ee.transport||0,color:"#3b82f6"},U&&{name:"Food",value:ee.food||0,color:"#f59e0b"},{name:"Other",value:ee.other||0,color:"#94a3b8"}].filter(Boolean).map(($,Q)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:$.name}),e.jsxs("p",{className:"text-sm font-black",children:["KES ",($.value/1e3).toFixed(1),"k"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full",style:{width:I>0?`${$.value/I*100}%`:0,backgroundColor:$.color}})})]},Q))})]})]})]},"overview"),D==="transactions"&&e.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2rem] border border-slate-200 dark:border-slate-800 overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-8 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-black",children:"Ledger"}),e.jsxs("select",{onChange:$=>Z($.target.value),className:"bg-slate-100 dark:bg-slate-800 p-2 rounded-xl text-xs font-bold focus:outline-none text-slate-900 dark:text-white",children:[e.jsx("option",{value:"ALL",children:"All Sources"}),e.jsx("option",{value:"FEES",children:"Fees"}),e.jsx("option",{value:"TRANSPORT",children:"Transport"}),e.jsx("option",{value:"FOOD",children:"Food"}),e.jsx("option",{value:"EXPENSE",children:"Expenses"})]})]}),e.jsx("div",{className:"overflow-x-auto min-h-[400px]",children:A?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-slate-200 border-t-indigo-600 animate-spin"})}):e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50",children:e.jsxs("tr",{className:"text-[10px] font-black uppercase text-slate-500",children:[e.jsx("th",{className:"px-8 py-4",children:"Title"}),e.jsx("th",{className:"px-8 py-4",children:"Ref"}),e.jsx("th",{className:"px-8 py-4 text-right",children:"Amount"}),e.jsx("th",{className:"px-8 py-4",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:b.map(($,Q)=>e.jsxs("tr",{className:"hover:bg-slate-50/50",children:[e.jsx("td",{className:"px-8 py-4 font-bold text-xs",children:$.title}),e.jsx("td",{className:"px-8 py-4 text-xs font-mono",children:$.reference}),e.jsxs("td",{className:`px-8 py-4 text-right text-xs font-black ${$.type==="OUTFLOW"?"text-rose-600":"text-emerald-600"}`,children:["KES ",$.amount.toLocaleString()]}),e.jsx("td",{className:"px-8 py-4 text-xs",children:$.date})]},Q))})]})})]})},"transactions"),D==="expenses"&&e.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2rem] border border-slate-200 dark:border-slate-800 overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-8 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-black",children:"Expense Journal"}),e.jsxs(W,{variant:"primary",className:"h-9 text-xs font-semibold bg-rose-600 border-none px-4",children:[e.jsx(nt,{size:14,className:"mr-2"})," Record Expense"]})]}),e.jsx("div",{className:"overflow-x-auto min-h-[400px]",children:A?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-slate-200 border-t-rose-600 animate-spin"})}):e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50",children:e.jsxs("tr",{className:"text-[10px] font-black uppercase text-slate-500",children:[e.jsx("th",{className:"px-8 py-4",children:"Title"}),e.jsx("th",{className:"px-8 py-4",children:"Ref"}),e.jsx("th",{className:"px-8 py-4 text-right",children:"Amount"}),e.jsx("th",{className:"px-8 py-4",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:b.filter($=>$.type==="OUTFLOW"||$.source==="EXPENSE").map(($,Q)=>e.jsxs("tr",{className:"hover:bg-slate-50/50",children:[e.jsx("td",{className:"px-8 py-4 font-bold text-xs",children:$.title}),e.jsx("td",{className:"px-8 py-4 text-xs font-mono",children:$.reference}),e.jsxs("td",{className:"px-8 py-4 text-right text-xs font-black text-rose-600",children:["KES ",$.amount.toLocaleString()]}),e.jsx("td",{className:"px-8 py-4 text-xs",children:$.date})]},Q))})]})})]})},"expenses"),D==="students"&&e.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},children:e.jsx(LN,{})},"students"),D==="arrears"&&e.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},children:e.jsx(RN,{})},"arrears"),D==="payroll"&&e.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},children:e.jsx(a0,{})},"payroll"),D==="transport"&&e.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},children:e.jsx(zN,{})},"transport"),D==="food"&&e.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},children:e.jsx(TN,{})},"food")]})})]})},PN=()=>{const[n,m]=f.useState([]),[c,u]=f.useState(!0),[g,v]=f.useState(""),j=Le(),[S,_]=f.useState("ALL"),[E,z]=f.useState("ALL"),[h,b]=f.useState("NAME_ASC"),[C,A]=f.useState([]);f.useEffect(()=>{M()},[]);const M=async()=>{u(!0);try{const y=(await V.get("/api/finance/students/")).data.students||[];m(y);const P=[...new Set(y.map(U=>U.grade))].sort();A(P)}catch(D){console.error(D)}finally{u(!1)}},T=[...(n||[]).filter(D=>{const y=(D.full_name||"").toLowerCase().includes(g.toLowerCase())||(D.admission_number||"").toLowerCase().includes(g.toLowerCase()),P=E==="ALL"||D.grade===E;let U=!0;return S==="DEBTOR"?U=D.balance>0:S==="CREDIT"?U=D.balance<0:S==="SETTLED"&&(U=D.balance===0),y&&P&&U})].sort((D,y)=>h==="NAME_ASC"?D.full_name.localeCompare(y.full_name):h==="NAME_DESC"?y.full_name.localeCompare(D.full_name):h==="BALANCE_HIGH"?y.balance-D.balance:h==="BALANCE_LOW"?D.balance-y.balance:0);return e.jsxs("div",{className:"space-y-8 min-h-screen",children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 h-[600px] bg-gradient-to-br from-indigo-500/5 to-transparent dark:from-indigo-900/10 pointer-events-none -z-10"}),e.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center justify-between gap-6 relative z-10",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-4xl font-black text-slate-900 dark:text-white tracking-tighter flex items-center gap-4",children:"Student Accounts"}),e.jsx("p",{className:"text-slate-500 font-bold uppercase text-[10px] tracking-[0.2em] opacity-80",children:"Institutional Billing & Payment Matrix"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full xl:w-auto",children:[e.jsxs("div",{className:"relative w-full sm:w-96 group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none group-focus-within:text-indigo-500 transition-colors",children:e.jsx(jt,{size:18,className:"text-slate-400"})}),e.jsx("input",{type:"text",placeholder:"Search by name or admission number...",value:g,onChange:D=>v(D.target.value),className:"w-full pl-12 pr-4 py-4 bg-white/80 dark:bg-slate-900/80 backdrop-blur-xl border-2 border-slate-100 dark:border-slate-800 rounded-[2rem] shadow-xl shadow-slate-200/20 dark:shadow-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none font-bold text-sm transition-all"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-slate-100/50 dark:bg-slate-800/50 backdrop-blur-md rounded-[1.8rem] border border-slate-200 dark:border-slate-700 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 flex-1 sm:flex-none",children:[e.jsx(Mg,{size:14,className:"text-slate-400"}),e.jsxs("select",{value:E,onChange:D=>z(D.target.value),className:"bg-transparent border-none text-[10px] font-black uppercase text-slate-700 dark:text-slate-300 cursor-pointer outline-none p-0 min-w-[80px]",children:[e.jsx("option",{value:"ALL",children:"All Grades"}),C.map(D=>e.jsx("option",{value:D,children:D},D))]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 flex-1 sm:flex-none",children:[e.jsx(za,{size:14,className:"text-slate-400"}),e.jsxs("select",{value:S,onChange:D=>_(D.target.value),className:"bg-transparent border-none text-[10px] font-black uppercase text-slate-700 dark:text-slate-300 cursor-pointer outline-none p-0",children:[e.jsx("option",{value:"ALL",children:"All Status"}),e.jsx("option",{value:"DEBTOR",children:"Debtor"}),e.jsx("option",{value:"CREDIT",children:"Is Credit"}),e.jsx("option",{value:"SETTLED",children:"Settled"})]})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 px-3 py-1.5 opacity-60",children:[e.jsx(Dg,{size:14,className:"text-slate-400"}),e.jsxs("select",{value:h,onChange:D=>b(D.target.value),className:"bg-transparent border-none text-[10px] font-black uppercase text-slate-500 dark:text-slate-400 cursor-pointer outline-none p-0",children:[e.jsx("option",{value:"NAME_ASC",children:"Name (A-Z)"}),e.jsx("option",{value:"NAME_DESC",children:"Name (Z-A)"}),e.jsx("option",{value:"BALANCE_HIGH",children:"Max Debt"}),e.jsx("option",{value:"BALANCE_LOW",children:"Min Debt"})]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.jsx(vt,{mode:"popLayout",children:T.map((D,y)=>{const P=D.total_billed||0,U=D.total_paid||0,F=P>0?Math.min(100,U/P*100):U>0?100:0,Z=D.balance>0,ae=D.balance<0;return e.jsxs(he.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,delay:y*.02},onClick:()=>j(`/finance-portal/accounts/${D.id}`),className:"group relative bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-[2.5rem] p-6 shadow-sm hover:shadow-2xl hover:shadow-indigo-500/10 transition-all cursor-pointer overflow-hidden flex flex-col h-full",children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 -mr-16 -mt-16 rounded-full blur-3xl opacity-10 transition-opacity group-hover:opacity-20 ${Z?"bg-rose-500":ae?"bg-emerald-500":"bg-indigo-500"}`}),e.jsxs("div",{className:"flex items-start gap-4 mb-6 relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-16 w-16 rounded-3xl bg-slate-100 dark:bg-slate-800 p-0.5 overflow-hidden shadow-inner group-hover:scale-105 transition-transform duration-500",children:D.avatar?e.jsx("img",{src:D.avatar,alt:"",className:"h-full w-full object-cover rounded-[1.4rem]"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-slate-400",children:e.jsx(Qe,{size:32})})}),e.jsx("div",{className:`absolute -bottom-1 -right-1 h-5 w-5 rounded-full border-4 border-white dark:border-slate-900 ${Z?"bg-rose-500":ae?"bg-emerald-500":"bg-indigo-500"}`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-black text-slate-900 dark:text-white leading-tight truncate group-hover:text-indigo-600 transition-colors",children:D.full_name}),e.jsx("p",{className:"text-[10px] font-black font-mono text-slate-400 mt-1 uppercase tracking-tighter",children:D.admission_number}),e.jsx("div",{className:"mt-2 text-[10px] font-black px-2 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400 rounded-lg inline-block uppercase tracking-wider",children:D.grade})]})]}),e.jsxs("div",{className:"mt-auto pt-6 border-t border-slate-50 dark:border-slate-800/50",children:[e.jsxs("div",{className:"flex justify-between items-end mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none mb-2",children:"Current Balance"}),e.jsxs("h3",{className:`text-xl font-black tracking-tight ${Z?"text-rose-600 dark:text-rose-400":ae?"text-emerald-600":"text-slate-900 dark:text-white"}`,children:["KES ",D.balance.toLocaleString()]})]}),e.jsx("div",{className:`px-3 py-1.5 rounded-2xl text-[10px] font-black uppercase tracking-wider ${Z?"bg-rose-50 text-rose-600 dark:bg-rose-500/10 dark:text-rose-400":ae?"bg-emerald-50 text-emerald-600 dark:bg-emerald-500/10 dark:text-emerald-400":"bg-slate-50 text-slate-500 dark:bg-slate-800 dark:text-slate-400"}`,children:Z?"Owing":ae?"Credit":"Settled"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-black",children:[e.jsxs("span",{className:"text-slate-500",children:["PAID ",Math.round(F),"%"]}),e.jsxs("span",{className:"text-slate-400",children:["OF ",P.toLocaleString()]})]}),e.jsx("div",{className:"relative h-2 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx(he.div,{initial:{width:0},animate:{width:`${F}%`},transition:{duration:1,delay:.2},className:`absolute h-full rounded-full ${F>=100?"bg-emerald-500":"bg-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.5)]"}`})})]})]}),e.jsx("div",{className:"absolute inset-0 bg-indigo-600 opacity-0 group-hover:opacity-[0.02] transition-opacity pointer-events-none"}),e.jsx("div",{className:"absolute bottom-4 right-4 translate-y-8 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-300",children:e.jsx("div",{className:"bg-indigo-600 text-white p-2 rounded-xl shadow-lg shadow-indigo-500/30",children:e.jsx(ds,{size:20})})})]},D.id)})})}),T.length===0&&e.jsxs("div",{className:"text-center py-20 bg-slate-50/50 dark:bg-slate-900/50 rounded-[3rem] border border-dashed border-slate-200 dark:border-slate-800",children:[e.jsx(Qe,{size:48,className:"mx-auto text-slate-300 mb-4"}),e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white",children:"No students found"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Try adjusting your filters or search term"})]})]})},BN=()=>{const{id:n}=Zt(),m=Le(),[c,u]=f.useState(null),[g,v]=f.useState(!0),[j,S]=f.useState(!1),[_,E]=f.useState({type:"PAYMENT",amount:"",description:"",payment_method:"CASH",reference:""}),[z,h]=f.useState(!1);f.useEffect(()=>{b()},[n]);const b=async()=>{try{const y=await V.get(`/api/finance/students/${n}/`);u(y.data)}catch(y){console.error("Error fetching ledger",y)}finally{v(!1)}},C=async y=>{y.preventDefault(),h(!0);try{await V.post(`/api/finance/students/${n}/`,_),S(!1),E({type:"PAYMENT",amount:"",description:"",payment_method:"CASH",reference:""}),b()}catch{alert("Failed to record transaction")}finally{h(!1)}};if(g)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})});if(!c)return e.jsx("div",{className:"p-12 text-center text-slate-500 text-lg",children:"Student account not found."});const{student:A,transactions:M}=c,k=A.total_billed||0,T=A.total_paid||0,D=A.balance||0;return M.length>0&&M[0],e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-8 animate-fade-in-up",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>m("/finance-portal/accounts"),className:"p-2 -ml-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-500 transition-colors",children:e.jsx(fl,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Student Ledger"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Financial history and billing management"})]}),e.jsxs("div",{className:"ml-auto flex gap-3",children:[e.jsxs(W,{variant:"outline",className:"gap-2 hidden md:flex",children:[e.jsx(Ms,{size:18})," Export Statement"]}),e.jsxs(W,{onClick:()=>S(!0),className:"gap-2 bg-emerald-600 hover:bg-emerald-700 text-white shadow-lg shadow-emerald-600/20",children:[e.jsx(nt,{size:18})," New Transaction"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-700 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-24 bg-gradient-to-r from-emerald-600 to-teal-500 opacity-10"}),e.jsxs("div",{className:"relative flex flex-col items-center text-center",children:[e.jsx("div",{className:"h-28 w-28 rounded-full p-1 bg-white dark:bg-slate-800 shadow-md mb-4 ring-2 ring-emerald-100 dark:ring-emerald-900/30",children:e.jsx("div",{className:"h-full w-full rounded-full overflow-hidden bg-slate-100 dark:bg-slate-700",children:A.avatar?e.jsx("img",{src:A.avatar,alt:A.name,className:"h-full w-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full w-full text-slate-400",children:e.jsx(Qe,{size:48})})})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1",children:A.name}),e.jsx("p",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-3 py-1 rounded-full border border-emerald-100 dark:border-emerald-800/50",children:A.admission_number}),e.jsxs("div",{className:"mt-6 w-full grid grid-cols-2 gap-4 border-t border-slate-100 dark:border-slate-700 pt-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Grade"}),e.jsx("p",{className:"text-slate-900 dark:text-white font-medium",children:A.grade||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider font-semibold",children:"Status"}),e.jsx("p",{className:"text-slate-900 dark:text-white font-medium",children:"Active"})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-6",children:"Financial Overview"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-5 rounded-xl border ${D>0?"bg-amber-50 dark:bg-amber-900/10 border-amber-100 dark:border-amber-800/30":D<0?"bg-emerald-50 dark:bg-emerald-900/10 border-emerald-100 dark:border-emerald-800/30":"bg-slate-50 dark:bg-slate-800 border-slate-100 dark:border-slate-700"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:`text-xs font-bold uppercase tracking-wide ${D>0?"text-amber-600 dark:text-amber-400":D<0?"text-emerald-600 dark:text-emerald-400":"text-slate-500"}`,children:"Current Balance"}),D>0?e.jsx(Dt,{size:16,className:"text-amber-500"}):D<0?e.jsx(Ca,{size:16,className:"text-emerald-500"}):e.jsx(Ye,{size:16,className:"text-slate-400"})]}),e.jsxs("div",{className:`text-3xl font-extrabold ${D>0?"text-amber-700 dark:text-amber-400":D<0?"text-emerald-700 dark:text-emerald-400":"text-slate-700 dark:text-slate-300"}`,children:[D>0?"":D<0?"+":"",Math.abs(D).toLocaleString()," KES"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:D>0?"Student owes this amount":D<0?"Student has excess credit":"Account is fully settled"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-slate-50 dark:bg-slate-900 border border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-slate-500",children:[e.jsx(Rn,{size:14}),e.jsx("span",{className:"text-xs font-semibold uppercase",children:"Total Billed"})]}),e.jsx("p",{className:"text-lg font-bold text-slate-800 dark:text-white",children:k.toLocaleString()})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-slate-50 dark:bg-slate-900 border border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-slate-500",children:[e.jsx(Ss,{size:14}),e.jsx("span",{className:"text-xs font-semibold uppercase",children:"Total Paid"})]}),e.jsx("p",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:T.toLocaleString()})]})]})]})]})]}),e.jsx("div",{className:"lg:col-span-2 space-y-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Ze,{size:18,className:"text-emerald-500"}),"Transaction History"]}),e.jsxs("span",{className:"text-xs font-medium text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-md",children:[M.length," records"]})]}),e.jsx("div",{className:"overflow-x-auto flex-1",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Reference"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider text-right",children:"Amount"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[M.map(y=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group cursor-pointer",onClick:()=>m(`/finance-portal/transactions/${y.id}`),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500 font-medium",children:y.date}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:y.description}),e.jsxs("span",{className:"text-xs text-slate-400 hidden group-hover:inline-block transition-opacity",children:["Created via ",y.method]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs font-mono text-slate-500",children:y.reference||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold ${y.type==="INVOICE"?"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400 border border-blue-100 dark:border-blue-800":"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-800"}`,children:y.type==="INVOICE"?"BILLING":"PAYMENT"})}),e.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-right font-mono font-bold text-sm ${y.type==="INVOICE"?"text-slate-800 dark:text-slate-200":"text-emerald-600 dark:text-emerald-400"}`,children:[y.type==="PAYMENT"?"-":"",y.amount.toLocaleString()]})]},y.id)),M.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400 space-y-2",children:[e.jsx(Wt,{size:48,className:"opacity-20"}),e.jsx("p",{className:"font-medium",children:"No transactions found"}),e.jsx("p",{className:"text-xs",children:"Record a payment or invoice to get started"})]})})})]})]})})]})})]}),j&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-lg shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-700 transform transition-all scale-100",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Record Transaction"}),e.jsx("button",{onClick:()=>S(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:e.jsx(nt,{size:24,className:"rotate-45"})})]}),e.jsxs("form",{onSubmit:C,className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Transaction Type"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>E({..._,type:"PAYMENT",description:""}),className:`flex items-center justify-center gap-2 p-3 rounded-xl text-sm font-bold border-2 transition-all ${_.type==="PAYMENT"?"bg-emerald-50 border-emerald-500 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-400":"border-slate-100 dark:border-slate-800 text-slate-500 hover:border-slate-300 dark:hover:border-slate-700"}`,children:[e.jsx(Ss,{size:18})," Receive Payment"]}),e.jsxs("button",{type:"button",onClick:()=>E({..._,type:"INVOICE",description:""}),className:`flex items-center justify-center gap-2 p-3 rounded-xl text-sm font-bold border-2 transition-all ${_.type==="INVOICE"?"bg-blue-50 border-blue-500 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":"border-slate-100 dark:border-slate-800 text-slate-500 hover:border-slate-300 dark:hover:border-slate-700"}`,children:[e.jsx(Wt,{size:18})," Bill Student"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Amount (KES)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 font-bold",children:"Ksh"}),e.jsx("input",{type:"number",required:!0,className:"w-full pl-12 pr-4 py-3 border border-slate-300 dark:border-slate-700 rounded-xl dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-emerald-500 outline-none font-mono font-medium text-lg",value:_.amount,onChange:y=>E({..._,amount:y.target.value}),placeholder:"0.00"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Description (Optional)"}),e.jsx("input",{type:"text",className:"w-full p-3 border border-slate-300 dark:border-slate-700 rounded-xl dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-emerald-500 outline-none",value:_.description,onChange:y=>E({..._,description:y.target.value}),placeholder:_.type==="PAYMENT"?"e.g. Term 1 Fees":"e.g. Library Fine"})]}),_.type==="PAYMENT"&&e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl space-y-4 border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Payment Method"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["CASH","MPESA","BANK"].map(y=>e.jsx("button",{type:"button",onClick:()=>E({..._,payment_method:y}),className:`px-2 py-2 text-xs font-bold rounded-lg border ${_.payment_method===y?"bg-slate-800 text-white border-slate-800 dark:bg-white dark:text-slate-900 dark:border-white":"bg-white text-slate-600 border-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700"}`,children:y},y))})]}),_.payment_method!=="CASH"&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Reference Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-slate-300 dark:border-slate-700 rounded-xl dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-emerald-500 outline-none font-mono text-sm uppercase",value:_.reference,onChange:y=>E({..._,reference:y.target.value}),placeholder:_.payment_method==="MPESA"?"QDF23...":"Ref No."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>S(!1),className:"flex-1 px-4 py-3 text-slate-600 hover:bg-slate-100 border border-slate-200 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800 rounded-xl font-medium transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:z,className:"flex-1 px-4 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-bold shadow-lg shadow-emerald-500/20 transition-all disabled:opacity-70 disabled:cursor-not-allowed",children:z?"Processing...":"Confirm Transaction"})]})]})]})})]})},UN=()=>{const{id:n}=Zt(),m=Le(),{config:c}=Nt(),[u,g]=f.useState(null),[v,j]=f.useState(!0),S=f.useRef();f.useEffect(()=>{(async()=>{try{const b=await V.get(`/api/finance/transactions/${n}/`);g(b.data)}catch(b){console.error(b)}finally{j(!1)}})()},[n]);const _=Rm.useReactToPrint({contentRef:S,documentTitle:`Receipt_${u?.transaction?.id||"doc"}`});if(v)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})});if(!u)return e.jsx("div",{className:"p-12 text-center text-slate-500",children:"Transaction not found."});const{transaction:E,student:z}=u;return e.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto space-y-8 bg-slate-50 dark:bg-slate-950/20 min-h-screen",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 bg-white dark:bg-slate-900 p-4 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm print:hidden",children:[e.jsxs("button",{onClick:()=>m(-1),className:"flex items-center gap-2 text-slate-500 hover:text-slate-900 transition-colors font-medium",children:[e.jsx(fl,{size:18})," Back to Ledger"]}),e.jsx("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:e.jsxs(W,{variant:"outline",className:"flex-1 sm:flex-initial gap-2 border-slate-200 hover:bg-slate-50",onClick:_,children:[e.jsx(Fn,{size:18})," Print Receipt"]})})]}),e.jsx("div",{className:"flex justify-center items-start",children:e.jsxs("div",{ref:S,className:"w-full max-w-[210mm] bg-white text-slate-950 shadow-2xl overflow-hidden relative",style:{fontFamily:"'Inter', sans-serif",padding:"12mm"},children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-[0.02] pointer-events-none select-none overflow-hidden",children:e.jsx(ta,{size:400,strokeWidth:1})}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-indigo-600"}),e.jsxs("div",{className:"flex justify-between items-start border-b border-slate-100 pb-6 mb-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 bg-indigo-600 rounded-xl flex items-center justify-center text-white shadow-lg overflow-hidden shrink-0",children:c.school_logo?e.jsx("img",{src:c.school_logo,alt:"School Logo",className:"h-full w-full object-cover"}):e.jsx(e0,{size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold uppercase tracking-tight text-indigo-950 leading-tight",children:c.school_name}),e.jsx("p",{className:"text-indigo-600 font-semibold tracking-widest text-[9px] uppercase",children:"Official Financial Document"})]})]}),e.jsxs("div",{className:"text-[11px] text-slate-500 space-y-0.5 pl-1 leading-relaxed",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(gt,{size:11,className:"text-slate-400"})," ",c.school_address]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(Es,{size:11,className:"text-slate-400"})," ",c.school_phone," | ",e.jsx(Gt,{size:11,className:"text-slate-400"})," ",c.school_email]})]})]}),e.jsxs("div",{className:"text-right space-y-2",children:[e.jsx("div",{className:"bg-indigo-50 text-indigo-700 font-bold text-xl px-5 py-2 rounded-2xl inline-block ring-1 ring-indigo-100 uppercase tracking-tighter",children:"RECEIPT"}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:"Receipt Number"}),e.jsxs("p",{className:"text-sm font-mono font-bold text-slate-900 tracking-tight",children:["#",E.id.toString().padStart(8,"0")]})]}),e.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-emerald-50 text-emerald-700 px-3 py-1 rounded-full text-[9px] font-bold uppercase ring-1 ring-emerald-100",children:[e.jsx(Ye,{size:11,strokeWidth:3})," Payment Captured"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-slate-50/50 p-5 rounded-2xl ring-1 ring-slate-100",children:[e.jsx("h3",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest mb-3 border-b border-slate-200 pb-1.5 font-sans",children:"Student Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:"Full Name"}),e.jsx("span",{className:"text-[12px] font-bold text-slate-900 uppercase",children:z.name})]}),e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:"Admission No."}),e.jsx("span",{className:"text-[11px] font-mono font-bold text-slate-900",children:z.admission_number})]}),e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:"Current Grade"}),e.jsx("span",{className:"text-[11px] font-bold text-slate-700 bg-white px-2 py-0.5 rounded border border-slate-100",children:z.grade})]})]})]}),e.jsxs("div",{className:"bg-slate-50/50 p-5 rounded-2xl ring-1 ring-slate-100",children:[e.jsx("h3",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest mb-3 border-b border-slate-200 pb-1.5 font-sans",children:"Transaction Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:"Date & Time"}),e.jsx("span",{className:"text-[11px] font-semibold text-slate-700",children:E.date})]}),e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:"Method"}),e.jsx("span",{className:"text-[11px] font-bold text-slate-900 uppercase",children:E.method})]}),e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:"Ref Code"}),e.jsx("span",{className:"text-[11px] font-mono font-bold text-indigo-700",children:E.reference||"N/A"})]})]})]})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left border-b border-slate-200",children:[e.jsx("th",{className:"py-3 px-4 bg-slate-900 text-white font-bold uppercase text-[9px] tracking-widest rounded-tl-xl",children:"Description of Service/Fee"}),e.jsx("th",{className:"py-3 px-4 bg-slate-900 text-white font-bold uppercase text-[9px] tracking-widest text-right",children:"Unit Price"}),e.jsx("th",{className:"py-3 px-4 bg-slate-900 text-white font-bold uppercase text-[9px] tracking-widest text-right rounded-tr-xl",children:"Amount (KES)"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:e.jsxs("tr",{children:[e.jsxs("td",{className:"py-5 px-4",children:[e.jsx("p",{className:"font-bold text-[13px] text-slate-900",children:E.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-[8px] font-bold text-white bg-indigo-500 px-1.5 py-0.5 rounded uppercase",children:"Category"}),e.jsx("span",{className:"text-[10px] font-medium text-slate-400 capitalize",children:E.type?.toLowerCase().replace("_"," ")})]})]}),e.jsxs("td",{className:"py-5 px-4 text-right font-mono text-[12px] text-slate-500",children:[E.amount.toLocaleString(),".00"]}),e.jsxs("td",{className:"py-5 px-4 text-right font-mono text-[14px] font-bold text-slate-900",children:[E.amount.toLocaleString(),".00"]})]})}),e.jsxs("tfoot",{children:[e.jsxs("tr",{children:[e.jsx("td",{colSpan:"2",className:"py-5 text-right pr-4",children:e.jsx("p",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-widest",children:"Total Net Payment"})}),e.jsx("td",{className:`py-5 px-4 text-right bg-indigo-50 ${z.balance>0?"":"rounded-b-xl"}`,children:e.jsxs("p",{className:"text-xl font-bold text-indigo-700",children:[e.jsx("span",{className:"text-xs font-bold mr-1",children:"KES"}),E.amount.toLocaleString(),".00"]})})]}),z.balance>0&&e.jsxs("tr",{children:[e.jsx("td",{colSpan:"2",className:"py-4 text-right pr-4 border-t border-slate-100",children:e.jsx("p",{className:"text-[10px] font-bold text-red-400 uppercase tracking-widest",children:"Outstanding Balance"})}),e.jsx("td",{className:"py-4 px-4 text-right bg-red-50 rounded-b-xl border-t border-white",children:e.jsxs("p",{className:"text-sm font-bold text-red-600",children:[e.jsx("span",{className:"text-[10px] mr-1",children:"KES"}),z.balance.toLocaleString(),".00"]})})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-12 pt-6 border-t border-slate-100",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl border border-slate-100 inline-block",children:[e.jsx("div",{className:"h-20 w-20 bg-white flex items-center justify-center border-2 border-slate-100",children:e.jsx(Rg,{size:64,className:"text-slate-200"})}),e.jsx("p",{className:"text-[7px] text-slate-400 mt-1.5 font-mono uppercase text-center",children:"Scan to Verify"})]}),e.jsx("div",{className:"space-y-1",children:e.jsxs("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-tight leading-normal",children:["Disclaimers & Conditions:",e.jsx("br",{}),e.jsxs("span",{className:"font-medium",children:["1. Computer-generated official receipt.",e.jsx("br",{}),"2. Fees are non-refundable/transferable.",e.jsx("br",{}),"3. Retain for future academic queries."]})]})})]}),e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[9px] text-slate-400 font-bold uppercase tracking-widest mb-1",children:"Served By:"}),e.jsx("p",{className:"text-[13px] font-bold text-slate-800 italic",children:E.recorded_by}),e.jsx("p",{className:"text-[8px] text-slate-400 font-mono mt-0.5",children:"Authorized Finance Officer"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"border-b border-slate-200 pb-1 flex justify-between items-baseline",children:[e.jsx("span",{className:"text-[8px] font-bold text-slate-300 uppercase",children:"OFFICIAL SEAL / STAMP"}),e.jsx("div",{className:"h-16 w-16 rounded-full border-2 border-dashed border-slate-100"})]}),e.jsxs("div",{className:"flex justify-between items-center text-[8px] text-slate-400 font-bold uppercase",children:[e.jsxs("span",{children:["Date of Issue: ",new Date().toLocaleDateString()]}),e.jsxs("span",{className:"font-mono",children:["CID: ",Math.random().toString(36).substring(2,8).toUpperCase()]})]})]})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-[8px] text-slate-300 font-bold uppercase tracking-[0.3em]",children:[c.school_name," - ",new Date().getFullYear()," - OFFICIAL DOCUMENT"]})})]})}),e.jsx("style",{children:`
                @media print {
                    @page {
                        size: A4;
                        margin: 0;
                    }
                    body {
                        background: white !important;
                        print-color-adjust: exact;
                        -webkit-print-color-adjust: exact;
                    }
                }
            `})]})},FN=()=>{const n=Le(),[m,c]=f.useState([]),[u,g]=f.useState(!0),[v,j]=f.useState({current_page:1,total_pages:1,has_next:!1,has_previous:!1}),[S,_]=f.useState(""),[E,z]=f.useState("ALL");f.useEffect(()=>{h()},[v.current_page,S,E]);const h=async()=>{g(!0);try{const A={page:v.current_page,search:S,type:E},M=await V.get("/api/finance/transactions/",{params:A});c(M.data.transactions||[]),j({current_page:M.data.current_page,total_pages:M.data.total_pages,has_next:M.data.has_next,has_previous:M.data.has_previous})}catch(A){console.error(A)}finally{g(!1)}},b=A=>{_(A.target.value),j({...v,current_page:1})},C=A=>{z(A),j({...v,current_page:1})};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-8 animate-fade-in-up",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Financial Records"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Master ledger of all payments and invoices"})]}),e.jsx("div",{className:"hidden md:flex items-center gap-2",children:e.jsx("span",{className:"px-3 py-1 bg-emerald-50 text-emerald-700 text-xs font-bold rounded-full border border-emerald-100 dark:bg-emerald-900/20 dark:text-emerald-400 dark:border-emerald-800",children:"Live System"})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-1.5 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col md:flex-row gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(jt,{className:"h-4 w-4 text-slate-400"})}),e.jsx("input",{type:"text",placeholder:"Search by Student, Admission #, or Reference...",value:S,onChange:b,className:"block w-full pl-10 pr-3 py-2.5 border-none rounded-xl bg-transparent text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-0 sm:text-sm"})]}),e.jsx("div",{className:"h-8 w-px bg-slate-200 dark:bg-slate-700 self-center hidden md:block"}),e.jsx("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-900/50 rounded-xl",children:["ALL","PAYMENT","INVOICE"].map(A=>e.jsx("button",{onClick:()=>C(A),className:`px-4 py-1.5 text-xs font-bold rounded-lg transition-all ${E===A?"bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:A==="ALL"?"All":A==="PAYMENT"?"Payments":"Invoices"},A))})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50/50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-slate-700 text-xs uppercase tracking-wider text-slate-500 font-semibold",children:[e.jsx("th",{className:"px-8 py-5",children:"Date"}),e.jsx("th",{className:"px-6 py-5",children:"Transaction Details"}),e.jsx("th",{className:"px-6 py-5",children:"Student"}),e.jsx("th",{className:"px-6 py-5",children:"Payment Method"}),e.jsx("th",{className:"px-8 py-5 text-right",children:"Amount"}),e.jsx("th",{className:"px-6 py-5"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700/50",children:m?.length>0?m.map(A=>e.jsxs("tr",{onClick:()=>n(`/finance-portal/transactions/${A.id}`),className:"group hover:bg-slate-50 dark:hover:bg-slate-800/80 transition-all cursor-pointer",children:[e.jsx("td",{className:"px-8 py-6 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:A.date}),e.jsxs("span",{className:"text-[10px] bg-slate-100 dark:bg-slate-900 text-slate-500 px-1.5 py-0.5 rounded w-fit mt-1 font-mono",children:["#",A.id]})]})}),e.jsx("td",{className:"px-6 py-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${A.type==="INVOICE"?"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400":"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20 dark:text-emerald-400"}`,children:A.type==="INVOICE"?e.jsx(Ga,{size:16}):e.jsx(Og,{size:16})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`text-xs font-bold uppercase tracking-wide ${A.type==="INVOICE"?"text-blue-600 dark:text-blue-400":"text-emerald-600 dark:text-emerald-400"}`,children:A.type}),e.jsx("span",{className:"text-xs text-slate-400 font-mono",children:A.reference!=="-"?A.reference:"No Ref"})]})]})}),e.jsx("td",{className:"px-6 py-6",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white group-hover:text-emerald-600 transition-colors",children:A.student_name}),e.jsx("p",{className:"text-xs text-slate-500 font-medium",children:A.student_adm})]})}),e.jsx("td",{className:"px-6 py-6 text-sm",children:e.jsx("span",{className:`px-2.5 py-1 rounded-md text-xs font-semibold border ${A.method==="MPESA"?"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-800":A.method==="BANK"?"bg-purple-50 text-purple-700 border-purple-200 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-800":"bg-slate-100 text-slate-600 border-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700"}`,children:A.method})}),e.jsx("td",{className:"px-8 py-6 text-right",children:e.jsxs("div",{className:`font-mono font-bold text-sm ${A.type==="INVOICE"?"text-slate-800 dark:text-slate-300":"text-emerald-600 dark:text-emerald-400"}`,children:[A.type==="PAYMENT"?"-":"",A.amount.toLocaleString()]})}),e.jsx("td",{className:"px-6 py-6 text-right",children:e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("button",{className:"p-2 bg-white dark:bg-slate-700 hover:bg-slate-50 dark:hover:bg-slate-600 text-slate-400 hover:text-emerald-500 rounded-lg shadow-sm border border-slate-100 dark:border-slate-600 transition-all",children:e.jsx(ds,{size:16})})})})]},A.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-8 py-24 text-center text-slate-500",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 opacity-50",children:[e.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-full",children:e.jsx(Wt,{size:32})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-lg",children:"No records found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})})})})]})}),!u&&m?.length>0&&e.jsxs("div",{className:"px-8 py-5 border-t border-slate-100 dark:border-slate-700 flex items-center justify-between bg-slate-50/50 dark:bg-slate-900/30",children:[e.jsxs("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide",children:["Showing Page ",v.current_page," of ",v.total_pages]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{disabled:!v.has_previous,onClick:()=>j({...v,current_page:v.current_page-1}),className:"p-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-500 hover:text-slate-800 dark:hover:text-white hover:border-slate-300 dark:hover:border-slate-600 disabled:opacity-30 disabled:cursor-not-allowed transition-all shadow-sm",children:e.jsx(Ls,{size:16})}),e.jsx("button",{disabled:!v.has_next,onClick:()=>j({...v,current_page:v.current_page+1}),className:"p-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-500 hover:text-slate-800 dark:hover:text-white hover:border-slate-300 dark:hover:border-slate-600 disabled:opacity-30 disabled:cursor-not-allowed transition-all shadow-sm",children:e.jsx(ds,{size:16})})]})]})]})]})},HN=()=>{const[n,m]=f.useState(null),[c,u]=f.useState(!0);if(f.useEffect(()=>{(async()=>{try{const h=await V.get("/api/finance/reports/");m(h.data)}catch(h){console.error("Error fetching reports",h)}finally{u(!1)}})()},[]),c)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-950",children:e.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-slate-200 dark:border-slate-800 border-t-indigo-600 animate-spin"})});if(!n)return e.jsx("div",{className:"p-8 text-center text-slate-500",children:"No report data available."});const{daily_collection:g=[],payment_methods:v=[],debt_by_grade:j=[],comparison:S={this_month:0,last_month:0}}=n,_=["#6366f1","#10b981","#f59e0b","#ef4444","#8b5cf6"],E=S.last_month>0?(S.this_month-S.last_month)/S.last_month*100:100;return e.jsxs("div",{className:"p-4 md:p-8 max-w-[1400px] mx-auto space-y-6 min-h-screen bg-slate-50/50 dark:bg-slate-950/20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 pb-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Financial Intelligence"}),e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Deep dive analytics and performance auditing"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(W,{variant:"outline",className:"h-10 px-4 text-xs font-semibold bg-white dark:bg-slate-900 shadow-sm",children:[e.jsx(za,{size:16,className:"mr-2"})," Period"]}),e.jsxs(W,{variant:"primary",className:"h-10 px-4 text-xs font-semibold bg-indigo-600 border-none shadow-sm",children:[e.jsx(Ms,{size:16,className:"mr-2"})," PDF Report"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-500/10 rounded-lg",children:e.jsx(it,{className:"text-indigo-600",size:20})}),e.jsxs("div",{className:`flex items-center gap-1 text-[10px] font-bold px-2 py-1 rounded-md ${E>=0?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"}`,children:[E>=0?e.jsx(Dt,{size:12}):e.jsx(Ca,{size:12}),Math.abs(E).toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Revenue (MTD)"}),e.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mt-1",children:["KES ",S.this_month.toLocaleString()]}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-2 font-medium",children:["Prev Month: ",S.last_month.toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-2 bg-amber-50 dark:bg-amber-500/10 rounded-lg",children:e.jsx(Ss,{className:"text-amber-600",size:20})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Peak Arrears"}),e.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mt-1",children:j[0]?.grade||"N/A"}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-2 font-medium",children:["Outstanding: KES ",j[0]?.amount.toLocaleString()||"0"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-2 bg-emerald-50 dark:bg-emerald-500/10 rounded-lg",children:e.jsx(Oi,{className:"text-emerald-600",size:20})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Primary Channel"}),e.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mt-1",children:v[0]?.name||"N/A"}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-2 font-medium",children:["Volume: KES ",v[0]?.value.toLocaleString()||"0"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 pb-12",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2 mb-8",children:[e.jsx(Dt,{size:18,className:"text-indigo-600"})," Collection Momentum"]}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(es,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(Bi,{data:g,margin:{left:-20},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colAmt",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})}),e.jsx(pl,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0"}),e.jsx(Ea,{dataKey:"date",tick:{fontSize:10,fill:"#64748b",fontWeight:600},axisLine:!1,tickLine:!1,dy:10}),e.jsx(Aa,{tick:{fontSize:10,fill:"#64748b",fontWeight:600},axisLine:!1,tickLine:!1,tickFormatter:z=>`${z/1e3}k`}),e.jsx(ts,{contentStyle:{borderRadius:"8px",border:"1px solid #e2e8f0"}}),e.jsx(Zl,{type:"monotone",dataKey:"amount",stroke:"#6366f1",strokeWidth:3,fill:"url(#colAmt)"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2 mb-8",children:[e.jsx(Pi,{size:18,className:"text-amber-500"})," Grade Exposure"]}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(es,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(In,{data:j,layout:"vertical",children:[e.jsx(pl,{strokeDasharray:"3 3",horizontal:!0,vertical:!1,stroke:"#e2e8f0"}),e.jsx(Ea,{type:"number",hide:!0}),e.jsx(Aa,{dataKey:"grade",type:"category",tick:{fontSize:10,fill:"#64748b",fontWeight:700},axisLine:!1,tickLine:!1,width:60}),e.jsx(ts,{cursor:{fill:"transparent"},contentStyle:{borderRadius:"8px",border:"1px solid #e2e8f0"}}),e.jsx(Ri,{dataKey:"amount",fill:"#f59e0b",radius:[0,4,4,0],barSize:20})]})})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm lg:col-span-2",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white mb-2",children:"Payment Channels"}),e.jsx("p",{className:"text-slate-500 text-xs font-medium mb-8",children:"Revenue source distribution across multiple gateways"}),e.jsx("div",{className:"space-y-3",children:v.map((z,h)=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-800 transition-hover hover:border-indigo-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:_[h%_.length]}}),e.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300 uppercase tracking-tight",children:z.name})]}),e.jsxs("span",{className:"text-sm font-black text-slate-900 dark:text-white",children:["KES ",z.value.toLocaleString()]})]},h))})]}),e.jsxs("div",{className:"h-64 w-full md:w-1/2 relative flex items-center justify-center",children:[e.jsx(es,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(Ir,{children:[e.jsx(Gr,{data:v,innerRadius:70,outerRadius:90,paddingAngle:8,dataKey:"value",cornerRadius:8,children:v.map((z,h)=>e.jsx($a,{fill:_[h%_.length]},h))}),e.jsx(ts,{})]})}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center flex-col pointer-events-none",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Gateway"}),e.jsx("span",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Total"})]})]})]})})]})]})},IN=({user:n})=>{const m=Le(),{config:c}=Nt(),[u,g]=f.useState(!1),[v,j]=f.useState(!1),S=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),m("/login")},_=[{path:"/food-portal/dashboard",icon:Bn,label:"Dashboard"},{path:"/food-portal/students",icon:Ie,label:"Students"},{path:"/food-portal/menu",icon:Hs,label:"Meal Options"},{path:"/food-portal/serving-list",icon:vf,label:"Serving Lists"}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>j(!0),className:"p-2 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-lg shadow-lg border border-slate-100 dark:border-slate-700",children:e.jsx(Hr,{size:24})})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>j(!1)}),e.jsxs("aside",{className:`
                    fixed md:sticky top-0 left-0 h-screen bg-white dark:bg-slate-900 
                    border-r border-slate-200 dark:border-slate-800 z-50 transition-all duration-300 ease-in-out
                    ${v?"translate-x-0":"-translate-x-full md:translate-x-0"}
                    ${u?"w-20":"w-72"}
                `,children:[e.jsxs("div",{className:"h-20 flex items-center justify-between px-6 border-b border-slate-100 dark:border-slate-800",children:[!u&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg flex items-center justify-center text-white shadow-lg shadow-orange-500/30",children:e.jsx(vm,{size:20})}),e.jsxs("span",{className:"font-bold text-xl text-slate-900 dark:text-white tracking-tight",children:[c.school_name," ",e.jsx("span",{className:"text-orange-600",children:"Food"})]})]}),u&&e.jsx("div",{className:"mx-auto w-10 h-10 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-orange-500/30",children:e.jsx(vm,{size:24})}),e.jsx("button",{onClick:()=>g(!u),className:"hidden md:flex p-1.5 rounded-lg bg-slate-50 dark:bg-slate-800 text-slate-400 hover:text-orange-500 transition-colors",children:u?e.jsx(ds,{size:16}):e.jsx(Ve,{size:16})})]}),e.jsx("div",{className:"p-4 space-y-2",children:_.map(E=>e.jsx(Cm,{to:E.path,onClick:()=>j(!1),className:({isActive:z})=>`
                                flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group relative overflow-hidden
                                ${z?"bg-orange-50 dark:bg-orange-900/10 text-orange-600 dark:text-orange-400 font-semibold shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-800/50"}
                            `,children:({isActive:z})=>e.jsxs(e.Fragment,{children:[e.jsx(E.icon,{size:22,className:`
                                transition-colors
                                ${u?"mx-auto":""}
                            `}),!u&&e.jsx("span",{children:E.label}),e.jsx("div",{className:`
                                absolute left-0 top-1/2 -translate-y-1/2 w-1 h-8 rounded-r-full bg-orange-500 transition-all duration-300
                                ${z?"opacity-100":"opacity-0"}
                            `})]})},E.path))}),e.jsx("div",{className:"absolute bottom-0 w-full p-4 border-t border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50 backdrop-blur-sm",children:e.jsxs("div",{className:`flex items-center gap-3 ${u?"justify-center":""}`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400 font-bold",children:n?.username?.[0]?.toUpperCase()||"U"}),!u&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white truncate",children:n?.username||"User"}),e.jsx("p",{className:"text-xs text-slate-500 truncate",children:"Food Manager"})]}),!u&&e.jsx("button",{onClick:S,className:"p-2 text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(Fr,{size:18})}),e.jsx(Ui,{collapsed:u})]})})]})]})},GN=()=>{const[n,m]=f.useState(null),[c,u]=f.useState(!0),g=Ya();if(f.useEffect(()=>{const S=localStorage.getItem("user");S&&m(JSON.parse(S)),u(!1)},[]),c)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-950",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})});if(!n)return e.jsx(os,{to:"/login",state:{from:g},replace:!0});const{isLocked:v}=Nt(),j=v();return e.jsxs("div",{className:"flex min-h-screen bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100 font-sans",children:[j&&e.jsx(Zn,{}),e.jsx(IN,{user:n}),e.jsx("main",{className:"flex-1 transition-all duration-300 ease-in-out w-full max-w-[100vw] overflow-x-hidden",children:e.jsx("div",{className:"p-4 md:p-8 max-w-7xl mx-auto min-h-screen",children:e.jsx(Sa,{})})})]})},qN=()=>{const[n,m]=f.useState(null),[c,u]=f.useState(!0),[g,v]=f.useState("today");f.useEffect(()=>{j()},[]);const j=async()=>{try{const M=await V.get("/api/food/dashboard/");m(M.data)}catch(M){console.error(M)}finally{u(!1)}};if(c)return e.jsx("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-orange-50 dark:from-slate-900 dark:to-slate-800",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-orange-200 border-t-orange-600"}),e.jsx(Hs,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-orange-600",size:24})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium animate-pulse",children:"Loading dashboard..."})]})});if(!n)return e.jsx("div",{className:"p-8 text-center",children:"No data available"});const S=n.stats||{},_=S.billed||0,E=S.collected||0,z=_>0?(E/_*100).toFixed(1):0,h=100-z,b=[{title:"Total Collected",value:`KES ${(S.collected||0).toLocaleString()}`,icon:it,trend:"+12.5%",trendUp:!0,bgGradient:"from-emerald-500 to-teal-600",iconBg:"bg-emerald-100 dark:bg-emerald-900/30",iconColor:"text-emerald-600 dark:text-emerald-400"},{title:"Outstanding",value:`KES ${(S.outstanding||0).toLocaleString()}`,icon:ot,trend:"-5.2%",trendUp:!1,bgGradient:"from-red-500 to-pink-600",iconBg:"bg-red-100 dark:bg-red-900/30",iconColor:"text-red-600 dark:text-red-400"},{title:"Active Subscribers",value:S.active_subscribers||0,icon:Ie,trend:"+8 new",trendUp:!0,bgGradient:"from-blue-500 to-indigo-600",iconBg:"bg-blue-100 dark:bg-blue-900/30",iconColor:"text-blue-600 dark:text-blue-400"},{title:"Today's Revenue",value:`KES ${(S.todays_revenue||0).toLocaleString()}`,icon:Dt,trend:"Live",trendUp:!0,bgGradient:"from-orange-500 to-amber-600",iconBg:"bg-orange-100 dark:bg-orange-900/30",iconColor:"text-orange-600 dark:text-orange-400"}],C=[{name:"Collected",value:parseFloat(z),color:"#10b981"},{name:"Outstanding",value:parseFloat(h),color:"#ef4444"}],A=["#f97316","#fb923c","#fdba74","#fed7aa","#ffedd5"];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-orange-50/30 to-slate-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 pb-20",children:[e.jsxs("div",{className:"mb-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-600/10 to-amber-600/10 dark:from-orange-600/5 dark:to-amber-600/5"}),e.jsx("div",{className:"relative px-6 py-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 tracking-tight",children:"Food Management"}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-400 flex items-center gap-2",children:[e.jsx(hs,{size:16,className:"text-orange-500"}),"Overview of cafeteria subscriptions and finances"]})]}),e.jsx("div",{className:"flex gap-2 bg-white dark:bg-slate-800 p-1.5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:["Today","Week","Month"].map(M=>e.jsx("button",{onClick:()=>v(M.toLowerCase()),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${g===M.toLowerCase()?"bg-orange-600 text-white shadow-md":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:M},M))})]})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 space-y-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:b.map((M,k)=>e.jsxs("div",{className:"group relative bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-lg shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 bg-gradient-to-br ${M.bgGradient} opacity-5 rounded-full blur-2xl -mr-10 -mt-10 group-hover:opacity-10 transition-opacity`}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-3 ${M.iconBg} rounded-xl`,children:e.jsx(M.icon,{size:24,className:M.iconColor})}),e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold ${M.trendUp?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[M.trendUp?e.jsx(Ga,{size:12}):e.jsx(Nf,{size:12}),M.trend]})]}),e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 mb-1",children:M.title}),e.jsx("p",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight",children:M.value})]})]},k))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-lg shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(Hs,{size:20,className:"text-orange-500"}),"Popular Meal Plans"]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Active subscriptions by meal type"})]})}),e.jsx("div",{className:"h-80",children:e.jsx(es,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(In,{data:(n.popular_plans||[]).length>0?n.popular_plans:[{name:"N/A",value:0}],margin:{top:20,right:30,left:0,bottom:60},children:[e.jsx(Ea,{dataKey:"name",angle:-45,textAnchor:"end",height:100,tick:{fill:"#64748b",fontSize:12,fontWeight:600}}),e.jsx(Aa,{tick:{fill:"#64748b",fontSize:12}}),e.jsx(ts,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0,0,0,0.2)",color:"#fff"},cursor:{fill:"rgba(249, 115, 22, 0.1)"}}),e.jsx(Ri,{dataKey:"value",radius:[8,8,0,0],children:((n.popular_plans||[]).length>0?n.popular_plans:[{value:0}]).map((M,k)=>e.jsx($a,{fill:A[k%A.length]},`cell-${k}`))})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-lg shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2 mb-6",children:[e.jsx(hs,{size:20,className:"text-orange-500"}),"Collection Rate"]}),e.jsx("div",{className:"h-64",children:e.jsx(es,{width:"100%",height:"100%",children:e.jsxs(Ir,{children:[e.jsx(Gr,{data:C,cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,paddingAngle:5,dataKey:"value",children:C.map((M,k)=>e.jsx($a,{fill:M.color},`cell-${k}`))}),e.jsx(ts,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"12px",color:"#fff"},formatter:M=>`${M}%`})]})})}),e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Collected"})]}),e.jsxs("span",{className:"text-sm font-black text-emerald-600 dark:text-emerald-400",children:[z,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Outstanding"})]}),e.jsxs("span",{className:"text-sm font-black text-red-600 dark:text-red-400",children:[h,"%"]})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 bg-gradient-to-r from-orange-50/50 to-transparent dark:from-orange-900/10",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(dt,{size:20,className:"text-orange-500"}),"Recent Activity"]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Latest food transactions"})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700",children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Amount"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700/50",children:(n.recent_transactions||[]).map(M=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/40 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:M.student})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold ${M.type==="PAYMENT"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400"}`,children:[M.type==="PAYMENT"?e.jsx(Ye,{size:12}):e.jsx(It,{size:12}),M.type]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:M.description})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-mono",children:M.date})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("p",{className:`font-mono font-black text-sm ${M.type==="PAYMENT"?"text-emerald-600 dark:text-emerald-400":"text-slate-800 dark:text-slate-300"}`,children:[M.type==="PAYMENT"?"+":"-"," KES ",M.amount.toLocaleString()]})})]},M.id))})]}),(n.recent_transactions||[]).length===0&&e.jsx("div",{className:"py-8 px-6 text-left border-t border-slate-100 dark:border-slate-700",children:e.jsx("p",{className:"text-slate-400 text-xs italic",children:"No catering ledger entries found for this period."})})]})]})]})]})},ZN=()=>{const n=Le(),[m,c]=f.useState([]),[u,g]=f.useState([]),[v,j]=f.useState(!0),[S,_]=f.useState(""),[E,z]=f.useState("ALL");f.useEffect(()=>{h()},[]),f.useEffect(()=>{b()},[S,E,m]);const h=async()=>{try{const C=await V.get("/api/food/students/");c(C.data.students||[]),g(C.data.students||[])}catch(C){console.error(C)}finally{j(!1)}},b=()=>{let C=[...m||[]];if(S){const A=S.toLowerCase();C=C.filter(M=>(M.name||"").toLowerCase().includes(A)||(M.admission_number||"").toLowerCase().includes(A))}E!=="ALL"&&(C=C.filter(A=>A.status===E)),g(C)};return v?e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Student Accounts"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Manage food subscriptions and balances"})]})}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col md:flex-row gap-4 justify-between items-center",children:[e.jsxs("div",{className:"relative w-full md:w-96",children:[e.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search student...",value:S,onChange:C=>_(C.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none"})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsx(za,{size:16,className:"text-slate-500"}),e.jsxs("select",{value:E,onChange:C=>z(C.target.value),className:"px-4 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 flex-1 md:flex-none",children:[e.jsx("option",{value:"ALL",children:"All Status"}),e.jsx("option",{value:"ACTIVE",children:"Active Subscription"}),e.jsx("option",{value:"INACTIVE",children:"No Account/Inactive"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:(u||[]).map(C=>e.jsxs("div",{onClick:()=>n(`/food-portal/students/${C.id}`),className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-lg hover:border-orange-200 dark:hover:border-orange-800 transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"relative",children:[C.photo?e.jsx("img",{src:C.photo,alt:C.name,className:"w-16 h-16 rounded-full object-cover border-2 border-white dark:border-slate-700 shadow-md"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400",children:e.jsx(Qe,{size:32})}),e.jsx("div",{className:`absolute bottom-0 right-0 w-4 h-4 rounded-full border-2 border-white dark:border-slate-800 ${C.status==="ACTIVE"?"bg-emerald-500":"bg-slate-300"}`})]}),e.jsx("div",{className:`px-2 py-1 rounded-lg text-xs font-bold ${C.status==="ACTIVE"?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:C.status})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white truncate",children:C.name}),e.jsx("p",{className:"text-sm text-slate-500",children:C.admission_number}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:C.grade})]}),C.has_account?e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-900 rounded-xl flex justify-between items-center group-hover:bg-orange-50 dark:group-hover:bg-orange-900/10 transition-colors",children:[e.jsx("span",{className:"text-xs uppercase font-bold text-slate-400",children:"Balance"}),e.jsx("span",{className:`font-mono font-bold ${C.balance>0?"text-red-600":"text-emerald-600"}`,children:(C.balance||0).toLocaleString()})]}):e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-900 rounded-xl flex justify-center items-center text-slate-400 text-sm group-hover:bg-orange-50 dark:group-hover:bg-orange-900/10 transition-colors",children:[e.jsx(ff,{size:16,className:"mr-2"})," Enable Account"]})]},C.id))}),(u||[]).length===0&&e.jsx("div",{className:"text-center py-20 text-slate-400",children:e.jsx("p",{children:"No students found matching your search."})})]})},$N=()=>{const{id:n}=Zt(),m=Le(),[c,u]=f.useState(null),[g,v]=f.useState(!0),[j,S]=f.useState("overview"),[_,E]=f.useState(!1),[z,h]=f.useState(!1),[b,C]=f.useState(""),[A,M]=f.useState("CASH"),[k,T]=f.useState(""),[D,y]=f.useState("PAYMENT"),[P,U]=f.useState("");f.useEffect(()=>{F()},[n]);const F=async()=>{try{const re=await V.get(`/api/food/students/${n}/`);u(re.data)}catch(re){console.error(re)}finally{v(!1)}},Z=async re=>{re.preventDefault();try{await V.post(`/api/food/students/${n}/`,{action:"TRANSACTION",type:D,amount:parseFloat(b),method:A,description:k||(D==="PAYMENT"?"Payment Received":"Manual Charge")}),E(!1),C(""),T(""),F()}catch{alert("Transaction failed")}},ae=async()=>{try{await V.post(`/api/food/students/${n}/`,{action:"SUBSCRIBE",meal_item_id:P}),h(!1),U(""),F()}catch{alert("Subscription failed")}},H=async re=>{if(confirm("Are you sure you want to cancel this subscription?"))try{await V.post(`/api/food/students/${n}/`,{action:"UNSUBSCRIBE",subscription_id:re}),F()}catch{alert("Failed to unsubscribe")}};if(g)return e.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 animate-pulse",children:"Loading student profile..."})]})});if(!c)return e.jsx("div",{className:"p-8 text-center text-slate-500",children:"Student not found"});const{student:xe,transactions:I,subscriptions:ee,available_items:$}=c,Q=[...I].reverse().map((re,B)=>({name:`Tx ${B+1}`,amount:re.type==="PAYMENT"?re.amount:-re.amount,type:re.type,date:re.date}));return e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20 animate-fade-in-up",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>m("/food-portal/students"),className:"flex items-center text-slate-500 hover:text-orange-600 transition-colors group",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 rounded-full border border-slate-200 dark:border-slate-700 mr-2 group-hover:border-orange-200 shadow-sm",children:e.jsx(fl,{size:16})}),e.jsx("span",{className:"font-medium",children:"Back to Students"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors shadow-sm",children:[e.jsx(Fn,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Statement"})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors shadow-sm",children:[e.jsx(Ms,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Export"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 md:p-8 shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-orange-50 dark:bg-orange-900/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start relative z-10",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"relative",children:[xe.photo?e.jsx("img",{src:xe.photo,alt:xe.name,className:"w-32 h-32 rounded-2xl object-cover shadow-lg border-4 border-white dark:border-slate-700"}):e.jsx("div",{className:"w-32 h-32 rounded-2xl bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400 shadow-lg border-4 border-white dark:border-slate-700",children:e.jsx(Qe,{size:48})}),e.jsx("div",{className:"absolute -bottom-3 -right-3 bg-emerald-500 text-white p-2 rounded-xl shadow-lg border-4 border-white dark:border-slate-800",children:e.jsx(Di,{size:20})})]})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"inline-block px-3 py-1 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs font-bold uppercase tracking-wider rounded-lg mb-2",children:"Student Profile"}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 dark:text-white",children:xe.name}),e.jsxs("div",{className:"flex flex-wrap gap-4 mt-3 text-slate-500 dark:text-slate-400 text-sm font-medium",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(Qe,{size:16})," ADM: ",xe.adm]}),e.jsx("span",{className:"w-1 h-1 bg-slate-300 rounded-full self-center"}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(Qe,{size:16})," Grade: ",xe.grade]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>E(!0),className:"px-6 py-2.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-bold shadow-lg shadow-emerald-600/20 active:scale-95 transition-all flex items-center gap-2",children:[e.jsx(nt,{size:18})," Add Funds / Pay"]}),e.jsxs("button",{onClick:()=>h(!0),className:"px-6 py-2.5 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600 text-slate-700 dark:text-white rounded-xl font-bold shadow-sm transition-all flex items-center gap-2",children:[e.jsx(Hs,{size:18})," Add Meal Plan"]})]})]}),e.jsx("div",{className:"w-full md:w-auto min-w-[240px] space-y-3",children:e.jsxs("div",{className:"p-5 bg-slate-50 dark:bg-slate-900/50 rounded-2xl border border-slate-100 dark:border-slate-700 text-center",children:[e.jsx("p",{className:"text-xs uppercase font-bold text-slate-400 mb-1 tracking-wider",children:"Available Balance"}),e.jsxs("div",{className:`text-4xl font-black font-mono tracking-tight ${xe.balance>0?"text-red-500":"text-emerald-500"}`,children:[e.jsx("span",{className:"text-lg text-slate-400 mr-1",children:"KES"}),Math.abs(xe.balance).toLocaleString()]}),e.jsx("p",{className:`text-xs font-bold mt-2 ${xe.balance>0?"text-red-500 bg-red-50 dark:bg-red-900/20 py-1 px-2 rounded-full inline-block":"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20 py-1 px-2 rounded-full inline-block"}`,children:xe.balance>0?"Outstanding Debt":"In Credit / Paid"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(Hs,{size:20,className:"text-orange-500"}),"Active Plans"]}),e.jsxs("span",{className:"text-xs font-bold bg-orange-100 text-orange-700 px-2 py-1 rounded-full",children:[ee.length," Active"]})]}),e.jsxs("div",{className:"space-y-3",children:[ee.map(re=>e.jsx("div",{className:"p-4 bg-orange-50/50 dark:bg-slate-700/30 rounded-2xl border border-orange-100 dark:border-slate-700 group relative overflow-hidden transition-all hover:border-orange-200 dark:hover:border-slate-600",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:re.item_name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-slate-500 font-medium",children:[e.jsx("span",{className:"bg-white dark:bg-slate-800 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-600",children:re.cycle}),e.jsxs("span",{children:["KES ",re.cost.toLocaleString()]})]})]}),e.jsx("button",{onClick:()=>H(re.id),className:"p-2 bg-white dark:bg-slate-800 text-slate-400 hover:text-red-500 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 transition-colors",title:"Cancel Subscription",children:e.jsx(Cs,{size:16})})]})},re.id)),ee.length===0&&e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-slate-100 dark:border-slate-700 rounded-2xl",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-slate-50 dark:bg-slate-800 rounded-full flex items-center justify-center text-slate-300 mb-2",children:e.jsx(Hs,{size:24})}),e.jsx("p",{className:"text-slate-400 text-sm",children:"No active meal plans"}),e.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-orange-600 text-xs font-bold hover:underline",children:"+ Assign Plan"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-900 dark:text-white flex items-center gap-2 mb-4",children:[e.jsx(it,{size:20,className:"text-emerald-500"}),"Recent Activity Trend"]}),e.jsx("div",{className:"h-40 -mx-2",children:e.jsx(es,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(Bi,{data:Q,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorAmt",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]})}),e.jsx(ts,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"}}),e.jsx(Zl,{type:"monotone",dataKey:"amount",stroke:"#10B981",fillOpacity:1,fill:"url(#colorAmt)",strokeWidth:2})]})})})]})]}),e.jsx("div",{className:"xl:col-span-2",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col h-full min-h-[500px]",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(nd,{size:20,className:"text-orange-500"}),"Transaction Ledger"]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("select",{className:"text-sm bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{children:"All Types"}),e.jsx("option",{children:"Payments"}),e.jsx("option",{children:"Charges"})]})})]}),e.jsx("div",{className:"flex-1 overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700",children:[e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wide",children:"Date & ID"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wide",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wide",children:"Type / Method"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wide text-right",children:"Amount"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700/50",children:[I.map(re=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/40 transition-colors group",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("p",{className:"font-mono text-xs font-bold text-slate-500",children:["#",re.id]}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:re.date})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:re.description})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-md text-[10px] font-bold uppercase tracking-wider ${re.type==="PAYMENT"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:re.type}),re.method&&re.method!=="SYSTEM"&&e.jsx("span",{className:"text-xs text-slate-400 border border-slate-200 dark:border-slate-700 px-2 py-0.5 rounded-md",children:re.method})]})}),e.jsxs("td",{className:`px-6 py-4 text-right font-mono text-sm font-bold ${re.type==="PAYMENT"?"text-emerald-600":"text-slate-800 dark:text-slate-300"}`,children:[re.type==="PAYMENT"?"+":"-"," ",re.amount.toLocaleString()]})]},re.id)),I.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-20 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center opacity-40",children:[e.jsx(nd,{size:48,className:"mb-2"}),e.jsx("p",{children:"No transaction history found"})]})})})]})]})})]})})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm transition-all",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl w-full max-w-lg p-0 shadow-2xl animate-scale-in overflow-hidden",children:[e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-900 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Record Transaction"}),e.jsx("button",{onClick:()=>E(!1),className:"text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(Ve,{size:24})})]}),e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs("form",{onSubmit:Z,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 p-1 bg-slate-100 dark:bg-slate-700 rounded-xl",children:[e.jsxs("button",{type:"button",onClick:()=>y("PAYMENT"),className:`py-3 rounded-lg text-sm font-bold transition-all flex items-center justify-center gap-2 ${D==="PAYMENT"?"bg-white dark:bg-slate-800 text-emerald-600 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:[e.jsx(nt,{size:16})," RECIEVE FUNDS"]}),e.jsxs("button",{type:"button",onClick:()=>y("CHARGE"),className:`py-3 rounded-lg text-sm font-bold transition-all flex items-center justify-center gap-2 ${D==="CHARGE"?"bg-white dark:bg-slate-800 text-red-600 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:[e.jsx(Hs,{size:16})," CHARGE STUDENT"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Amount (KES)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold",children:"KES"}),e.jsx("input",{type:"number",value:b,onChange:re=>C(re.target.value),required:!0,placeholder:"0.00",className:"w-full pl-12 pr-4 py-3.5 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-4 focus:ring-orange-500/10 focus:border-orange-500 outline-none text-lg font-bold text-slate-900 dark:text-white transition-all"})]})]}),D==="PAYMENT"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Payment Method"}),e.jsxs("select",{value:A,onChange:re=>M(re.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-orange-500 outline-none dark:text-white",children:[e.jsx("option",{value:"CASH",children:"Cash Payment"}),e.jsx("option",{value:"MPESA",children:"M-Pesa Transaction"}),e.jsx("option",{value:"BANK",children:"Bank Deposit"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Description"}),e.jsx("input",{type:"text",value:k,placeholder:D==="PAYMENT"?"e.g. Term 1 Lunch Payment":"e.g. Lost Cutlery Fine",onChange:re=>T(re.target.value),className:"w-full px-4 py-3.5 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-orange-500 outline-none dark:text-white"})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx(W,{type:"submit",className:"w-full py-4 bg-orange-600 hover:bg-orange-700 text-white rounded-xl font-bold text-lg shadow-lg shadow-orange-600/20",children:"Confirm Transaction"})})]})})]})}),z&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl w-full max-w-md p-0 shadow-2xl animate-scale-in overflow-hidden",children:[e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-900 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Assign Meal Plan"}),e.jsx("button",{onClick:()=>h(!1),className:"text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(Ve,{size:24})})]}),e.jsxs("div",{className:"p-6 md:p-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Choose Plan"}),e.jsxs("select",{value:P,onChange:re=>U(re.target.value),className:"w-full px-4 py-3.5 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-orange-500 outline-none dark:text-white",children:[e.jsx("option",{value:"",children:"-- Select Available Item --"}),$.map(re=>e.jsxs("option",{value:re.id,children:[re.name,"  KES ",re.cost.toLocaleString()," (",re.billing_cycle,")"]},re.id))]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl flex gap-3 text-blue-700 dark:text-blue-400 text-sm",children:[e.jsx(ot,{size:20,className:"shrink-0"}),e.jsxs("p",{children:["Note: Selecting a plan will ",e.jsx("strong",{children:"immediately charge"})," the student's account with the item cost."]})]}),e.jsx(W,{onClick:ae,disabled:!P,className:"w-full py-3.5 bg-orange-600 hover:bg-orange-700 text-white rounded-xl font-bold shadow-lg shadow-orange-600/20 disabled:opacity-50 disabled:shadow-none",children:"Confirm Subscription"})]})]})})]})},YN=()=>{const[n,m]=f.useState([]),[c,u]=f.useState(!0),[g,v]=f.useState(""),[j,S]=f.useState(!1),[_,E]=f.useState(!1),[z,h]=f.useState({id:null,name:"",cost:"",per_serving_cost:"",billing_cycle:"DAILY",description:""}),b=[{value:"DAILY",label:"Daily (Recurring)"},{value:"MONTHLY",label:"Monthly (Recurring)"},{value:"TERMLY",label:"Termly (Recurring)"},{value:"ONE_OFF",label:"One Off / Ad-hoc"}];f.useEffect(()=>{C()},[]);const C=async()=>{try{const y=await V.get("/api/food/items/");m(y.data.items||[])}catch(y){console.error(y)}finally{u(!1)}},A=async y=>{y.preventDefault();try{await V.post("/api/food/items/",{action:_?"UPDATE":"CREATE",...z}),S(!1),C(),T()}catch{alert("Failed to save item")}},M=async(y,P)=>{if(confirm(`Are you sure you want to delete "${P}"? This will hide it from new subscriptions.`))try{await V.post("/api/food/items/",{action:"DELETE",id:y}),C()}catch{alert("Failed to delete item")}},k=y=>{h({id:y.id,name:y.name,cost:y.cost,per_serving_cost:y.per_serving_cost||"",billing_cycle:y.cycle,description:y.description||""}),E(!0),S(!0)},T=()=>{h({id:null,name:"",cost:"",per_serving_cost:"",billing_cycle:"DAILY",description:""}),E(!1)},D=(n||[]).filter(y=>(y.name||"").toLowerCase().includes(g.toLowerCase())||(y.cycle||"").toLowerCase().includes(g.toLowerCase()));return c?e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 animate-fade-in-up pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Meal Options"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Manage available food items, prices, and billing cycles"})]}),e.jsxs(W,{onClick:()=>{T(),S(!0)},className:"bg-orange-600 hover:bg-orange-700 text-white shadow-lg shadow-orange-600/20",children:[e.jsx(nt,{size:20,className:"mr-2"}),"Create New Item"]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col sm:flex-row gap-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search meal plans...",value:g,onChange:y=>v(y.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 dark:text-white"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[D.map(y=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-700 group hover:shadow-md transition-all relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-orange-50 dark:bg-orange-900/10 rounded-full blur-2xl -mr-10 -mt-10 pointer-events-none group-hover:bg-orange-100 dark:group-hover:bg-orange-900/20 transition-colors"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 rounded-xl",children:e.jsx(Hs,{size:24})}),e.jsxs("div",{className:"flex gap-2 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>k(y),className:"p-2 bg-white dark:bg-slate-700 text-slate-500 hover:text-blue-600 rounded-lg shadow-sm border border-slate-200 dark:border-slate-600 transition-colors",children:e.jsx(ha,{size:16})}),e.jsx("button",{onClick:()=>M(y.id,y.name),className:"p-2 bg-white dark:bg-slate-700 text-slate-500 hover:text-red-600 rounded-lg shadow-sm border border-slate-200 dark:border-slate-600 transition-colors",children:e.jsx(Cs,{size:16})})]})]}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1",children:y.name}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 line-clamp-2 h-10 mb-4",children:y.description||"No description provided."}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"px-2.5 py-1 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-lg text-xs font-bold uppercase tracking-wide",children:(y.cycle||"").replace("_"," ")}),y.active_subscribers>0&&e.jsxs("span",{className:"px-2.5 py-1 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 rounded-lg text-xs font-bold flex items-center gap-1",children:[e.jsx(Ye,{size:12})," ",y.active_subscribers," Active"]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-100 dark:border-slate-700",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Cost Per Unit"}),e.jsxs("p",{className:"text-2xl font-black text-slate-800 dark:text-white font-mono",children:["KES ",(y.cost||0).toLocaleString()]})]})]})]},y.id)),e.jsxs("button",{onClick:()=>{T(),S(!0)},className:"border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-2xl p-6 flex flex-col items-center justify-center text-slate-400 hover:border-orange-400 hover:text-orange-500 hover:bg-orange-50 dark:hover:bg-slate-800/50 transition-all group min-h-[280px]",children:[e.jsx("div",{className:"mb-4 p-4 bg-slate-50 dark:bg-slate-800 rounded-full group-hover:scale-110 transition-transform",children:e.jsx(nt,{size:32})}),e.jsx("span",{className:"font-bold text-lg",children:"Add New Item"})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl w-full max-w-lg shadow-2xl animate-scale-in overflow-hidden",children:[e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-900 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:_?"Edit Meal Option":"New Meal Option"}),e.jsx("button",{onClick:()=>S(!1),className:"text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(Ve,{size:24})})]}),e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs("form",{onSubmit:A,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Item Name"}),e.jsx("input",{type:"text",value:z.name,onChange:y=>h({...z,name:y.target.value}),required:!0,placeholder:"e.g. Special Diet Lunch",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-orange-500 outline-none dark:text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Cost (KES)"}),e.jsx("input",{type:"number",value:z.cost,onChange:y=>h({...z,cost:y.target.value}),required:!0,placeholder:"0.00",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-orange-500 outline-none dark:text-white font-mono font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Billing Cycle"}),e.jsx("select",{value:z.billing_cycle,onChange:y=>h({...z,billing_cycle:y.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-orange-500 outline-none dark:text-white",children:b.map(y=>e.jsx("option",{value:y.value,children:y.label},y.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Description"}),e.jsx("textarea",{value:z.description,onChange:y=>h({...z,description:y.target.value}),rows:"3",placeholder:"Describe what this meal option includes...",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-orange-500 outline-none dark:text-white resize-none"})]}),e.jsxs("div",{className:"pt-2 flex gap-3",children:[e.jsx(W,{type:"button",variant:"outline",className:"flex-1",onClick:()=>S(!1),children:"Cancel"}),e.jsx(W,{type:"submit",className:"flex-1 bg-orange-600 hover:bg-orange-700 text-white shadow-lg shadow-orange-600/20",children:_?"Update Item":"Create Item"})]})]})})]})})]})},VN=()=>{const[n,m]=f.useState([]),[c,u]=f.useState(""),[g,v]=f.useState([]),[j,S]=f.useState(!0),[_,E]=f.useState(""),[z,h]=f.useState({}),b=f.useRef(),C=Rm.useReactToPrint({content:()=>b.current,documentTitle:`Serving_List_${new Date().toISOString().split("T")[0]}`});f.useEffect(()=>{A()},[]),f.useEffect(()=>{c?M(c):v([])},[c]);const A=async()=>{try{const y=await V.get("/api/food/serving-list/");m(y.data.items),y.data.items.length>0&&u(y.data.items[0].id)}catch(y){console.error(y)}finally{S(!1)}},M=async y=>{S(!0);try{const P=await V.get(`/api/food/serving-list/?item_id=${y}`);v(P.data.students);const U={};P.data.students.forEach(F=>{F.served_today&&(U[F.id]=!0)}),h(U)}catch(P){console.error("Failed to fetch serving list",P)}finally{S(!1)}},k=async y=>{const P=z[y];if(h(U=>({...U,[y]:!U[y]})),!P&&c)try{const U=await V.post("/api/food/mark-served/",{student_id:y,item_id:c});U.data.success&&console.log(`Charged KES ${U.data.charged}. New balance: KES ${U.data.new_balance}`)}catch(U){console.error("Failed to charge student",U),h(F=>({...F,[y]:!1})),alert("Failed to mark student as served. Please try again.")}},T=g.filter(y=>y.name.toLowerCase().includes(_.toLowerCase())||y.adm.toLowerCase().includes(_.toLowerCase())),D=()=>{const y=n.find(P=>P.id==c);return y?y.name:"Selected Meal"};return j&&n.length===0?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 flex flex-col h-[calc(100vh-120px)] animate-fade-in-up",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(Hs,{className:"text-orange-600"}),"Kitchen Serving List"]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Select a meal to generate the serving checklist"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:[e.jsxs("select",{value:c,onChange:y=>u(y.target.value),className:"px-4 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 dark:text-white min-w-[200px]",children:[e.jsx("option",{value:"",children:"-- Select Meal --"}),n.map(y=>e.jsxs("option",{value:y.id,children:[y.name," (",y.billing_cycle,")"]},y.id))]}),e.jsxs(W,{onClick:C,disabled:g.length===0,className:"bg-slate-900 dark:bg-slate-700 text-white hover:bg-slate-800 dark:hover:bg-slate-600 shadow-md flex items-center gap-2 justify-center",children:[e.jsx(Fn,{size:18})," Print List"]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-6 min-h-0",children:[e.jsxs("div",{className:"lg:w-80 flex-shrink-0 flex flex-col bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("div",{className:"relative",children:[e.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),e.jsx("input",{type:"text",placeholder:"Find student...",value:_,onChange:y=>E(y.target.value),className:"w-full pl-9 pr-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 text-sm"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:j?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-orange-500"})}):T.length>0?T.map(y=>e.jsxs("div",{onClick:()=>k(y.id),className:`p-3 rounded-xl flex items-center gap-3 cursor-pointer transition-colors border ${z[y.id]?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800":"hover:bg-slate-50 dark:hover:bg-slate-700 border-transparent hover:border-slate-100"}`,children:[y.photo?e.jsx("img",{src:y.photo,alt:y.name,className:"w-10 h-10 rounded-full object-cover border border-slate-200"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-slate-400",children:e.jsx(Qe,{size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white truncate",children:y.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[y.adm,"  ",y.grade]})]}),z[y.id]&&e.jsx(Ye,{size:18,className:"text-emerald-500 flex-shrink-0"})]},y.id)):e.jsxs("div",{className:"p-8 text-center text-slate-400 text-sm",children:[e.jsx(za,{size:24,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No students found"})]})}),e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-900 border-t border-slate-100 dark:border-slate-700 text-center text-xs text-slate-500",children:[Object.keys(z).filter(y=>z[y]).length," of ",g.length," served"]})]}),e.jsx("div",{className:"flex-1 bg-white shadow-sm border border-slate-200 rounded-3xl overflow-hidden flex flex-col",children:e.jsxs("div",{className:"flex-1 overflow-y-auto p-8",ref:b,children:[e.jsxs("div",{className:"mb-8 border-b-2 border-slate-900 pb-4",children:[e.jsx("h2",{className:"text-3xl font-black text-slate-900 uppercase tracking-tighter mb-2",children:"Meal Serving List"}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-slate-700",children:["Meal: ",e.jsx("span",{className:"text-orange-600",children:D()})]}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Date: ",new Date().toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Total Count"}),e.jsx("p",{className:"text-3xl font-black text-slate-900",children:g.length})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-x-8 gap-y-4",children:g.map((y,P)=>e.jsxs("div",{className:"flex items-center gap-4 py-2 border-b border-dotted border-slate-300 break-inside-avoid",children:[e.jsxs("span",{className:"font-mono text-slate-400 w-6 text-sm",children:[P+1,"."]}),y.photo?e.jsx("img",{src:y.photo,alt:"",className:"w-10 h-10 rounded-full object-cover border border-slate-200"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-400",children:e.jsx(Qe,{size:16})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-slate-800 text-sm leading-tight",children:y.name}),e.jsxs("p",{className:"text-xs text-slate-500 font-mono",children:[y.adm,"  ",y.grade]})]}),z[y.id]?e.jsx("div",{className:"w-6 h-6 border-2 border-emerald-500 bg-emerald-500 rounded-md flex items-center justify-center",children:e.jsx(Ye,{size:16,className:"text-white",strokeWidth:3})}):e.jsx("div",{className:"w-6 h-6 border-2 border-slate-300 rounded-md"})]},y.id))}),g.length===0&&e.jsx("div",{className:"py-20 text-center text-slate-400 font-bold uppercase tracking-widest text-lg",children:"No Subscriptions Found for this Item"}),e.jsxs("div",{className:"mt-12 pt-4 border-t border-slate-200 flex justify-between text-xs text-slate-400 font-mono",children:[e.jsx("p",{children:"Authorized Signature: __________________________"}),e.jsx("p",{children:"Generated by EduManage System"})]})]})})]})]})},KN=({user:n})=>{const m=Le(),{config:c}=Nt(),[u,g]=f.useState(!1),[v,j]=f.useState(!1),S=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),m("/login")},_=[{path:"/transport-portal/dashboard",icon:Bn,label:"Dashboard"},{path:"/transport-portal/students",icon:Ie,label:"Students"},{path:"/transport-portal/routes",icon:gt,label:"Routes"},{path:"/transport-portal/vehicles",icon:sa,label:"Vehicles"},{path:"/transport-portal/drivers",icon:Pg,label:"Drivers"}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>j(!0),className:"p-2 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-lg shadow-lg border border-slate-100 dark:border-slate-700",children:e.jsx(Hr,{size:24})})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>j(!1)}),e.jsxs("aside",{className:`
                    fixed md:sticky top-0 left-0 h-screen bg-white dark:bg-slate-900 
                    border-r border-slate-200 dark:border-slate-800 z-50 transition-all duration-300 ease-in-out
                    ${v?"translate-x-0":"-translate-x-full md:translate-x-0"}
                    ${u?"w-20":"w-72"}
                `,children:[e.jsxs("div",{className:"h-20 flex items-center justify-between px-6 border-b border-slate-100 dark:border-slate-800",children:[!u&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center text-white shadow-lg shadow-blue-500/30",children:e.jsx(Ia,{size:20})}),e.jsxs("span",{className:"font-bold text-xl text-slate-900 dark:text-white tracking-tight",children:[c.school_name," ",e.jsx("span",{className:"text-blue-600",children:"Transport"})]})]}),u&&e.jsx("div",{className:"mx-auto w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-blue-500/30",children:e.jsx(Ia,{size:24})}),e.jsx("button",{onClick:()=>g(!u),className:"hidden md:flex p-1.5 rounded-lg bg-slate-50 dark:bg-slate-800 text-slate-400 hover:text-blue-500 transition-colors",children:u?e.jsx(ds,{size:16}):e.jsx(Ve,{size:16})})]}),e.jsx("div",{className:"p-4 space-y-2",children:_.map(E=>e.jsxs(Cm,{to:E.path,onClick:()=>j(!1),className:({isActive:z})=>`
                                flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group relative overflow-hidden
                                ${z?"bg-blue-50 dark:bg-blue-900/10 text-blue-600 dark:text-blue-400 font-semibold shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-800/50"}
                            `,children:[e.jsx(E.icon,{size:22,className:`
                                transition-colors
                                ${u?"mx-auto":""}
                            `}),!u&&e.jsx("span",{children:E.label})]},E.path))}),e.jsx("div",{className:"absolute bottom-0 w-full p-4 border-t border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50 backdrop-blur-sm",children:e.jsxs("div",{className:`flex items-center gap-3 ${u?"justify-center":""}`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400 font-bold",children:n?.username?.[0]?.toUpperCase()||"U"}),!u&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white truncate",children:n?.username||"User"}),e.jsx("p",{className:"text-xs text-slate-500 truncate",children:"Transport Manager"})]}),!u&&e.jsx("button",{onClick:S,className:"p-2 text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(Fr,{size:18})}),e.jsx(Ui,{collapsed:u})]})})]})]})},XN=()=>{const[n,m]=f.useState(null),[c,u]=f.useState(!0);if(f.useEffect(()=>{const j=localStorage.getItem("user");j&&m(JSON.parse(j)),u(!1)},[]),c)return e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!n)return e.jsx(os,{to:"/login",replace:!0});const{isLocked:g}=Nt(),v=g();return e.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-slate-900 overflow-hidden",children:[v&&e.jsx(Zn,{}),e.jsx(KN,{user:n}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-6 md:p-8",children:e.jsx(Sa,{})})})]})},QN=()=>{const[n,m]=f.useState(null),[c,u]=f.useState(!0);f.useEffect(()=>{g()},[]);const g=async()=>{try{const h=await V.get("/api/transport/dashboard/");m(h.data)}catch(h){console.error(h)}finally{u(!1)}};if(c)return e.jsx("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-900 dark:to-slate-800",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600"}),e.jsx(Ia,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-blue-600",size:24})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium animate-pulse",children:"Loading dashboard..."})]})});if(!n)return e.jsx("div",{className:"p-8 text-center",children:"No data available"});const v=n.stats||{},j=v.billed&&v.billed>0?(v.collected/v.billed*100).toFixed(1):0,S=100-j,_=[{title:"Total Collected",value:`KES ${(v.collected||0).toLocaleString()}`,icon:it,trend:"+12.5%",trendUp:!0,bgGradient:"from-emerald-500 to-teal-600",iconBg:"bg-emerald-100 dark:bg-emerald-900/30",iconColor:"text-emerald-600 dark:text-emerald-400"},{title:"Outstanding",value:`KES ${(v.outstanding||0).toLocaleString()}`,icon:ot,trend:"-5.2%",trendUp:!1,bgGradient:"from-red-500 to-pink-600",iconBg:"bg-red-100 dark:bg-red-900/30",iconColor:"text-red-600 dark:text-red-400"},{title:"Active Students",value:v.active_students||0,icon:Ie,trend:"+8 new",trendUp:!0,bgGradient:"from-blue-500 to-indigo-600",iconBg:"bg-blue-100 dark:bg-blue-900/30",iconColor:"text-blue-600 dark:text-blue-400"},{title:"Today's Revenue",value:`KES ${(v.todays_revenue||0).toLocaleString()}`,icon:Dt,trend:"Live",trendUp:!0,bgGradient:"from-purple-500 to-violet-600",iconBg:"bg-purple-100 dark:bg-purple-900/30",iconColor:"text-purple-600 dark:text-purple-400"}],E=[{name:"Collected",value:parseFloat(j),color:"#10b981"},{name:"Outstanding",value:parseFloat(S),color:"#ef4444"}],z=["#3b82f6","#6366f1","#8b5cf6","#a855f7","#c084fc"];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-slate-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 pb-20",children:[e.jsxs("div",{className:"mb-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-indigo-600/10 dark:from-blue-600/5 dark:to-indigo-600/5"}),e.jsx("div",{className:"relative px-6 py-8",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 tracking-tight",children:"Transport Management"}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-400 flex items-center gap-2",children:[e.jsx(hs,{size:16,className:"text-blue-500"}),"Overview of transport services and finances"]})]})})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 space-y-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:_.map((h,b)=>e.jsxs("div",{className:"group relative bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-lg shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 bg-gradient-to-br ${h.bgGradient} opacity-5 rounded-full blur-2xl -mr-10 -mt-10 group-hover:opacity-10 transition-opacity`}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-3 ${h.iconBg} rounded-xl`,children:e.jsx(h.icon,{size:24,className:h.iconColor})}),e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold ${h.trendUp?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[h.trendUp?e.jsx(Ga,{size:12}):e.jsx(Nf,{size:12}),h.trend]})]}),e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 mb-1",children:h.title}),e.jsx("p",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight",children:h.value})]})]},b))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-lg shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(gt,{size:20,className:"text-blue-500"}),"Popular Routes"]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Active students by route"})]})}),e.jsx("div",{className:"h-80 w-full min-h-[320px]",children:e.jsx(es,{width:"100%",height:320,minHeight:320,children:e.jsxs(In,{data:n.popular_routes&&n.popular_routes.length>0?n.popular_routes:[{name:"N/A",value:0}],margin:{top:20,right:30,left:0,bottom:60},children:[e.jsx(Ea,{dataKey:"name",angle:-45,textAnchor:"end",height:100,tick:{fill:"#64748b",fontSize:12,fontWeight:600}}),e.jsx(Aa,{tick:{fill:"#64748b",fontSize:12}}),e.jsx(ts,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0,0,0,0.2)",color:"#fff"},cursor:{fill:"rgba(59, 130, 246, 0.1)"}}),e.jsx(Ri,{dataKey:"value",radius:[8,8,0,0],children:(n.popular_routes&&n.popular_routes.length>0?n.popular_routes:[{value:0}]).map((h,b)=>e.jsx($a,{fill:z[b%z.length]},`cell-${b}`))})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-lg shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2 mb-6",children:[e.jsx(hs,{size:20,className:"text-blue-500"}),"Collection Rate"]}),e.jsx("div",{className:"h-64 w-full min-h-[256px]",children:e.jsx(es,{width:"100%",height:256,minHeight:256,children:e.jsxs(Ir,{children:[e.jsx(Gr,{data:E,cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,paddingAngle:5,dataKey:"value",children:E.map((h,b)=>e.jsx($a,{fill:h.color},`cell-${b}`))}),e.jsx(ts,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"12px",color:"#fff"},formatter:h=>`${h}%`})]})})}),e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Collected"})]}),e.jsxs("span",{className:"text-sm font-black text-emerald-600 dark:text-emerald-400",children:[j,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Outstanding"})]}),e.jsxs("span",{className:"text-sm font-black text-red-600 dark:text-red-400",children:[S,"%"]})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 bg-gradient-to-r from-blue-50/50 to-transparent dark:from-blue-900/10",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(dt,{size:20,className:"text-blue-500"}),"Recent Activity"]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Latest transport transactions"})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700",children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Amount"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700/50",children:(n.recent_transactions||[]).map(h=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/40 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:h.student})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold ${h.type==="PAYMENT"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}`,children:[h.type==="PAYMENT"?e.jsx(Ye,{size:12}):e.jsx(It,{size:12}),h.type]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:h.description})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-mono",children:h.date})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("p",{className:`font-mono font-black text-sm ${h.type==="PAYMENT"?"text-emerald-600 dark:text-emerald-400":"text-slate-800 dark:text-slate-300"}`,children:[h.type==="PAYMENT"?"+":"-"," KES ",h.amount.toLocaleString()]})})]},h.id))})]}),(!n.recent_transactions||n.recent_transactions.length===0)&&e.jsx("div",{className:"py-8 px-6 text-left",children:e.jsx("p",{className:"text-slate-400 text-xs italic",children:"No transport ledger entries found for this period."})})]})]})]})]})},JN=()=>{const[n,m]=f.useState([]),[c,u]=f.useState(!0),[g,v]=f.useState(""),j=Le();f.useEffect(()=>{S()},[]);const S=async()=>{try{const h=await V.get("/api/transport/students/");m(h.data.students||[])}catch(h){console.error(h),m([])}finally{u(!1)}},_=(n||[]).filter(h=>h.name?.toLowerCase().includes(g.toLowerCase())||h.admission_number?.toLowerCase().includes(g.toLowerCase())||h.grade?.toLowerCase().includes(g.toLowerCase())),E=h=>h<0?"text-emerald-600 dark:text-emerald-400":h>0?"text-red-600 dark:text-red-400":"text-slate-600 dark:text-slate-400",z=h=>h<0?{text:"Credit",color:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400"}:h>0?{text:"Owing",color:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}:{text:"Clear",color:"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300"};return c?e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 animate-fade-in-up",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Transport Students"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Manage student transport accounts"})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by name, admission number, or grade...",value:g,onChange:h=>v(h.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-white"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(h=>{const b=z(h.balance);return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-md transition-all group",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[h.photo?e.jsx("img",{src:h.photo,alt:h.name,className:"w-16 h-16 rounded-full object-cover border-2 border-blue-100 dark:border-blue-900"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx(Qe,{size:32})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white truncate",children:h.name}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:h.admission_number}),e.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:h.grade})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-900 rounded-xl",children:[e.jsx("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Balance"}),e.jsxs("span",{className:`text-lg font-black font-mono ${E(h.balance)}`,children:["KES ",Math.abs(h.balance).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${b.color}`,children:b.text}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${h.status==="ACTIVE"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300"}`,children:h.status})]}),e.jsxs(W,{onClick:()=>j(`/transport-portal/students/${h.id}`),className:"w-full bg-blue-600 hover:bg-blue-700 text-white flex items-center justify-center gap-2",children:[e.jsx(Un,{size:16}),"View Details"]})]})]},h.id)})}),_.length===0&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-12 text-center border border-slate-100 dark:border-slate-700",children:[e.jsx(Ie,{size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"No students found"})]})]})};function Kf(n,m){const c=f.useRef(m);f.useEffect(function(){m!==c.current&&n.attributionControl!=null&&(c.current!=null&&n.attributionControl.removeAttribution(c.current),m!=null&&n.attributionControl.addAttribution(m)),c.current=m},[n,m])}const WN=1;function ey(n){return Object.freeze({__version:WN,map:n})}function ty(n,m){return Object.freeze({...n,...m})}const Om=f.createContext(null);function Xf(){const n=f.use(Om);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function sy(n){function m(c,u){const{instance:g,context:v}=n(c).current;f.useImperativeHandle(u,()=>g);const{children:j}=c;return j==null?null:js.createElement(Om,{value:v},j)}return f.forwardRef(m)}function ay(n){function m(c,u){const[g,v]=f.useState(!1),{instance:j}=n(c,v).current;f.useImperativeHandle(u,()=>j),f.useEffect(function(){g&&j.update()},[j,g,c.children]);const S=j._contentNode;return S?wg.createPortal(c.children,S):null}return f.forwardRef(m)}function ly(n){function m(c,u){const{instance:g}=n(c).current;return f.useImperativeHandle(u,()=>g),null}return f.forwardRef(m)}function Qf(n,m){const c=f.useRef(void 0);f.useEffect(function(){return m!=null&&n.instance.on(m),c.current=m,function(){c.current!=null&&n.instance.off(c.current),c.current=null}},[n,m])}function Pm(n,m){const c=n.pane??m.pane;return c?{...n,pane:c}:n}function ry(n,m){return function(u,g){const v=Xf(),j=n(Pm(u,v),v);return Kf(v.map,u.attribution),Qf(j.current,u.eventHandlers),m(j.current,v,u,g),j}}var sd={exports:{}};var iy=sd.exports,rf;function ny(){return rf||(rf=1,(function(n,m){(function(c,u){u(m)})(iy,(function(c){var u="1.9.4";function g(a){var r,o,p,N;for(o=1,p=arguments.length;o<p;o++){N=arguments[o];for(r in N)a[r]=N[r]}return a}var v=Object.create||(function(){function a(){}return function(r){return a.prototype=r,new a}})();function j(a,r){var o=Array.prototype.slice;if(a.bind)return a.bind.apply(a,o.call(arguments,1));var p=o.call(arguments,2);return function(){return a.apply(r,p.length?p.concat(o.call(arguments)):arguments)}}var S=0;function _(a){return"_leaflet_id"in a||(a._leaflet_id=++S),a._leaflet_id}function E(a,r,o){var p,N,R,q;return q=function(){p=!1,N&&(R.apply(o,N),N=!1)},R=function(){p?N=arguments:(a.apply(o,arguments),setTimeout(q,r),p=!0)},R}function z(a,r,o){var p=r[1],N=r[0],R=p-N;return a===p&&o?a:((a-N)%R+R)%R+N}function h(){return!1}function b(a,r){if(r===!1)return a;var o=Math.pow(10,r===void 0?6:r);return Math.round(a*o)/o}function C(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function A(a){return C(a).split(/\s+/)}function M(a,r){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?v(a.options):{});for(var o in r)a.options[o]=r[o];return a.options}function k(a,r,o){var p=[];for(var N in a)p.push(encodeURIComponent(o?N.toUpperCase():N)+"="+encodeURIComponent(a[N]));return(!r||r.indexOf("?")===-1?"?":"&")+p.join("&")}var T=/\{ *([\w_ -]+) *\}/g;function D(a,r){return a.replace(T,function(o,p){var N=r[p];if(N===void 0)throw new Error("No value provided for variable "+o);return typeof N=="function"&&(N=N(r)),N})}var y=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function P(a,r){for(var o=0;o<a.length;o++)if(a[o]===r)return o;return-1}var U="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function F(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var Z=0;function ae(a){var r=+new Date,o=Math.max(0,16-(r-Z));return Z=r+o,window.setTimeout(a,o)}var H=window.requestAnimationFrame||F("RequestAnimationFrame")||ae,xe=window.cancelAnimationFrame||F("CancelAnimationFrame")||F("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function I(a,r,o){if(o&&H===ae)a.call(r);else return H.call(window,j(a,r))}function ee(a){a&&xe.call(window,a)}var $={__proto__:null,extend:g,create:v,bind:j,get lastId(){return S},stamp:_,throttle:E,wrapNum:z,falseFn:h,formatNum:b,trim:C,splitWords:A,setOptions:M,getParamString:k,template:D,isArray:y,indexOf:P,emptyImageUrl:U,requestFn:H,cancelFn:xe,requestAnimFrame:I,cancelAnimFrame:ee};function Q(){}Q.extend=function(a){var r=function(){M(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=r.__super__=this.prototype,p=v(o);p.constructor=r,r.prototype=p;for(var N in this)Object.prototype.hasOwnProperty.call(this,N)&&N!=="prototype"&&N!=="__super__"&&(r[N]=this[N]);return a.statics&&g(r,a.statics),a.includes&&(re(a.includes),g.apply(null,[p].concat(a.includes))),g(p,a),delete p.statics,delete p.includes,p.options&&(p.options=o.options?v(o.options):{},g(p.options,a.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var R=0,q=p._initHooks.length;R<q;R++)p._initHooks[R].call(this)}},r},Q.include=function(a){var r=this.prototype.options;return g(this.prototype,a),a.options&&(this.prototype.options=r,this.mergeOptions(a.options)),this},Q.mergeOptions=function(a){return g(this.prototype.options,a),this},Q.addInitHook=function(a){var r=Array.prototype.slice.call(arguments,1),o=typeof a=="function"?a:function(){this[a].apply(this,r)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function re(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=y(a)?a:[a];for(var r=0;r<a.length;r++)a[r]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var B={on:function(a,r,o){if(typeof a=="object")for(var p in a)this._on(p,a[p],r);else{a=A(a);for(var N=0,R=a.length;N<R;N++)this._on(a[N],r,o)}return this},off:function(a,r,o){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var p in a)this._off(p,a[p],r);else{a=A(a);for(var N=arguments.length===1,R=0,q=a.length;R<q;R++)N?this._off(a[R]):this._off(a[R],r,o)}return this},_on:function(a,r,o,p){if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}if(this._listens(a,r,o)===!1){o===this&&(o=void 0);var N={fn:r,ctx:o};p&&(N.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(N)}},_off:function(a,r,o){var p,N,R;if(this._events&&(p=this._events[a],!!p)){if(arguments.length===1){if(this._firingCount)for(N=0,R=p.length;N<R;N++)p[N].fn=h;delete this._events[a];return}if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}var q=this._listens(a,r,o);if(q!==!1){var se=p[q];this._firingCount&&(se.fn=h,this._events[a]=p=p.slice()),p.splice(q,1)}}},fire:function(a,r,o){if(!this.listens(a,o))return this;var p=g({},r,{type:a,target:this,sourceTarget:r&&r.sourceTarget||this});if(this._events){var N=this._events[a];if(N){this._firingCount=this._firingCount+1||1;for(var R=0,q=N.length;R<q;R++){var se=N[R],de=se.fn;se.once&&this.off(a,de,se.ctx),de.call(se.ctx||this,p)}this._firingCount--}}return o&&this._propagateEvent(p),this},listens:function(a,r,o,p){typeof a!="string"&&console.warn('"string" type argument expected');var N=r;typeof r!="function"&&(p=!!r,N=void 0,o=void 0);var R=this._events&&this._events[a];if(R&&R.length&&this._listens(a,N,o)!==!1)return!0;if(p){for(var q in this._eventParents)if(this._eventParents[q].listens(a,r,o,p))return!0}return!1},_listens:function(a,r,o){if(!this._events)return!1;var p=this._events[a]||[];if(!r)return!!p.length;o===this&&(o=void 0);for(var N=0,R=p.length;N<R;N++)if(p[N].fn===r&&p[N].ctx===o)return N;return!1},once:function(a,r,o){if(typeof a=="object")for(var p in a)this._on(p,a[p],r,!0);else{a=A(a);for(var N=0,R=a.length;N<R;N++)this._on(a[N],r,o,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[_(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[_(a)],this},_propagateEvent:function(a){for(var r in this._eventParents)this._eventParents[r].fire(a.type,g({layer:a.target,propagatedFrom:a.target},a),!0)}};B.addEventListener=B.on,B.removeEventListener=B.clearAllEventListeners=B.off,B.addOneTimeEventListener=B.once,B.fireEvent=B.fire,B.hasEventListeners=B.listens;var le=Q.extend(B);function G(a,r,o){this.x=o?Math.round(a):a,this.y=o?Math.round(r):r}var J=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(a){return this.clone()._add(oe(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(oe(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new G(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new G(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=J(this.x),this.y=J(this.y),this},distanceTo:function(a){a=oe(a);var r=a.x-this.x,o=a.y-this.y;return Math.sqrt(r*r+o*o)},equals:function(a){return a=oe(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=oe(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function oe(a,r,o){return a instanceof G?a:y(a)?new G(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new G(a.x,a.y):new G(a,r,o)}function ue(a,r){if(a)for(var o=r?[a,r]:a,p=0,N=o.length;p<N;p++)this.extend(o[p])}ue.prototype={extend:function(a){var r,o;if(!a)return this;if(a instanceof G||typeof a[0]=="number"||"x"in a)r=o=oe(a);else if(a=ke(a),r=a.min,o=a.max,!r||!o)return this;return!this.min&&!this.max?(this.min=r.clone(),this.max=o.clone()):(this.min.x=Math.min(r.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(r.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)),this},getCenter:function(a){return oe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return oe(this.min.x,this.max.y)},getTopRight:function(){return oe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var r,o;return typeof a[0]=="number"||a instanceof G?a=oe(a):a=ke(a),a instanceof ue?(r=a.min,o=a.max):r=o=a,r.x>=this.min.x&&o.x<=this.max.x&&r.y>=this.min.y&&o.y<=this.max.y},intersects:function(a){a=ke(a);var r=this.min,o=this.max,p=a.min,N=a.max,R=N.x>=r.x&&p.x<=o.x,q=N.y>=r.y&&p.y<=o.y;return R&&q},overlaps:function(a){a=ke(a);var r=this.min,o=this.max,p=a.min,N=a.max,R=N.x>r.x&&p.x<o.x,q=N.y>r.y&&p.y<o.y;return R&&q},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var r=this.min,o=this.max,p=Math.abs(r.x-o.x)*a,N=Math.abs(r.y-o.y)*a;return ke(oe(r.x-p,r.y-N),oe(o.x+p,o.y+N))},equals:function(a){return a?(a=ke(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function ke(a,r){return!a||a instanceof ue?a:new ue(a,r)}function ye(a,r){if(a)for(var o=r?[a,r]:a,p=0,N=o.length;p<N;p++)this.extend(o[p])}ye.prototype={extend:function(a){var r=this._southWest,o=this._northEast,p,N;if(a instanceof Se)p=a,N=a;else if(a instanceof ye){if(p=a._southWest,N=a._northEast,!p||!N)return this}else return a?this.extend(Me(a)||we(a)):this;return!r&&!o?(this._southWest=new Se(p.lat,p.lng),this._northEast=new Se(N.lat,N.lng)):(r.lat=Math.min(p.lat,r.lat),r.lng=Math.min(p.lng,r.lng),o.lat=Math.max(N.lat,o.lat),o.lng=Math.max(N.lng,o.lng)),this},pad:function(a){var r=this._southWest,o=this._northEast,p=Math.abs(r.lat-o.lat)*a,N=Math.abs(r.lng-o.lng)*a;return new ye(new Se(r.lat-p,r.lng-N),new Se(o.lat+p,o.lng+N))},getCenter:function(){return new Se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Se(this.getNorth(),this.getWest())},getSouthEast:function(){return new Se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof Se||"lat"in a?a=Me(a):a=we(a);var r=this._southWest,o=this._northEast,p,N;return a instanceof ye?(p=a.getSouthWest(),N=a.getNorthEast()):p=N=a,p.lat>=r.lat&&N.lat<=o.lat&&p.lng>=r.lng&&N.lng<=o.lng},intersects:function(a){a=we(a);var r=this._southWest,o=this._northEast,p=a.getSouthWest(),N=a.getNorthEast(),R=N.lat>=r.lat&&p.lat<=o.lat,q=N.lng>=r.lng&&p.lng<=o.lng;return R&&q},overlaps:function(a){a=we(a);var r=this._southWest,o=this._northEast,p=a.getSouthWest(),N=a.getNorthEast(),R=N.lat>r.lat&&p.lat<o.lat,q=N.lng>r.lng&&p.lng<o.lng;return R&&q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,r){return a?(a=we(a),this._southWest.equals(a.getSouthWest(),r)&&this._northEast.equals(a.getNorthEast(),r)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function we(a,r){return a instanceof ye?a:new ye(a,r)}function Se(a,r,o){if(isNaN(a)||isNaN(r))throw new Error("Invalid LatLng object: ("+a+", "+r+")");this.lat=+a,this.lng=+r,o!==void 0&&(this.alt=+o)}Se.prototype={equals:function(a,r){if(!a)return!1;a=Me(a);var o=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return o<=(r===void 0?1e-9:r)},toString:function(a){return"LatLng("+b(this.lat,a)+", "+b(this.lng,a)+")"},distanceTo:function(a){return Ue.distance(this,Me(a))},wrap:function(){return Ue.wrapLatLng(this)},toBounds:function(a){var r=180*a/40075017,o=r/Math.cos(Math.PI/180*this.lat);return we([this.lat-r,this.lng-o],[this.lat+r,this.lng+o])},clone:function(){return new Se(this.lat,this.lng,this.alt)}};function Me(a,r,o){return a instanceof Se?a:y(a)&&typeof a[0]!="object"?a.length===3?new Se(a[0],a[1],a[2]):a.length===2?new Se(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new Se(a.lat,"lng"in a?a.lng:a.lon,a.alt):r===void 0?null:new Se(a,r,o)}var Be={latLngToPoint:function(a,r){var o=this.projection.project(a),p=this.scale(r);return this.transformation._transform(o,p)},pointToLatLng:function(a,r){var o=this.scale(r),p=this.transformation.untransform(a,o);return this.projection.unproject(p)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var r=this.projection.bounds,o=this.scale(a),p=this.transformation.transform(r.min,o),N=this.transformation.transform(r.max,o);return new ue(p,N)},infinite:!1,wrapLatLng:function(a){var r=this.wrapLng?z(a.lng,this.wrapLng,!0):a.lng,o=this.wrapLat?z(a.lat,this.wrapLat,!0):a.lat,p=a.alt;return new Se(o,r,p)},wrapLatLngBounds:function(a){var r=a.getCenter(),o=this.wrapLatLng(r),p=r.lat-o.lat,N=r.lng-o.lng;if(p===0&&N===0)return a;var R=a.getSouthWest(),q=a.getNorthEast(),se=new Se(R.lat-p,R.lng-N),de=new Se(q.lat-p,q.lng-N);return new ye(se,de)}},Ue=g({},Be,{wrapLng:[-180,180],R:6371e3,distance:function(a,r){var o=Math.PI/180,p=a.lat*o,N=r.lat*o,R=Math.sin((r.lat-a.lat)*o/2),q=Math.sin((r.lng-a.lng)*o/2),se=R*R+Math.cos(p)*Math.cos(N)*q*q,de=2*Math.atan2(Math.sqrt(se),Math.sqrt(1-se));return this.R*de}}),Rt=6378137,K={R:Rt,MAX_LATITUDE:85.0511287798,project:function(a){var r=Math.PI/180,o=this.MAX_LATITUDE,p=Math.max(Math.min(o,a.lat),-o),N=Math.sin(p*r);return new G(this.R*a.lng*r,this.R*Math.log((1+N)/(1-N))/2)},unproject:function(a){var r=180/Math.PI;return new Se((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*r,a.x*r/this.R)},bounds:(function(){var a=Rt*Math.PI;return new ue([-a,-a],[a,a])})()};function Ne(a,r,o,p){if(y(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=r,this._c=o,this._d=p}Ne.prototype={transform:function(a,r){return this._transform(a.clone(),r)},_transform:function(a,r){return r=r||1,a.x=r*(this._a*a.x+this._b),a.y=r*(this._c*a.y+this._d),a},untransform:function(a,r){return r=r||1,new G((a.x/r-this._b)/this._a,(a.y/r-this._d)/this._c)}};function Ae(a,r,o,p){return new Ne(a,r,o,p)}var Ce=g({},Ue,{code:"EPSG:3857",projection:K,transformation:(function(){var a=.5/(Math.PI*K.R);return Ae(a,.5,-a,.5)})()}),ct=g({},Ce,{code:"EPSG:900913"});function Ge(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function pt(a,r){var o="",p,N,R,q,se,de;for(p=0,R=a.length;p<R;p++){for(se=a[p],N=0,q=se.length;N<q;N++)de=se[N],o+=(N?"L":"M")+de.x+" "+de.y;o+=r?Re.svg?"z":"x":""}return o||"M0 0"}var ft=document.documentElement.style,Ot="ActiveXObject"in window,ps=Ot&&!document.addEventListener,As="msLaunchUri"in navigator&&!("documentMode"in document),bl=Is("webkit"),xd=Is("android"),md=Is("android 2")||Is("android 3"),Ds=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),o0=xd&&Is("Google")&&Ds<537&&!("AudioNode"in window),Fi=!!window.opera,$n=!As&&Is("chrome"),Zr=Is("gecko")&&!bl&&!Fi&&!Ot,d0=!$n&&Is("safari"),Yn=Is("phantom"),ud="OTransition"in ft,c0=navigator.platform.indexOf("Win")===0,Yl=Ot&&"transition"in ft,Ns="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!md,Ta="MozPerspective"in ft,Rs=!window.L_DISABLE_3D&&(Yl||Ns||Ta)&&!ud&&!Yn,$r=typeof orientation<"u"||Is("mobile"),x0=$r&&bl,m0=$r&&Ns,Yr=!window.PointerEvent&&window.MSPointerEvent,Vr=!!(window.PointerEvent||Yr),Kr="ontouchstart"in window||!!window.TouchEvent,gl=!window.L_NO_TOUCH&&(Kr||Vr),Hi=$r&&Fi,Xr=$r&&Zr,u0=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,hd=(function(){var a=!1;try{var r=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",h,r),window.removeEventListener("testPassiveEventSupport",h,r)}catch{}return a})(),Vn=(function(){return!!document.createElement("canvas").getContext})(),vl=!!(document.createElementNS&&Ge("svg").createSVGRect),h0=!!vl&&(function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),pd=!vl&&(function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var r=a.firstChild;return r.style.behavior="url(#default#VML)",r&&typeof r.adj=="object"}catch{return!1}})(),fd=navigator.platform.indexOf("Mac")===0,bd=navigator.platform.indexOf("Linux")===0;function Is(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Re={ie:Ot,ielt9:ps,edge:As,webkit:bl,android:xd,android23:md,androidStock:o0,opera:Fi,chrome:$n,gecko:Zr,safari:d0,phantom:Yn,opera12:ud,win:c0,ie3d:Yl,webkit3d:Ns,gecko3d:Ta,any3d:Rs,mobile:$r,mobileWebkit:x0,mobileWebkit3d:m0,msPointer:Yr,pointer:Vr,touch:gl,touchNative:Kr,mobileOpera:Hi,mobileGecko:Xr,retina:u0,passiveEvents:hd,canvas:Vn,svg:vl,vml:pd,inlineSvg:h0,mac:fd,linux:bd},Kn=Re.msPointer?"MSPointerDown":"pointerdown",Xn=Re.msPointer?"MSPointerMove":"pointermove",La=Re.msPointer?"MSPointerUp":"pointerup",ss=Re.msPointer?"MSPointerCancel":"pointercancel",fs={touchstart:Kn,touchmove:Xn,touchend:La,touchcancel:ss},jl={touchstart:Kl,touchmove:Ka,touchend:Ka,touchcancel:Ka},Va={},gd=!1;function p0(a,r,o){return r==="touchstart"&&Vl(),jl[r]?(o=jl[r].bind(this,o),a.addEventListener(fs[r],o,!1),o):(console.warn("wrong event specified:",r),h)}function vd(a,r,o){if(!fs[r]){console.warn("wrong event specified:",r);return}a.removeEventListener(fs[r],o,!1)}function Qr(a){Va[a.pointerId]=a}function Qn(a){Va[a.pointerId]&&(Va[a.pointerId]=a)}function Nl(a){delete Va[a.pointerId]}function Vl(){gd||(document.addEventListener(Kn,Qr,!0),document.addEventListener(Xn,Qn,!0),document.addEventListener(La,Nl,!0),document.addEventListener(ss,Nl,!0),gd=!0)}function Ka(a,r){if(r.pointerType!==(r.MSPOINTER_TYPE_MOUSE||"mouse")){r.touches=[];for(var o in Va)r.touches.push(Va[o]);r.changedTouches=[r],a(r)}}function Kl(a,r){r.MSPOINTER_TYPE_TOUCH&&r.pointerType===r.MSPOINTER_TYPE_TOUCH&&$t(r),Ka(a,r)}function as(a){var r={},o,p;for(p in a)o=a[p],r[p]=o&&o.bind?o.bind(a):o;return a=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var jd=200;function Nd(a,r){a.addEventListener("dblclick",r);var o=0,p;function N(R){if(R.detail!==1){p=R.detail;return}if(!(R.pointerType==="mouse"||R.sourceCapabilities&&!R.sourceCapabilities.firesTouchEvents)){var q=li(R);if(!(q.some(function(de){return de instanceof HTMLLabelElement&&de.attributes.for})&&!q.some(function(de){return de instanceof HTMLInputElement||de instanceof HTMLSelectElement}))){var se=Date.now();se-o<=jd?(p++,p===2&&r(as(R))):p=1,o=se}}}return a.addEventListener("click",N),{dblclick:r,simDblclick:N}}function yl(a,r){a.removeEventListener("dblclick",r.dblclick),a.removeEventListener("click",r.simDblclick)}var Xa=ei(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Jr=ei(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Jn=Jr==="webkitTransition"||Jr==="OTransition"?Jr+"End":"transitionend";function Wn(a){return typeof a=="string"?document.getElementById(a):a}function Wr(a,r){var o=a.style[r]||a.currentStyle&&a.currentStyle[r];if((!o||o==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(a,null);o=p?p[r]:null}return o==="auto"?null:o}function We(a,r,o){var p=document.createElement(a);return p.className=r||"",o&&o.appendChild(p),p}function _t(a){var r=a.parentNode;r&&r.removeChild(a)}function Gs(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function cs(a){var r=a.parentNode;r&&r.lastChild!==a&&r.appendChild(a)}function wl(a){var r=a.parentNode;r&&r.firstChild!==a&&r.insertBefore(a,r.firstChild)}function eo(a,r){if(a.classList!==void 0)return a.classList.contains(r);var o=Ii(a);return o.length>0&&new RegExp("(^|\\s)"+r+"(\\s|$)").test(o)}function qe(a,r){if(a.classList!==void 0)for(var o=A(r),p=0,N=o.length;p<N;p++)a.classList.add(o[p]);else if(!eo(a,r)){var R=Ii(a);Xl(a,(R?R+" ":"")+r)}}function Ut(a,r){a.classList!==void 0?a.classList.remove(r):Xl(a,C((" "+Ii(a)+" ").replace(" "+r+" "," ")))}function Xl(a,r){a.className.baseVal===void 0?a.className=r:a.className.baseVal=r}function Ii(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Pt(a,r){"opacity"in a.style?a.style.opacity=r:"filter"in a.style&&to(a,r)}function to(a,r){var o=!1,p="DXImageTransform.Microsoft.Alpha";try{o=a.filters.item(p)}catch{if(r===1)return}r=Math.round(r*100),o?(o.Enabled=r!==100,o.Opacity=r):a.style.filter+=" progid:"+p+"(opacity="+r+")"}function ei(a){for(var r=document.documentElement.style,o=0;o<a.length;o++)if(a[o]in r)return a[o];return!1}function Ma(a,r,o){var p=r||new G(0,0);a.style[Xa]=(Re.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(o?" scale("+o+")":"")}function At(a,r){a._leaflet_pos=r,Re.any3d?Ma(a,r):(a.style.left=r.x+"px",a.style.top=r.y+"px")}function Qa(a){return a._leaflet_pos||new G(0,0)}var Ql,pa,so;if("onselectstart"in document)Ql=function(){He(window,"selectstart",$t)},pa=function(){yt(window,"selectstart",$t)};else{var Jl=ei(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ql=function(){if(Jl){var a=document.documentElement.style;so=a[Jl],a[Jl]="none"}},pa=function(){Jl&&(document.documentElement.style[Jl]=so,so=void 0)}}function Gi(){He(window,"dragstart",$t)}function ti(){yt(window,"dragstart",$t)}var qi,ao;function Wl(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(qs(),qi=a,ao=a.style.outlineStyle,a.style.outlineStyle="none",He(window,"keydown",qs))}function qs(){qi&&(qi.style.outlineStyle=ao,qi=void 0,ao=void 0,yt(window,"keydown",qs))}function Zi(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function si(a){var r=a.getBoundingClientRect();return{x:r.width/a.offsetWidth||1,y:r.height/a.offsetHeight||1,boundingClientRect:r}}var er={__proto__:null,TRANSFORM:Xa,TRANSITION:Jr,TRANSITION_END:Jn,get:Wn,getStyle:Wr,create:We,remove:_t,empty:Gs,toFront:cs,toBack:wl,hasClass:eo,addClass:qe,removeClass:Ut,setClass:Xl,getClass:Ii,setOpacity:Pt,testProp:ei,setTransform:Ma,setPosition:At,getPosition:Qa,get disableTextSelection(){return Ql},get enableTextSelection(){return pa},disableImageDrag:Gi,enableImageDrag:ti,preventOutline:Wl,restoreOutline:qs,getSizedParentNode:Zi,getScale:si};function He(a,r,o,p){if(r&&typeof r=="object")for(var N in r)la(a,N,r[N],o);else{r=A(r);for(var R=0,q=r.length;R<q;R++)la(a,r[R],o,p)}return this}var aa="_leaflet_events";function yt(a,r,o,p){if(arguments.length===1)lo(a),delete a[aa];else if(r&&typeof r=="object")for(var N in r)ai(a,N,r[N],o);else if(r=A(r),arguments.length===2)lo(a,function(se){return P(r,se)!==-1});else for(var R=0,q=r.length;R<q;R++)ai(a,r[R],o,p);return this}function lo(a,r){for(var o in a[aa]){var p=o.split(/\d/)[0];(!r||r(p))&&ai(a,p,null,null,o)}}var kl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function la(a,r,o,p){var N=r+_(o)+(p?"_"+_(p):"");if(a[aa]&&a[aa][N])return this;var R=function(se){return o.call(p||a,se||window.event)},q=R;!Re.touchNative&&Re.pointer&&r.indexOf("touch")===0?R=p0(a,r,R):Re.touch&&r==="dblclick"?R=Nd(a,R):"addEventListener"in a?r==="touchstart"||r==="touchmove"||r==="wheel"||r==="mousewheel"?a.addEventListener(kl[r]||r,R,Re.passiveEvents?{passive:!1}:!1):r==="mouseenter"||r==="mouseleave"?(R=function(se){se=se||window.event,Da(a,se)&&q(se)},a.addEventListener(kl[r],R,!1)):a.addEventListener(r,q,!1):a.attachEvent("on"+r,R),a[aa]=a[aa]||{},a[aa][N]=R}function ai(a,r,o,p,N){N=N||r+_(o)+(p?"_"+_(p):"");var R=a[aa]&&a[aa][N];if(!R)return this;!Re.touchNative&&Re.pointer&&r.indexOf("touch")===0?vd(a,r,R):Re.touch&&r==="dblclick"?yl(a,R):"removeEventListener"in a?a.removeEventListener(kl[r]||r,R,!1):a.detachEvent("on"+r,R),a[aa][N]=null}function ra(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function fa(a){return la(a,"wheel",ra),this}function _l(a){return He(a,"mousedown touchstart dblclick contextmenu",ra),a._leaflet_disable_click=!0,this}function $t(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Ja(a){return $t(a),ra(a),this}function li(a){if(a.composedPath)return a.composedPath();for(var r=[],o=a.target;o;)r.push(o),o=o.parentNode;return r}function ri(a,r){if(!r)return new G(a.clientX,a.clientY);var o=si(r),p=o.boundingClientRect;return new G((a.clientX-p.left)/o.x-r.clientLeft,(a.clientY-p.top)/o.y-r.clientTop)}var yd=Re.linux&&Re.chrome?window.devicePixelRatio:Re.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ys(a){return Re.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/yd:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Da(a,r){var o=r.relatedTarget;if(!o)return!0;try{for(;o&&o!==a;)o=o.parentNode}catch{return!1}return o!==a}var $i={__proto__:null,on:He,off:yt,stopPropagation:ra,disableScrollPropagation:fa,disableClickPropagation:_l,preventDefault:$t,stop:Ja,getPropagationPath:li,getMousePosition:ri,getWheelDelta:ys,isExternalTarget:Da,addListener:He,removeListener:yt},tr=le.extend({run:function(a,r,o,p){this.stop(),this._el=a,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Qa(a),this._offset=r.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=I(this._animate,this),this._step()},_step:function(a){var r=+new Date-this._startTime,o=this._duration*1e3;r<o?this._runFrame(this._easeOut(r/o),a):(this._runFrame(1),this._complete())},_runFrame:function(a,r){var o=this._startPos.add(this._offset.multiplyBy(a));r&&o._round(),At(this._el,o),this.fire("step")},_complete:function(){ee(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),at=le.extend({options:{crs:Ce,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,r){r=M(this,r),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=j(this._onResize,this),this._initEvents(),r.maxBounds&&this.setMaxBounds(r.maxBounds),r.zoom!==void 0&&(this._zoom=this._limitZoom(r.zoom)),r.center&&r.zoom!==void 0&&this.setView(Me(r.center),r.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Jr&&Re.any3d&&!Re.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),He(this._proxy,Jn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,r,o){if(r=r===void 0?this._zoom:this._limitZoom(r),a=this._limitCenter(Me(a),r,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=g({animate:o.animate},o.zoom),o.pan=g({animate:o.animate,duration:o.duration},o.pan));var p=this._zoom!==r?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,r,o.zoom):this._tryAnimatedPan(a,o.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(a,r,o.pan&&o.pan.noMoveStart),this},setZoom:function(a,r){return this._loaded?this.setView(this.getCenter(),a,{zoom:r}):(this._zoom=a,this)},zoomIn:function(a,r){return a=a||(Re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,r)},zoomOut:function(a,r){return a=a||(Re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,r)},setZoomAround:function(a,r,o){var p=this.getZoomScale(r),N=this.getSize().divideBy(2),R=a instanceof G?a:this.latLngToContainerPoint(a),q=R.subtract(N).multiplyBy(1-1/p),se=this.containerPointToLatLng(N.add(q));return this.setView(se,r,{zoom:o})},_getBoundsCenterZoom:function(a,r){r=r||{},a=a.getBounds?a.getBounds():we(a);var o=oe(r.paddingTopLeft||r.padding||[0,0]),p=oe(r.paddingBottomRight||r.padding||[0,0]),N=this.getBoundsZoom(a,!1,o.add(p));if(N=typeof r.maxZoom=="number"?Math.min(r.maxZoom,N):N,N===1/0)return{center:a.getCenter(),zoom:N};var R=p.subtract(o).divideBy(2),q=this.project(a.getSouthWest(),N),se=this.project(a.getNorthEast(),N),de=this.unproject(q.add(se).divideBy(2).add(R),N);return{center:de,zoom:N}},fitBounds:function(a,r){if(a=we(a),!a.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(a,r);return this.setView(o.center,o.zoom,r)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,r){return this.setView(a,this._zoom,{pan:r})},panBy:function(a,r){if(a=oe(a).round(),r=r||{},!a.x&&!a.y)return this.fire("moveend");if(r.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),r.noMoveStart||this.fire("movestart"),r.animate!==!1){qe(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,o,r.duration||.25,r.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,r,o){if(o=o||{},o.animate===!1||!Re.any3d)return this.setView(a,r,o);this._stop();var p=this.project(this.getCenter()),N=this.project(a),R=this.getSize(),q=this._zoom;a=Me(a),r=r===void 0?q:r;var se=Math.max(R.x,R.y),de=se*this.getZoomScale(q,r),ge=N.distanceTo(p)||1,_e=1.42,Oe=_e*_e;function Ke(qt){var Ba=qt?-1:1,Al=qt?de:se,jo=de*de-se*se+Ba*Oe*Oe*ge*ge,Ni=2*Al*Oe*ge,yi=jo/Ni,nl=Math.sqrt(yi*yi+1)-yi,Ua=nl<1e-9?-18:Math.log(nl);return Ua}function xs(qt){return(Math.exp(qt)-Math.exp(-qt))/2}function Yt(qt){return(Math.exp(qt)+Math.exp(-qt))/2}function Ps(qt){return xs(qt)/Yt(qt)}var xt=Ke(0);function mt(qt){return se*(Yt(xt)/Yt(xt+_e*qt))}function et(qt){return se*(Yt(xt)*Ps(xt+_e*qt)-xs(xt))/Oe}function rl(qt){return 1-Math.pow(1-qt,1.5)}var Vs=Date.now(),nn=(Ke(1)-xt)/_e,il=o.duration?1e3*o.duration:1e3*nn*.8;function vo(){var qt=(Date.now()-Vs)/il,Ba=rl(qt)*nn;qt<=1?(this._flyToFrame=I(vo,this),this._move(this.unproject(p.add(N.subtract(p).multiplyBy(et(Ba)/ge)),q),this.getScaleZoom(se/mt(Ba),q),{flyTo:!0})):this._move(a,r)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),vo.call(this),this},flyToBounds:function(a,r){var o=this._getBoundsCenterZoom(a,r);return this.flyTo(o.center,o.zoom,r)},setMaxBounds:function(a){return a=we(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var r=this.options.minZoom;return this.options.minZoom=a,this._loaded&&r!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var r=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&r!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,r){this._enforcingBounds=!0;var o=this.getCenter(),p=this._limitCenter(o,this._zoom,we(a));return o.equals(p)||this.panTo(p,r),this._enforcingBounds=!1,this},panInside:function(a,r){r=r||{};var o=oe(r.paddingTopLeft||r.padding||[0,0]),p=oe(r.paddingBottomRight||r.padding||[0,0]),N=this.project(this.getCenter()),R=this.project(a),q=this.getPixelBounds(),se=ke([q.min.add(o),q.max.subtract(p)]),de=se.getSize();if(!se.contains(R)){this._enforcingBounds=!0;var ge=R.subtract(se.getCenter()),_e=se.extend(R).getSize().subtract(de);N.x+=ge.x<0?-_e.x:_e.x,N.y+=ge.y<0?-_e.y:_e.y,this.panTo(this.unproject(N),r),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=g({animate:!1,pan:!0},a===!0?{animate:!0}:a);var r=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),p=r.divideBy(2).round(),N=o.divideBy(2).round(),R=p.subtract(N);return!R.x&&!R.y?this:(a.animate&&a.pan?this.panBy(R):(a.pan&&this._rawPanBy(R),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(j(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:r,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=g({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var r=j(this._handleGeolocationResponse,this),o=j(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(r,o,a):navigator.geolocation.getCurrentPosition(r,o,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var r=a.code,o=a.message||(r===1?"permission denied":r===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:r,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var r=a.coords.latitude,o=a.coords.longitude,p=new Se(r,o),N=p.toBounds(a.coords.accuracy*2),R=this._locateOptions;if(R.setView){var q=this.getBoundsZoom(N);this.setView(p,R.maxZoom?Math.min(q,R.maxZoom):q)}var se={latlng:p,bounds:N,timestamp:a.timestamp};for(var de in a.coords)typeof a.coords[de]=="number"&&(se[de]=a.coords[de]);this.fire("locationfound",se)}},addHandler:function(a,r){if(!r)return this;var o=this[a]=new r(this);return this._handlers.push(o),this.options[a]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),_t(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ee(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)_t(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,r){var o="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),p=We("div",o,r||this._mapPane);return a&&(this._panes[a]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),r=this.unproject(a.getBottomLeft()),o=this.unproject(a.getTopRight());return new ye(r,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,r,o){a=we(a),o=oe(o||[0,0]);var p=this.getZoom()||0,N=this.getMinZoom(),R=this.getMaxZoom(),q=a.getNorthWest(),se=a.getSouthEast(),de=this.getSize().subtract(o),ge=ke(this.project(se,p),this.project(q,p)).getSize(),_e=Re.any3d?this.options.zoomSnap:1,Oe=de.x/ge.x,Ke=de.y/ge.y,xs=r?Math.max(Oe,Ke):Math.min(Oe,Ke);return p=this.getScaleZoom(xs,p),_e&&(p=Math.round(p/(_e/100))*(_e/100),p=r?Math.ceil(p/_e)*_e:Math.floor(p/_e)*_e),Math.max(N,Math.min(R,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,r){var o=this._getTopLeftPoint(a,r);return new ue(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,r){var o=this.options.crs;return r=r===void 0?this._zoom:r,o.scale(a)/o.scale(r)},getScaleZoom:function(a,r){var o=this.options.crs;r=r===void 0?this._zoom:r;var p=o.zoom(a*o.scale(r));return isNaN(p)?1/0:p},project:function(a,r){return r=r===void 0?this._zoom:r,this.options.crs.latLngToPoint(Me(a),r)},unproject:function(a,r){return r=r===void 0?this._zoom:r,this.options.crs.pointToLatLng(oe(a),r)},layerPointToLatLng:function(a){var r=oe(a).add(this.getPixelOrigin());return this.unproject(r)},latLngToLayerPoint:function(a){var r=this.project(Me(a))._round();return r._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(Me(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(we(a))},distance:function(a,r){return this.options.crs.distance(Me(a),Me(r))},containerPointToLayerPoint:function(a){return oe(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return oe(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var r=this.containerPointToLayerPoint(oe(a));return this.layerPointToLatLng(r)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Me(a)))},mouseEventToContainerPoint:function(a){return ri(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var r=this._container=Wn(a);if(r){if(r._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");He(r,"scroll",this._onScroll,this),this._containerId=_(r)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Re.any3d,qe(a,"leaflet-container"+(Re.touch?" leaflet-touch":"")+(Re.retina?" leaflet-retina":"")+(Re.ielt9?" leaflet-oldie":"")+(Re.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var r=Wr(a,"position");r!=="absolute"&&r!=="relative"&&r!=="fixed"&&r!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),At(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(qe(a.markerPane,"leaflet-zoom-hide"),qe(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,r,o){At(this._mapPane,new G(0,0));var p=!this._loaded;this._loaded=!0,r=this._limitZoom(r),this.fire("viewprereset");var N=this._zoom!==r;this._moveStart(N,o)._move(a,r)._moveEnd(N),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(a,r){return a&&this.fire("zoomstart"),r||this.fire("movestart"),this},_move:function(a,r,o,p){r===void 0&&(r=this._zoom);var N=this._zoom!==r;return this._zoom=r,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),p?o&&o.pinch&&this.fire("zoom",o):((N||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ee(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){At(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[_(this._container)]=this;var r=a?yt:He;r(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&r(window,"resize",this._onResize,this),Re.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ee(this._resizeRequest),this._resizeRequest=I(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,r){for(var o=[],p,N=r==="mouseout"||r==="mouseover",R=a.target||a.srcElement,q=!1;R;){if(p=this._targets[_(R)],p&&(r==="click"||r==="preclick")&&this._draggableMoved(p)){q=!0;break}if(p&&p.listens(r,!0)&&(N&&!Da(R,a)||(o.push(p),N))||R===this._container)break;R=R.parentNode}return!o.length&&!q&&!N&&this.listens(r,!0)&&(o=[this]),o},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var r=a.target||a.srcElement;if(!(!this._loaded||r._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(r))){var o=a.type;o==="mousedown"&&Wl(r),this._fireDOMEvent(a,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,r,o){if(a.type==="click"){var p=g({},a);p.type="preclick",this._fireDOMEvent(p,p.type,o)}var N=this._findEventTargets(a,r);if(o){for(var R=[],q=0;q<o.length;q++)o[q].listens(r,!0)&&R.push(o[q]);N=R.concat(N)}if(N.length){r==="contextmenu"&&$t(a);var se=N[0],de={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var ge=se.getLatLng&&(!se._radius||se._radius<=10);de.containerPoint=ge?this.latLngToContainerPoint(se.getLatLng()):this.mouseEventToContainerPoint(a),de.layerPoint=this.containerPointToLayerPoint(de.containerPoint),de.latlng=ge?se.getLatLng():this.layerPointToLatLng(de.layerPoint)}for(q=0;q<N.length;q++)if(N[q].fire(r,de,!0),de.originalEvent._stopped||N[q].options.bubblingMouseEvents===!1&&P(this._mouseEvents,r)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,r=this._handlers.length;a<r;a++)this._handlers[a].disable()},whenReady:function(a,r){return this._loaded?a.call(r||this,{target:this}):this.on("load",a,r),this},_getMapPanePos:function(){return Qa(this._mapPane)||new G(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,r){var o=a&&r!==void 0?this._getNewPixelOrigin(a,r):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,r){var o=this.getSize()._divideBy(2);return this.project(a,r)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,r,o){var p=this._getNewPixelOrigin(o,r);return this.project(a,r)._subtract(p)},_latLngBoundsToNewLayerBounds:function(a,r,o){var p=this._getNewPixelOrigin(o,r);return ke([this.project(a.getSouthWest(),r)._subtract(p),this.project(a.getNorthWest(),r)._subtract(p),this.project(a.getSouthEast(),r)._subtract(p),this.project(a.getNorthEast(),r)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,r,o){if(!o)return a;var p=this.project(a,r),N=this.getSize().divideBy(2),R=new ue(p.subtract(N),p.add(N)),q=this._getBoundsOffset(R,o,r);return Math.abs(q.x)<=1&&Math.abs(q.y)<=1?a:this.unproject(p.add(q),r)},_limitOffset:function(a,r){if(!r)return a;var o=this.getPixelBounds(),p=new ue(o.min.add(a),o.max.add(a));return a.add(this._getBoundsOffset(p,r))},_getBoundsOffset:function(a,r,o){var p=ke(this.project(r.getNorthEast(),o),this.project(r.getSouthWest(),o)),N=p.min.subtract(a.min),R=p.max.subtract(a.max),q=this._rebound(N.x,-R.x),se=this._rebound(N.y,-R.y);return new G(q,se)},_rebound:function(a,r){return a+r>0?Math.round(a-r)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(r))},_limitZoom:function(a){var r=this.getMinZoom(),o=this.getMaxZoom(),p=Re.any3d?this.options.zoomSnap:1;return p&&(a=Math.round(a/p)*p),Math.max(r,Math.min(o,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ut(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,r){var o=this._getCenterOffset(a)._trunc();return(r&&r.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,r),!0)},_createAnimProxy:function(){var a=this._proxy=We("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(r){var o=Xa,p=this._proxy.style[o];Ma(this._proxy,this.project(r.center,r.zoom),this.getZoomScale(r.zoom,1)),p===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){_t(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),r=this.getZoom();Ma(this._proxy,this.project(a,r),this.getZoomScale(r,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,r,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(r-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(r),N=this._getCenterOffset(a)._divideBy(1-1/p);return o.animate!==!0&&!this.getSize().contains(N)?!1:(I(function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(a,r,!0)},this),!0)},_animateZoom:function(a,r,o,p){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=r,qe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:r,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(j(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ut(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ro(a,r){return new at(a,r)}var Os=Q.extend({options:{position:"topright"},initialize:function(a){M(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var r=this._map;return r&&r.removeControl(this),this.options.position=a,r&&r.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var r=this._container=this.onAdd(a),o=this.getPosition(),p=a._controlCorners[o];return qe(r,"leaflet-control"),o.indexOf("bottom")!==-1?p.insertBefore(r,p.firstChild):p.appendChild(r),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(_t(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Ra=function(a){return new Os(a)};at.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},r="leaflet-",o=this._controlContainer=We("div",r+"control-container",this._container);function p(N,R){var q=r+N+" "+r+R;a[N+R]=We("div",q,o)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)_t(this._controlCorners[a]);_t(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ii=Os.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,r,o,p){return o<p?-1:p<o?1:0}},initialize:function(a,r,o){M(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in a)this._addLayer(a[p],p);for(p in r)this._addLayer(r[p],p,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return Os.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,r){return this._addLayer(a,r),this._map?this._update():this},addOverlay:function(a,r){return this._addLayer(a,r,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var r=this._getLayer(_(a));return r&&this._layers.splice(this._layers.indexOf(r),1),this._map?this._update():this},expand:function(){qe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(qe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):Ut(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ut(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",r=this._container=We("div",a),o=this.options.collapsed;r.setAttribute("aria-haspopup",!0),_l(r),fa(r);var p=this._section=We("section",a+"-list");o&&(this._map.on("click",this.collapse,this),He(r,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var N=this._layersLink=We("a",a+"-toggle",r);N.href="#",N.title="Layers",N.setAttribute("role","button"),He(N,{keydown:function(R){R.keyCode===13&&this._expandSafely()},click:function(R){$t(R),this._expandSafely()}},this),o||this.expand(),this._baseLayersList=We("div",a+"-base",p),this._separator=We("div",a+"-separator",p),this._overlaysList=We("div",a+"-overlays",p),r.appendChild(p)},_getLayer:function(a){for(var r=0;r<this._layers.length;r++)if(this._layers[r]&&_(this._layers[r].layer)===a)return this._layers[r]},_addLayer:function(a,r,o){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:r,overlay:o}),this.options.sortLayers&&this._layers.sort(j(function(p,N){return this.options.sortFunction(p.layer,N.layer,p.name,N.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Gs(this._baseLayersList),Gs(this._overlaysList),this._layerControlInputs=[];var a,r,o,p,N=0;for(o=0;o<this._layers.length;o++)p=this._layers[o],this._addItem(p),r=r||p.overlay,a=a||!p.overlay,N+=p.overlay?0:1;return this.options.hideSingleBase&&(a=a&&N>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=r&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var r=this._getLayer(_(a.target)),o=r.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;o&&this._map.fire(o,r)},_createRadioElement:function(a,r){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(r?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=o,p.firstChild},_addItem:function(a){var r=document.createElement("label"),o=this._map.hasLayer(a.layer),p;a.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=o):p=this._createRadioElement("leaflet-base-layers_"+_(this),o),this._layerControlInputs.push(p),p.layerId=_(a.layer),He(p,"click",this._onInputClick,this);var N=document.createElement("span");N.innerHTML=" "+a.name;var R=document.createElement("span");r.appendChild(R),R.appendChild(p),R.appendChild(N);var q=a.overlay?this._overlaysList:this._baseLayersList;return q.appendChild(r),this._checkDisabledLayers(),r},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,r,o,p=[],N=[];this._handlingClick=!0;for(var R=a.length-1;R>=0;R--)r=a[R],o=this._getLayer(r.layerId).layer,r.checked?p.push(o):r.checked||N.push(o);for(R=0;R<N.length;R++)this._map.hasLayer(N[R])&&this._map.removeLayer(N[R]);for(R=0;R<p.length;R++)this._map.hasLayer(p[R])||this._map.addLayer(p[R]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,r,o,p=this._map.getZoom(),N=a.length-1;N>=0;N--)r=a[N],o=this._getLayer(r.layerId).layer,r.disabled=o.options.minZoom!==void 0&&p<o.options.minZoom||o.options.maxZoom!==void 0&&p>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,He(a,"click",$t),this.expand();var r=this;setTimeout(function(){yt(a,"click",$t),r._preventClick=!1})}}),wd=function(a,r,o){return new ii(a,r,o)},io=Os.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var r="leaflet-control-zoom",o=We("div",r+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,r+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,r+"-out",o,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,r,o,p,N){var R=We("a",o,p);return R.innerHTML=a,R.href="#",R.title=r,R.setAttribute("role","button"),R.setAttribute("aria-label",r),_l(R),He(R,"click",Ja),He(R,"click",N,this),He(R,"click",this._refocusOnMap,this),R},_updateDisabled:function(){var a=this._map,r="leaflet-disabled";Ut(this._zoomInButton,r),Ut(this._zoomOutButton,r),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(qe(this._zoomOutButton,r),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(qe(this._zoomInButton,r),this._zoomInButton.setAttribute("aria-disabled","true"))}});at.mergeOptions({zoomControl:!0}),at.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new io,this.addControl(this.zoomControl))});var f0=function(a){return new io(a)},kd=Os.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var r="leaflet-control-scale",o=We("div",r),p=this.options;return this._addScales(p,r+"-line",o),a.on(p.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),o},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,r,o){a.metric&&(this._mScale=We("div",r,o)),a.imperial&&(this._iScale=We("div",r,o))},_update:function(){var a=this._map,r=a.getSize().y/2,o=a.distance(a.containerPointToLatLng([0,r]),a.containerPointToLatLng([this.options.maxWidth,r]));this._updateScales(o)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var r=this._getRoundNum(a),o=r<1e3?r+" m":r/1e3+" km";this._updateScale(this._mScale,o,r/a)},_updateImperial:function(a){var r=a*3.2808399,o,p,N;r>5280?(o=r/5280,p=this._getRoundNum(o),this._updateScale(this._iScale,p+" mi",p/o)):(N=this._getRoundNum(r),this._updateScale(this._iScale,N+" ft",N/r))},_updateScale:function(a,r,o){a.style.width=Math.round(this.options.maxWidth*o)+"px",a.innerHTML=r},_getRoundNum:function(a){var r=Math.pow(10,(Math.floor(a)+"").length-1),o=a/r;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,r*o}}),no=function(a){return new kd(a)},b0='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',oo=Os.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Re.inlineSvg?b0+" ":"")+"Leaflet</a>"},initialize:function(a){M(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=We("div","leaflet-control-attribution"),_l(this._container);for(var r in a._layers)a._layers[r].getAttribution&&this.addAttribution(a._layers[r].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var r in this._attributions)this._attributions[r]&&a.push(r);var o=[];this.options.prefix&&o.push(this.options.prefix),a.length&&o.push(a.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});at.mergeOptions({attributionControl:!0}),at.addInitHook(function(){this.options.attributionControl&&new oo().addTo(this)});var g0=function(a){return new oo(a)};Os.Layers=ii,Os.Zoom=io,Os.Scale=kd,Os.Attribution=oo,Ra.layers=wd,Ra.zoom=f0,Ra.scale=no,Ra.attribution=g0;var ba=Q.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ba.addTo=function(a,r){return a.addHandler(r,this),this};var v0={Events:B},co=Re.touch?"touchstart mousedown":"mousedown",Wa=le.extend({options:{clickTolerance:3},initialize:function(a,r,o,p){M(this,p),this._element=a,this._dragStartTarget=r||a,this._preventOutline=o},enable:function(){this._enabled||(He(this._dragStartTarget,co,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Wa._dragging===this&&this.finishDrag(!0),yt(this._dragStartTarget,co,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!eo(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Wa._dragging===this&&this.finishDrag();return}if(!(Wa._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Wa._dragging=this,this._preventOutline&&Wl(this._element),Gi(),Ql(),!this._moving)){this.fire("down");var r=a.touches?a.touches[0]:a,o=Zi(this._element);this._startPoint=new G(r.clientX,r.clientY),this._startPos=Qa(this._element),this._parentScale=si(o);var p=a.type==="mousedown";He(document,p?"mousemove":"touchmove",this._onMove,this),He(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var r=a.touches&&a.touches.length===1?a.touches[0]:a,o=new G(r.clientX,r.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,$t(a),this._moved||(this.fire("dragstart"),this._moved=!0,qe(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),qe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),At(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){Ut(document.body,"leaflet-dragging"),this._lastTarget&&(Ut(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),yt(document,"mousemove touchmove",this._onMove,this),yt(document,"mouseup touchend touchcancel",this._onUp,this),ti(),pa();var r=this._moved&&this._moving;this._moving=!1,Wa._dragging=!1,r&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function _d(a,r,o){var p,N=[1,4,2,8],R,q,se,de,ge,_e,Oe,Ke;for(R=0,_e=a.length;R<_e;R++)a[R]._code=Sl(a[R],r);for(se=0;se<4;se++){for(Oe=N[se],p=[],R=0,_e=a.length,q=_e-1;R<_e;q=R++)de=a[R],ge=a[q],de._code&Oe?ge._code&Oe||(Ke=Yi(ge,de,Oe,r,o),Ke._code=Sl(Ke,r),p.push(Ke)):(ge._code&Oe&&(Ke=Yi(ge,de,Oe,r,o),Ke._code=Sl(Ke,r),p.push(Ke)),p.push(de));a=p}return a}function Sd(a,r){var o,p,N,R,q,se,de,ge,_e;if(!a||a.length===0)throw new Error("latlngs not passed");Zs(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Oe=Me([0,0]),Ke=we(a),xs=Ke.getNorthWest().distanceTo(Ke.getSouthWest())*Ke.getNorthEast().distanceTo(Ke.getNorthWest());xs<1700&&(Oe=xo(a));var Yt=a.length,Ps=[];for(o=0;o<Yt;o++){var xt=Me(a[o]);Ps.push(r.project(Me([xt.lat-Oe.lat,xt.lng-Oe.lng])))}for(se=de=ge=0,o=0,p=Yt-1;o<Yt;p=o++)N=Ps[o],R=Ps[p],q=N.y*R.x-R.y*N.x,de+=(N.x+R.x)*q,ge+=(N.y+R.y)*q,se+=q*3;se===0?_e=Ps[0]:_e=[de/se,ge/se];var mt=r.unproject(oe(_e));return Me([mt.lat+Oe.lat,mt.lng+Oe.lng])}function xo(a){for(var r=0,o=0,p=0,N=0;N<a.length;N++){var R=Me(a[N]);r+=R.lat,o+=R.lng,p++}return Me([r/p,o/p])}var mo={__proto__:null,clipPolygon:_d,polygonCenter:Sd,centroid:xo};function Cd(a,r){if(!r||!a.length)return a.slice();var o=r*r;return a=N0(a,o),a=Ad(a,o),a}function Ed(a,r,o){return Math.sqrt(ni(a,r,o,!0))}function j0(a,r,o){return ni(a,r,o)}function Ad(a,r){var o=a.length,p=typeof Uint8Array<"u"?Uint8Array:Array,N=new p(o);N[0]=N[o-1]=1,uo(a,N,r,0,o-1);var R,q=[];for(R=0;R<o;R++)N[R]&&q.push(a[R]);return q}function uo(a,r,o,p,N){var R=0,q,se,de;for(se=p+1;se<=N-1;se++)de=ni(a[se],a[p],a[N],!0),de>R&&(q=se,R=de);R>o&&(r[q]=1,uo(a,r,o,p,q),uo(a,r,o,q,N))}function N0(a,r){for(var o=[a[0]],p=1,N=0,R=a.length;p<R;p++)y0(a[p],a[N])>r&&(o.push(a[p]),N=p);return N<R-1&&o.push(a[R-1]),o}var zd;function Td(a,r,o,p,N){var R=p?zd:Sl(a,o),q=Sl(r,o),se,de,ge;for(zd=q;;){if(!(R|q))return[a,r];if(R&q)return!1;se=R||q,de=Yi(a,r,se,o,N),ge=Sl(de,o),se===R?(a=de,R=ge):(r=de,q=ge)}}function Yi(a,r,o,p,N){var R=r.x-a.x,q=r.y-a.y,se=p.min,de=p.max,ge,_e;return o&8?(ge=a.x+R*(de.y-a.y)/q,_e=de.y):o&4?(ge=a.x+R*(se.y-a.y)/q,_e=se.y):o&2?(ge=de.x,_e=a.y+q*(de.x-a.x)/R):o&1&&(ge=se.x,_e=a.y+q*(se.x-a.x)/R),new G(ge,_e,N)}function Sl(a,r){var o=0;return a.x<r.min.x?o|=1:a.x>r.max.x&&(o|=2),a.y<r.min.y?o|=4:a.y>r.max.y&&(o|=8),o}function y0(a,r){var o=r.x-a.x,p=r.y-a.y;return o*o+p*p}function ni(a,r,o,p){var N=r.x,R=r.y,q=o.x-N,se=o.y-R,de=q*q+se*se,ge;return de>0&&(ge=((a.x-N)*q+(a.y-R)*se)/de,ge>1?(N=o.x,R=o.y):ge>0&&(N+=q*ge,R+=se*ge)),q=a.x-N,se=a.y-R,p?q*q+se*se:new G(N,R)}function Zs(a){return!y(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function Vi(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Zs(a)}function sr(a,r){var o,p,N,R,q,se,de,ge;if(!a||a.length===0)throw new Error("latlngs not passed");Zs(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var _e=Me([0,0]),Oe=we(a),Ke=Oe.getNorthWest().distanceTo(Oe.getSouthWest())*Oe.getNorthEast().distanceTo(Oe.getNorthWest());Ke<1700&&(_e=xo(a));var xs=a.length,Yt=[];for(o=0;o<xs;o++){var Ps=Me(a[o]);Yt.push(r.project(Me([Ps.lat-_e.lat,Ps.lng-_e.lng])))}for(o=0,p=0;o<xs-1;o++)p+=Yt[o].distanceTo(Yt[o+1])/2;if(p===0)ge=Yt[0];else for(o=0,R=0;o<xs-1;o++)if(q=Yt[o],se=Yt[o+1],N=q.distanceTo(se),R+=N,R>p){de=(R-p)/N,ge=[se.x-de*(se.x-q.x),se.y-de*(se.y-q.y)];break}var xt=r.unproject(oe(ge));return Me([xt.lat+_e.lat,xt.lng+_e.lng])}var w0={__proto__:null,simplify:Cd,pointToSegmentDistance:Ed,closestPointOnSegment:j0,clipSegment:Td,_getEdgeIntersection:Yi,_getBitCode:Sl,_sqClosestPointOnSegment:ni,isFlat:Zs,_flat:Vi,polylineCenter:sr},Ki={project:function(a){return new G(a.lng,a.lat)},unproject:function(a){return new Se(a.y,a.x)},bounds:new ue([-180,-90],[180,90])},Xi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ue([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var r=Math.PI/180,o=this.R,p=a.lat*r,N=this.R_MINOR/o,R=Math.sqrt(1-N*N),q=R*Math.sin(p),se=Math.tan(Math.PI/4-p/2)/Math.pow((1-q)/(1+q),R/2);return p=-o*Math.log(Math.max(se,1e-10)),new G(a.lng*r*o,p)},unproject:function(a){for(var r=180/Math.PI,o=this.R,p=this.R_MINOR/o,N=Math.sqrt(1-p*p),R=Math.exp(-a.y/o),q=Math.PI/2-2*Math.atan(R),se=0,de=.1,ge;se<15&&Math.abs(de)>1e-7;se++)ge=N*Math.sin(q),ge=Math.pow((1-ge)/(1+ge),N/2),de=Math.PI/2-2*Math.atan(R*ge)-q,q+=de;return new Se(q*r,a.x*r/o)}},Ld={__proto__:null,LonLat:Ki,Mercator:Xi,SphericalMercator:K},Md=g({},Ue,{code:"EPSG:3395",projection:Xi,transformation:(function(){var a=.5/(Math.PI*Xi.R);return Ae(a,.5,-a,.5)})()}),ho=g({},Ue,{code:"EPSG:4326",projection:Ki,transformation:Ae(1/180,1,-1/180,.5)}),ar=g({},Be,{projection:Ki,transformation:Ae(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,r){var o=r.lng-a.lng,p=r.lat-a.lat;return Math.sqrt(o*o+p*p)},infinite:!0});Be.Earth=Ue,Be.EPSG3395=Md,Be.EPSG3857=Ce,Be.EPSG900913=ct,Be.EPSG4326=ho,Be.Simple=ar;var ia=le.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[_(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[_(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var r=a.target;if(r.hasLayer(this)){if(this._map=r,this._zoomAnimated=r._zoomAnimated,this.getEvents){var o=this.getEvents();r.on(o,this),this.once("remove",function(){r.off(o,this)},this)}this.onAdd(r),this.fire("add"),r.fire("layeradd",{layer:this})}}});at.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var r=_(a);return this._layers[r]?this:(this._layers[r]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var r=_(a);return this._layers[r]?(this._loaded&&a.onRemove(this),delete this._layers[r],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return _(a)in this._layers},eachLayer:function(a,r){for(var o in this._layers)a.call(r,this._layers[o]);return this},_addLayers:function(a){a=a?y(a)?a:[a]:[];for(var r=0,o=a.length;r<o;r++)this.addLayer(a[r])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[_(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var r=_(a);this._zoomBoundLayers[r]&&(delete this._zoomBoundLayers[r],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,r=-1/0,o=this._getZoomSpan();for(var p in this._zoomBoundLayers){var N=this._zoomBoundLayers[p].options;a=N.minZoom===void 0?a:Math.min(a,N.minZoom),r=N.maxZoom===void 0?r:Math.max(r,N.maxZoom)}this._layersMaxZoom=r===-1/0?void 0:r,this._layersMinZoom=a===1/0?void 0:a,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var lr=ia.extend({initialize:function(a,r){M(this,r),this._layers={};var o,p;if(a)for(o=0,p=a.length;o<p;o++)this.addLayer(a[o])},addLayer:function(a){var r=this.getLayerId(a);return this._layers[r]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var r=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[r]&&this._map.removeLayer(this._layers[r]),delete this._layers[r],this},hasLayer:function(a){var r=typeof a=="number"?a:this.getLayerId(a);return r in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var r=Array.prototype.slice.call(arguments,1),o,p;for(o in this._layers)p=this._layers[o],p[a]&&p[a].apply(p,r);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,r){for(var o in this._layers)a.call(r,this._layers[o]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return _(a)}}),k0=function(a,r){return new lr(a,r)},ga=lr.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),lr.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),lr.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new ye;for(var r in this._layers){var o=this._layers[r];a.extend(o.getBounds?o.getBounds():o.getLatLng())}return a}}),Dd=function(a,r){return new ga(a,r)},va=Q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){M(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,r){var o=this._getIconUrl(a);if(!o){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(o,r&&r.tagName==="IMG"?r:null);return this._setIconStyles(p,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(a,r){var o=this.options,p=o[r+"Size"];typeof p=="number"&&(p=[p,p]);var N=oe(p),R=oe(r==="shadow"&&o.shadowAnchor||o.iconAnchor||N&&N.divideBy(2,!0));a.className="leaflet-marker-"+r+" "+(o.className||""),R&&(a.style.marginLeft=-R.x+"px",a.style.marginTop=-R.y+"px"),N&&(a.style.width=N.x+"px",a.style.height=N.y+"px")},_createImg:function(a,r){return r=r||document.createElement("img"),r.src=a,r},_getIconUrl:function(a){return Re.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function oi(a){return new va(a)}var di=va.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof di.imagePath!="string"&&(di.imagePath=this._detectIconPath()),(this.options.imagePath||di.imagePath)+va.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var r=function(o,p,N){var R=p.exec(o);return R&&R[N]};return a=r(a,/^url\((['"])?(.+)\1\)$/,2),a&&r(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=We("div","leaflet-default-icon-path",document.body),r=Wr(a,"background-image")||Wr(a,"backgroundImage");if(document.body.removeChild(a),r=this._stripUrl(r),r)return r;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),ci=ba.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Wa(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),qe(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ut(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var r=this._marker,o=r._map,p=this._marker.options.autoPanSpeed,N=this._marker.options.autoPanPadding,R=Qa(r._icon),q=o.getPixelBounds(),se=o.getPixelOrigin(),de=ke(q.min._subtract(se).add(N),q.max._subtract(se).subtract(N));if(!de.contains(R)){var ge=oe((Math.max(de.max.x,R.x)-de.max.x)/(q.max.x-de.max.x)-(Math.min(de.min.x,R.x)-de.min.x)/(q.min.x-de.min.x),(Math.max(de.max.y,R.y)-de.max.y)/(q.max.y-de.max.y)-(Math.min(de.min.y,R.y)-de.min.y)/(q.min.y-de.min.y)).multiplyBy(p);o.panBy(ge,{animate:!1}),this._draggable._newPos._add(ge),this._draggable._startPos._add(ge),At(r._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=I(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(ee(this._panRequest),this._panRequest=I(this._adjustPan.bind(this,a)))},_onDrag:function(a){var r=this._marker,o=r._shadow,p=Qa(r._icon),N=r._map.layerPointToLatLng(p);o&&At(o,p),r._latlng=N,a.latlng=N,a.oldLatLng=this._oldLatLng,r.fire("move",a).fire("drag",a)},_onDragEnd:function(a){ee(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),xi=ia.extend({options:{icon:new di,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,r){M(this,r),this._latlng=Me(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var r=this._latlng;return this._latlng=Me(a),this.update(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,r="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=a.icon.createIcon(this._icon),p=!1;o!==this._icon&&(this._icon&&this._removeIcon(),p=!0,a.title&&(o.title=a.title),o.tagName==="IMG"&&(o.alt=a.alt||"")),qe(o,r),a.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&He(o,"focus",this._panOnFocus,this);var N=a.icon.createShadow(this._shadow),R=!1;N!==this._shadow&&(this._removeShadow(),R=!0),N&&(qe(N,r),N.alt=""),this._shadow=N,a.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),N&&R&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&yt(this._icon,"focus",this._panOnFocus,this),_t(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&_t(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&At(this._icon,a),this._shadow&&At(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var r=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(r)},_initInteraction:function(){if(this.options.interactive&&(qe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ci)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ci(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Pt(this._icon,a),this._shadow&&Pt(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var r=this.options.icon.options,o=r.iconSize?oe(r.iconSize):oe(0,0),p=r.iconAnchor?oe(r.iconAnchor):oe(0,0);a.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:o.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Rd(a,r){return new xi(a,r)}var ja=ia.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return M(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),rr=ja.extend({options:{fill:!0,radius:10},initialize:function(a,r){M(this,r),this._latlng=Me(a),this._radius=this.options.radius},setLatLng:function(a){var r=this._latlng;return this._latlng=Me(a),this.redraw(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var r=a&&a.radius||this._radius;return ja.prototype.setStyle.call(this,a),this.setRadius(r),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,r=this._radiusY||a,o=this._clickTolerance(),p=[a+o,r+o];this._pxBounds=new ue(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Od(a,r){return new rr(a,r)}var Qi=rr.extend({initialize:function(a,r,o){if(typeof r=="number"&&(r=g({},o,{radius:r})),M(this,r),this._latlng=Me(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new ye(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:ja.prototype.setStyle,_project:function(){var a=this._latlng.lng,r=this._latlng.lat,o=this._map,p=o.options.crs;if(p.distance===Ue.distance){var N=Math.PI/180,R=this._mRadius/Ue.R/N,q=o.project([r+R,a]),se=o.project([r-R,a]),de=q.add(se).divideBy(2),ge=o.unproject(de).lat,_e=Math.acos((Math.cos(R*N)-Math.sin(r*N)*Math.sin(ge*N))/(Math.cos(r*N)*Math.cos(ge*N)))/N;(isNaN(_e)||_e===0)&&(_e=R/Math.cos(Math.PI/180*r)),this._point=de.subtract(o.getPixelOrigin()),this._radius=isNaN(_e)?0:de.x-o.project([ge,a-_e]).x,this._radiusY=de.y-q.y}else{var Oe=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(Oe).x}this._updateBounds()}});function Pd(a,r,o){return new Qi(a,r,o)}var Oa=ja.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,r){M(this,r),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var r=1/0,o=null,p=ni,N,R,q=0,se=this._parts.length;q<se;q++)for(var de=this._parts[q],ge=1,_e=de.length;ge<_e;ge++){N=de[ge-1],R=de[ge];var Oe=p(a,N,R,!0);Oe<r&&(r=Oe,o=p(a,N,R))}return o&&(o.distance=Math.sqrt(r)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return sr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,r){return r=r||this._defaultShape(),a=Me(a),r.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new ye,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return Zs(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var r=[],o=Zs(a),p=0,N=a.length;p<N;p++)o?(r[p]=Me(a[p]),this._bounds.extend(r[p])):r[p]=this._convertLatLngs(a[p]);return r},_project:function(){var a=new ue;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),r=new G(a,a);this._rawPxBounds&&(this._pxBounds=new ue([this._rawPxBounds.min.subtract(r),this._rawPxBounds.max.add(r)]))},_projectLatlngs:function(a,r,o){var p=a[0]instanceof Se,N=a.length,R,q;if(p){for(q=[],R=0;R<N;R++)q[R]=this._map.latLngToLayerPoint(a[R]),o.extend(q[R]);r.push(q)}else for(R=0;R<N;R++)this._projectLatlngs(a[R],r,o)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var r=this._parts,o,p,N,R,q,se,de;for(o=0,N=0,R=this._rings.length;o<R;o++)for(de=this._rings[o],p=0,q=de.length;p<q-1;p++)se=Td(de[p],de[p+1],a,p,!0),se&&(r[N]=r[N]||[],r[N].push(se[0]),(se[1]!==de[p+1]||p===q-2)&&(r[N].push(se[1]),N++))}},_simplifyPoints:function(){for(var a=this._parts,r=this.options.smoothFactor,o=0,p=a.length;o<p;o++)a[o]=Cd(a[o],r)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,r){var o,p,N,R,q,se,de=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(o=0,R=this._parts.length;o<R;o++)for(se=this._parts[o],p=0,q=se.length,N=q-1;p<q;N=p++)if(!(!r&&p===0)&&Ed(a,se[N],se[p])<=de)return!0;return!1}});function _0(a,r){return new Oa(a,r)}Oa._flat=Vi;var ir=Oa.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Sd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var r=Oa.prototype._convertLatLngs.call(this,a),o=r.length;return o>=2&&r[0]instanceof Se&&r[0].equals(r[o-1])&&r.pop(),r},_setLatLngs:function(a){Oa.prototype._setLatLngs.call(this,a),Zs(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Zs(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,r=this.options.weight,o=new G(r,r);if(a=new ue(a.min.subtract(o),a.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,N=this._rings.length,R;p<N;p++)R=_d(this._rings[p],a,!0),R.length&&this._parts.push(R)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var r=!1,o,p,N,R,q,se,de,ge;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(R=0,de=this._parts.length;R<de;R++)for(o=this._parts[R],q=0,ge=o.length,se=ge-1;q<ge;se=q++)p=o[q],N=o[se],p.y>a.y!=N.y>a.y&&a.x<(N.x-p.x)*(a.y-p.y)/(N.y-p.y)+p.x&&(r=!r);return r||Oa.prototype._containsPoint.call(this,a,!0)}});function S0(a,r){return new ir(a,r)}var Pa=ga.extend({initialize:function(a,r){M(this,r),this._layers={},a&&this.addData(a)},addData:function(a){var r=y(a)?a:a.features,o,p,N;if(r){for(o=0,p=r.length;o<p;o++)N=r[o],(N.geometries||N.geometry||N.features||N.coordinates)&&this.addData(N);return this}var R=this.options;if(R.filter&&!R.filter(a))return this;var q=bs(a,R);return q?(q.feature=en(a),q.defaultOptions=q.options,this.resetStyle(q),R.onEachFeature&&R.onEachFeature(a,q),this.addLayer(q)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=g({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(r){this._setLayerStyle(r,a)},this)},_setLayerStyle:function(a,r){a.setStyle&&(typeof r=="function"&&(r=r(a.feature)),a.setStyle(r))}});function bs(a,r){var o=a.type==="Feature"?a.geometry:a,p=o?o.coordinates:null,N=[],R=r&&r.pointToLayer,q=r&&r.coordsToLatLng||Ji,se,de,ge,_e;if(!p&&!o)return null;switch(o.type){case"Point":return se=q(p),nr(R,a,se,r);case"MultiPoint":for(ge=0,_e=p.length;ge<_e;ge++)se=q(p[ge]),N.push(nr(R,a,se,r));return new ga(N);case"LineString":case"MultiLineString":return de=mi(p,o.type==="LineString"?0:1,q),new Oa(de,r);case"Polygon":case"MultiPolygon":return de=mi(p,o.type==="Polygon"?1:2,q),new ir(de,r);case"GeometryCollection":for(ge=0,_e=o.geometries.length;ge<_e;ge++){var Oe=bs({geometry:o.geometries[ge],type:"Feature",properties:a.properties},r);Oe&&N.push(Oe)}return new ga(N);case"FeatureCollection":for(ge=0,_e=o.features.length;ge<_e;ge++){var Ke=bs(o.features[ge],r);Ke&&N.push(Ke)}return new ga(N);default:throw new Error("Invalid GeoJSON object.")}}function nr(a,r,o,p){return a?a(r,o):new xi(o,p&&p.markersInheritOptions&&p)}function Ji(a){return new Se(a[1],a[0],a[2])}function mi(a,r,o){for(var p=[],N=0,R=a.length,q;N<R;N++)q=r?mi(a[N],r-1,o):(o||Ji)(a[N]),p.push(q);return p}function Wi(a,r){return a=Me(a),a.alt!==void 0?[b(a.lng,r),b(a.lat,r),b(a.alt,r)]:[b(a.lng,r),b(a.lat,r)]}function ui(a,r,o,p){for(var N=[],R=0,q=a.length;R<q;R++)N.push(r?ui(a[R],Zs(a[R])?0:r-1,o,p):Wi(a[R],p));return!r&&o&&N.length>0&&N.push(N[0].slice()),N}function el(a,r){return a.feature?g({},a.feature,{geometry:r}):en(r)}function en(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var tl={toGeoJSON:function(a){return el(this,{type:"Point",coordinates:Wi(this.getLatLng(),a)})}};xi.include(tl),Qi.include(tl),rr.include(tl),Oa.include({toGeoJSON:function(a){var r=!Zs(this._latlngs),o=ui(this._latlngs,r?1:0,!1,a);return el(this,{type:(r?"Multi":"")+"LineString",coordinates:o})}}),ir.include({toGeoJSON:function(a){var r=!Zs(this._latlngs),o=r&&!Zs(this._latlngs[0]),p=ui(this._latlngs,o?2:r?1:0,!0,a);return r||(p=[p]),el(this,{type:(o?"Multi":"")+"Polygon",coordinates:p})}}),lr.include({toMultiPoint:function(a){var r=[];return this.eachLayer(function(o){r.push(o.toGeoJSON(a).geometry.coordinates)}),el(this,{type:"MultiPoint",coordinates:r})},toGeoJSON:function(a){var r=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(r==="MultiPoint")return this.toMultiPoint(a);var o=r==="GeometryCollection",p=[];return this.eachLayer(function(N){if(N.toGeoJSON){var R=N.toGeoJSON(a);if(o)p.push(R.geometry);else{var q=en(R);q.type==="FeatureCollection"?p.push.apply(p,q.features):p.push(q)}}}),o?el(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function tn(a,r){return new Pa(a,r)}var hi=tn,or=ia.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,r,o){this._url=a,this._bounds=we(r),M(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(qe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){_t(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&cs(this._image),this},bringToBack:function(){return this._map&&wl(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=we(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",r=this._image=a?this._url:We("img");if(qe(r,"leaflet-image-layer"),this._zoomAnimated&&qe(r,"leaflet-zoom-animated"),this.options.className&&qe(r,this.options.className),r.onselectstart=h,r.onmousemove=h,r.onload=j(this.fire,this,"load"),r.onerror=j(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=r.src;return}r.src=this._url,r.alt=this.options.alt},_animateZoom:function(a){var r=this._map.getZoomScale(a.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Ma(this._image,o,r)},_reset:function(){var a=this._image,r=new ue(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=r.getSize();At(a,r.min),a.style.width=o.x+"px",a.style.height=o.y+"px"},_updateOpacity:function(){Pt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Bd=function(a,r,o){return new or(a,r,o)},sl=or.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",r=this._image=a?this._url:We("video");if(qe(r,"leaflet-image-layer"),this._zoomAnimated&&qe(r,"leaflet-zoom-animated"),this.options.className&&qe(r,this.options.className),r.onselectstart=h,r.onmousemove=h,r.onloadeddata=j(this.fire,this,"load"),a){for(var o=r.getElementsByTagName("source"),p=[],N=0;N<o.length;N++)p.push(o[N].src);this._url=o.length>0?p:[r.src];return}y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(r.style,"objectFit")&&(r.style.objectFit="fill"),r.autoplay=!!this.options.autoplay,r.loop=!!this.options.loop,r.muted=!!this.options.muted,r.playsInline=!!this.options.playsInline;for(var R=0;R<this._url.length;R++){var q=We("source");q.src=this._url[R],r.appendChild(q)}}});function dr(a,r,o){return new sl(a,r,o)}var sn=or.extend({_initImage:function(){var a=this._image=this._url;qe(a,"leaflet-image-layer"),this._zoomAnimated&&qe(a,"leaflet-zoom-animated"),this.options.className&&qe(a,this.options.className),a.onselectstart=h,a.onmousemove=h}});function Ud(a,r,o){return new sn(a,r,o)}var gs=ia.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,r){a&&(a instanceof Se||y(a))?(this._latlng=Me(a),M(this,r)):(M(this,a),this._source=r),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Pt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Pt(this._container,1),this.bringToFront(),this.options.interactive&&(qe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Pt(this._container,0),this._removeTimeout=setTimeout(j(_t,void 0,this._container),200)):_t(this._container),this.options.interactive&&(Ut(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=Me(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&cs(this._container),this},bringToBack:function(){return this._map&&wl(this._container),this},_prepareOpen:function(a){var r=this._source;if(!r._map)return!1;if(r instanceof ga){r=null;var o=this._source._layers;for(var p in o)if(o[p]._map){r=o[p];break}if(!r)return!1;this._source=r}if(!a)if(r.getCenter)a=r.getCenter();else if(r.getLatLng)a=r.getLatLng();else if(r.getBounds)a=r.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,r=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof r=="string")a.innerHTML=r;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(r)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),r=oe(this.options.offset),o=this._getAnchor();this._zoomAnimated?At(this._container,a.add(o)):r=r.add(a).add(o);var p=this._containerBottom=-r.y,N=this._containerLeft=-Math.round(this._containerWidth/2)+r.x;this._container.style.bottom=p+"px",this._container.style.left=N+"px"}},_getAnchor:function(){return[0,0]}});at.include({_initOverlay:function(a,r,o,p){var N=r;return N instanceof a||(N=new a(p).setContent(r)),o&&N.setLatLng(o),N}}),ia.include({_initOverlay:function(a,r,o,p){var N=o;return N instanceof a?(M(N,p),N._source=this):(N=r&&!p?r:new a(p,this),N.setContent(o)),N}});var pi=gs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,gs.prototype.openOn.call(this,a)},onAdd:function(a){gs.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ja||this._source.on("preclick",ra))},onRemove:function(a){gs.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ja||this._source.off("preclick",ra))},getEvents:function(){var a=gs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",r=this._container=We("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=We("div",a+"-content-wrapper",r);if(this._contentNode=We("div",a+"-content",o),_l(r),fa(this._contentNode),He(r,"contextmenu",ra),this._tipContainer=We("div",a+"-tip-container",r),this._tip=We("div",a+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=We("a",a+"-close-button",r);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',He(p,"click",function(N){$t(N),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,r=a.style;r.width="",r.whiteSpace="nowrap";var o=a.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),r.width=o+1+"px",r.whiteSpace="",r.height="";var p=a.offsetHeight,N=this.options.maxHeight,R="leaflet-popup-scrolled";N&&p>N?(r.height=N+"px",qe(a,R)):Ut(a,R),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var r=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),o=this._getAnchor();At(this._container,r.add(o))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,r=parseInt(Wr(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+r,p=this._containerWidth,N=new G(this._containerLeft,-o-this._containerBottom);N._add(Qa(this._container));var R=a.layerPointToContainerPoint(N),q=oe(this.options.autoPanPadding),se=oe(this.options.autoPanPaddingTopLeft||q),de=oe(this.options.autoPanPaddingBottomRight||q),ge=a.getSize(),_e=0,Oe=0;R.x+p+de.x>ge.x&&(_e=R.x+p-ge.x+de.x),R.x-_e-se.x<0&&(_e=R.x-se.x),R.y+o+de.y>ge.y&&(Oe=R.y+o-ge.y+de.y),R.y-Oe-se.y<0&&(Oe=R.y-se.y),(_e||Oe)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([_e,Oe]))}},_getAnchor:function(){return oe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Fd=function(a,r){return new pi(a,r)};at.mergeOptions({closePopupOnClick:!0}),at.include({openPopup:function(a,r,o){return this._initOverlay(pi,a,r,o).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),ia.include({bindPopup:function(a,r){return this._popup=this._initOverlay(pi,this._popup,a,r),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof ga||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Ja(a);var r=a.layer||a.target;if(this._popup._source===r&&!(r instanceof ja)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=r,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var fi=gs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){gs.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){gs.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=gs.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",r=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=We("div",r),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+_(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var r,o,p=this._map,N=this._container,R=p.latLngToContainerPoint(p.getCenter()),q=p.layerPointToContainerPoint(a),se=this.options.direction,de=N.offsetWidth,ge=N.offsetHeight,_e=oe(this.options.offset),Oe=this._getAnchor();se==="top"?(r=de/2,o=ge):se==="bottom"?(r=de/2,o=0):se==="center"?(r=de/2,o=ge/2):se==="right"?(r=0,o=ge/2):se==="left"?(r=de,o=ge/2):q.x<R.x?(se="right",r=0,o=ge/2):(se="left",r=de+(_e.x+Oe.x)*2,o=ge/2),a=a.subtract(oe(r,o,!0)).add(_e).add(Oe),Ut(N,"leaflet-tooltip-right"),Ut(N,"leaflet-tooltip-left"),Ut(N,"leaflet-tooltip-top"),Ut(N,"leaflet-tooltip-bottom"),qe(N,"leaflet-tooltip-"+se),At(N,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Pt(this._container,a)},_animateZoom:function(a){var r=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(r)},_getAnchor:function(){return oe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),C0=function(a,r){return new fi(a,r)};at.include({openTooltip:function(a,r,o){return this._initOverlay(fi,a,r,o).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),ia.include({bindTooltip:function(a,r){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(fi,this._tooltip,a,r),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var r=a?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip,this._map?this._addFocusListeners():o.add=this._addFocusListeners),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[r](o),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof ga||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var r=typeof a.getElement=="function"&&a.getElement();r&&(He(r,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),He(r,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var r=typeof a.getElement=="function"&&a.getElement();r&&r.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var r=this;this._map.once("moveend",function(){r._openOnceFlag=!1,r._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var r=a.latlng,o,p;this._tooltip.options.sticky&&a.originalEvent&&(o=this._map.mouseEventToContainerPoint(a.originalEvent),p=this._map.containerPointToLayerPoint(o),r=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(r)}});var Hd=va.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var r=a&&a.tagName==="DIV"?a:document.createElement("div"),o=this.options;if(o.html instanceof Element?(Gs(r),r.appendChild(o.html)):r.innerHTML=o.html!==!1?o.html:"",o.bgPos){var p=oe(o.bgPos);r.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(r,"icon"),r},createShadow:function(){return null}});function E0(a){return new Hd(a)}va.Default=di;var cr=ia.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Re.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){M(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),_t(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(cs(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(wl(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=E(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof G?a:new G(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var r=this.getPane().children,o=-a(-1/0,1/0),p=0,N=r.length,R;p<N;p++)R=r[p].style.zIndex,r[p]!==this._container&&R&&(o=a(o,+R));isFinite(o)&&(this.options.zIndex=o+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Re.ielt9){Pt(this._container,this.options.opacity);var a=+new Date,r=!1,o=!1;for(var p in this._tiles){var N=this._tiles[p];if(!(!N.current||!N.loaded)){var R=Math.min(1,(a-N.loaded)/200);Pt(N.el,R),R<1?r=!0:(N.active?o=!0:this._onOpaqueTile(N),N.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),r&&(ee(this._fadeFrame),this._fadeFrame=I(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=We("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,r=this.options.maxZoom;if(a!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===a?(this._levels[o].el.style.zIndex=r-Math.abs(a-o),this._onUpdateLevel(o)):(_t(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var p=this._levels[a],N=this._map;return p||(p=this._levels[a]={},p.el=We("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=r,p.origin=N.project(N.unproject(N.getPixelOrigin()),a).round(),p.zoom=a,this._setZoomTransform(p,N.getCenter(),N.getZoom()),h(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var a,r,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)r=this._tiles[a],r.retain=r.current;for(a in this._tiles)if(r=this._tiles[a],r.current&&!r.active){var p=r.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var r in this._tiles)this._tiles[r].coords.z===a&&this._removeTile(r)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)_t(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,r,o,p){var N=Math.floor(a/2),R=Math.floor(r/2),q=o-1,se=new G(+N,+R);se.z=+q;var de=this._tileCoordsToKey(se),ge=this._tiles[de];return ge&&ge.active?(ge.retain=!0,!0):(ge&&ge.loaded&&(ge.retain=!0),q>p?this._retainParent(N,R,q,p):!1)},_retainChildren:function(a,r,o,p){for(var N=2*a;N<2*a+2;N++)for(var R=2*r;R<2*r+2;R++){var q=new G(N,R);q.z=o+1;var se=this._tileCoordsToKey(q),de=this._tiles[se];if(de&&de.active){de.retain=!0;continue}else de&&de.loaded&&(de.retain=!0);o+1<p&&this._retainChildren(N,R,o+1,p)}},_resetView:function(a){var r=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),r,r)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var r=this.options;return r.minNativeZoom!==void 0&&a<r.minNativeZoom?r.minNativeZoom:r.maxNativeZoom!==void 0&&r.maxNativeZoom<a?r.maxNativeZoom:a},_setView:function(a,r,o,p){var N=Math.round(r);this.options.maxZoom!==void 0&&N>this.options.maxZoom||this.options.minZoom!==void 0&&N<this.options.minZoom?N=void 0:N=this._clampZoom(N);var R=this.options.updateWhenZooming&&N!==this._tileZoom;(!p||R)&&(this._tileZoom=N,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),N!==void 0&&this._update(a),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(a,r)},_setZoomTransforms:function(a,r){for(var o in this._levels)this._setZoomTransform(this._levels[o],a,r)},_setZoomTransform:function(a,r,o){var p=this._map.getZoomScale(o,a.zoom),N=a.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(r,o)).round();Re.any3d?Ma(a.el,N,p):At(a.el,N)},_resetGrid:function(){var a=this._map,r=a.options.crs,o=this._tileSize=this.getTileSize(),p=this._tileZoom,N=this._map.getPixelWorldBounds(this._tileZoom);N&&(this._globalTileRange=this._pxBoundsToTileRange(N)),this._wrapX=r.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,r.wrapLng[0]],p).x/o.x),Math.ceil(a.project([0,r.wrapLng[1]],p).x/o.y)],this._wrapY=r.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([r.wrapLat[0],0],p).y/o.x),Math.ceil(a.project([r.wrapLat[1],0],p).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var r=this._map,o=r._animatingZoom?Math.max(r._animateToZoom,r.getZoom()):r.getZoom(),p=r.getZoomScale(o,this._tileZoom),N=r.project(a,this._tileZoom).floor(),R=r.getSize().divideBy(p*2);return new ue(N.subtract(R),N.add(R))},_update:function(a){var r=this._map;if(r){var o=this._clampZoom(r.getZoom());if(a===void 0&&(a=r.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(a),N=this._pxBoundsToTileRange(p),R=N.getCenter(),q=[],se=this.options.keepBuffer,de=new ue(N.getBottomLeft().subtract([se,-se]),N.getTopRight().add([se,-se]));if(!(isFinite(N.min.x)&&isFinite(N.min.y)&&isFinite(N.max.x)&&isFinite(N.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ge in this._tiles){var _e=this._tiles[ge].coords;(_e.z!==this._tileZoom||!de.contains(new G(_e.x,_e.y)))&&(this._tiles[ge].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(a,o);return}for(var Oe=N.min.y;Oe<=N.max.y;Oe++)for(var Ke=N.min.x;Ke<=N.max.x;Ke++){var xs=new G(Ke,Oe);if(xs.z=this._tileZoom,!!this._isValidTile(xs)){var Yt=this._tiles[this._tileCoordsToKey(xs)];Yt?Yt.current=!0:q.push(xs)}}if(q.sort(function(xt,mt){return xt.distanceTo(R)-mt.distanceTo(R)}),q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ps=document.createDocumentFragment();for(Ke=0;Ke<q.length;Ke++)this._addTile(q[Ke],Ps);this._level.el.appendChild(Ps)}}}},_isValidTile:function(a){var r=this._map.options.crs;if(!r.infinite){var o=this._globalTileRange;if(!r.wrapLng&&(a.x<o.min.x||a.x>o.max.x)||!r.wrapLat&&(a.y<o.min.y||a.y>o.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(a);return we(this.options.bounds).overlaps(p)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var r=this._map,o=this.getTileSize(),p=a.scaleBy(o),N=p.add(o),R=r.unproject(p,a.z),q=r.unproject(N,a.z);return[R,q]},_tileCoordsToBounds:function(a){var r=this._tileCoordsToNwSe(a),o=new ye(r[0],r[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var r=a.split(":"),o=new G(+r[0],+r[1]);return o.z=+r[2],o},_removeTile:function(a){var r=this._tiles[a];r&&(_t(r.el),delete this._tiles[a],this.fire("tileunload",{tile:r.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){qe(a,"leaflet-tile");var r=this.getTileSize();a.style.width=r.x+"px",a.style.height=r.y+"px",a.onselectstart=h,a.onmousemove=h,Re.ielt9&&this.options.opacity<1&&Pt(a,this.options.opacity)},_addTile:function(a,r){var o=this._getTilePos(a),p=this._tileCoordsToKey(a),N=this.createTile(this._wrapCoords(a),j(this._tileReady,this,a));this._initTile(N),this.createTile.length<2&&I(j(this._tileReady,this,a,null,N)),At(N,o),this._tiles[p]={el:N,coords:a,current:!0},r.appendChild(N),this.fire("tileloadstart",{tile:N,coords:a})},_tileReady:function(a,r,o){r&&this.fire("tileerror",{error:r,tile:o,coords:a});var p=this._tileCoordsToKey(a);o=this._tiles[p],o&&(o.loaded=+new Date,this._map._fadeAnimated?(Pt(o.el,0),ee(this._fadeFrame),this._fadeFrame=I(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),r||(qe(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Re.ielt9||!this._map._fadeAnimated?I(this._pruneTiles,this):setTimeout(j(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var r=new G(this._wrapX?z(a.x,this._wrapX):a.x,this._wrapY?z(a.y,this._wrapY):a.y);return r.z=a.z,r},_pxBoundsToTileRange:function(a){var r=this.getTileSize();return new ue(a.min.unscaleBy(r).floor(),a.max.unscaleBy(r).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function Id(a){return new cr(a)}var al=cr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,r){this._url=a,r=M(this,r),r.detectRetina&&Re.retina&&r.maxZoom>0?(r.tileSize=Math.floor(r.tileSize/2),r.zoomReverse?(r.zoomOffset--,r.minZoom=Math.min(r.maxZoom,r.minZoom+1)):(r.zoomOffset++,r.maxZoom=Math.max(r.minZoom,r.maxZoom-1)),r.minZoom=Math.max(0,r.minZoom)):r.zoomReverse?r.minZoom=Math.min(r.maxZoom,r.minZoom):r.maxZoom=Math.max(r.minZoom,r.maxZoom),typeof r.subdomains=="string"&&(r.subdomains=r.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,r){return this._url===a&&r===void 0&&(r=!0),this._url=a,r||this.redraw(),this},createTile:function(a,r){var o=document.createElement("img");return He(o,"load",j(this._tileOnLoad,this,r,o)),He(o,"error",j(this._tileOnError,this,r,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(a),o},getTileUrl:function(a){var r={r:Re.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-a.y;this.options.tms&&(r.y=o),r["-y"]=o}return D(this._url,g(r,this.options))},_tileOnLoad:function(a,r){Re.ielt9?setTimeout(j(a,this,null,r),0):a(null,r)},_tileOnError:function(a,r,o){var p=this.options.errorTileUrl;p&&r.getAttribute("src")!==p&&(r.src=p),a(o,r)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,r=this.options.maxZoom,o=this.options.zoomReverse,p=this.options.zoomOffset;return o&&(a=r-a),a+p},_getSubdomain:function(a){var r=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[r]},_abortLoading:function(){var a,r;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(r=this._tiles[a].el,r.onload=h,r.onerror=h,!r.complete)){r.src=U;var o=this._tiles[a].coords;_t(r),delete this._tiles[a],this.fire("tileabort",{tile:r,coords:o})}},_removeTile:function(a){var r=this._tiles[a];if(r)return r.el.setAttribute("src",U),cr.prototype._removeTile.call(this,a)},_tileReady:function(a,r,o){if(!(!this._map||o&&o.getAttribute("src")===U))return cr.prototype._tileReady.call(this,a,r,o)}});function $s(a,r){return new al(a,r)}var bi=al.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,r){this._url=a;var o=g({},this.defaultWmsParams);for(var p in r)p in this.options||(o[p]=r[p]);r=M(this,r);var N=r.detectRetina&&Re.retina?2:1,R=this.getTileSize();o.width=R.x*N,o.height=R.y*N,this.wmsParams=o},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var r=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[r]=this._crs.code,al.prototype.onAdd.call(this,a)},getTileUrl:function(a){var r=this._tileCoordsToNwSe(a),o=this._crs,p=ke(o.project(r[0]),o.project(r[1])),N=p.min,R=p.max,q=(this._wmsVersion>=1.3&&this._crs===ho?[N.y,N.x,R.y,R.x]:[N.x,N.y,R.x,R.y]).join(","),se=al.prototype.getTileUrl.call(this,a);return se+k(this.wmsParams,se,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+q},setParams:function(a,r){return g(this.wmsParams,a),r||this.redraw(),this}});function Ys(a,r){return new bi(a,r)}al.WMS=bi,$s.wms=Ys;var zs=ia.extend({options:{padding:.1},initialize:function(a){M(this,a),_(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),qe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,r){var o=this._map.getZoomScale(r,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),N=this._map.project(this._center,r),R=p.multiplyBy(-o).add(N).subtract(this._map._getNewPixelOrigin(a,r));Re.any3d?Ma(this._container,R,o):At(this._container,R)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,r=this._map.getSize(),o=this._map.containerPointToLayerPoint(r.multiplyBy(-a)).round();this._bounds=new ue(o,o.add(r.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),an=zs.extend({options:{tolerance:0},getEvents:function(){var a=zs.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){zs.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");He(a,"mousemove",this._onMouseMove,this),He(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),He(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){ee(this._redrawRequest),delete this._ctx,_t(this._container),yt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var r in this._layers)a=this._layers[r],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zs.prototype._update.call(this);var a=this._bounds,r=this._container,o=a.getSize(),p=Re.retina?2:1;At(r,a.min),r.width=p*o.x,r.height=p*o.y,r.style.width=o.x+"px",r.style.height=o.y+"px",Re.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){zs.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[_(a)]=a;var r=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=r),this._drawLast=r,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var r=a._order,o=r.next,p=r.prev;o?o.prev=p:this._drawLast=p,p?p.next=o:this._drawFirst=o,delete a._order,delete this._layers[_(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var r=a.options.dashArray.split(/[, ]+/),o=[],p,N;for(N=0;N<r.length;N++){if(p=Number(r[N]),isNaN(p))return;o.push(p)}a.options._dashArray=o}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||I(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var r=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ue,this._redrawBounds.extend(a._pxBounds.min.subtract([r,r])),this._redrawBounds.extend(a._pxBounds.max.add([r,r]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var r=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,r.x,r.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,r=this._redrawBounds;if(this._ctx.save(),r){var o=r.getSize();this._ctx.beginPath(),this._ctx.rect(r.min.x,r.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)a=p.layer,(!r||a._pxBounds&&a._pxBounds.intersects(r))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,r){if(this._drawing){var o,p,N,R,q=a._parts,se=q.length,de=this._ctx;if(se){for(de.beginPath(),o=0;o<se;o++){for(p=0,N=q[o].length;p<N;p++)R=q[o][p],de[p?"lineTo":"moveTo"](R.x,R.y);r&&de.closePath()}this._fillStroke(de,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var r=a._point,o=this._ctx,p=Math.max(Math.round(a._radius),1),N=(Math.max(Math.round(a._radiusY),1)||p)/p;N!==1&&(o.save(),o.scale(1,N)),o.beginPath(),o.arc(r.x,r.y/N,p,0,Math.PI*2,!1),N!==1&&o.restore(),this._fillStroke(o,a)}},_fillStroke:function(a,r){var o=r.options;o.fill&&(a.globalAlpha=o.fillOpacity,a.fillStyle=o.fillColor||o.color,a.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(a.setLineDash&&a.setLineDash(r.options&&r.options._dashArray||[]),a.globalAlpha=o.opacity,a.lineWidth=o.weight,a.strokeStyle=o.color,a.lineCap=o.lineCap,a.lineJoin=o.lineJoin,a.stroke())},_onClick:function(a){for(var r=this._map.mouseEventToLayerPoint(a),o,p,N=this._drawFirst;N;N=N.next)o=N.layer,o.options.interactive&&o._containsPoint(r)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(o))&&(p=o);this._fireEvent(p?[p]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var r=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,r)}},_handleMouseOut:function(a){var r=this._hoveredLayer;r&&(Ut(this._container,"leaflet-interactive"),this._fireEvent([r],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,r){if(!this._mouseHoverThrottled){for(var o,p,N=this._drawFirst;N;N=N.next)o=N.layer,o.options.interactive&&o._containsPoint(r)&&(p=o);p!==this._hoveredLayer&&(this._handleMouseOut(a),p&&(qe(this._container,"leaflet-interactive"),this._fireEvent([p],a,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(j(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,r,o){this._map._fireDOMEvent(r,o||r.type,a)},_bringToFront:function(a){var r=a._order;if(r){var o=r.next,p=r.prev;if(o)o.prev=p;else return;p?p.next=o:o&&(this._drawFirst=o),r.prev=this._drawLast,this._drawLast.next=r,r.next=null,this._drawLast=r,this._requestRedraw(a)}},_bringToBack:function(a){var r=a._order;if(r){var o=r.next,p=r.prev;if(p)p.next=o;else return;o?o.prev=p:p&&(this._drawLast=p),r.prev=null,r.next=this._drawFirst,this._drawFirst.prev=r,this._drawFirst=r,this._requestRedraw(a)}}});function gi(a){return Re.canvas?new an(a):null}var ll=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),po={_initContainer:function(){this._container=We("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(zs.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var r=a._container=ll("shape");qe(r,"leaflet-vml-shape "+(this.options.className||"")),r.coordsize="1 1",a._path=ll("path"),r.appendChild(a._path),this._updateStyle(a),this._layers[_(a)]=a},_addPath:function(a){var r=a._container;this._container.appendChild(r),a.options.interactive&&a.addInteractiveTarget(r)},_removePath:function(a){var r=a._container;_t(r),a.removeInteractiveTarget(r),delete this._layers[_(a)]},_updateStyle:function(a){var r=a._stroke,o=a._fill,p=a.options,N=a._container;N.stroked=!!p.stroke,N.filled=!!p.fill,p.stroke?(r||(r=a._stroke=ll("stroke")),N.appendChild(r),r.weight=p.weight+"px",r.color=p.color,r.opacity=p.opacity,p.dashArray?r.dashStyle=y(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):r.dashStyle="",r.endcap=p.lineCap.replace("butt","flat"),r.joinstyle=p.lineJoin):r&&(N.removeChild(r),a._stroke=null),p.fill?(o||(o=a._fill=ll("fill")),N.appendChild(o),o.color=p.fillColor||p.color,o.opacity=p.fillOpacity):o&&(N.removeChild(o),a._fill=null)},_updateCircle:function(a){var r=a._point.round(),o=Math.round(a._radius),p=Math.round(a._radiusY||o);this._setPath(a,a._empty()?"M0 0":"AL "+r.x+","+r.y+" "+o+","+p+" 0,"+65535*360)},_setPath:function(a,r){a._path.v=r},_bringToFront:function(a){cs(a._container)},_bringToBack:function(a){wl(a._container)}},Na=Re.vml?ll:Ge,xr=zs.extend({_initContainer:function(){this._container=Na("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Na("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){_t(this._container),yt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zs.prototype._update.call(this);var a=this._bounds,r=a.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(r))&&(this._svgSize=r,o.setAttribute("width",r.x),o.setAttribute("height",r.y)),At(o,a.min),o.setAttribute("viewBox",[a.min.x,a.min.y,r.x,r.y].join(" ")),this.fire("update")}},_initPath:function(a){var r=a._path=Na("path");a.options.className&&qe(r,a.options.className),a.options.interactive&&qe(r,"leaflet-interactive"),this._updateStyle(a),this._layers[_(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){_t(a._path),a.removeInteractiveTarget(a._path),delete this._layers[_(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var r=a._path,o=a.options;r&&(o.stroke?(r.setAttribute("stroke",o.color),r.setAttribute("stroke-opacity",o.opacity),r.setAttribute("stroke-width",o.weight),r.setAttribute("stroke-linecap",o.lineCap),r.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?r.setAttribute("stroke-dasharray",o.dashArray):r.removeAttribute("stroke-dasharray"),o.dashOffset?r.setAttribute("stroke-dashoffset",o.dashOffset):r.removeAttribute("stroke-dashoffset")):r.setAttribute("stroke","none"),o.fill?(r.setAttribute("fill",o.fillColor||o.color),r.setAttribute("fill-opacity",o.fillOpacity),r.setAttribute("fill-rule",o.fillRule||"evenodd")):r.setAttribute("fill","none"))},_updatePoly:function(a,r){this._setPath(a,pt(a._parts,r))},_updateCircle:function(a){var r=a._point,o=Math.max(Math.round(a._radius),1),p=Math.max(Math.round(a._radiusY),1)||o,N="a"+o+","+p+" 0 1,0 ",R=a._empty()?"M0 0":"M"+(r.x-o)+","+r.y+N+o*2+",0 "+N+-o*2+",0 ";this._setPath(a,R)},_setPath:function(a,r){a._path.setAttribute("d",r)},_bringToFront:function(a){cs(a._path)},_bringToBack:function(a){wl(a._path)}});Re.vml&&xr.include(po);function vi(a){return Re.svg||Re.vml?new xr(a):null}at.include({getRenderer:function(a){var r=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return r||(r=this._renderer=this._createRenderer()),this.hasLayer(r)||this.addLayer(r),r},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var r=this._paneRenderers[a];return r===void 0&&(r=this._createRenderer({pane:a}),this._paneRenderers[a]=r),r},_createRenderer:function(a){return this.options.preferCanvas&&gi(a)||vi(a)}});var Cl=ir.extend({initialize:function(a,r){ir.prototype.initialize.call(this,this._boundsToLatLngs(a),r)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=we(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function A0(a,r){return new Cl(a,r)}xr.create=Na,xr.pointsToPath=pt,Pa.geometryToLayer=bs,Pa.coordsToLatLng=Ji,Pa.coordsToLatLngs=mi,Pa.latLngToCoords=Wi,Pa.latLngsToCoords=ui,Pa.getFeature=el,Pa.asFeature=en,at.mergeOptions({boxZoom:!0});var Ts=ba.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){He(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){yt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){_t(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ql(),Gi(),this._startPoint=this._map.mouseEventToContainerPoint(a),He(document,{contextmenu:Ja,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=We("div","leaflet-zoom-box",this._container),qe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var r=new ue(this._point,this._startPoint),o=r.getSize();At(this._box,r.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(_t(this._box),Ut(this._container,"leaflet-crosshair")),pa(),ti(),yt(document,{contextmenu:Ja,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(j(this._resetState,this),0);var r=new ye(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(r).fire("boxzoomend",{boxZoomBounds:r})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});at.addInitHook("addHandler","boxZoom",Ts),at.mergeOptions({doubleClickZoom:!0});var ln=ba.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var r=this._map,o=r.getZoom(),p=r.options.zoomDelta,N=a.originalEvent.shiftKey?o-p:o+p;r.options.doubleClickZoom==="center"?r.setZoom(N):r.setZoomAround(a.containerPoint,N)}});at.addInitHook("addHandler","doubleClickZoom",ln),at.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ya=ba.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Wa(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}qe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ut(this._map._container,"leaflet-grab"),Ut(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var r=we(this._map.options.maxBounds);this._offsetLimit=ke(this._map.latLngToContainerPoint(r.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(r.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var r=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(r),this._prunePositions(r)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),r=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=r.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,r){return a-(a-r)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),r=this._offsetLimit;a.x<r.min.x&&(a.x=this._viscousLimit(a.x,r.min.x)),a.y<r.min.y&&(a.y=this._viscousLimit(a.y,r.min.y)),a.x>r.max.x&&(a.x=this._viscousLimit(a.x,r.max.x)),a.y>r.max.y&&(a.y=this._viscousLimit(a.y,r.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,r=Math.round(a/2),o=this._initialWorldOffset,p=this._draggable._newPos.x,N=(p-r+o)%a+r-o,R=(p+r+o)%a-r-o,q=Math.abs(N+o)<Math.abs(R+o)?N:R;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=q},_onDragEnd:function(a){var r=this._map,o=r.options,p=!o.inertia||a.noInertia||this._times.length<2;if(r.fire("dragend",a),p)r.fire("moveend");else{this._prunePositions(+new Date);var N=this._lastPos.subtract(this._positions[0]),R=(this._lastTime-this._times[0])/1e3,q=o.easeLinearity,se=N.multiplyBy(q/R),de=se.distanceTo([0,0]),ge=Math.min(o.inertiaMaxSpeed,de),_e=se.multiplyBy(ge/de),Oe=ge/(o.inertiaDeceleration*q),Ke=_e.multiplyBy(-Oe/2).round();!Ke.x&&!Ke.y?r.fire("moveend"):(Ke=r._limitOffset(Ke,r.options.maxBounds),I(function(){r.panBy(Ke,{duration:Oe,easeLinearity:q,noMoveStart:!0,animate:!0})}))}}});at.addInitHook("addHandler","dragging",ya),at.mergeOptions({keyboard:!0,keyboardPanDelta:80});var fo=ba.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),He(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),yt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,r=document.documentElement,o=a.scrollTop||r.scrollTop,p=a.scrollLeft||r.scrollLeft;this._map._container.focus(),window.scrollTo(p,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var r=this._panKeys={},o=this.keyCodes,p,N;for(p=0,N=o.left.length;p<N;p++)r[o.left[p]]=[-1*a,0];for(p=0,N=o.right.length;p<N;p++)r[o.right[p]]=[a,0];for(p=0,N=o.down.length;p<N;p++)r[o.down[p]]=[0,a];for(p=0,N=o.up.length;p<N;p++)r[o.up[p]]=[0,-1*a]},_setZoomDelta:function(a){var r=this._zoomKeys={},o=this.keyCodes,p,N;for(p=0,N=o.zoomIn.length;p<N;p++)r[o.zoomIn[p]]=a;for(p=0,N=o.zoomOut.length;p<N;p++)r[o.zoomOut[p]]=-a},_addHooks:function(){He(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){yt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var r=a.keyCode,o=this._map,p;if(r in this._panKeys){if(!o._panAnim||!o._panAnim._inProgress)if(p=this._panKeys[r],a.shiftKey&&(p=oe(p).multiplyBy(3)),o.options.maxBounds&&(p=o._limitOffset(oe(p),o.options.maxBounds)),o.options.worldCopyJump){var N=o.wrapLatLng(o.unproject(o.project(o.getCenter()).add(p)));o.panTo(N)}else o.panBy(p)}else if(r in this._zoomKeys)o.setZoom(o.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[r]);else if(r===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;Ja(a)}}});at.addInitHook("addHandler","keyboard",fo),at.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ji=ba.extend({addHooks:function(){He(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){yt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var r=ys(a),o=this._map.options.wheelDebounceTime;this._delta+=r,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var p=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(j(this._performZoom,this),p),Ja(a)},_performZoom:function(){var a=this._map,r=a.getZoom(),o=this._map.options.zoomSnap||0;a._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),N=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,R=o?Math.ceil(N/o)*o:N,q=a._limitZoom(r+(this._delta>0?R:-R))-r;this._delta=0,this._startTime=null,q&&(a.options.scrollWheelZoom==="center"?a.setZoom(r+q):a.setZoomAround(this._lastMousePos,r+q))}});at.addInitHook("addHandler","scrollWheelZoom",ji);var El=600;at.mergeOptions({tapHold:Re.touchNative&&Re.safari&&Re.mobile,tapTolerance:15});var rn=ba.extend({addHooks:function(){He(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){yt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var r=a.touches[0];this._startPos=this._newPos=new G(r.clientX,r.clientY),this._holdTimeout=setTimeout(j(function(){this._cancel(),this._isTapValid()&&(He(document,"touchend",$t),He(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",r))},this),El),He(document,"touchend touchcancel contextmenu",this._cancel,this),He(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){yt(document,"touchend",$t),yt(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),yt(document,"touchend touchcancel contextmenu",this._cancel,this),yt(document,"touchmove",this._onMove,this)},_onMove:function(a){var r=a.touches[0];this._newPos=new G(r.clientX,r.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,r){var o=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY});o._simulated=!0,r.target.dispatchEvent(o)}});at.addInitHook("addHandler","tapHold",rn),at.mergeOptions({touchZoom:Re.touch,bounceAtZoomLimits:!0});var bo=ba.extend({addHooks:function(){qe(this._map._container,"leaflet-touch-zoom"),He(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ut(this._map._container,"leaflet-touch-zoom"),yt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var r=this._map;if(!(!a.touches||a.touches.length!==2||r._animatingZoom||this._zooming)){var o=r.mouseEventToContainerPoint(a.touches[0]),p=r.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=r.getSize()._divideBy(2),this._startLatLng=r.containerPointToLatLng(this._centerPoint),r.options.touchZoom!=="center"&&(this._pinchStartLatLng=r.containerPointToLatLng(o.add(p)._divideBy(2))),this._startDist=o.distanceTo(p),this._startZoom=r.getZoom(),this._moved=!1,this._zooming=!0,r._stop(),He(document,"touchmove",this._onTouchMove,this),He(document,"touchend touchcancel",this._onTouchEnd,this),$t(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var r=this._map,o=r.mouseEventToContainerPoint(a.touches[0]),p=r.mouseEventToContainerPoint(a.touches[1]),N=o.distanceTo(p)/this._startDist;if(this._zoom=r.getScaleZoom(N,this._startZoom),!r.options.bounceAtZoomLimits&&(this._zoom<r.getMinZoom()&&N<1||this._zoom>r.getMaxZoom()&&N>1)&&(this._zoom=r._limitZoom(this._zoom)),r.options.touchZoom==="center"){if(this._center=this._startLatLng,N===1)return}else{var R=o._add(p)._divideBy(2)._subtract(this._centerPoint);if(N===1&&R.x===0&&R.y===0)return;this._center=r.unproject(r.project(this._pinchStartLatLng,this._zoom).subtract(R),this._zoom)}this._moved||(r._moveStart(!0,!1),this._moved=!0),ee(this._animRequest);var q=j(r._move,r,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=I(q,this,!0),$t(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ee(this._animRequest),yt(document,"touchmove",this._onTouchMove,this),yt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});at.addInitHook("addHandler","touchZoom",bo),at.BoxZoom=Ts,at.DoubleClickZoom=ln,at.Drag=ya,at.Keyboard=fo,at.ScrollWheelZoom=ji,at.TapHold=rn,at.TouchZoom=bo,c.Bounds=ue,c.Browser=Re,c.CRS=Be,c.Canvas=an,c.Circle=Qi,c.CircleMarker=rr,c.Class=Q,c.Control=Os,c.DivIcon=Hd,c.DivOverlay=gs,c.DomEvent=$i,c.DomUtil=er,c.Draggable=Wa,c.Evented=le,c.FeatureGroup=ga,c.GeoJSON=Pa,c.GridLayer=cr,c.Handler=ba,c.Icon=va,c.ImageOverlay=or,c.LatLng=Se,c.LatLngBounds=ye,c.Layer=ia,c.LayerGroup=lr,c.LineUtil=w0,c.Map=at,c.Marker=xi,c.Mixin=v0,c.Path=ja,c.Point=G,c.PolyUtil=mo,c.Polygon=ir,c.Polyline=Oa,c.Popup=pi,c.PosAnimation=tr,c.Projection=Ld,c.Rectangle=Cl,c.Renderer=zs,c.SVG=xr,c.SVGOverlay=sn,c.TileLayer=al,c.Tooltip=fi,c.Transformation=Ne,c.Util=$,c.VideoOverlay=sl,c.bind=j,c.bounds=ke,c.canvas=gi,c.circle=Pd,c.circleMarker=Od,c.control=Ra,c.divIcon=E0,c.extend=g,c.featureGroup=Dd,c.geoJSON=tn,c.geoJson=hi,c.gridLayer=Id,c.icon=oi,c.imageOverlay=Bd,c.latLng=Me,c.latLngBounds=we,c.layerGroup=k0,c.map=ro,c.marker=Rd,c.point=oe,c.polygon=S0,c.polyline=_0,c.popup=Fd,c.rectangle=A0,c.setOptions=M,c.stamp=_,c.svg=vi,c.svgOverlay=Ud,c.tileLayer=$s,c.tooltip=C0,c.transformation=Ae,c.version=u,c.videoOverlay=dr;var go=window.L;c.noConflict=function(){return window.L=go,this},window.L=c}))})(sd,sd.exports)),sd.exports}var dd=ny();const i0=kg(dd);function Bm(n,m,c){return Object.freeze({instance:n,context:m,container:c})}function Um(n,m){return m==null?function(u,g){const v=f.useRef(void 0);return v.current||(v.current=n(u,g)),v}:function(u,g){const v=f.useRef(void 0);v.current||(v.current=n(u,g));const j=f.useRef(u),{instance:S}=v.current;return f.useEffect(function(){j.current!==u&&(m(S,u,j.current),j.current=u)},[S,u,m]),v}}function oy(n,m){f.useEffect(function(){return(m.layerContainer??m.map).addLayer(n.instance),function(){m.layerContainer?.removeLayer(n.instance),m.map.removeLayer(n.instance)}},[m,n])}function Jf(n){return function(c){const u=Xf(),g=n(Pm(c,u),u);return Kf(u.map,c.attribution),Qf(g.current,c.eventHandlers),oy(g.current,u),g}}function dy(n,m){const c=Um(n,m),u=Jf(c);return sy(u)}function cy(n,m){const c=Um(n),u=ry(c,m);return ay(u)}function xy(n,m){const c=Um(n,m),u=Jf(c);return ly(u)}function my(n,m,c){const{opacity:u,zIndex:g}=m;u!=null&&u!==c.opacity&&n.setOpacity(u),g!=null&&g!==c.zIndex&&n.setZIndex(g)}function uy({bounds:n,boundsOptions:m,center:c,children:u,className:g,id:v,placeholder:j,style:S,whenReady:_,zoom:E,...z},h){const[b]=f.useState({className:g,id:v,style:S}),[C,A]=f.useState(null),M=f.useRef(void 0);f.useImperativeHandle(h,()=>C?.map??null,[C]);const k=f.useCallback(D=>{if(D!==null&&!M.current){const y=new dd.Map(D,z);M.current=y,c!=null&&E!=null?y.setView(c,E):n!=null&&y.fitBounds(n,m),_!=null&&y.whenReady(_),A(ey(y))}},[]);f.useEffect(()=>()=>{C?.map.remove()},[C]);const T=C?js.createElement(Om,{value:C},u):j??null;return js.createElement("div",{...b,ref:k},T)}const Wf=f.forwardRef(uy),eb=dy(function({position:m,...c},u){const g=new dd.Marker(m,c);return Bm(g,ty(u,{overlayContainer:g}))},function(m,c,u){c.position!==u.position&&m.setLatLng(c.position),c.icon!=null&&c.icon!==u.icon&&m.setIcon(c.icon),c.zIndexOffset!=null&&c.zIndexOffset!==u.zIndexOffset&&m.setZIndexOffset(c.zIndexOffset),c.opacity!=null&&c.opacity!==u.opacity&&m.setOpacity(c.opacity),m.dragging!=null&&c.draggable!==u.draggable&&(c.draggable===!0?m.dragging.enable():m.dragging.disable())}),tb=cy(function(m,c){const u=new dd.Popup(m,c.overlayContainer);return Bm(u,c)},function(m,c,{position:u},g){f.useEffect(function(){const{instance:j}=m;function S(E){E.popup===j&&(j.update(),g(!0))}function _(E){E.popup===j&&g(!1)}return c.map.on({popupopen:S,popupclose:_}),c.overlayContainer==null?(u!=null&&j.setLatLng(u),j.openOn(c.map)):c.overlayContainer.bindPopup(j),function(){c.map.off({popupopen:S,popupclose:_}),c.overlayContainer?.unbindPopup(),c.map.removeLayer(j)}},[m,c,g,u])}),sb=xy(function({url:m,...c},u){const g=new dd.TileLayer(m,Pm(c,u));return Bm(g,u)},function(m,c,u){my(m,c,u);const{url:g}=c;g!=null&&g!==u.url&&m.setUrl(g)}),ab="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",lb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";let hy=i0.icon({iconUrl:ab,shadowUrl:lb,iconSize:[25,41],iconAnchor:[12,41]});i0.Marker.prototype.options.icon=hy;const py=()=>{const{id:n}=Zt(),m=Le(),[c,u]=f.useState(null),[g,v]=f.useState(!0),[j,S]=f.useState(!1),[_,E]=f.useState(!1),[z,h]=f.useState("overview"),[b,C]=f.useState({type:"PAYMENT",amount:"",description:"",method:"CASH"}),[A,M]=f.useState({route_id:"",pickup_point:"",pickup_location_embed:""});f.useEffect(()=>{k()},[n]);const k=async()=>{try{const H=await V.get(`/api/transport/students/${n}/`);u(H.data)}catch(H){console.error(H)}finally{v(!1)}},T=async H=>{H.preventDefault();try{await V.post(`/api/transport/students/${n}/`,{action:"TRANSACTION",...b}),S(!1),C({type:"PAYMENT",amount:"",description:"",method:"CASH"}),k()}catch{alert("Failed to record transaction")}},D=async H=>{H.preventDefault();try{await V.post(`/api/transport/students/${n}/`,{action:"ASSIGN_ROUTE",...A}),E(!1),M({route_id:"",pickup_point:"",pickup_location_embed:""}),k()}catch(xe){alert(xe.response?.data?.error||"Failed to assign route")}},y=async H=>{if(confirm("Remove this route assignment?"))try{await V.post(`/api/transport/students/${n}/`,{action:"REMOVE_ROUTE",assignment_id:H}),k()}catch{alert("Failed to remove route")}};if(g)return e.jsx("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-900 dark:to-slate-800",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600"}),e.jsx(Ia,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-blue-600",size:20})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm font-medium",children:"Loading..."})]})});if(!c)return e.jsx("div",{className:"p-8 text-center",children:"Student not found"});const P=c.student,U=P.balance,F=U<0?"credit":U>0?"owing":"clear",Z=c.transactions.filter(H=>H.type==="PAYMENT").reduce((H,xe)=>H+xe.amount,0),ae=c.transactions.filter(H=>H.type==="CHARGE").reduce((H,xe)=>H+xe.amount,0);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-slate-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 pb-12",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 pt-4",children:e.jsxs("button",{onClick:()=>m("/transport-portal/students"),className:"flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors text-sm font-medium",children:[e.jsx(fl,{size:16}),"Back to Students"]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-blue-600 to-indigo-600 p-4 shadow-lg",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -mr-32 -mt-32"}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[P.photo?e.jsx("img",{src:P.photo,alt:P.name,className:"w-16 h-16 rounded-xl object-cover border-2 border-white/30"}):e.jsx("div",{className:"w-16 h-16 rounded-xl bg-white/20 flex items-center justify-center border-2 border-white/30",children:e.jsx(Qe,{size:32,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white mb-1",children:P.name}),e.jsxs("div",{className:"flex gap-2 text-xs",children:[e.jsx("span",{className:"px-2 py-0.5 bg-white/20 rounded-md text-white font-medium",children:P.adm}),e.jsx("span",{className:"px-2 py-0.5 bg-white/20 rounded-md text-white font-medium",children:P.grade}),e.jsx("span",{className:`px-2 py-0.5 rounded-md font-medium ${F==="credit"?"bg-emerald-500/30 text-emerald-100":F==="owing"?"bg-red-500/30 text-red-100":"bg-white/20 text-white"}`,children:F==="credit"?"Credit":F==="owing"?"Owing":"Clear"})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-white/70 mb-1",children:"Current Balance"}),e.jsx("p",{className:`text-2xl font-black ${U<0?"text-emerald-300":U>0?"text-red-300":"text-white"}`,children:Math.abs(U).toLocaleString()}),e.jsx("p",{className:"text-xs text-white/60",children:"KES"})]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 mb-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-3 shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-1.5 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg",children:e.jsx(Dt,{size:16,className:"text-emerald-600 dark:text-emerald-400"})}),e.jsx("span",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400",children:"PAID"})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Total Paid"}),e.jsx("p",{className:"text-lg font-bold text-slate-900 dark:text-white",children:Z.toLocaleString()})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-3 shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-1.5 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(Rn,{size:16,className:"text-blue-600 dark:text-blue-400"})}),e.jsx("span",{className:"text-xs font-bold text-blue-600 dark:text-blue-400",children:"CHARGED"})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Total Charged"}),e.jsx("p",{className:"text-lg font-bold text-slate-900 dark:text-white",children:ae.toLocaleString()})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-3 shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-1.5 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(Ia,{size:16,className:"text-purple-600 dark:text-purple-400"})}),e.jsx("span",{className:"text-xs font-bold text-purple-600 dark:text-purple-400",children:"ACTIVE"})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Active Routes"}),e.jsx("p",{className:"text-lg font-bold text-slate-900 dark:text-white",children:c.assignments.length})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(W,{onClick:()=>S(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white flex items-center justify-center gap-2 py-3 text-sm font-bold",children:[e.jsx(nt,{size:18}),"Record Transaction"]}),e.jsxs(W,{onClick:()=>E(!0),className:"bg-blue-600 hover:bg-blue-700 text-white flex items-center justify-center gap-2 py-3 text-sm font-bold",children:[e.jsx(gt,{size:18}),"Assign Route"]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 mb-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-1 shadow-sm border border-slate-100 dark:border-slate-700 inline-flex gap-1",children:[e.jsxs("button",{onClick:()=>h("overview"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${z==="overview"?"bg-blue-600 text-white":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:[e.jsx(jm,{size:14,className:"inline mr-1.5"}),"Routes & Map"]}),e.jsxs("button",{onClick:()=>h("transactions"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${z==="transactions"?"bg-blue-600 text-white":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:[e.jsx(Rn,{size:14,className:"inline mr-1.5"}),"Transactions"]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[z==="overview"&&e.jsx("div",{className:"space-y-4",children:c.assignments.length>0?c.assignments.map(H=>e.jsxs("div",{className:"relative bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700 overflow-hidden h-[600px] group",children:[H.latitude&&H.longitude?e.jsx("div",{className:"absolute inset-0 z-0 h-full w-full",children:e.jsxs(Wf,{center:[H.latitude,H.longitude],zoom:15,style:{height:"100%",width:"100%"},className:"z-0",children:[e.jsx(sb,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),e.jsx(eb,{position:[H.latitude,H.longitude],children:e.jsxs(tb,{children:[e.jsx("b",{children:"Pickup Point"}),e.jsx("br",{}),H.pickup_point]})})]})}):H.pickup_location_embed||H.route_map_embed?e.jsx("div",{className:"absolute inset-0 w-full h-full [&>iframe]:w-full [&>iframe]:h-full",dangerouslySetInnerHTML:{__html:H.pickup_location_embed||H.route_map_embed}}):e.jsx("div",{className:"absolute inset-0 w-full h-full bg-slate-100 dark:bg-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(jm,{size:64,className:"mx-auto mb-3 text-slate-300"}),e.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"No map available"})]})}),e.jsx("div",{className:"absolute top-4 left-4 right-4 z-10 transition-transform duration-300 transform translate-y-0",children:e.jsxs("div",{className:"bg-white/95 dark:bg-slate-900/95 backdrop-blur-md rounded-xl p-3 shadow-xl border border-white/20 dark:border-slate-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(Ia,{size:20,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white leading-tight",children:H.route_name}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[e.jsx(gt,{size:10}),H.pickup_point||"No pickup point"]})]})]}),e.jsxs("div",{className:"text-right pl-4 border-l border-slate-200 dark:border-slate-700",children:[e.jsxs("p",{className:"text-lg font-black text-slate-900 dark:text-white leading-none",children:["KES ",H.cost.toLocaleString()]}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Per Term"})]})]})}),e.jsxs("div",{className:"absolute bottom-4 left-4 right-4 z-10 flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2",children:[(H.pickup_location_embed||H.latitude&&H.longitude)&&e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm rounded-lg shadow-lg text-xs font-bold text-emerald-700 dark:text-emerald-400 ring-1 ring-emerald-500/20",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"Pickup"]}),H.route_map_embed&&e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm rounded-lg shadow-lg text-xs font-bold text-blue-700 dark:text-blue-400 ring-1 ring-blue-500/20",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Route"]})]}),e.jsxs("button",{onClick:()=>y(H.id),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg shadow-xl text-xs font-bold flex items-center gap-1.5 transition-all transform hover:scale-105 active:scale-95",children:[e.jsx(Ve,{size:14}),"Remove"]})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/20 pointer-events-none"})]},H.id)):e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-12 text-center shadow-lg border border-slate-100 dark:border-slate-700",children:[e.jsx(Ia,{size:64,className:"mx-auto mb-4 text-slate-300"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"No Active Routes"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Assign a route to get started"}),e.jsxs(W,{onClick:()=>E(!0),className:"bg-blue-600 hover:bg-blue-700 text-white text-sm",children:[e.jsx(gt,{size:16,className:"mr-2"}),"Assign Route"]})]})}),z==="transactions"&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700",children:e.jsxs("h2",{className:"text-base font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(Rn,{size:18,className:"text-blue-600"}),"Transaction History"]})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700",children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Method"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-500 uppercase",children:"Amount"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700/50",children:c.transactions.map(H=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/40 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-xs text-slate-600 dark:text-slate-400 font-mono",children:H.date}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-lg text-xs font-bold ${H.type==="PAYMENT"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}`,children:[H.type==="PAYMENT"?e.jsx(Ye,{size:12}):e.jsx(ot,{size:12}),H.type]})}),e.jsx("td",{className:"px-4 py-3 text-xs text-slate-600 dark:text-slate-400",children:H.description}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded font-mono",children:H.method})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("span",{className:`font-mono font-bold text-sm ${H.type==="PAYMENT"?"text-emerald-600 dark:text-emerald-400":"text-blue-600 dark:text-blue-400"}`,children:[H.type==="PAYMENT"?"+":"-"," ",H.amount.toLocaleString()]})})]},H.id))})]}),c.transactions.length===0&&e.jsxs("div",{className:"py-16 text-center",children:[e.jsx(It,{size:48,className:"mx-auto mb-3 text-slate-300"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"No transactions yet"})]})]})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-scale-in",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-emerald-600 to-teal-600",children:e.jsxs("div",{className:"flex justify-between items-center text-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Ss,{size:18})}),e.jsx("h3",{className:"text-lg font-bold",children:"Record Transaction"})]}),e.jsx("button",{onClick:()=>S(!1),className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors text-white/80 hover:text-white",children:e.jsx(Ve,{size:20})})]})}),e.jsxs("form",{onSubmit:T,className:"p-5 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5",children:"Type"}),e.jsxs("select",{value:b.type,onChange:H=>C({...b,type:H.target.value}),className:"w-full px-3 py-2.5 text-sm rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-emerald-500 outline-none dark:text-white font-medium",children:[e.jsx("option",{value:"PAYMENT",children:"Payment"}),e.jsx("option",{value:"CHARGE",children:"Charge"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5",children:"Method"}),e.jsxs("select",{value:b.method,onChange:H=>C({...b,method:H.target.value}),className:"w-full px-3 py-2.5 text-sm rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-emerald-500 outline-none dark:text-white font-medium",children:[e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"MPESA",children:"M-Pesa"}),e.jsx("option",{value:"BANK",children:"Bank Transfer"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5",children:"Amount (KES)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm font-mono",children:"KES"}),e.jsx("input",{type:"number",value:b.amount,onChange:H=>C({...b,amount:H.target.value}),required:!0,placeholder:"0.00",className:"w-full pl-12 pr-4 py-2.5 text-lg font-bold font-mono rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-emerald-500 outline-none dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5",children:["Description ",e.jsx("span",{className:"text-slate-400 lowercase font-normal",children:"(optional)"})]}),e.jsx("input",{type:"text",value:b.description,onChange:H=>C({...b,description:H.target.value}),placeholder:"e.g. Activity Fee",className:"w-full px-3 py-2.5 text-sm rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-emerald-500 outline-none dark:text-white"})]}),e.jsx("div",{className:"pt-2",children:e.jsx(W,{type:"submit",className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 text-sm rounded-xl shadow-lg shadow-emerald-600/20 active:scale-95 transition-all",children:"Complete Transaction"})})]})]})}),_&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-lg shadow-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 sticky top-0 bg-white dark:bg-slate-800 z-10",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Assign Route"}),e.jsx("button",{onClick:()=>E(!1),className:"p-1.5 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors text-slate-400 hover:text-red-500",children:e.jsx(Ve,{size:20})})]})}),e.jsxs("form",{onSubmit:D,className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Route"}),e.jsxs("select",{value:A.route_id,onChange:H=>M({...A,route_id:H.target.value}),required:!0,className:"w-full px-3 py-2 text-sm rounded-lg border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-blue-500 outline-none dark:text-white",children:[e.jsx("option",{value:"",children:"-- Select Route --"}),c.available_routes.map(H=>e.jsxs("option",{value:H.id,children:[H.name," - KES ",H.cost_per_term,"/term"]},H.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Pickup Point"}),e.jsx("input",{type:"text",value:A.pickup_point,onChange:H=>M({...A,pickup_point:H.target.value}),placeholder:"e.g., Sarit Centre",className:"w-full px-3 py-2 text-sm rounded-lg border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Pickup Location Map"}),e.jsx("textarea",{value:A.pickup_location_embed,onChange:H=>M({...A,pickup_location_embed:H.target.value}),rows:"3",placeholder:'<iframe src="..."></iframe>',className:"w-full px-3 py-2 text-xs rounded-lg border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-blue-500 outline-none dark:text-white resize-none font-mono"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Paste Google Maps embed code"})]}),e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-3 rounded-lg text-xs text-amber-800 dark:text-amber-300",children:[e.jsx("strong",{children:"Note:"})," Assigning will auto-charge the student."]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(W,{type:"button",onClick:()=>E(!1),className:"flex-1 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 text-sm py-2",children:"Cancel"}),e.jsx(W,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-sm py-2",children:"Assign"})]})]})]})})]})},fy=()=>{const n=Le(),[m,c]=f.useState([]),[u,g]=f.useState(!0),[v,j]=f.useState(""),[S,_]=f.useState(!1),[E,z]=f.useState(!1),[h,b]=f.useState({id:null,name:"",cost_per_term:"",cost_per_month:"",description:"",pickup_points:"",map_embed_code:""});f.useEffect(()=>{C()},[]);const C=async()=>{try{const y=await V.get("/api/transport/routes/");c(y.data.routes||[])}catch(y){console.error(y),c([])}finally{g(!1)}},A=async y=>{y.preventDefault();try{await V.post("/api/transport/routes/",{action:E?"UPDATE":"CREATE",...h}),_(!1),C(),T()}catch{alert("Failed to save route")}},M=async(y,P)=>{if(confirm(`Delete route "${P}"?`))try{await V.post("/api/transport/routes/",{action:"DELETE",id:y}),C()}catch{alert("Failed to delete route")}},k=y=>{b({id:y.id,name:y.name,cost_per_term:y.cost_per_term,cost_per_month:y.cost_per_month,description:y.description||"",pickup_points:y.pickup_points||"",map_embed_code:y.map_embed_code||""}),z(!0),_(!0)},T=()=>{b({id:null,name:"",cost_per_term:"",cost_per_month:"",description:"",pickup_points:"",map_embed_code:""}),z(!1)},D=(m||[]).filter(y=>y.name?.toLowerCase().includes(v.toLowerCase())||y.description?.toLowerCase().includes(v.toLowerCase()));return u?e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 animate-fade-in-up pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Transport Routes"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Manage available transport routes and pricing"})]}),e.jsxs(W,{onClick:()=>{T(),_(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-600/20",children:[e.jsx(nt,{size:20,className:"mr-2"}),"Create New Route"]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search routes...",value:v,onChange:y=>j(y.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-white"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[D.map(y=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-700 group hover:shadow-md transition-all relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-50 dark:bg-blue-900/10 rounded-full blur-2xl -mr-10 -mt-10 pointer-events-none group-hover:bg-blue-100 dark:group-hover:bg-blue-900/20 transition-colors"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-xl",children:e.jsx(gt,{size:24})}),e.jsxs("div",{className:"flex gap-2 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>n(`/transport-portal/routes/${y.id}`),className:"p-2 bg-white dark:bg-slate-700 text-slate-500 hover:text-indigo-600 rounded-lg shadow-sm border border-slate-200 dark:border-slate-600 transition-colors",title:"View Details",children:e.jsx(Un,{size:16})}),e.jsx("button",{onClick:()=>k(y),className:"p-2 bg-white dark:bg-slate-700 text-slate-500 hover:text-blue-600 rounded-lg shadow-sm border border-slate-200 dark:border-slate-600 transition-colors",children:e.jsx(ha,{size:16})}),e.jsx("button",{onClick:()=>M(y.id,y.name),className:"p-2 bg-white dark:bg-slate-700 text-slate-500 hover:text-red-600 rounded-lg shadow-sm border border-slate-200 dark:border-slate-600 transition-colors",children:e.jsx(Cs,{size:16})})]})]}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1",children:y.name}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 line-clamp-2 h-10 mb-4",children:y.description||"No description provided."}),e.jsx("div",{className:"flex items-center gap-2 mb-4",children:y.student_count>0&&e.jsxs("span",{className:"px-2.5 py-1 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 rounded-lg text-xs font-bold flex items-center gap-1",children:[e.jsx(Ie,{size:12})," ",y.student_count," Students"]})}),e.jsxs("div",{className:"space-y-2 pt-4 border-t border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Per Term"}),e.jsxs("span",{className:"text-lg font-black text-slate-800 dark:text-white font-mono",children:["KES ",y.cost_per_term.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Per Month"}),e.jsxs("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-400 font-mono",children:["KES ",y.cost_per_month.toLocaleString()]})]})]})]})]},y.id)),e.jsxs("button",{onClick:()=>{T(),_(!0)},className:"border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-2xl p-6 flex flex-col items-center justify-center text-slate-400 hover:border-blue-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-slate-800/50 transition-all group min-h-[280px]",children:[e.jsx("div",{className:"mb-4 p-4 bg-slate-50 dark:bg-slate-800 rounded-full group-hover:scale-110 transition-transform",children:e.jsx(nt,{size:32})}),e.jsx("span",{className:"font-bold text-lg",children:"Add New Route"})]})]}),S&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl w-full max-w-lg shadow-2xl animate-scale-in overflow-hidden",children:[e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-900 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:E?"Edit Route":"New Route"}),e.jsx("button",{onClick:()=>_(!1),className:"text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(Ve,{size:24})})]}),e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs("form",{onSubmit:A,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Route Name"}),e.jsx("input",{type:"text",value:h.name,onChange:y=>b({...h,name:y.target.value}),required:!0,placeholder:"e.g. Route A - CBD",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Cost Per Term (KES)"}),e.jsx("input",{type:"number",value:h.cost_per_term,onChange:y=>b({...h,cost_per_term:y.target.value}),required:!0,placeholder:"0.00",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-blue-500 outline-none dark:text-white font-mono font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Cost Per Month (KES)"}),e.jsx("input",{type:"number",value:h.cost_per_month,onChange:y=>b({...h,cost_per_month:y.target.value}),placeholder:"0.00",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-blue-500 outline-none dark:text-white font-mono font-bold"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Description"}),e.jsx("textarea",{value:h.description,onChange:y=>b({...h,description:y.target.value}),rows:"3",placeholder:"Describe the route coverage...",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-blue-500 outline-none dark:text-white resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Pickup Points"}),e.jsx("textarea",{value:h.pickup_points,onChange:y=>b({...h,pickup_points:y.target.value}),rows:"2",placeholder:"Comma-separated pickup points...",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-blue-500 outline-none dark:text-white resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Route Map Embed Code"}),e.jsx("textarea",{value:h.map_embed_code,onChange:y=>b({...h,map_embed_code:y.target.value}),rows:"3",placeholder:'Paste Google Maps embed code (e.g., <iframe src="..."></iframe>)',className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-blue-500 outline-none dark:text-white resize-none font-mono text-xs"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1 ml-1",children:"Paste the full iframe embed code from Google Maps"})]}),e.jsxs("div",{className:"pt-2 flex gap-3",children:[e.jsx(W,{type:"button",variant:"outline",className:"flex-1",onClick:()=>_(!1),children:"Cancel"}),e.jsx(W,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-600/20",children:E?"Update Route":"Create Route"})]})]})})]})})]})},by=()=>{const{id:n}=Zt(),m=Le(),[c,u]=f.useState(null),[g,v]=f.useState(!0),[j,S]=f.useState(""),[_,E]=f.useState(!1),[z,h]=f.useState({id:null,name:"",cost_per_term:"",cost_per_month:"",description:"",pickup_points:"",map_embed_code:""});f.useEffect(()=>{b()},[n]);const b=async()=>{try{const T=await V.get(`/api/transport/routes/${n}/`);u(T.data);const D=T.data.route;h({id:D.id,name:D.name,cost_per_term:D.cost_per_term,cost_per_month:D.cost_per_month,description:D.description||"",pickup_points:D.pickup_points||"",map_embed_code:D.map_embed_code||""})}catch(T){console.error(T)}finally{v(!1)}},C=async T=>{T.preventDefault();try{await V.post("/api/transport/routes/",{action:"UPDATE",...z}),E(!1),b()}catch{alert("Failed to update route")}};if(g)return e.jsx("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-900 dark:to-slate-800",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-200 border-t-indigo-600"}),e.jsx(Ia,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-indigo-600",size:20})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm font-medium",children:"Loading Route..."})]})});if(!c)return e.jsx("div",{className:"p-8 text-center",children:"Route not found"});const{route:A,students:M}=c,k=M.filter(T=>T.name.toLowerCase().includes(j.toLowerCase())||T.adm.toLowerCase().includes(j.toLowerCase()));return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-indigo-50/30 to-slate-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 pb-12",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 pt-4 flex justify-between items-center",children:[e.jsxs("button",{onClick:()=>m("/transport-portal/routes"),className:"flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors text-sm font-medium",children:[e.jsx(fl,{size:16}),"Back to Routes"]}),e.jsx("button",{onClick:()=>E(!0),className:"px-4 py-2 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 text-sm font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-2",children:"Edit Route"})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-r from-indigo-600 to-purple-600 p-8 shadow-2xl",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl -mr-32 -mt-32"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-black/10 rounded-full blur-3xl -ml-20 -mb-20"}),e.jsxs("div",{className:"relative z-10 grid md:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-white/20 backdrop-blur-md rounded-xl",children:e.jsx(Ia,{size:32,className:"text-white"})}),e.jsx("span",{className:"px-3 py-1 bg-white/20 backdrop-blur-md rounded-lg text-white/90 text-sm font-bold border border-white/20",children:"Active Route"})]}),e.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white mb-4 leading-tight",children:A.name}),e.jsxs("p",{className:"text-indigo-100 text-lg max-w-xl mb-6 flex items-start gap-2",children:[e.jsx(yf,{size:20,className:"mt-1 shrink-0"}),A.description||"No description provided"]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[e.jsx("p",{className:"text-indigo-200 text-xs font-bold uppercase tracking-wider mb-1",children:"Cost Per Term"}),e.jsxs("p",{className:"text-2xl font-black text-white",children:[e.jsx("span",{className:"text-lg font-normal text-indigo-300 mr-1",children:"KES"}),A.cost_per_term.toLocaleString()]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[e.jsx("p",{className:"text-indigo-200 text-xs font-bold uppercase tracking-wider mb-1",children:"Students"}),e.jsxs("p",{className:"text-2xl font-black text-white flex items-center gap-2",children:[e.jsx(Ie,{size:20}),A.student_count]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[e.jsx("p",{className:"text-indigo-200 text-xs font-bold uppercase tracking-wider mb-1",children:"Potential Revenue"}),e.jsxs("p",{className:"text-2xl font-black text-white",children:[e.jsx("span",{className:"text-lg font-normal text-indigo-300 mr-1",children:"KES"}),A.potential_revenue.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"relative h-64 md:h-full min-h-[300px] bg-indigo-900/40 backdrop-blur-sm rounded-2xl border-4 border-white/10 overflow-hidden shadow-inner",children:[A.map_embed_code?e.jsx("div",{className:"w-full h-full [&>iframe]:w-full [&>iframe]:h-full",dangerouslySetInnerHTML:{__html:A.map_embed_code}}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-indigo-200",children:[e.jsx(jm,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{children:"No map preview available"})]}),e.jsx("div",{className:"absolute bottom-4 right-4 flex gap-2",children:e.jsxs("button",{onClick:()=>E(!0),className:"px-4 py-2 bg-white text-indigo-900 rounded-lg shadow-lg text-xs font-bold flex items-center gap-2 hover:bg-slate-50 transition-colors",children:[e.jsx(gt,{size:14}),"Edit Map"]})})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(gt,{size:20,className:"text-indigo-600"}),"Pickup Points"]}),e.jsx("button",{onClick:()=>E(!0),className:"text-xs font-bold text-indigo-600 hover:text-indigo-700",children:"Edit"})]}),e.jsx("div",{className:"space-y-3",children:A.pickup_points?A.pickup_points.split(",").map((T,D)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold text-sm",children:D+1}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:T.trim()})]},D)):e.jsx("p",{className:"text-slate-400 text-sm",children:"No specific pickup points listed."})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(sa,{size:20,className:"text-indigo-600"}),"Assigned Vehicles"]}),e.jsx("div",{className:"space-y-3",children:A.assigned_vehicles&&A.assigned_vehicles.length>0?A.assigned_vehicles.map((T,D)=>e.jsxs("button",{onClick:()=>m(`/transport-portal/vehicles/${T.id}`),className:"w-full flex flex-col gap-1 p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl border border-slate-100 dark:border-slate-700 text-left hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors group",children:[e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white group-hover:text-indigo-600 font-mono",children:T.plate}),e.jsx("span",{className:"text-xs text-slate-400",children:T.model})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[e.jsx(Qe,{size:12}),T.driver]})]},D)):e.jsxs("div",{className:"text-center p-4",children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"No vehicles assigned."}),e.jsx("button",{onClick:()=>m("/transport-portal/vehicles"),className:"text-xs text-indigo-600 font-bold mt-1",children:"Manage Vehicles"})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-2xl p-6 border border-emerald-100 dark:border-emerald-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/50 rounded-lg",children:e.jsx(it,{size:20,className:"text-emerald-600 dark:text-emerald-400"})}),e.jsx("h3",{className:"text-lg font-bold text-emerald-900 dark:text-emerald-100",children:"Revenue Status"})]}),e.jsx("p",{className:"text-sm text-emerald-700 dark:text-emerald-300 mb-4",children:"Based on currently assigned students."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-emerald-800 dark:text-emerald-200",children:"Term Revenue"}),e.jsxs("span",{className:"font-bold text-emerald-900 dark:text-emerald-100",children:["KES ",A.potential_revenue.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-emerald-800 dark:text-emerald-200",children:"Monthly Est."}),e.jsxs("span",{className:"font-bold text-emerald-900 dark:text-emerald-100",children:["KES ",(A.potential_revenue/3).toLocaleString()]})]})]})]})]}),e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col h-full min-h-[500px]",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("div",{children:e.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(Ie,{size:24,className:"text-indigo-600"}),"Assigned Students",e.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 rounded-full text-xs font-bold",children:M.length})]})}),e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx(jt,{size:16})}),e.jsx("input",{type:"text",placeholder:"Search students...",value:j,onChange:T=>S(T.target.value),className:"w-full pl-9 pr-4 py-2 text-sm bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white"})]})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:k.length>0?e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase",children:"Student"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase",children:"Grade"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase",children:"Pickup Point"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-slate-500 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:k.map(T=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold text-sm",children:T.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900 dark:text-white text-sm",children:T.name}),e.jsx("p",{className:"text-xs text-slate-500",children:T.adm})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded text-xs font-bold",children:T.grade})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx(gt,{size:14,className:"text-slate-400"}),T.pickup_point||"Default"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-bold ${T.balance<0?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30":"bg-red-100 text-red-700 dark:bg-red-900/30"}`,children:T.balance<0?"PAID":"OWING"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>m(`/transport-portal/students/${T.id}`),className:"text-indigo-600 hover:text-indigo-700 font-bold text-xs hover:bg-indigo-50 dark:hover:bg-indigo-900/30 px-3 py-1.5 rounded-lg transition-colors",children:"View Profile"})})]},T.id))})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 text-center h-64",children:[e.jsx(Ie,{size:48,className:"text-slate-300 mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300",children:"No students found"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Try searching for a different name or admission number."})]})})]})})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl w-full max-w-lg shadow-2xl animate-scale-in overflow-hidden",children:[e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-900 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Edit Route Details"}),e.jsx("button",{onClick:()=>E(!1),className:"text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(Ve,{size:24})})]}),e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs("form",{onSubmit:C,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Route Name"}),e.jsx("input",{type:"text",value:z.name,onChange:T=>h({...z,name:T.target.value}),required:!0,className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Cost Per Term"}),e.jsx("input",{type:"number",value:z.cost_per_term,onChange:T=>h({...z,cost_per_term:T.target.value}),required:!0,className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white font-mono font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Cost Per Month"}),e.jsx("input",{type:"number",value:z.cost_per_month,onChange:T=>h({...z,cost_per_month:T.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white font-mono font-bold"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Description"}),e.jsx("textarea",{value:z.description,onChange:T=>h({...z,description:T.target.value}),rows:"2",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Pickup Points"}),e.jsx("textarea",{value:z.pickup_points,onChange:T=>h({...z,pickup_points:T.target.value}),rows:"4",placeholder:"Comma-separated pickup points...",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white resize-none"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1 ml-1",children:"Separate points with commas (e.g. Kencom, Railways, Westlands)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Route Map Embed Code"}),e.jsx("textarea",{value:z.map_embed_code,onChange:T=>h({...z,map_embed_code:T.target.value}),rows:"3",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white resize-none font-mono text-xs"})]}),e.jsxs("div",{className:"pt-2 flex gap-3",children:[e.jsx(W,{type:"button",variant:"outline",className:"flex-1",onClick:()=>E(!1),children:"Cancel"}),e.jsx(W,{type:"submit",className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-600/20",children:"Update Details"})]})]})})]})})]})},gy=()=>{const n=Le(),[m,c]=f.useState([]),[u,g]=f.useState([]),[v,j]=f.useState(!0),[S,_]=f.useState(""),[E,z]=f.useState(!1),[h,b]=f.useState({plate_number:"",model:"",capacity:"",status:"ACTIVE",route_id:""});f.useEffect(()=>{C()},[]);const C=async()=>{try{const[k,T]=await Promise.all([V.get("/api/transport/vehicles/"),V.get("/api/transport/routes/")]);c(k.data.vehicles||[]),g(T.data.routes||[])}catch(k){console.error(k),c([]),g([])}finally{j(!1)}},A=async k=>{k.preventDefault();try{await V.post("/api/transport/vehicles/",{action:"CREATE",...h}),z(!1),b({plate_number:"",model:"",capacity:"",status:"ACTIVE",route_id:""}),C()}catch{alert("Failed to create vehicle")}},M=(m||[]).filter(k=>k.plate_number?.toLowerCase().includes(S.toLowerCase())||k.model?.toLowerCase().includes(S.toLowerCase()));return v?e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 animate-fade-in-up pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Fleet Management"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Manage school transport vehicles and route assignments"})]}),e.jsxs(W,{onClick:()=>z(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-600/20",children:[e.jsx(nt,{size:20,className:"mr-2"}),"Add Vehicle"]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by plate number or model...",value:S,onChange:k=>_(k.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[M.map(k=>e.jsxs("div",{onClick:()=>n(`/transport-portal/vehicles/${k.id}`),className:"group relative bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-xl hover:-translate-y-1 transition-all cursor-pointer overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-50 dark:bg-indigo-900/10 rounded-full blur-2xl -mr-8 -mt-8 transition-all group-hover:bg-indigo-100 dark:group-hover:bg-indigo-900/20"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-xl",children:e.jsx(sa,{size:24})}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${k.status==="ACTIVE"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30":k.status==="MAINTENANCE"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30":"bg-slate-100 text-slate-600"}`,children:k.status})]}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1 font-mono",children:k.plate_number}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:k.model}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[e.jsx(gt,{size:16}),e.jsx("span",{children:"Route"})]}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-200 truncate max-w-[120px]",title:k.route_name,children:k.route_name})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[e.jsx(Qe,{size:16}),e.jsx("span",{children:"Driver"})]}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-200",children:k.driver_name})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[e.jsx(sa,{size:16}),e.jsx("span",{children:"Capacity"})]}),e.jsxs("span",{className:"font-medium text-slate-900 dark:text-slate-200",children:[k.capacity," Seats"]})]})]})]})]},k.id)),e.jsxs("button",{onClick:()=>z(!0),className:"border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-2xl p-6 flex flex-col items-center justify-center text-slate-400 hover:border-indigo-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-slate-800/50 transition-all group min-h-[250px]",children:[e.jsx("div",{className:"mb-4 p-4 bg-slate-50 dark:bg-slate-800 rounded-full group-hover:scale-110 transition-transform",children:e.jsx(nt,{size:32})}),e.jsx("span",{className:"font-bold text-lg",children:"Add New Vehicle"})]})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl w-full max-w-lg shadow-2xl animate-scale-in overflow-hidden",children:[e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-900 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Add New Vehicle"}),e.jsx("button",{onClick:()=>z(!1),className:"text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(Ve,{size:24})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Plate Number"}),e.jsx("input",{type:"text",required:!0,value:h.plate_number,onChange:k=>b({...h,plate_number:k.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white",placeholder:"KAA 123B"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Model"}),e.jsx("input",{type:"text",required:!0,value:h.model,onChange:k=>b({...h,model:k.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white",placeholder:"Toyota Coaster"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Capacity"}),e.jsx("input",{type:"number",required:!0,value:h.capacity,onChange:k=>b({...h,capacity:k.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Assigned Route"}),e.jsxs("select",{value:h.route_id,onChange:k=>b({...h,route_id:k.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white",children:[e.jsx("option",{value:"",children:"-- Unassigned --"}),u.map(k=>e.jsx("option",{value:k.id,children:k.name},k.id))]})]}),e.jsxs("div",{className:"pt-2 flex gap-3",children:[e.jsx(W,{type:"button",variant:"outline",className:"flex-1",onClick:()=>z(!1),children:"Cancel"}),e.jsx(W,{type:"submit",className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white",children:"Save Vehicle"})]})]})})]})})]})},vy=()=>{const{id:n}=Zt(),m=Le(),[c,u]=f.useState(null),[g,v]=f.useState(!0),[j,S]=f.useState(!1),[_,E]=f.useState([]),[z,h]=f.useState({plate_number:"",model:"",capacity:"",status:"",route_id:""});f.useEffect(()=>{b()},[n]);const b=async()=>{try{const[M,k]=await Promise.all([V.get(`/api/transport/vehicles/${n}/`),V.get("/api/transport/routes/")]);u(M.data),E(k.data.routes);const T=M.data;h({plate_number:T.plate_number,model:T.model,capacity:T.capacity,status:T.status,route_id:T.route_id||""})}catch(M){console.error(M)}finally{v(!1)}},C=async M=>{M.preventDefault();try{await V.post(`/api/transport/vehicles/${n}/`,{action:"UPDATE",...z}),S(!1),b()}catch{alert("Failed to update vehicle")}},A=async()=>{if(confirm("Are you sure you want to delete this vehicle?"))try{await V.post(`/api/transport/vehicles/${n}/`,{action:"DELETE"}),m("/transport-portal/vehicles")}catch{alert("Failed to delete vehicle")}};return g?e.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent"})}):c?e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 pb-12",children:[e.jsx("div",{className:"max-w-4xl mx-auto px-4 pt-6 mb-6",children:e.jsxs("button",{onClick:()=>m("/transport-portal/vehicles"),className:"flex items-center gap-2 text-slate-500 hover:text-indigo-600 transition-colors mb-4 font-medium",children:[e.jsx(fl,{size:18}),"Back to Vehicles"]})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-xl overflow-hidden border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-900 to-slate-800 p-8 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -mr-16 -mt-16"}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"p-4 bg-white/10 backdrop-blur-md rounded-2xl border border-white/10 shadow-lg",children:e.jsx(sa,{size:40,className:"text-indigo-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold font-mono tracking-wide",children:c.plate_number}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${c.status==="ACTIVE"?"bg-emerald-500/20 val-emerald-400 border-emerald-500/30 text-emerald-300":"bg-amber-500/20 text-amber-300 border-amber-500/30"}`,children:c.status})]}),e.jsx("p",{className:"text-slate-400 text-lg",children:c.model})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>S(!0),className:"px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-xl backdrop-blur-sm transition-colors text-sm font-bold flex items-center gap-2",children:[e.jsx(ha,{size:16})," Edit"]}),e.jsx("button",{onClick:A,className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 hover:text-red-300 rounded-xl backdrop-blur-sm transition-colors text-sm font-bold flex items-center gap-2",children:e.jsx(Cs,{size:16})})]})]})]}),e.jsxs("div",{className:"p-8 grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-2xl p-6 border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(gt,{className:"text-indigo-500"}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Assigned Route"})]}),c.route_name!=="Unassigned"?e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1",children:c.route_name}),e.jsx("button",{onClick:()=>m(`/transport-portal/routes/${c.route_id}`),className:"text-sm text-indigo-600 hover:underline mt-2 font-medium",children:"View Route Details"})]}):e.jsxs("div",{className:"text-slate-500 flex flex-col items-start gap-2",children:[e.jsx("p",{children:"No route currently assigned."}),e.jsx("button",{onClick:()=>S(!0),className:"text-sm text-indigo-600 font-bold",children:"Assign Route"})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-2xl p-6 border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Qe,{className:"text-indigo-500"}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Assigned Driver"})]}),c.driver?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center text-indigo-600 font-bold",children:c.driver.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:c.driver.name}),e.jsx("p",{className:"text-sm text-slate-500",children:c.driver.phone})]})]}),e.jsx("button",{onClick:()=>m(`/transport-portal/drivers/${c.driver.id}`),className:"text-sm text-indigo-600 hover:underline mt-2 font-medium",children:"View Driver Profile"})]}):e.jsxs("div",{className:"text-slate-500",children:[e.jsx("p",{children:"No driver assigned."}),e.jsx("p",{className:"text-xs mt-1",children:"Go to Drivers page to assign a driver to this vehicle."})]})]}),e.jsxs("div",{className:"md:col-span-2 grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-xl text-center",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:"Capacity"}),e.jsx("p",{className:"text-2xl font-black text-slate-900 dark:text-white",children:c.capacity})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-xl text-center",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:"Status"}),e.jsx("p",{className:"text-lg font-bold text-slate-900 dark:text-white",children:c.status})]})]})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-lg shadow-2xl animate-scale-in",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Edit Vehicle"}),e.jsx("button",{onClick:()=>S(!1),children:e.jsx(Ve,{size:24,className:"text-slate-400"})})]}),e.jsxs("form",{onSubmit:C,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Plate Number"}),e.jsx("input",{type:"text",value:z.plate_number,onChange:M=>h({...z,plate_number:M.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Model"}),e.jsx("input",{type:"text",value:z.model,onChange:M=>h({...z,model:M.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Capacity"}),e.jsx("input",{type:"number",value:z.capacity,onChange:M=>h({...z,capacity:M.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Status"}),e.jsxs("select",{value:z.status,onChange:M=>h({...z,status:M.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 dark:text-white",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),e.jsx("option",{value:"OUT_OF_SERVICE",children:"Out of Service"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Route"}),e.jsxs("select",{value:z.route_id,onChange:M=>h({...z,route_id:M.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 dark:text-white",children:[e.jsx("option",{value:"",children:"-- Unassigned --"}),_.map(M=>e.jsx("option",{value:M.id,children:M.name},M.id))]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(W,{type:"submit",className:"w-full bg-indigo-600 text-white py-3 rounded-xl font-bold",children:"Update Vehicle"})})]})]})})]}):e.jsx("div",{className:"p-8 text-center",children:"Vehicle not found"})},jy=()=>{const n=Le(),[m,c]=f.useState([]),[u,g]=f.useState([]),[v,j]=f.useState(!0),[S,_]=f.useState(""),[E,z]=f.useState(!1),[h,b]=f.useState({first_name:"",last_name:"",phone_number:"",license_number:"",status:"ACTIVE",vehicle_id:""});f.useEffect(()=>{C()},[]);const C=async()=>{try{const[T,D]=await Promise.all([V.get("/api/transport/drivers/"),V.get("/api/transport/vehicles/")]);c(T.data.drivers||[]),g(D.data.vehicles||[])}catch(T){console.error(T),c([]),g([])}finally{j(!1)}},A=async T=>{T.preventDefault();try{await V.post("/api/transport/drivers/",{action:"CREATE",...h}),z(!1),b({first_name:"",last_name:"",phone_number:"",license_number:"",status:"ACTIVE",vehicle_id:""}),C()}catch{alert("Failed to create driver (Check if vehicle is already assigned or license is duplicate)")}},M=(m||[]).filter(T=>T.name?.toLowerCase().includes(S.toLowerCase())||T.license?.toLowerCase().includes(S.toLowerCase())),k=(u||[]).filter(T=>!T.driver_id);return v?e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 animate-fade-in-up pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Driver Management"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Manage drivers and vehicle assignments"})]}),e.jsxs(W,{onClick:()=>z(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-600/20",children:[e.jsx(nt,{size:20,className:"mr-2"}),"Add Driver"]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by name or license...",value:S,onChange:T=>_(T.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[M.map(T=>e.jsxs("div",{onClick:()=>n(`/transport-portal/drivers/${T.id}`),className:"group relative bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-xl hover:-translate-y-1 transition-all cursor-pointer overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-50 dark:bg-indigo-900/10 rounded-full blur-2xl -mr-8 -mt-8 transition-all group-hover:bg-indigo-100 dark:group-hover:bg-indigo-900/20"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-700/50 text-slate-600 dark:text-slate-300 rounded-full",children:e.jsx(Qe,{size:24})}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${T.status==="ACTIVE"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30":"bg-slate-100 text-slate-600"}`,children:T.status})]}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1",children:T.name}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:T.phone}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[e.jsx(sa,{size:16}),e.jsx("span",{children:"Vehicle"})]}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-200",title:T.vehicle_plate,children:T.vehicle_plate})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[e.jsx(Wt,{size:16}),e.jsx("span",{children:"License"})]}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-200",children:T.license})]})]})]})]},T.id)),e.jsxs("button",{onClick:()=>z(!0),className:"border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-2xl p-6 flex flex-col items-center justify-center text-slate-400 hover:border-indigo-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-slate-800/50 transition-all group min-h-[250px]",children:[e.jsx("div",{className:"mb-4 p-4 bg-slate-50 dark:bg-slate-800 rounded-full group-hover:scale-110 transition-transform",children:e.jsx(nt,{size:32})}),e.jsx("span",{className:"font-bold text-lg",children:"Add New Driver"})]})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl w-full max-w-lg shadow-2xl animate-scale-in overflow-hidden",children:[e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-900 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Add New Driver"}),e.jsx("button",{onClick:()=>z(!1),className:"text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(Ve,{size:24})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"First Name"}),e.jsx("input",{type:"text",required:!0,value:h.first_name,onChange:T=>b({...h,first_name:T.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Last Name"}),e.jsx("input",{type:"text",required:!0,value:h.last_name,onChange:T=>b({...h,last_name:T.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Phone Number"}),e.jsx("input",{type:"tel",required:!0,value:h.phone_number,onChange:T=>b({...h,phone_number:T.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"License Number"}),e.jsx("input",{type:"text",required:!0,value:h.license_number,onChange:T=>b({...h,license_number:T.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Assigned Vehicle"}),e.jsxs("select",{value:h.vehicle_id,onChange:T=>b({...h,vehicle_id:T.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white",children:[e.jsx("option",{value:"",children:"-- Unassigned --"}),k.map(T=>e.jsxs("option",{value:T.id,children:[T.plate_number," (",T.model,")"]},T.id))]})]}),e.jsxs("div",{className:"pt-2 flex gap-3",children:[e.jsx(W,{type:"button",variant:"outline",className:"flex-1",onClick:()=>z(!1),children:"Cancel"}),e.jsx(W,{type:"submit",className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white",children:"Save Driver"})]})]})})]})})]})},Ny=()=>{const{id:n}=Zt(),m=Le(),[c,u]=f.useState(null),[g,v]=f.useState(!0),[j,S]=f.useState(!1),[_,E]=f.useState([]),[z,h]=f.useState({first_name:"",last_name:"",phone_number:"",license_number:"",status:"",vehicle_id:""});f.useEffect(()=>{b()},[n]);const b=async()=>{try{const[k,T]=await Promise.all([V.get(`/api/transport/drivers/${n}/`),V.get("/api/transport/vehicles/")]);u(k.data),E(T.data.vehicles);const D=k.data;h({first_name:D.first_name,last_name:D.last_name,phone_number:D.phone,license_number:D.license,status:D.status,vehicle_id:D.vehicle?D.vehicle.id:""})}catch(k){console.error(k)}finally{v(!1)}},C=async k=>{k.preventDefault();try{await V.post(`/api/transport/drivers/${n}/`,{action:"UPDATE",...z}),S(!1),b()}catch{alert("Failed to update driver. specific vehicle might already be assigned.")}},A=async()=>{if(confirm("Are you sure you want to delete this driver?"))try{await V.post(`/api/transport/drivers/${n}/`,{action:"DELETE"}),m("/transport-portal/drivers")}catch{alert("Failed to delete driver")}};if(g)return e.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent"})});if(!c)return e.jsx("div",{className:"p-8 text-center",children:"Driver not found"});const M=_.filter(k=>!k.driver_id||k.driver_id===c.id);return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 pb-12",children:[e.jsx("div",{className:"max-w-4xl mx-auto px-4 pt-6 mb-6",children:e.jsxs("button",{onClick:()=>m("/transport-portal/drivers"),className:"flex items-center gap-2 text-slate-500 hover:text-indigo-600 transition-colors mb-4 font-medium",children:[e.jsx(fl,{size:18}),"Back to Drivers"]})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-xl overflow-hidden border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-900 to-indigo-800 p-8 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -mr-16 -mt-16"}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-24 h-24 bg-white/10 backdrop-blur-md rounded-full border-4 border-white/10 shadow-lg flex items-center justify-center text-3xl font-bold",children:c.first_name.charAt(0)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h1",{className:"text-3xl font-bold",children:[c.first_name," ",c.last_name]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${c.status==="ACTIVE"?"bg-emerald-500/20 text-emerald-300 border-emerald-500/30":"bg-slate-500/20 text-slate-300 border-slate-500/30"}`,children:c.status})]}),e.jsxs("p",{className:"text-indigo-200 text-lg flex items-center gap-2",children:[e.jsx(Es,{size:18}),c.phone]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>S(!0),className:"px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-xl backdrop-blur-sm transition-colors text-sm font-bold flex items-center gap-2",children:[e.jsx(ha,{size:16})," Edit Profile"]}),e.jsx("button",{onClick:A,className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 hover:text-red-300 rounded-xl backdrop-blur-sm transition-colors text-sm font-bold flex items-center gap-2",children:e.jsx(Cs,{size:16})})]})]})]}),e.jsxs("div",{className:"p-8 grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-2xl p-6 border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(sa,{className:"text-indigo-500"}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Assigned Vehicle"})]}),c.vehicle?e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1 font-mono",children:c.vehicle.plate}),e.jsx("p",{className:"text-slate-500 mb-3",children:c.vehicle.model}),e.jsx("button",{onClick:()=>m(`/transport-portal/vehicles/${c.vehicle.id}`),className:"text-sm text-indigo-600 hover:underline font-medium",children:"View Vehicle Details"})]}):e.jsxs("div",{className:"text-slate-500 flex flex-col items-start gap-2",children:[e.jsx("p",{children:"No vehicle currently assigned."}),e.jsx("button",{onClick:()=>S(!0),className:"text-sm text-indigo-600 font-bold",children:"Assign Vehicle"})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-2xl p-6 border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Wt,{className:"text-indigo-500"}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"License Details"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:"License Number"}),e.jsx("p",{className:"text-xl font-mono font-bold text-slate-900 dark:text-white select-all",children:c.license})]})]})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-lg shadow-2xl animate-scale-in",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Edit Driver"}),e.jsx("button",{onClick:()=>S(!1),children:e.jsx(Ve,{size:24,className:"text-slate-400"})})]}),e.jsxs("form",{onSubmit:C,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"First Name"}),e.jsx("input",{type:"text",value:z.first_name,onChange:k=>h({...z,first_name:k.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Last Name"}),e.jsx("input",{type:"text",value:z.last_name,onChange:k=>h({...z,last_name:k.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:z.phone_number,onChange:k=>h({...z,phone_number:k.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"License"}),e.jsx("input",{type:"text",value:z.license_number,onChange:k=>h({...z,license_number:k.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Status"}),e.jsxs("select",{value:z.status,onChange:k=>h({...z,status:k.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 dark:text-white",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"ON_LEAVE",children:"On Leave"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Vehicle"}),e.jsxs("select",{value:z.vehicle_id,onChange:k=>h({...z,vehicle_id:k.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 dark:text-white",children:[e.jsx("option",{value:"",children:"-- Unassigned --"}),M.map(k=>e.jsxs("option",{value:k.id,children:[k.plate_number," (",k.model,")"]},k.id))]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(W,{type:"submit",className:"w-full bg-indigo-600 text-white py-3 rounded-xl font-bold",children:"Update Driver"})})]})]})})]})},yy=({isOpen:n,toggleSidebar:m,handleLogout:c})=>{const u=[{to:"/driver-portal",icon:Bg,label:"Dashboard",end:!0},{to:"/driver-portal/expenses",icon:it,label:"Expenses"},{to:"/driver-portal/profile",icon:Qe,label:"My Profile"}];return e.jsxs(e.Fragment,{children:[n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:m}),e.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 transform transition-transform duration-300 md:translate-x-0 ${n?"translate-x-0":"-translate-x-full"}`,children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"text-2xl mr-2",children:""}),e.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Driver Portal"})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:u.map(g=>e.jsxs(Cm,{to:g.to,end:g.end,onClick:()=>window.innerWidth<768&&m(),className:({isActive:v})=>`flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-medium ${v?"bg-indigo-600 text-white shadow-lg shadow-indigo-600/30":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[e.jsx(g.icon,{size:20}),g.label]},g.to))}),e.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 space-y-2",children:[e.jsx(Ui,{className:"w-full !justify-start px-4 py-3"}),e.jsxs("button",{onClick:c,className:"flex items-center gap-3 px-4 py-3 w-full rounded-xl text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors font-medium",children:[e.jsx(Fr,{size:20}),"Logout"]})]})]})})]})},wy=()=>{const n=Le(),[m,c]=f.useState(null),[u,g]=f.useState(!0),{isLocked:v}=Nt(),j=v(),[S,_]=f.useState(!1);f.useEffect(()=>{const z=localStorage.getItem("user");z&&c(JSON.parse(z)),g(!1)},[]);const E=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),n("/driver-login")};return u?e.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent"})}):m?e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900",children:[j&&e.jsx(Zn,{}),e.jsx(yy,{isOpen:S,toggleSidebar:()=>_(!S),handleLogout:E}),e.jsxs("div",{className:"md:ml-64 min-h-screen flex flex-col transition-all duration-300",children:[e.jsxs("div",{className:"h-16 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-4 flex items-center justify-between sticky top-0 z-30 shadow-sm",children:[e.jsx("button",{onClick:()=>_(!0),className:"p-2 -ml-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg md:hidden",children:e.jsx(Hr,{size:24,className:"text-slate-600 dark:text-slate-300"})}),e.jsxs("div",{className:"flex items-center gap-3 ml-2 md:ml-0",children:[e.jsx("span",{className:"md:hidden text-2xl",children:""}),e.jsxs("div",{children:[e.jsxs("h2",{className:"font-bold text-slate-800 dark:text-white leading-tight",children:["Hello, ",m.first_name]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium",children:"Have a safe trip!"})]})]}),e.jsxs("div",{className:"w-9 h-9 bg-indigo-100 dark:bg-indigo-900/30 rounded-full flex items-center justify-center text-indigo-700 dark:text-indigo-400 font-bold text-sm shadow-inner cursor-pointer",onClick:()=>n("/driver-portal/profile"),children:[m.first_name[0],m.last_name?m.last_name[0]:""]})]}),e.jsx("main",{className:"flex-1 p-4 sm:p-6 overflow-x-hidden max-w-5xl mx-auto w-full",children:e.jsx(Sa,{})})]})]}):e.jsx(os,{to:"/driver-login",replace:!0})},ky=()=>{const n=Le(),{config:m}=Nt(),[c,u]=f.useState({username:"",password:""}),[g,v]=f.useState(!1),[j,S]=f.useState(null),[_,E]=f.useState(null),[z,h]=f.useState(!0),b=new URLSearchParams(window.location.search),C=b.get("slug")||localStorage.getItem("portal_slug");b.get("slug")&&localStorage.setItem("portal_slug",b.get("slug")),js.useEffect(()=>{(async()=>{if(C)try{const k=await V.get("/api/config/",{headers:{"X-Portal-Slug":C}});E(k.data)}catch(k){console.error("Failed to fetch school config:",k),E(m)}finally{h(!1)}else E(m),h(!1)})()},[C,m]);const A=async M=>{M.preventDefault(),v(!0),S(null);try{const k=await V.post("/api/login/",{...c,portal_slug:C});k.data.success?(localStorage.setItem("user",JSON.stringify(k.data.user)),k.data.portal_slug&&localStorage.setItem("portal_slug",k.data.portal_slug),k.data.user.role==="driver"?n("/driver-portal/dashboard"):(S("Access Denied. This portal is for Drivers only."),localStorage.removeItem("user"))):S(k.data.error||"Login failed")}catch(k){console.error(k),S(k.response?.data?.error||"Failed to connect to server")}finally{v(!1)}};return e.jsxs("div",{className:"min-h-screen w-full flex bg-slate-50 dark:bg-slate-900 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-24 -right-24 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-24 -left-24 w-96 h-96 bg-indigo-500/20 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"hidden lg:flex w-1/2 bg-gradient-to-br from-blue-600 to-blue-800 relative overflow-hidden items-center justify-center p-12",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[e.jsx("path",{d:"M0 0 L100 0 L100 100 L0 100 Z",fill:"url(#grid)"}),e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"4",height:"4",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 4 0 L 0 0 0 4",fill:"none",stroke:"currentColor",strokeWidth:"0.5"})})})]})}),e.jsx("div",{className:"absolute -top-24 -left-24 w-96 h-96 bg-blue-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),e.jsx("div",{className:"absolute -bottom-24 -right-24 w-96 h-96 bg-indigo-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),e.jsx("div",{className:"relative z-10 text-white max-w-lg",children:e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsx("div",{className:"h-16 w-16 bg-white/10 backdrop-blur-lg rounded-2xl flex items-center justify-center mb-8 border border-white/20",children:e.jsx(sa,{size:32,className:"text-white"})}),e.jsxs("h1",{className:"text-5xl font-bold mb-6 leading-tight",children:["Driver ",e.jsx("span",{className:"text-blue-300",children:"Portal"})]}),e.jsx("p",{className:"text-lg text-blue-100 mb-8 leading-relaxed",children:"Access your daily routes, track trips, manage expenses, and stay connected with the transport team."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-sm",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-500/20 flex items-center justify-center",children:e.jsx(gt,{className:"text-blue-300",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Daily Routes"}),e.jsx("p",{className:"text-sm text-blue-200",children:"View assigned routes"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-sm",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-500/20 flex items-center justify-center",children:e.jsx(dt,{className:"text-blue-300",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Trip Tracking"}),e.jsx("p",{className:"text-sm text-blue-200",children:"Log your trips"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-sm",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-500/20 flex items-center justify-center",children:e.jsx(Mt,{className:"text-blue-300",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Safety First"}),e.jsx("p",{className:"text-sm text-blue-200",children:"Report incidents"})]})]})]})]})})]}),e.jsx("div",{className:"w-full lg:w-1/2 flex flex-col items-center justify-center p-6 sm:p-12 relative z-10",children:e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"w-full max-w-md",children:[e.jsx("div",{className:"lg:hidden flex justify-center mb-8",children:e.jsx("div",{className:"h-20 w-20 bg-gradient-to-br from-blue-600 to-blue-700 rounded-2xl flex items-center justify-center shadow-lg shadow-blue-500/30 text-white",children:e.jsx(sa,{size:40})})}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-xl p-8 border border-slate-100 dark:border-slate-800",children:[e.jsx("div",{className:"text-center lg:text-left mb-8",children:z?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-slate-200 dark:bg-slate-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-1/2"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-2xl lg:text-3xl font-bold tracking-tight text-slate-900 dark:text-white",children:[_?.school_name||"School"," Driver Portal"]}),e.jsx("p",{className:"mt-2 text-slate-500 dark:text-slate-400 text-sm lg:text-base",children:"Sign in to access your routes"}),C&&e.jsxs("p",{className:"mt-2 text-xs text-slate-400 dark:text-slate-500 font-mono bg-slate-50 dark:bg-slate-800 px-2 py-1 rounded inline-block",children:["Portal: ",C]})]})}),j&&e.jsxs(he.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-4 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-100 dark:border-red-900/50 mb-6",children:[e.jsx(ot,{size:16,className:"shrink-0"}),e.jsx("p",{children:j})]}),e.jsxs("form",{onSubmit:A,className:"space-y-5",children:[e.jsx(fe,{label:"Username or Phone Number",type:"text",placeholder:"Enter your username or phone",icon:Gt,value:c.username,onChange:M=>u({...c,username:M.target.value}),required:!0,className:"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700"}),e.jsx(fe,{label:"Password",type:"password",placeholder:"",icon:Tt,value:c.password,onChange:M=>u({...c,password:M.target.value}),required:!0,className:"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700"}),e.jsxs(W,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 shadow-lg shadow-blue-500/30 hover:shadow-blue-500/50 transition-all",size:"lg",isLoading:g,children:["Sign In",e.jsx(Za,{className:"ml-2 h-5 w-5"})]})]})]}),e.jsxs("p",{className:"mt-8 text-center text-sm text-slate-400 dark:text-slate-500",children:[" ",new Date().getFullYear()," ",_?.school_name||m.school_name,". All rights reserved."]})]})})]})};let _y=i0.icon({iconUrl:ab,shadowUrl:lb,iconSize:[25,41],iconAnchor:[12,41]});i0.Marker.prototype.options.icon=_y;const Sy=()=>{const[n,m]=f.useState(null),[c,u]=f.useState(!0),[g,v]=f.useState(null);f.useEffect(()=>{j()},[]);const j=async()=>{try{const z=await V.get("/api/transport/driver/dashboard/");m(z.data)}catch(z){console.error(z),v(z.response?.data?.error||"Failed to load dashboard. Ensure you are assigned a vehicle.")}finally{u(!1)}};if(c)return e.jsx("div",{className:"h-64 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-indigo-600 border-t-transparent"})});if(g)return e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center text-red-500 mb-4",children:e.jsx(On,{size:32})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2",children:"Access Error"}),e.jsx("p",{className:"text-slate-500",children:g})]});const S=z=>{if(!navigator.geolocation){alert("Geolocation is not supported by your browser");return}window.confirm("Are you at the student's pickup point right now? This will save your current GPS location.")&&navigator.geolocation.getCurrentPosition(async b=>{try{const{latitude:C,longitude:A}=b.coords;await V.post(`/api/transport/student/${z}/location/update/`,{lat:C,lng:A}),alert("Location saved successfully!"),j()}catch(C){console.error(C),alert("Failed to save location. Please try again.")}},b=>{console.error(b),alert("Unable to retrieve location. Please enable GPS permissions.")},{enableHighAccuracy:!0})},_=(n?.students||[]).filter(z=>z.lat&&z.lng&&(z.lat!==0||z.lng!==0)),E=_.length>0?[_[0].lat,_[0].lng]:[-1.2921,36.8219];return e.jsxs("div",{className:"space-y-6 pb-20 animate-fade-in-up",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-lg border border-slate-100 dark:border-slate-700 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-indigo-50 dark:bg-indigo-900/20 rounded-full blur-3xl -mr-10 -mt-10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-xs font-bold text-indigo-500 uppercase tracking-wider mb-2",children:"Assigned Vehicle"}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-1 font-mono tracking-tight",children:n?.vehicle?.plate||"N/A"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:n?.vehicle?.model||"Unknown Model"})]}),e.jsx("div",{className:"flex flex-col items-end gap-1",children:e.jsxs("span",{className:"px-3 py-1 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 rounded-full text-xs font-bold",children:[n?.vehicle?.capacity||0," Seats"]})})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 dark:border-slate-700 flex items-center gap-2 text-slate-700 dark:text-slate-300",children:[e.jsx(sa,{size:18,className:"text-indigo-500"}),e.jsx("span",{className:"font-bold",children:n?.route?.name||"Unassigned Route"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-lg border border-slate-100 dark:border-slate-700 overflow-hidden h-[400px] z-0 relative",children:[_.length>0?e.jsxs(Wf,{center:E,zoom:13,style:{height:"100%",width:"100%"},children:[e.jsx(sb,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),_.map(z=>e.jsx(eb,{position:[z.lat,z.lng],children:e.jsx(tb,{children:e.jsxs("div",{className:"text-center min-w-[150px]",children:[e.jsx("b",{className:"block mb-1 text-sm",children:z.name}),e.jsx("span",{className:"text-xs text-slate-500 block",children:z.pickup_point}),z.phone!=="N/A"&&e.jsx("a",{href:`tel:${z.phone}`,className:"inline-block mt-2 text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded-md font-bold",children:"Call Parent"})]})})},z.id))]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 p-6 text-center bg-slate-50 dark:bg-slate-900/50",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-200 dark:bg-slate-800 rounded-full flex items-center justify-center mb-4",children:e.jsx(gt,{size:32,className:"opacity-50"})}),e.jsx("p",{className:"font-medium text-slate-600 dark:text-slate-300",children:"No GPS coordinates found"}),e.jsx("p",{className:"text-sm mt-1 mb-4",children:"Use the list below to set pickup locations."})]}),e.jsxs("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-bold shadow-sm z-[400]",children:[_.length," Markers"]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-900 dark:text-white px-1 mb-4 flex items-center gap-2",children:[e.jsx(gt,{size:20,className:"text-indigo-600"}),"Pickup List (",(n?.students||[]).length,")"]}),e.jsx("div",{className:"space-y-3",children:(n?.students||[]).map((z,h)=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col sm:flex-row sm:items-center gap-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-50 dark:bg-indigo-900/30 flex items-center justify-center font-bold text-indigo-600 dark:text-indigo-400 text-lg shadow-inner shrink-0",children:h+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white truncate",children:z.name}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-start gap-1 mt-0.5",children:[e.jsx(gt,{size:14,className:"mt-0.5 shrink-0"}),e.jsx("span",{className:"truncate",children:z.pickup_point||"No point set"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pl-16 sm:pl-0",children:[!z.lat||!z.lng?e.jsxs("button",{onClick:()=>S(z.id),className:"flex items-center gap-1.5 px-3 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl text-xs font-bold transition-colors shadow-sm",children:[e.jsx(gt,{size:14}),"Set Location"]}):e.jsx("button",{onClick:()=>S(z.id),className:"flex items-center gap-1.5 px-3 py-2 bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300 rounded-xl text-xs font-bold transition-colors",children:"Update"}),z.phone!=="N/A"&&e.jsx("a",{href:`tel:${z.phone}`,className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-xl flex items-center justify-center hover:bg-emerald-200 dark:hover:bg-emerald-900/50 transition-colors shadow-sm",children:e.jsx(Es,{size:20})})]})]},z.id))})]})]})},Cy=()=>{const[n,m]=f.useState([]),[c,u]=f.useState(!0),[g,v]=f.useState(!1),[j,S]=f.useState({type:"FUEL",amount:"",description:"",receipt:null}),_=async()=>{try{const z=await V.get("/api/driver/expenses/");m(z.data.expenses||[])}catch(z){console.error(z)}finally{u(!1)}};f.useEffect(()=>{_()},[]);const E=async z=>{z.preventDefault();const h=new FormData;h.append("type",j.type),h.append("amount",j.amount),h.append("description",j.description),j.receipt&&h.append("receipt",j.receipt);try{await V.post("/api/driver/expenses/",h,{headers:{"Content-Type":"multipart/form-data"}}),v(!1),S({type:"FUEL",amount:"",description:"",receipt:null}),_(),alert("Expense submitted successfully!")}catch{alert("Failed to submit expense")}};return c?e.jsx("div",{className:"flex justify-center pt-20",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-indigo-600 border-t-transparent"})}):e.jsxs("div",{className:"space-y-6 animate-fade-in-up pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Expenses"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Track fuel, repairs & more"})]}),e.jsxs("button",{onClick:()=>v(!0),className:"bg-indigo-600 text-white px-4 py-2.5 rounded-xl flex items-center gap-2 font-bold shadow-lg hover:bg-indigo-700 transition-colors active:scale-95 transform",children:[e.jsx(nt,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Add Expense"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),e.jsx("div",{className:"space-y-4",children:(n||[]).length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-3xl border border-slate-100 dark:border-slate-700",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-400",children:e.jsx(it,{size:32})}),e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"No expenses yet"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Tap 'Add Expense' to record your first cost."})]}):(n||[]).map(z=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex justify-between items-center hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center text-xl shrink-0 ${z.type==="FUEL"?"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400":z.type==="REPAIR"?"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400":"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400"}`,children:z.type==="FUEL"?"":z.type==="REPAIR"?"":""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white capitalize",children:(z.type||"").toLowerCase().replace("_"," ")}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-[150px] sm:max-w-xs",children:z.description}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:z.date})]})]}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsxs("p",{className:"font-bold text-slate-900 dark:text-white mb-2 text-lg",children:["KES ",(z.amount||0).toLocaleString()]}),e.jsx("span",{className:`text-[10px] px-2.5 py-1 rounded-full font-bold uppercase tracking-wide border ${z.status==="APPROVED"?"bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/20 dark:border-emerald-800 dark:text-emerald-400":z.status==="REJECTED"?"bg-rose-50 border-rose-200 text-rose-700 dark:bg-rose-900/20 dark:border-rose-800 dark:text-rose-400":"bg-amber-50 border-amber-200 text-amber-700 dark:bg-amber-900/20 dark:border-amber-800 dark:text-amber-400"}`,children:z.status})]})]},z.id))}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-md rounded-3xl shadow-2xl overflow-hidden animate-scale-in",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-800",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Add New Expense"}),e.jsx("button",{onClick:()=>v(!1),className:"text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(Ve,{size:24})})]}),e.jsxs("form",{onSubmit:E,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5",children:"Expense Type"}),e.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white font-bold",value:j.type,onChange:z=>S({...j,type:z.target.value}),children:[e.jsx("option",{value:"FUEL",children:"Fuel"}),e.jsx("option",{value:"REPAIR",children:"Vehicle Repair"}),e.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5",children:"Amount (KES)"}),e.jsx("input",{type:"number",required:!0,className:"w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white font-bold text-lg font-mono",placeholder:"0",value:j.amount,onChange:z=>S({...j,amount:z.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5",children:"Description"}),e.jsx("textarea",{required:!0,rows:"2",className:"w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white font-medium resize-none",placeholder:"Brief details...",value:j.description,onChange:z=>S({...j,description:z.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5",children:"Receipt Photo (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",id:"receipt-upload",onChange:z=>S({...j,receipt:z.target.files[0]})}),e.jsxs("label",{htmlFor:"receipt-upload",className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl border-2 border-dashed border-slate-200 dark:border-slate-600 hover:border-indigo-500 dark:hover:border-indigo-500 cursor-pointer transition-colors text-slate-500 dark:text-slate-400 font-medium",children:[e.jsx(Ug,{size:20}),j.receipt?j.receipt.name:"Tap to upload receipt"]})]})]}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 rounded-xl shadow-lg shadow-indigo-600/20 active:scale-95 transition-all text-sm uppercase tracking-wider mt-4",children:"Submit Expense"})]})]})})]})},Ey=()=>{const[n,m]=f.useState(JSON.parse(localStorage.getItem("user"))),[c,u]=f.useState([]),[g,v]=f.useState([]),[j,S]=f.useState("leave"),[_,E]=f.useState(!1),[z,h]=f.useState(!1),[b,C]=f.useState({start_date:"",end_date:"",reason:""}),[A,M]=f.useState({amount:"",reason:""});f.useEffect(()=>{k(),T()},[]);const k=async()=>{try{const U=await V.get("/api/driver/leaves/");u(U.data.leaves||[])}catch{}},T=async()=>{try{const U=await V.get("/api/driver/advances/");v(U.data.advances||[])}catch{}},D=async U=>{U.preventDefault();try{await V.post("/api/driver/leaves/",b),E(!1),C({start_date:"",end_date:"",reason:""}),k(),alert("Leave request submitted")}catch{alert("Failed to submit")}},y=async U=>{U.preventDefault();try{await V.post("/api/driver/advances/",A),h(!1),M({amount:"",reason:""}),T(),alert("Advance request submitted")}catch{alert("Failed to submit")}},P=({status:U})=>e.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full font-bold uppercase tracking-wide border ${U==="APPROVED"?"bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/20 dark:border-emerald-800 dark:text-emerald-400":U==="REJECTED"?"bg-rose-50 border-rose-200 text-rose-700 dark:bg-rose-900/20 dark:border-rose-800 dark:text-rose-400":"bg-amber-50 border-amber-200 text-amber-700 dark:bg-amber-900/20 dark:border-amber-800 dark:text-amber-400"}`,children:U});return e.jsxs("div",{className:"space-y-6 pb-20 animate-fade-in-up",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 rounded-3xl p-6 shadow-xl text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full blur-3xl -mr-10 -mt-10"}),e.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[e.jsxs("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center text-2xl font-bold backdrop-blur-sm border border-white/30",children:[n.first_name[0],n.last_name[0]]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[n.first_name," ",n.last_name]}),e.jsx("p",{className:"text-indigo-100",children:"Driver Account"})]})]})]}),e.jsxs("div",{className:"flex p-1 bg-white dark:bg-slate-800 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm",children:[e.jsxs("button",{onClick:()=>S("leave"),className:`flex-1 py-3 text-sm font-bold rounded-xl transition-all flex items-center justify-center gap-2 ${j==="leave"?"bg-indigo-50 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400":"text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(Ze,{size:18})," Leaves"]}),e.jsx("div",{className:"w-px bg-slate-100 dark:bg-slate-700 my-2"}),e.jsxs("button",{onClick:()=>S("advance"),className:`flex-1 py-3 text-sm font-bold rounded-xl transition-all flex items-center justify-center gap-2 ${j==="advance"?"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400":"text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(Ss,{size:18})," Advances"]})]}),j==="leave"?e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Leave History"}),e.jsxs("button",{onClick:()=>E(!0),className:"bg-indigo-600 text-white px-3 py-1.5 rounded-lg text-xs font-bold flex items-center gap-1",children:[e.jsx(nt,{size:14})," Request Leave"]})]}),(c||[]).length===0?e.jsx("p",{className:"text-slate-500 text-sm text-center py-6",children:"No leave requests."}):(c||[]).map(U=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 px-2 py-1 rounded text-xs font-bold",children:[U.start_date,"  ",U.end_date]}),e.jsx(P,{status:U.status})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:U.reason})]},U.id))]}):e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Salary Advances"}),e.jsxs("button",{onClick:()=>h(!0),className:"bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-xs font-bold flex items-center gap-1",children:[e.jsx(nt,{size:14})," Request Advance"]})]}),(g||[]).length===0?e.jsx("p",{className:"text-slate-500 text-sm text-center py-6",children:"No advance requests."}):(g||[]).map(U=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-slate-900 dark:text-white text-lg",children:["KES ",parseFloat(U.amount).toLocaleString()]}),e.jsx("p",{className:"text-xs text-slate-500",children:U.reason})]}),e.jsx(P,{status:U.status})]},U.id))]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl animate-scale-in",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("h3",{className:"font-bold dark:text-white",children:"Request Leave"}),e.jsx(Ve,{className:"cursor-pointer",onClick:()=>E(!1)})]}),e.jsxs("form",{onSubmit:D,className:"space-y-3",children:[e.jsx("input",{type:"date",required:!0,className:"w-full p-3 rounded-xl border bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white",value:b.start_date,onChange:U=>C({...b,start_date:U.target.value}),placeholder:"Start"}),e.jsx("input",{type:"date",required:!0,className:"w-full p-3 rounded-xl border bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white",value:b.end_date,onChange:U=>C({...b,end_date:U.target.value}),placeholder:"End"}),e.jsx("textarea",{required:!0,rows:"2",className:"w-full p-3 rounded-xl border bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white",placeholder:"Reason",value:b.reason,onChange:U=>C({...b,reason:U.target.value})}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white font-bold py-3 rounded-xl hover:bg-indigo-700",children:"Submit Request"})]})]})}),z&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl animate-scale-in",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("h3",{className:"font-bold dark:text-white",children:"Request Advance"}),e.jsx(Ve,{className:"cursor-pointer",onClick:()=>h(!1)})]}),e.jsxs("form",{onSubmit:y,className:"space-y-3",children:[e.jsx("input",{type:"number",required:!0,className:"w-full p-3 rounded-xl border bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white text-lg font-bold font-mono",placeholder:"Amount (KES)",value:A.amount,onChange:U=>M({...A,amount:U.target.value})}),e.jsx("textarea",{required:!0,rows:"2",className:"w-full p-3 rounded-xl border bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white",placeholder:"Reason",value:A.reason,onChange:U=>M({...A,reason:U.target.value})}),e.jsx("button",{type:"submit",className:"w-full bg-emerald-600 text-white font-bold py-3 rounded-xl hover:bg-emerald-700",children:"Submit Request"})]})]})})]})},Ay=()=>{const n=Le(),{config:m}=Nt(),[c,u]=f.useState({username:"",password:""}),[g,v]=f.useState(!1),[j,S]=f.useState(null),[_,E]=f.useState(null),[z,h]=f.useState(!0),b=new URLSearchParams(window.location.search),C=b.get("slug")||localStorage.getItem("portal_slug");b.get("slug")&&localStorage.setItem("portal_slug",b.get("slug")),js.useEffect(()=>{(async()=>{if(C)try{const k=await V.get("/api/config/",{headers:{"X-Portal-Slug":C}});E(k.data)}catch(k){console.error("Failed to fetch school config:",k),E(m)}finally{h(!1)}else E(m),h(!1)})()},[C,m]);const A=async M=>{M.preventDefault(),v(!0),S(null);try{const k=await V.post("/api/auth/login/",{...c,portal_slug:C});if(k.data.success)if(localStorage.setItem("user",JSON.stringify(k.data.user)),k.data.portal_slug&&localStorage.setItem("portal_slug",k.data.portal_slug),k.data.user.role==="teacher"){const T=k.data.user.id;n(k.data.redirect_url)}else S("This portal is only for staff/teachers.");else S(k.data.error||"Login failed")}catch(k){console.error(k),S(k.response?.data?.error||"Failed to connect to server")}finally{v(!1)}};return e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-slate-800 rounded-2xl shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-indigo-600 p-8 text-center",children:[e.jsx("div",{className:"mx-auto bg-white/20 w-16 h-16 rounded-xl flex items-center justify-center backdrop-blur-sm mb-4",children:e.jsx(Lt,{size:32,className:"text-white"})}),z?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-indigo-500/50 rounded w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"h-4 bg-indigo-500/50 rounded w-1/2 mx-auto"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white",children:[_?.school_name||"School"," Teacher Portal"]}),e.jsx("p",{className:"text-indigo-100 mt-2",children:"Sign in to access your dashboard"}),C&&e.jsxs("p",{className:"mt-2 text-xs text-indigo-200 font-mono bg-white/10 px-2 py-1 rounded inline-block",children:["Portal: ",C]})]})]}),e.jsxs("div",{className:"p-8",children:[j&&e.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-6 flex items-center gap-2 text-sm",children:[e.jsx(ot,{size:16}),j]}),e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsx(fe,{label:"Email Address",icon:Gt,type:"email",placeholder:"Enter your email",value:c.username,onChange:M=>u(k=>({...k,username:M.target.value})),required:!0}),e.jsx(fe,{label:"Password",icon:Tt,type:"password",placeholder:"",value:c.password,onChange:M=>u(k=>({...k,password:M.target.value})),required:!0}),e.jsxs(W,{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700",isLoading:g,children:[e.jsx(Fg,{size:18,className:"mr-2"})," Sign In"]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("a",{href:"/login",className:"text-sm text-slate-500 hover:text-indigo-600 transition-colors",children:"Admin/Student Login"})})]})]})})},zy=()=>{const n=Le(),{config:m}=Nt(),[c,u]=f.useState({username:"",password:""}),[g,v]=f.useState(!1),[j,S]=f.useState(null),[_,E]=f.useState(null),[z,h]=f.useState(!0),b=new URLSearchParams(window.location.search),C=b.get("slug")||localStorage.getItem("portal_slug");b.get("slug")&&localStorage.setItem("portal_slug",b.get("slug")),js.useEffect(()=>{(async()=>{if(C)try{const k=await V.get("/api/config/",{headers:{"X-Portal-Slug":C}});E(k.data)}catch(k){console.error("Failed to fetch school config:",k),E(m)}finally{h(!1)}else E(m),h(!1)})()},[C,m]);const A=async M=>{M.preventDefault(),v(!0),S(null);try{const k=await V.post("/api/auth/login/",{...c,portal_slug:C});k.data.success?(localStorage.setItem("user",JSON.stringify(k.data.user)),k.data.portal_slug&&localStorage.setItem("portal_slug",k.data.portal_slug),k.data.user.role==="admin"||k.data.user.is_staff?n("/finance-portal/dashboard"):k.data.user.role==="student"||k.data.user.role==="teacher"||k.data.user.role==="driver"?(S("Access Denied. This portal is for Finance Staff only."),localStorage.removeItem("user")):n("/finance-portal/dashboard")):S(k.data.error||"Login failed")}catch(k){console.error(k),S(k.response?.data?.error||"Failed to connect to server")}finally{v(!1)}};return e.jsxs("div",{className:"min-h-screen w-full flex bg-slate-50 dark:bg-slate-900 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-24 -right-24 w-96 h-96 bg-emerald-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-24 -left-24 w-96 h-96 bg-green-500/20 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"hidden lg:flex w-1/2 bg-gradient-to-br from-emerald-600 to-emerald-800 relative overflow-hidden items-center justify-center p-12",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[e.jsx("path",{d:"M0 0 L100 0 L100 100 L0 100 Z",fill:"url(#grid)"}),e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"4",height:"4",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 4 0 L 0 0 0 4",fill:"none",stroke:"currentColor",strokeWidth:"0.5"})})})]})}),e.jsx("div",{className:"absolute -top-24 -left-24 w-96 h-96 bg-emerald-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),e.jsx("div",{className:"absolute -bottom-24 -right-24 w-96 h-96 bg-green-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),e.jsx("div",{className:"relative z-10 text-white max-w-lg",children:e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsx("div",{className:"h-16 w-16 bg-white/10 backdrop-blur-lg rounded-2xl flex items-center justify-center mb-8 border border-white/20",children:e.jsx(it,{size:32,className:"text-white"})}),e.jsxs("h1",{className:"text-5xl font-bold mb-6 leading-tight",children:["Finance ",e.jsx("span",{className:"text-emerald-300",children:"Portal"})]}),e.jsx("p",{className:"text-lg text-emerald-100 mb-8 leading-relaxed",children:"Manage student accounts, track payments, and oversee all financial operations with precision and ease."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-sm",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-emerald-500/20 flex items-center justify-center",children:e.jsx(Dt,{className:"text-emerald-300",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Revenue Tracking"}),e.jsx("p",{className:"text-sm text-emerald-200",children:"Monitor income in real-time"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-sm",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-emerald-500/20 flex items-center justify-center",children:e.jsx(Oi,{className:"text-emerald-300",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Financial Reports"}),e.jsx("p",{className:"text-sm text-emerald-200",children:"Generate comprehensive analytics"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-sm",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-emerald-500/20 flex items-center justify-center",children:e.jsx(Ss,{className:"text-emerald-300",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Payment Processing"}),e.jsx("p",{className:"text-sm text-emerald-200",children:"Secure transaction management"})]})]})]})]})})]}),e.jsx("div",{className:"w-full lg:w-1/2 flex flex-col items-center justify-center p-6 sm:p-12 relative z-10",children:e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"w-full max-w-md",children:[e.jsx("div",{className:"lg:hidden flex justify-center mb-8",children:e.jsx("div",{className:"h-20 w-20 bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-2xl flex items-center justify-center shadow-lg shadow-emerald-500/30 text-white",children:e.jsx(it,{size:40})})}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-xl p-8 border border-slate-100 dark:border-slate-800",children:[e.jsx("div",{className:"text-center lg:text-left mb-8",children:z?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-slate-200 dark:bg-slate-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-1/2"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-2xl lg:text-3xl font-bold tracking-tight text-slate-900 dark:text-white",children:[_?.school_name||"School"," Finance Portal"]}),e.jsx("p",{className:"mt-2 text-slate-500 dark:text-slate-400 text-sm lg:text-base",children:"Sign in to manage accounts & payments"}),C&&e.jsxs("p",{className:"mt-2 text-xs text-slate-400 dark:text-slate-500 font-mono bg-slate-50 dark:bg-slate-800 px-2 py-1 rounded inline-block",children:["Portal: ",C]})]})}),j&&e.jsxs(he.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-4 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-100 dark:border-red-900/50 mb-6",children:[e.jsx(ot,{size:16,className:"shrink-0"}),e.jsx("p",{children:j})]}),e.jsxs("form",{onSubmit:A,className:"space-y-5",children:[e.jsx(fe,{label:"Email Address or Username",type:"text",placeholder:"name@school.com or username",icon:Gt,value:c.username,onChange:M=>u({...c,username:M.target.value}),required:!0,className:"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700"}),e.jsx(fe,{label:"Password",type:"password",placeholder:"",icon:Tt,value:c.password,onChange:M=>u({...c,password:M.target.value}),required:!0,className:"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700"}),e.jsxs(W,{type:"submit",className:"w-full bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 shadow-lg shadow-emerald-500/30 hover:shadow-emerald-500/50 transition-all",size:"lg",isLoading:g,children:["Sign In",e.jsx(Za,{className:"ml-2 h-5 w-5"})]})]})]}),e.jsxs("p",{className:"mt-8 text-center text-sm text-slate-400 dark:text-slate-500",children:[" ",new Date().getFullYear()," ",_?.school_name||m.school_name,". All rights reserved."]})]})})]})},Ty=()=>{const n=Le(),{config:m}=Nt(),[c,u]=f.useState({username:"",password:""}),[g,v]=f.useState(!1),[j,S]=f.useState(null),[_,E]=f.useState(null),[z,h]=f.useState(!0),b=new URLSearchParams(window.location.search),C=b.get("slug")||localStorage.getItem("portal_slug");b.get("slug")&&localStorage.setItem("portal_slug",b.get("slug")),js.useEffect(()=>{(async()=>{if(C)try{const k=await V.get("/api/config/",{headers:{"X-Portal-Slug":C}});E(k.data)}catch(k){console.error("Failed to fetch school config:",k),E(m)}finally{h(!1)}else E(m),h(!1)})()},[C,m]);const A=async M=>{M.preventDefault(),v(!0),S(null);try{const k=await V.post("/api/auth/login/",{...c,portal_slug:C});k.data.success?(localStorage.setItem("user",JSON.stringify(k.data.user)),k.data.portal_slug&&localStorage.setItem("portal_slug",k.data.portal_slug),k.data.user.role==="admin"||k.data.user.is_staff?n("/food-portal/dashboard"):k.data.user.role==="student"||k.data.user.role==="teacher"||k.data.user.role==="driver"?(S("Access Denied. This portal is for Catering Staff only."),localStorage.removeItem("user")):n("/food-portal/dashboard")):S(k.data.error||"Login failed")}catch(k){console.error(k),S(k.response?.data?.error||"Failed to connect to server")}finally{v(!1)}};return e.jsxs("div",{className:"min-h-screen w-full flex bg-slate-50 dark:bg-slate-900 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-24 -right-24 w-96 h-96 bg-orange-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-24 -left-24 w-96 h-96 bg-amber-500/20 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"hidden lg:flex w-1/2 bg-gradient-to-br from-orange-600 to-orange-800 relative overflow-hidden items-center justify-center p-12",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[e.jsx("path",{d:"M0 0 L100 0 L100 100 L0 100 Z",fill:"url(#grid)"}),e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"4",height:"4",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 4 0 L 0 0 0 4",fill:"none",stroke:"currentColor",strokeWidth:"0.5"})})})]})}),e.jsx("div",{className:"absolute -top-24 -left-24 w-96 h-96 bg-orange-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),e.jsx("div",{className:"absolute -bottom-24 -right-24 w-96 h-96 bg-amber-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),e.jsx("div",{className:"relative z-10 text-white max-w-lg",children:e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsx("div",{className:"h-16 w-16 bg-white/10 backdrop-blur-lg rounded-2xl flex items-center justify-center mb-8 border border-white/20",children:e.jsx(Hs,{size:32,className:"text-white"})}),e.jsxs("h1",{className:"text-5xl font-bold mb-6 leading-tight",children:["Food & ",e.jsx("span",{className:"text-orange-300",children:"Catering"})]}),e.jsx("p",{className:"text-lg text-orange-100 mb-8 leading-relaxed",children:"Manage meal plans, track servings, and oversee all catering operations with ease and efficiency."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-sm",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-orange-500/20 flex items-center justify-center",children:e.jsx(Tm,{className:"text-orange-300",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Meal Planning"}),e.jsx("p",{className:"text-sm text-orange-200",children:"Create balanced menus"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-sm",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-orange-500/20 flex items-center justify-center",children:e.jsx(Hg,{className:"text-orange-300",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Nutrition Tracking"}),e.jsx("p",{className:"text-sm text-orange-200",children:"Monitor dietary requirements"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-sm",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-orange-500/20 flex items-center justify-center",children:e.jsx(vm,{className:"text-orange-300",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Serving Management"}),e.jsx("p",{className:"text-sm text-orange-200",children:"Track daily servings"})]})]})]})]})})]}),e.jsx("div",{className:"w-full lg:w-1/2 flex flex-col items-center justify-center p-6 sm:p-12 relative z-10",children:e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"w-full max-w-md",children:[e.jsx("div",{className:"lg:hidden flex justify-center mb-8",children:e.jsx("div",{className:"h-20 w-20 bg-gradient-to-br from-orange-600 to-orange-700 rounded-2xl flex items-center justify-center shadow-lg shadow-orange-500/30 text-white",children:e.jsx(Hs,{size:40})})}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-xl p-8 border border-slate-100 dark:border-slate-800",children:[e.jsx("div",{className:"text-center lg:text-left mb-8",children:z?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-slate-200 dark:bg-slate-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-1/2"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-2xl lg:text-3xl font-bold tracking-tight text-slate-900 dark:text-white",children:[_?.school_name||"School"," Food Portal"]}),e.jsx("p",{className:"mt-2 text-slate-500 dark:text-slate-400 text-sm lg:text-base",children:"Sign in to manage meals & servings"}),C&&e.jsxs("p",{className:"mt-2 text-xs text-slate-400 dark:text-slate-500 font-mono bg-slate-50 dark:bg-slate-800 px-2 py-1 rounded inline-block",children:["Portal: ",C]})]})}),j&&e.jsxs(he.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-4 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-100 dark:border-red-900/50 mb-6",children:[e.jsx(ot,{size:16,className:"shrink-0"}),e.jsx("p",{children:j})]}),e.jsxs("form",{onSubmit:A,className:"space-y-5",children:[e.jsx(fe,{label:"Email Address or Username",type:"text",placeholder:"name@school.com or username",icon:Gt,value:c.username,onChange:M=>u({...c,username:M.target.value}),required:!0,className:"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700"}),e.jsx(fe,{label:"Password",type:"password",placeholder:"",icon:Tt,value:c.password,onChange:M=>u({...c,password:M.target.value}),required:!0,className:"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700"}),e.jsxs(W,{type:"submit",className:"w-full bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 shadow-lg shadow-orange-500/30 hover:shadow-orange-500/50 transition-all",size:"lg",isLoading:g,children:["Sign In",e.jsx(Za,{className:"ml-2 h-5 w-5"})]})]})]}),e.jsxs("p",{className:"mt-8 text-center text-sm text-slate-400 dark:text-slate-500",children:[" ",new Date().getFullYear()," ",_?.school_name||m.school_name,". All rights reserved."]})]})})]})},Ly=()=>{const n=Le(),{config:m}=Nt(),[c,u]=f.useState({username:"",password:""}),[g,v]=f.useState(!1),[j,S]=f.useState(null),[_,E]=f.useState(null),[z,h]=f.useState(!0),b=new URLSearchParams(window.location.search),C=b.get("slug")||localStorage.getItem("portal_slug");b.get("slug")&&localStorage.setItem("portal_slug",b.get("slug")),js.useEffect(()=>{(async()=>{if(C)try{const k=await V.get("/api/config/",{headers:{"X-Portal-Slug":C}});E(k.data)}catch(k){console.error("Failed to fetch school config:",k),E(m)}finally{h(!1)}else E(m),h(!1)})()},[C,m]);const A=async M=>{M.preventDefault(),v(!0),S(null);try{const k=await V.post("/api/login/",{...c,portal_slug:C});k.data.success?(localStorage.setItem("user",JSON.stringify(k.data.user)),k.data.portal_slug&&localStorage.setItem("portal_slug",k.data.portal_slug),k.data.user.role==="admin"||k.data.user.is_staff?n("/transport-portal/dashboard"):k.data.user.role==="driver"?n("/driver-portal/dashboard"):(S("Access Denied. This portal is for Transport Managers and Drivers only."),localStorage.removeItem("user"))):S(k.data.error||"Login failed")}catch(k){console.error(k),S(k.response?.data?.error||"Failed to connect to server")}finally{v(!1)}};return e.jsxs("div",{className:"min-h-screen w-full flex bg-slate-50 dark:bg-slate-900 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-24 -right-24 w-96 h-96 bg-amber-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-24 -left-24 w-96 h-96 bg-yellow-500/20 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"hidden lg:flex w-1/2 bg-gradient-to-br from-amber-600 to-amber-800 relative overflow-hidden items-center justify-center p-12",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[e.jsx("path",{d:"M0 0 L100 0 L100 100 L0 100 Z",fill:"url(#grid)"}),e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"4",height:"4",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 4 0 L 0 0 0 4",fill:"none",stroke:"currentColor",strokeWidth:"0.5"})})})]})}),e.jsx("div",{className:"absolute -top-24 -left-24 w-96 h-96 bg-amber-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),e.jsx("div",{className:"absolute -bottom-24 -right-24 w-96 h-96 bg-yellow-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),e.jsx("div",{className:"relative z-10 text-white max-w-lg",children:e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsx("div",{className:"h-16 w-16 bg-white/10 backdrop-blur-lg rounded-2xl flex items-center justify-center mb-8 border border-white/20",children:e.jsx(Ia,{size:32,className:"text-white"})}),e.jsxs("h1",{className:"text-5xl font-bold mb-6 leading-tight",children:["Transport ",e.jsx("span",{className:"text-amber-300",children:"Portal"})]}),e.jsx("p",{className:"text-lg text-amber-100 mb-8 leading-relaxed",children:"Manage routes, track vehicles, and oversee all transportation operations with real-time monitoring and efficiency."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-sm",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-amber-500/20 flex items-center justify-center",children:e.jsx(Ig,{className:"text-amber-300",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Route Management"}),e.jsx("p",{className:"text-sm text-amber-200",children:"Optimize transport routes"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-sm",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-amber-500/20 flex items-center justify-center",children:e.jsx(yf,{className:"text-amber-300",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Live Tracking"}),e.jsx("p",{className:"text-sm text-amber-200",children:"Monitor vehicles in real-time"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-sm",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-amber-500/20 flex items-center justify-center",children:e.jsx(gt,{className:"text-amber-300",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Student Locations"}),e.jsx("p",{className:"text-sm text-amber-200",children:"Track pickup and drop-off"})]})]})]})]})})]}),e.jsx("div",{className:"w-full lg:w-1/2 flex flex-col items-center justify-center p-6 sm:p-12 relative z-10",children:e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"w-full max-w-md",children:[e.jsx("div",{className:"lg:hidden flex justify-center mb-8",children:e.jsx("div",{className:"h-20 w-20 bg-gradient-to-br from-amber-600 to-amber-700 rounded-2xl flex items-center justify-center shadow-lg shadow-amber-500/30 text-white",children:e.jsx(Ia,{size:40})})}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-xl p-8 border border-slate-100 dark:border-slate-800",children:[e.jsx("div",{className:"text-center lg:text-left mb-8",children:z?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-slate-200 dark:bg-slate-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-1/2"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-2xl lg:text-3xl font-bold tracking-tight text-slate-900 dark:text-white",children:[_?.school_name||"School"," Transport Portal"]}),e.jsx("p",{className:"mt-2 text-slate-500 dark:text-slate-400 text-sm lg:text-base",children:"Sign in to manage routes & vehicles"}),C&&e.jsxs("p",{className:"mt-2 text-xs text-slate-400 dark:text-slate-500 font-mono bg-slate-50 dark:bg-slate-800 px-2 py-1 rounded inline-block",children:["Portal: ",C]})]})}),j&&e.jsxs(he.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-4 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-100 dark:border-red-900/50 mb-6",children:[e.jsx(ot,{size:16,className:"shrink-0"}),e.jsx("p",{children:j})]}),e.jsxs("form",{onSubmit:A,className:"space-y-5",children:[e.jsx(fe,{label:"Email Address or Username",type:"text",placeholder:"name@school.com or username",icon:Gt,value:c.username,onChange:M=>u({...c,username:M.target.value}),required:!0,className:"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700"}),e.jsx(fe,{label:"Password",type:"password",placeholder:"",icon:Tt,value:c.password,onChange:M=>u({...c,password:M.target.value}),required:!0,className:"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700"}),e.jsxs(W,{type:"submit",className:"w-full bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-700 hover:to-amber-800 shadow-lg shadow-amber-500/30 hover:shadow-amber-500/50 transition-all",size:"lg",isLoading:g,children:["Sign In",e.jsx(Za,{className:"ml-2 h-5 w-5"})]})]})]}),e.jsxs("p",{className:"mt-8 text-center text-sm text-slate-400 dark:text-slate-500",children:[" ",new Date().getFullYear()," ",_?.school_name||m.school_name,". All rights reserved."]})]})})]})},td=({icon:n,label:m,path:c,onClick:u})=>{const g=Ya(),v=g.pathname===c||g.pathname.startsWith(`${c}/`);return e.jsxs("button",{onClick:u,className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-200 ${v?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-medium shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-slate-200"}`,children:[e.jsx(n,{size:20,className:v?"text-primary-600 dark:text-primary-400":"text-slate-400 dark:text-slate-500"}),e.jsx("span",{children:m}),v&&e.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-primary-600 dark:bg-primary-400"})]})},My=({isOpen:n,onClose:m,user:c,onLogout:u})=>{const g=Le(),{config:v}=Nt(),j=E=>{g(E),m&&m()},_=`/teacher/${c?.id}`;return e.jsxs(e.Fragment,{children:[n&&e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:m}),e.jsxs("aside",{className:`
        fixed lg:static inset-y-0 left-0 z-50 w-72 bg-white dark:bg-slate-900 border-r border-slate-200 dark:border-slate-800 transform transition-transform duration-300 ease-[cubic-bezier(0.23,1,0.32,1)]
        ${n?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        flex flex-col h-full shadow-2xl lg:shadow-none
      `,children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 bg-gradient-to-br from-indigo-600 to-indigo-700 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/30 text-white overflow-hidden",children:v.school_logo?e.jsx("img",{src:v.school_logo,alt:"School Logo",className:"h-full w-full object-cover"}):e.jsx(Lt,{size:24})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-xl text-slate-900 dark:text-white tracking-tight block",children:v.school_name}),e.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500 font-medium tracking-wide uppercase",children:"Teacher Portal"})]})]}),e.jsx("button",{className:"lg:hidden p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",onClick:m,children:e.jsx(Ve,{size:20,className:"text-slate-500 dark:text-slate-400"})})]}),e.jsxs("div",{className:"p-4 space-y-1 overflow-y-auto flex-1 custom-scrollbar",children:[e.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-slate-400 dark:text-slate-500 uppercase tracking-wider",children:"My Workspace"}),e.jsx(td,{icon:Qe,label:"My Profile",path:`${_}`,onClick:()=>j(`${_}`)}),e.jsx(td,{icon:ta,label:"My Class",path:`${_}/class`,onClick:()=>j(`${_}/class`)}),e.jsx(td,{icon:Ye,label:"Attendance",path:`${_}/attendance`,onClick:()=>j(`${_}/attendance`)}),e.jsx(td,{icon:Ze,label:"Schedule",path:`${_}/schedule`,onClick:()=>j(`${_}/schedule`)}),e.jsx(td,{icon:Wt,label:"Requests",path:`${_}/requests`,onClick:()=>j(`${_}/requests`)})]}),e.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4 p-2 bg-white dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-800 shadow-sm",children:[e.jsxs("div",{className:"h-10 w-10 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-700 dark:text-indigo-400 font-bold border-2 border-white dark:border-slate-800 shadow-sm",children:[c.first_name?.[0],c.last_name?.[0]]}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 capitalize truncate",children:"Teacher"})}),e.jsx(Ui,{})]}),e.jsxs(W,{onClick:u,variant:"ghost",className:"w-full justify-start text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-700 dark:hover:text-red-300 hover:border-red-100 dark:hover:border-red-900/30 border border-transparent",children:[e.jsx(Fr,{size:18,className:"mr-2"}),"Sign Out"]})]})]})]})},Dy=()=>{const[n,m]=f.useState(!1),c=Le(),u=localStorage.getItem("user"),g=u?JSON.parse(u):null,{isLocked:v}=Nt(),j=v(),S=()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),c("/teacher-login")},_=()=>{(localStorage.getItem("theme")||"dark")==="dark"?(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light")):(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"))};return g?e.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-slate-900 overflow-hidden font-sans",children:[j&&e.jsx(Zn,{}),e.jsx(My,{isOpen:n,onClose:()=>m(!1),user:g,onLogout:S}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("header",{className:"bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 lg:hidden p-4 flex items-center justify-between z-30",children:[e.jsx("button",{onClick:()=>m(!0),className:"p-2 -ml-2 text-slate-500",children:e.jsx(Hr,{size:24})}),e.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:"Teacher Portal"}),e.jsx("div",{className:"w-8"})," "]}),e.jsxs("main",{className:"flex-1 overflow-y-auto p-4 lg:p-8 custom-scrollbar relative",children:[e.jsx("div",{className:"absolute top-4 right-4 z-40 hidden lg:block",children:e.jsxs("button",{onClick:_,className:"p-2 rounded-full bg-white dark:bg-slate-800 text-slate-500 hover:text-indigo-600 dark:hover:text-indigo-400 border border-slate-200 dark:border-slate-700 shadow-sm transition-colors",children:[e.jsx("span",{className:"dark:hidden",children:e.jsx(mf,{size:20})}),e.jsx("span",{className:"hidden dark:inline",children:e.jsx(xf,{size:20})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto h-full",children:e.jsx(Sa,{context:{user:g}})})]})]})]}):e.jsx(Sa,{})},Ry=()=>{const{id:n}=Zt(),[m,c]=f.useState(null),[u,g]=f.useState(!0);if(f.useEffect(()=>{n&&(async()=>{try{const S=await V.get(`/api/teachers/${n}/`);c(S.data.teacher)}catch(S){console.error("Error fetching teacher:",S)}finally{g(!1)}})()},[n]),u)return e.jsx("div",{className:"p-10 flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})});if(!m)return e.jsx("div",{className:"p-10 text-center",children:"Profile not found."});const v=({label:j,value:S,icon:_})=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[_&&e.jsx(_,{className:"w-5 h-5 text-indigo-500 mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:j}),e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white mt-0.5",children:S||"N/A"})]})]});return e.jsxs("div",{className:"p-4 md:p-8 max-w-7xl mx-auto space-y-6 md:space-y-8 pb-20",children:[e.jsxs("div",{className:"mb-2 md:mb-6",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white",children:"My Profile"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 md:mt-2 text-sm md:text-base",children:"View and manage your personal details."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 md:p-8 shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col items-center text-center",children:[e.jsxs("div",{className:"w-24 h-24 md:w-32 md:h-32 mb-4 md:mb-6 relative",children:[m.personal.avatar?e.jsx("img",{src:m.personal.avatar,alt:"Profile",className:"w-full h-full rounded-full object-cover shadow-lg ring-4 ring-white dark:ring-slate-700"}):e.jsxs("div",{className:"w-full h-full rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-3xl md:text-4xl font-bold text-indigo-600 shadow-inner",children:[m.personal.first_name[0],m.personal.last_name[0]]}),e.jsx("div",{className:"absolute bottom-1 right-1 bg-green-500 w-5 h-5 md:w-6 md:h-6 rounded-full border-4 border-white dark:border-slate-800",title:"Active"})]}),e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-white mb-1",children:m.personal.full_name}),e.jsx("p",{className:"text-sm md:text-base text-indigo-600 dark:text-indigo-400 font-medium mb-4",children:m.professional.position}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:[e.jsx("span",{className:"px-3 py-1 bg-slate-100 dark:bg-slate-700 rounded-full text-xs font-semibold text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-600",children:m.professional.status}),m.professional.is_class_teacher&&e.jsxs("span",{className:"px-3 py-1 bg-blue-50 dark:bg-blue-900/30 rounded-full text-xs font-semibold text-blue-600 dark:text-blue-300 border border-blue-100 dark:border-blue-800",children:["CT: ",m.professional.grade_assigned]})]}),e.jsxs("div",{className:"w-full grid grid-cols-2 gap-4 border-t border-slate-100 dark:border-slate-700 pt-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-white",children:m.professional.subjects?.length||0}),e.jsx("div",{className:"text-[10px] md:text-xs text-slate-500 uppercase tracking-wide",children:"Subjects"})]}),e.jsxs("div",{className:"text-center border-l border-slate-100 dark:border-slate-700",children:[e.jsx("div",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-white",children:m.schedule?.length||0}),e.jsx("div",{className:"text-[10px] md:text-xs text-slate-500 uppercase tracking-wide",children:"Classes/Wk"})]})]})]})}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"px-4 md:px-6 py-4 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800/50 flex items-center justify-between",children:e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2 text-sm md:text-base",children:[e.jsx(Qe,{size:18,className:"text-indigo-500"})," Personal Information"]})}),e.jsxs("div",{className:"p-4 md:p-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(v,{label:"Full Name",value:m.personal.full_name}),e.jsx(v,{label:"Email Address",value:m.personal.email,icon:Gt}),e.jsx(v,{label:"Phone Number",value:m.personal.phone,icon:Es}),e.jsx(v,{label:"National ID / Passport",value:m.personal.national_id,icon:Mt}),e.jsx(v,{label:"Gender",value:m.personal.gender_display}),e.jsx(v,{label:"Date of Birth",value:m.personal.dob}),e.jsx(v,{label:"Marital Status",value:m.personal.marital_status}),e.jsx(v,{label:"Nationality",value:m.personal.nationality}),e.jsx(v,{label:"Address",value:m.personal.address,icon:gt}),e.jsx(v,{label:"Religion",value:m.personal.religion})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"px-4 md:px-6 py-4 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800/50 flex items-center justify-between",children:e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2 text-sm md:text-base",children:[e.jsx(qa,{size:18,className:"text-indigo-500"})," Professional Details"]})}),e.jsxs("div",{className:"p-4 md:p-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(v,{label:"TSC Number",value:m.personal.tsc_number,icon:Mt}),e.jsx(v,{label:"Position",value:m.professional.position_display}),e.jsx(v,{label:"Department",value:m.professional.department_name}),e.jsx(v,{label:"Campus / Branch",value:m.professional.branch_name}),e.jsx(v,{label:"Date Joined",value:m.professional.date_joined,icon:Ze}),e.jsx(v,{label:"Experience",value:`${m.professional.years_of_experience||0} Years`}),e.jsx(v,{label:"Qualifications",value:m.professional.qualifications_display}),e.jsx(v,{label:"Employment Status",value:m.professional.status})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"px-4 md:px-6 py-4 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800/50",children:e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2 text-sm md:text-base",children:[e.jsx(Lt,{size:18,className:"text-indigo-500"})," Assigned Subjects"]})}),e.jsx("div",{className:"p-4 md:p-6",children:m.professional.subjects&&m.professional.subjects.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:m.professional.subjects.map((j,S)=>e.jsxs("span",{className:"px-3 py-1.5 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 rounded-lg text-xs md:text-sm font-medium border border-indigo-100 dark:border-indigo-800",children:[j.name," (",j.code,")"]},S))}):e.jsx("p",{className:"text-slate-500 italic text-sm",children:"No subjects assigned."})})]})]})]})]})},Oy=()=>{const{id:n}=Zt(),m=Le(),[c,u]=f.useState(null),[g,v]=f.useState([]),[j,S]=f.useState(!0),[_,E]=f.useState(!1),[z,h]=f.useState(""),[b,C]=f.useState("ALL");f.useEffect(()=>{(async()=>{try{const Z=await V.get(`/api/teachers/${n}/`);u(Z.data.teacher),Z.data.teacher.professional.is_class_teacher&&Z.data.teacher.professional.grade_id&&A(Z.data.teacher.professional.grade_id)}catch(Z){console.error("Error fetching teacher:",Z)}finally{S(!1)}})()},[n]);const A=async F=>{try{E(!0);const Z=await V.get(`/api/students/?grade=${F}`);v(Z.data.students)}catch(Z){console.error("Error fetching students:",Z)}finally{E(!1)}},M=g.length,k=g.filter(F=>F.gender==="M"||F.gender==="Male").length,T=g.filter(F=>F.gender==="F"||F.gender==="Female").length,D=g.filter(F=>F.status==="ACTIVE").length,y=g.filter(F=>{const Z=(F.first_name||"").toLowerCase().includes(z.toLowerCase())||(F.last_name||"").toLowerCase().includes(z.toLowerCase())||(F.admission_number||"").toString().toLowerCase().includes(z.toLowerCase()),ae=b==="ALL"||F.status===b;return Z&&ae}),P=(F,Z)=>`${F?.[0]||""}${Z?.[0]||""}`.toUpperCase(),U=F=>{const Z=["bg-indigo-500","bg-rose-500","bg-emerald-500","bg-amber-500","bg-cyan-500","bg-purple-500"];return Z[F%Z.length]};return j?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):!c||!c.professional.is_class_teacher?e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center min-h-[60vh] text-center p-8",children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 p-8 rounded-full mb-6",children:e.jsx(Ie,{size:64,className:"text-slate-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"No Class Assigned"}),e.jsx("p",{className:"text-slate-500 max-w-md mx-auto",children:"You are not currently assigned as a class teacher. Please contact the school administrator to assign you a class."})]}):e.jsxs("div",{className:"space-y-6 pb-20 md:pb-10 px-4 md:px-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mt-4 md:mt-0",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:["Class ",c.professional.grade_assigned,e.jsxs("span",{className:"px-2.5 py-1 rounded-lg bg-indigo-100 text-indigo-700 text-xs font-bold dark:bg-indigo-900/30 dark:text-indigo-400",children:["Term ",c.professional?.current_term||1," ",new Date().getFullYear()]})]}),e.jsx("p",{className:"text-sm md:text-base text-slate-500 dark:text-slate-400 mt-1",children:"Manage your students, track attendance, and view performance."})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsxs("button",{className:"flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2.5 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 border border-slate-200 dark:border-slate-700 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors shadow-sm",children:[e.jsx(Ms,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"Export"})]}),e.jsxs("button",{className:"flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 shadow-lg shadow-indigo-600/20 transition-all transform hover:scale-[1.02]",children:[e.jsx(gf,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"Actions"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6",children:[e.jsx(Yc,{title:"Total Students",value:M,icon:ta,color:"from-indigo-500 to-purple-500",trend:"+2 new"}),e.jsx(Yc,{title:"Boys",value:k,icon:Mn,color:"from-blue-500 to-cyan-500",subtitle:`${((k/M||0)*100).toFixed(0)}% of class`}),e.jsx(Yc,{title:"Girls",value:T,icon:Ie,color:"from-pink-500 to-rose-500",subtitle:`${((T/M||0)*100).toFixed(0)}% of class`}),e.jsx(Yc,{title:"Active Status",value:`${((D/M||0)*100).toFixed(0)}%`,icon:Dt,color:"from-emerald-500 to-teal-500",subtitle:"Attendance"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"p-4 md:p-6 border-b border-slate-100 dark:border-slate-700 flex flex-col sm:flex-row justify-between items-center gap-3 md:gap-4",children:[e.jsxs("div",{className:"relative w-full sm:w-96",children:[e.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search students...",value:z,onChange:F=>h(F.target.value),className:"w-full pl-9 pr-4 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:ring-2 focus:ring-indigo-500 focus:outline-none transition-all dark:text-white"})]}),e.jsx("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:e.jsxs("div",{className:"relative w-full sm:w-auto",children:[e.jsxs("select",{value:b,onChange:F=>C(F.target.value),className:"w-full sm:w-auto appearance-none pl-9 pr-8 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm text-slate-700 dark:text-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none cursor-pointer",children:[e.jsx("option",{value:"ALL",children:"All Status"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"})]}),e.jsx(za,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16})]})})]}),e.jsx("div",{className:"p-4 md:p-6",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 md:gap-6",children:_?[...Array(8)].map((F,Z)=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4 md:p-6 shadow-sm border border-slate-100 dark:border-slate-700 animate-pulse",children:[e.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 bg-slate-200 dark:bg-slate-700 rounded-full mx-auto mb-4"}),e.jsx("div",{className:"h-3 md:h-4 bg-slate-200 dark:bg-slate-700 rounded w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"h-2 md:h-3 bg-slate-200 dark:bg-slate-700 rounded w-1/2 mx-auto"})]},Z)):y.length>0?y.map(F=>e.jsxs(he.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{y:-5},className:"group bg-white dark:bg-slate-800 rounded-2xl p-4 md:p-6 shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-xl hover:shadow-indigo-500/10 transition-all cursor-pointer relative overflow-hidden",onClick:()=>m(`/teacher/${n}/student/${F.id}`),children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-20 md:h-24 bg-gradient-to-br from-slate-50 to-indigo-50 dark:from-slate-800 dark:to-slate-900 z-0"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[e.jsxs("div",{className:"relative mb-3 md:mb-4",children:[e.jsx("div",{className:"h-20 w-20 md:h-24 md:w-24 rounded-full border-4 border-white dark:border-slate-800 shadow-md overflow-hidden bg-white dark:bg-slate-700 flex items-center justify-center",children:F.photo?e.jsx("img",{src:F.photo,alt:F.full_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:`w-full h-full flex items-center justify-center text-white text-xl md:text-2xl font-bold ${U(F.id)}`,children:P(F.first_name,F.last_name)})}),e.jsx("div",{className:`absolute bottom-1 right-1 w-4 h-4 md:w-5 md:h-5 rounded-full border-2 border-white dark:border-slate-800 flex items-center justify-center ${F.status==="ACTIVE"?"bg-emerald-500":"bg-slate-400"}`,children:F.status==="ACTIVE"&&e.jsx("div",{className:"w-1 md:w-1.5 h-1 md:h-1.5 bg-white rounded-full"})})]}),e.jsx("h3",{className:"text-sm md:text-lg font-bold text-slate-900 dark:text-white text-center mb-1 line-clamp-1 w-full px-1",children:F.full_name}),e.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-1.5 md:gap-2 mb-3 md:mb-4",children:[e.jsx("span",{className:"text-[10px] md:text-xs font-mono text-slate-500 bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:F.admission_number}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wider ${F.gender==="Female"||F.gender==="F"?"bg-pink-50 text-pink-600 dark:bg-pink-900/20 dark:text-pink-400":"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400"}`,children:F.gender==="Female"||F.gender==="F"?"Girl":"Boy"})]}),e.jsxs("div",{className:"grid grid-cols-2 w-full gap-2 mt-auto",children:[e.jsxs("button",{className:"flex items-center justify-center gap-1 md:gap-2 py-1.5 md:py-2 px-2 md:px-3 rounded-lg md:rounded-xl bg-slate-50 dark:bg-slate-700/50 text-slate-600 dark:text-slate-300 text-[10px] md:text-xs font-semibold hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[e.jsx(Dt,{size:12,className:"md:w-3.5 md:h-3.5"}),"Results"]}),e.jsxs("button",{className:"flex items-center justify-center gap-1 md:gap-2 py-1.5 md:py-2 px-2 md:px-3 rounded-lg md:rounded-xl bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 text-[10px] md:text-xs font-semibold hover:bg-indigo-100 dark:hover:bg-indigo-900/30 transition-colors",children:[e.jsx(Ie,{size:12,className:"md:w-3.5 md:h-3.5"}),"Profile"]})]})]})]},F.id)):e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-10 md:py-20 text-slate-400",children:[e.jsx(wf,{size:48,"md:size":64,className:"mb-4 text-slate-300 dark:text-slate-600"}),e.jsx("p",{className:"text-base md:text-lg font-medium text-slate-900 dark:text-white",children:"No students found"}),e.jsx("p",{className:"text-xs md:text-sm",children:"Try adjusting your search or filters"})]})})}),y.length>0&&e.jsx("div",{className:"flex justify-center my-6 md:mt-8",children:e.jsxs("nav",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"h-8 w-8 md:h-10 md:w-10 flex items-center justify-center rounded-lg border border-slate-200 dark:border-slate-700 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800 disabled:opacity-50",disabled:!0,children:"<"}),e.jsx("button",{className:"h-8 w-8 md:h-10 md:w-10 flex items-center justify-center rounded-lg bg-indigo-600 text-white font-bold shadow-lg shadow-indigo-600/20 text-sm",children:"1"}),e.jsx("button",{className:"h-8 w-8 md:h-10 md:w-10 flex items-center justify-center rounded-lg border border-slate-200 dark:border-slate-700 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800 disabled:opacity-50",disabled:!0,children:">"})]})})]})]})},Yc=({title:n,value:m,icon:c,color:u,subtitle:g,trend:v})=>e.jsxs(he.div,{whileHover:{y:-5},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 relative overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 right-0 p-4 opacity-10 bg-gradient-to-br ${u} rounded-bl-3xl`,children:e.jsx(c,{size:40})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${u} flex items-center justify-center text-white shadow-lg mb-4`,children:e.jsx(c,{size:24})}),e.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:n}),e.jsxs("div",{className:"flex items-baseline gap-2 mt-1",children:[e.jsx("h4",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:m}),v&&e.jsx("span",{className:"text-xs text-emerald-500 font-bold bg-emerald-50 dark:bg-emerald-900/30 px-1.5 py-0.5 rounded",children:v})]}),g&&e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:g})]})]}),Py=()=>{const{id:n}=Zt(),[m,c]=f.useState(null),[u,g]=f.useState([]),[v,j]=f.useState(!0),[S,_]=f.useState(!1),[E,z]=f.useState(!1),[h,b]=f.useState(new Date().toISOString().split("T")[0]),[C,A]=f.useState(""),[M,k]=f.useState("grid"),[T,D]=f.useState(!0),[y,P]=f.useState({});f.useEffect(()=>{U()},[n]),f.useEffect(()=>{m?.professional?.grade_id&&u.length>0&&Z(m.professional.grade_id,h,u)},[h]);const U=async()=>{try{const Q=await V.get(`/api/teachers/${n}/`);c(Q.data.teacher),Q.data.teacher.professional.is_class_teacher&&Q.data.teacher.professional.grade_id&&F(Q.data.teacher.professional.grade_id)}catch(Q){console.error("Error fetching teacher:",Q)}finally{j(!1)}},F=async Q=>{try{_(!0);const re=await V.get(`/api/students/?grade=${Q}`);g(re.data.students),await Z(Q,h,re.data.students)}catch(re){console.error("Error fetching students:",re)}finally{_(!1)}},Z=async(Q,re,B)=>{try{const G=(await V.get(`/api/grades/${Q}/attendance/?date=${re}`)).data.attendance||{},J={};B.forEach(oe=>{const ue=G[oe.id];J[oe.id]={status:ue?ue.status:"PRESENT",remarks:ue?.remarks||""}}),P(J)}catch(le){console.error("Error fetching attendance:",le);const G={};B.forEach(J=>{G[J.id]={status:"PRESENT",remarks:""}}),P(G)}},ae=(Q,re)=>{P(B=>({...B,[Q]:{...B[Q],status:re}}))},H=(Q,re)=>{P(B=>({...B,[Q]:{...B[Q],remarks:re}}))},xe=async()=>{if(m?.professional?.grade_id)try{z(!0);const Q=Object.entries(y).map(([B,le])=>({student_id:parseInt(B),status:le.status,remarks:le.remarks,date:h,grade_id:m.professional.grade_id}));await V.post("/api/attendance/mark/batch/",{attendance:Q,date:h,recorded_by:m.id});const re=document.createElement("div");re.className="fixed top-4 right-4 bg-emerald-500 text-white px-6 py-3 rounded-xl shadow-lg z-50 flex items-center gap-2",re.innerHTML='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg><span class="font-semibold">Attendance saved successfully!</span>',document.body.appendChild(re),setTimeout(()=>re.remove(),3e3)}catch(Q){console.error("Error saving attendance:",Q),alert("Failed to save attendance. Please try again.")}finally{z(!1)}},I=Q=>{const re={};u.forEach(B=>{re[B.id]={status:Q,remarks:y[B.id]?.remarks||""}}),P(re)},ee=u.filter(Q=>Q.full_name?.toLowerCase().includes(C.toLowerCase())||Q.admission_number?.toLowerCase().includes(C.toLowerCase())),$={total:u.length,present:Object.values(y).filter(Q=>Q.status==="PRESENT").length,absent:Object.values(y).filter(Q=>Q.status==="ABSENT").length,late:Object.values(y).filter(Q=>Q.status==="LATE").length};return $.attendanceRate=$.total>0?($.present/$.total*100).toFixed(1):0,v?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Loading..."})]})}):!m||!m.professional.is_class_teacher?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-rose-100 to-pink-100 dark:from-rose-900/20 dark:to-pink-900/20 p-12 rounded-3xl mb-6",children:e.jsx(wf,{size:80,className:"text-rose-500"})}),e.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-3",children:"Access Restricted"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-md mx-auto text-lg",children:"You must be assigned as a Class Teacher to mark attendance."})]}):e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 pb-32 font-sans",children:[e.jsxs("div",{className:"bg-slate-900 border-b border-slate-800 pb-12 pt-6 px-4 md:px-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-primary-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center gap-4 md:gap-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 md:h-14 md:w-14 bg-gradient-to-br from-primary-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg shadow-primary-500/20 ring-4 ring-slate-800 shrink-0",children:e.jsx(Mn,{size:24,"md:size":28,className:"text-white"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-black text-white flex items-center gap-2 tracking-tight",children:["Attendance",m?.professional?.grade_assigned&&e.jsx("span",{className:"px-2 py-0.5 rounded-lg bg-slate-800 border border-slate-700 text-primary-400 text-xs font-bold",children:m.professional.grade_assigned})]}),e.jsx("p",{className:"text-slate-400 font-medium text-sm md:text-base mt-1",children:new Date(h).toLocaleDateString(void 0,{weekday:"long",day:"numeric",month:"long"})})]})]})}),e.jsxs("div",{className:"flex items-center gap-3 bg-slate-800/50 backdrop-blur-md p-2.5 rounded-xl border border-slate-700/50 w-full md:w-auto",children:[e.jsx(Ze,{size:18,className:"text-primary-400 shrink-0"}),e.jsx("input",{type:"date",value:h,onChange:Q=>b(Q.target.value),className:"bg-transparent border-none text-slate-200 focus:ring-0 font-semibold cursor-pointer text-sm w-full"})]})]}),e.jsx(vt,{children:T&&e.jsxs(he.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-4 border border-slate-700/50 relative overflow-hidden group",children:e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-1.5 bg-blue-500/20 rounded-lg text-blue-400",children:e.jsx(Ie,{size:16})}),e.jsx("p",{className:"text-[10px] font-bold text-blue-300 uppercase tracking-wider",children:"Students"})]}),e.jsx("p",{className:"text-2xl font-black text-white",children:$.total})]})}),e.jsx("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-4 border border-slate-700/50 relative overflow-hidden group",children:e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-1.5 bg-emerald-500/20 rounded-lg text-emerald-400",children:e.jsx(Ye,{size:16})}),e.jsx("p",{className:"text-[10px] font-bold text-emerald-300 uppercase tracking-wider",children:"Present"})]}),e.jsx("p",{className:"text-2xl font-black text-white",children:$.present})]})}),e.jsx("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-4 border border-slate-700/50 relative overflow-hidden group",children:e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-1.5 bg-rose-500/20 rounded-lg text-rose-400",children:e.jsx(ua,{size:16})}),e.jsx("p",{className:"text-[10px] font-bold text-rose-300 uppercase tracking-wider",children:"Absent"})]}),e.jsx("p",{className:"text-2xl font-black text-white",children:$.absent})]})}),e.jsx("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-4 border border-slate-700/50 relative overflow-hidden group",children:e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-1.5 bg-amber-500/20 rounded-lg text-amber-400",children:e.jsx(Pi,{size:16})}),e.jsx("p",{className:"text-[10px] font-bold text-amber-300 uppercase tracking-wider",children:"Rate"})]}),e.jsxs("p",{className:"text-2xl font-black text-white",children:[$.attendanceRate,"%"]})]})})]})})]})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6 -mt-6 relative z-20",children:[e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-xl shadow-slate-200/50 dark:shadow-black/20 border border-slate-200 dark:border-slate-800 p-3 mb-4 md:mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(jt,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search students...",value:C,onChange:Q=>A(Q.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-100 dark:bg-slate-800/50 border-none rounded-lg text-sm focus:ring-2 focus:ring-primary-500 text-slate-900 dark:text-white placeholder-slate-500"})]}),e.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>k("grid"),className:`p-2 rounded-lg transition-all ${M==="grid"?"bg-slate-800 text-white shadow-md":"text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:e.jsx(kf,{size:18})}),e.jsx("button",{onClick:()=>k("list"),className:`p-2 rounded-lg transition-all ${M==="list"?"bg-slate-800 text-white shadow-md":"text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:e.jsx(hf,{size:18})})]}),e.jsxs("button",{onClick:()=>I("PRESENT"),className:"px-3 py-2 bg-emerald-500 text-white text-xs md:text-sm font-bold rounded-lg hover:bg-emerald-600 transition-colors shadow-lg shadow-emerald-500/20 flex items-center gap-1.5",children:[e.jsx(ql,{size:16}),"Mark All Present"]})]})]})}),S?e.jsxs("div",{className:"py-20 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-slate-200 border-t-primary-600 mb-4"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Loading class list..."})]}):M==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:ee.map((Q,re)=>e.jsxs(he.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:re*.02},className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-4 shadow-sm hover:shadow-md transition-all group",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("div",{className:"h-10 w-10 shrink-0 rounded-lg bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-500 dark:text-slate-400 font-bold text-lg group-hover:bg-primary-50 dark:group-hover:bg-primary-900/20 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors",children:[Q.first_name?Q.first_name[0]:(Q.full_name||"?")[0],Q.last_name?Q.last_name[0]:(Q.full_name?.split(" ")[1]||"")[0]]}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-sm truncate",children:Q.full_name}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-mono truncate",children:Q.admission_number})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[e.jsxs("button",{onClick:()=>ae(Q.id,"PRESENT"),className:`py-2 rounded-lg flex flex-col items-center justify-center gap-1 transition-all touch-manipulation ${y[Q.id]?.status==="PRESENT"?"bg-emerald-500 text-white shadow-md shadow-emerald-500/25 ring-2 ring-emerald-500 ring-offset-2 dark:ring-offset-slate-900":"bg-slate-50 dark:bg-slate-800 text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:[e.jsx(Ye,{size:18}),e.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Present"})]}),e.jsxs("button",{onClick:()=>ae(Q.id,"LATE"),className:`py-2 rounded-lg flex flex-col items-center justify-center gap-1 transition-all touch-manipulation ${y[Q.id]?.status==="LATE"?"bg-amber-500 text-white shadow-md shadow-amber-500/25 ring-2 ring-amber-500 ring-offset-2 dark:ring-offset-slate-900":"bg-slate-50 dark:bg-slate-800 text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:[e.jsx(dt,{size:18}),e.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Late"})]}),e.jsxs("button",{onClick:()=>ae(Q.id,"ABSENT"),className:`py-2 rounded-lg flex flex-col items-center justify-center gap-1 transition-all touch-manipulation ${y[Q.id]?.status==="ABSENT"?"bg-rose-500 text-white shadow-md shadow-rose-500/25 ring-2 ring-rose-500 ring-offset-2 dark:ring-offset-slate-900":"bg-slate-50 dark:bg-slate-800 text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:[e.jsx(ua,{size:18}),e.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Absent"})]})]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",placeholder:"Add remark...",value:y[Q.id]?.remarks||"",onChange:B=>H(Q.id,B.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border-none rounded-lg text-xs focus:ring-1 focus:ring-primary-500 text-slate-700 dark:text-slate-300 placeholder-slate-400 transition-all"})})]},Q.id))}):e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden shadow-sm",children:e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:ee.map(Q=>e.jsxs("div",{className:"p-4 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"h-10 w-10 shrink-0 rounded-lg bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-500 text-xs font-bold",children:[Q.first_name?.[0],Q.last_name?.[0]]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-slate-900 dark:text-white",children:Q.full_name}),e.jsx("p",{className:"text-xs text-slate-500 font-mono",children:Q.admission_number})]})]}),e.jsx("div",{className:"flex gap-2 self-start sm:self-auto w-full sm:w-auto overflow-x-auto pb-1 sm:pb-0 hide-scrollbar",children:["PRESENT","LATE","ABSENT"].map(re=>e.jsxs("button",{onClick:()=>ae(Q.id,re),className:`flex-1 sm:flex-none px-3 py-2 rounded-lg text-xs font-bold flex items-center justify-center gap-1.5 transition-all w-24 sm:w-auto shrink-0 ${y[Q.id]?.status===re?re==="PRESENT"?"bg-emerald-500 text-white":re==="LATE"?"bg-amber-500 text-white":"bg-rose-500 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[re==="PRESENT"?e.jsx(Ye,{size:14}):re==="LATE"?e.jsx(dt,{size:14}):e.jsx(ua,{size:14}),re==="PRESENT"?"Present":re==="LATE"?"Late":"Absent"]},re))})]}),e.jsx("input",{type:"text",placeholder:"Add remark...",value:y[Q.id]?.remarks||"",onChange:re=>H(Q.id,re.target.value),className:"mt-3 w-full px-3 py-2 bg-slate-50 dark:bg-slate-800/50 border-none rounded-lg text-xs text-slate-700 dark:text-slate-300"})]},Q.id))})})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 p-4 pointer-events-none",children:e.jsxs("div",{className:"max-w-xl mx-auto bg-slate-900/90 backdrop-blur-xl border border-slate-700 text-white p-3 rounded-2xl shadow-2xl flex flex-col xs:flex-row items-center justify-between gap-3 pointer-events-auto",children:[e.jsxs("div",{className:"flex w-full xs:w-auto items-center justify-around xs:justify-start gap-4 xs:gap-6 text-xs pl-2",children:[e.jsxs("div",{className:"flex flex-col xs:flex-row items-center gap-1 xs:gap-2",children:[e.jsx("span",{className:"text-slate-400 hidden xs:inline",children:"Present"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 block"}),e.jsx("span",{className:"font-bold text-white text-base",children:$.present})]}),e.jsx("span",{className:"text-[10px] text-slate-500 xs:hidden",children:"Present"})]}),e.jsx("div",{className:"h-4 w-px bg-slate-700 hidden xs:block"}),e.jsxs("div",{className:"flex flex-col xs:flex-row items-center gap-1 xs:gap-2",children:[e.jsx("span",{className:"text-slate-400 hidden xs:inline",children:"Absent"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-rose-500 block"}),e.jsx("span",{className:"font-bold text-white text-base",children:$.absent})]}),e.jsx("span",{className:"text-[10px] text-slate-500 xs:hidden",children:"Absent"})]}),e.jsx("div",{className:"h-4 w-px bg-slate-700 hidden xs:block"}),e.jsxs("div",{className:"flex flex-col xs:flex-row items-center gap-1 xs:gap-2",children:[e.jsx("span",{className:"text-slate-400 hidden xs:inline",children:"Late"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-amber-500 block"}),e.jsx("span",{className:"font-bold text-white text-base",children:$.late})]}),e.jsx("span",{className:"text-[10px] text-slate-500 xs:hidden",children:"Late"})]})]}),e.jsxs("button",{onClick:xe,disabled:E,className:"w-full xs:w-auto bg-primary-600 hover:bg-primary-500 text-white px-6 py-2.5 rounded-xl font-bold text-sm shadow-lg shadow-primary-900/50 flex items-center justify-center gap-2 transition-all active:scale-95 disabled:opacity-50",children:[E?e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(ma,{size:18}),E?"Saving...":"Save"]})]})})]})},By=()=>{const{id:n}=Zt(),[m,c]=f.useState(null),[u,g]=f.useState(!0);return f.useEffect(()=>{(async()=>{try{const j=await V.get(`/api/teachers/${n}/`);c(j.data.teacher)}catch(j){console.error("Error fetching teacher:",j)}finally{g(!1)}})()},[n]),u?e.jsx("div",{className:"p-10 flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):m?e.jsxs("div",{className:"p-4 md:p-8 max-w-7xl mx-auto space-y-6 md:space-y-8 pb-20",children:[e.jsxs("div",{className:"mb-2 md:mb-6",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white",children:"Weekly Schedule"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 md:mt-2 text-sm md:text-base",children:"Your teaching timetable."})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4 md:p-6 shadow-sm border border-slate-100 dark:border-slate-700",children:m.schedule&&m.schedule.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:m.schedule.map(v=>e.jsxs("div",{className:"flex gap-4 p-4 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-300 dark:hover:border-indigo-700 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center w-14 md:w-16 bg-slate-50 dark:bg-slate-700 rounded-lg text-center aspect-square shrink-0",children:[e.jsx("span",{className:"text-[10px] md:text-xs font-bold text-slate-400 uppercase tracking-wider",children:v.day.substring(0,3)}),e.jsx("span",{className:"font-bold text-indigo-600 text-base md:text-lg",children:v.time.split(":")[0]})]}),e.jsxs("div",{className:"flex flex-col justify-center min-w-0",children:[e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white text-base md:text-lg truncate",children:v.subject}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 mt-0.5 md:mt-1",children:[e.jsx(Ie,{size:14,className:"shrink-0"}),e.jsx("span",{className:"font-medium bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded text-xs truncate",children:v.grade})]})]})]},v.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ie,{size:32,className:"text-slate-300 dark:text-slate-500"})}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-1",children:"No Schedule Found"}),e.jsx("p",{className:"text-slate-500 italic",children:"No classes have been scheduled for you this week."})]})})]}):e.jsx("div",{className:"p-10 text-center",children:"Profile not found."})},nf=({icon:n,label:m,value:c,subValue:u})=>e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-400 group-hover:bg-white group-hover:text-primary-500 group-hover:shadow-sm transition-all",children:e.jsx(n,{size:18})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-slate-400 uppercase mb-0.5",children:m}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:c||"N/A"}),u&&e.jsx("p",{className:"text-xs text-slate-500",children:u})]})]}),bm=({id:n,label:m,icon:c,active:u,onClick:g})=>e.jsxs("button",{onClick:()=>g(n),className:`relative flex items-center gap-2 px-5 py-2.5 rounded-full text-sm font-medium transition-all ${u?"text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[u&&e.jsx(he.div,{layoutId:"activeTab",className:"absolute inset-0 bg-slate-900 dark:bg-primary-600 rounded-full",transition:{type:"spring",bounce:.2,duration:.6}}),e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsx(c,{size:16}),m]})]}),Uy=({studentId:n,student:m})=>{const c=Le(),[u,g]=f.useState(null),[v,j]=f.useState(!0);if(f.useEffect(()=>{(async()=>{try{const b=await V.get(`/api/students/${n}/academics/`);g(b.data)}catch(b){console.error("Error fetching academic records:",b)}finally{j(!1)}})()},[n]),v)return e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-slate-200 border-t-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Loading academic records..."})]});if(!u||!u.success)return e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-12 text-center border-2 border-dashed border-slate-200 dark:border-slate-800",children:[e.jsx(Ur,{size:48,className:"mx-auto text-slate-300 mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"No Academic Records"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"No assessment records found for this student."})]});const S=Object.values(u.records).reduce((h,b)=>h+Object.keys(b).length,0),_={};Object.values(u.records).forEach(h=>{Object.values(h).forEach(b=>{b.subjects.forEach(C=>{_[C.subject_name]||(_[C.subject_name]={total:0,count:0}),_[C.subject_name].total+=C.marks,_[C.subject_name].count+=1})})});const E=Object.entries(_).map(([h,b])=>({name:h,average:(b.total/b.count).toFixed(1)})).sort((h,b)=>b.average-h.average),z=Math.max(...E.map(h=>parseFloat(h.average)));return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-3 md:p-4 border border-blue-100 dark:border-blue-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 md:mb-2",children:[e.jsx("div",{className:"h-6 w-6 md:h-8 md:w-8 bg-blue-500 rounded-lg flex items-center justify-center",children:e.jsx(Ur,{size:14,className:"md:w-4 md:h-4 text-white"})}),e.jsx("p",{className:"text-[10px] md:text-xs text-blue-700 dark:text-blue-400 font-bold uppercase truncate",children:"Average"})]}),e.jsxs("p",{className:"text-xl md:text-3xl font-black text-blue-900 dark:text-blue-300",children:[u.stats.average_score,"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-3 md:p-4 border border-purple-100 dark:border-purple-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 md:mb-2",children:[e.jsx("div",{className:"h-6 w-6 md:h-8 md:w-8 bg-purple-500 rounded-lg flex items-center justify-center",children:e.jsx(Lt,{size:14,className:"md:w-4 md:h-4 text-white"})}),e.jsx("p",{className:"text-[10px] md:text-xs text-purple-700 dark:text-purple-400 font-bold uppercase truncate",children:"Exams"})]}),e.jsx("p",{className:"text-xl md:text-3xl font-black text-purple-900 dark:text-purple-300",children:u.stats.total_assessments})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-3 md:p-4 border border-emerald-100 dark:border-emerald-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 md:mb-2",children:[e.jsx("div",{className:"h-6 w-6 md:h-8 md:w-8 bg-emerald-500 rounded-lg flex items-center justify-center",children:e.jsx(Lt,{size:14,className:"md:w-4 md:h-4 text-white"})}),e.jsx("p",{className:"text-[10px] md:text-xs text-emerald-700 dark:text-emerald-400 font-bold uppercase truncate",children:"Subjects"})]}),e.jsx("p",{className:"text-xl md:text-3xl font-black text-emerald-900 dark:text-emerald-300",children:u.stats.subjects_count})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-3 md:p-4 border border-amber-100 dark:border-amber-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 md:mb-2",children:[e.jsx("div",{className:"h-6 w-6 md:h-8 md:w-8 bg-amber-500 rounded-lg flex items-center justify-center",children:e.jsx(Ze,{size:14,className:"md:w-4 md:h-4 text-white"})}),e.jsx("p",{className:"text-[10px] md:text-xs text-amber-700 dark:text-amber-400 font-bold uppercase truncate",children:"Term"})]}),e.jsx("p",{className:"text-lg md:text-xl font-black text-amber-900 dark:text-amber-300 truncate",children:u.stats.latest_term})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Performance Distribution"}),e.jsx(Oi,{size:16,className:"text-slate-400"})]}),e.jsx("div",{className:"space-y-2.5",children:[{level:"4",label:"Exceeding",count:u.performance_distribution.exceeding,color:"emerald"},{level:"3",label:"Meeting",count:u.performance_distribution.meeting,color:"blue"},{level:"2",label:"Approaching",count:u.performance_distribution.approaching,color:"amber"},{level:"1",label:"Below",count:u.performance_distribution.below,color:"rose"}].map(h=>{const b=(h.count/(u.stats.total_assessments||1)*100).toFixed(0);return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:[h.label," (",h.level,")"]}),e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[h.count," ",e.jsxs("span",{className:"text-slate-400 text-[10px]",children:["(",b,"%)"]})]})]}),e.jsx("div",{className:"h-1.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-${h.color}-500 transition-all duration-500`,style:{width:`${b}%`}})})]},h.level)})})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Subject Performance"}),e.jsx(Pi,{size:16,className:"text-slate-400"})]}),e.jsx("div",{className:"space-y-2",children:E.slice(0,6).map((h,b)=>e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-0.5",children:[e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:h.name}),e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[h.average,"%"]})]}),e.jsx("div",{className:"h-1.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary-500 to-primary-600 group-hover:from-primary-600 group-hover:to-primary-700 transition-all duration-300",style:{width:`${parseFloat(h.average)/z*100}%`}})})]},b))})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-5 py-3 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(Lt,{size:16,className:"text-primary-500"}),"Assessment Summary"]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:[S," assessment",S!==1?"s":""," across ",Object.keys(u.records).length," term",Object.keys(u.records).length!==1?"s":""]})]}),e.jsxs(W,{onClick:()=>{const h=JSON.parse(localStorage.getItem("user")||"{}"),b=h?.teacher?.pk||h?.id||"";b&&c(`/teacher/${b}/student/${n}/report`)},size:"sm",className:"text-xs",children:["View Full Report",e.jsx(Ga,{size:14,className:"ml-1.5"})]})]})}),e.jsxs("div",{className:"p-5",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:Object.entries(u.records).slice(0,3).map(([h,b])=>e.jsxs("div",{className:"p-3 rounded-xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-700/50 hover:border-primary-200 dark:hover:border-primary-800 transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:h}),e.jsx(Ze,{size:14,className:"text-slate-400 group-hover:text-primary-500 transition-colors"})]}),e.jsx("p",{className:"text-2xl font-black text-slate-900 dark:text-white mb-0.5",children:Object.keys(b).length}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Assessment",Object.keys(b).length!==1?"s":""]})]},h))}),Object.keys(u.records).length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Lt,{size:40,className:"mx-auto text-slate-300 mb-3"}),e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-1",children:"No Assessments Yet"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"This student hasn't been assessed yet."})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.jsxs("button",{onClick:()=>{const h=JSON.parse(localStorage.getItem("user")||"{}"),b=h?.teacher?.pk||h?.id||"",C=m?.academic?.grade_id||m?.grade_id||"";b&&c(`/teacher/${b}/academics?student=${n}&grade=${C}`)},className:"group p-4 rounded-xl bg-gradient-to-br from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-800/20 border border-primary-200 dark:border-primary-800 hover:border-primary-300 dark:hover:border-primary-700 transition-all text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-white dark:bg-slate-800 shadow-sm flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(ha,{size:18,className:"text-primary-600"})}),e.jsx(Ga,{size:16,className:"text-primary-400 group-hover:text-primary-500 group-hover:translate-x-0.5 group-hover:-translate-y-0.5 transition-all"})]}),e.jsx("h4",{className:"text-sm font-bold text-slate-900 dark:text-white mb-0.5",children:"Record New Assessment"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Add marks for this student"})]})})]})},Fy=()=>{const{id:n}=Zt(),m=Le(),[c,u]=f.useState(null),[g,v]=f.useState(!0),[j,S]=f.useState("overview"),[_,E]=f.useState([]),[z,h]=f.useState(!1),b=()=>{const P=JSON.parse(localStorage.getItem("user")||"{}");return P?.teacher?.pk||P?.id||""};if(f.useEffect(()=>{(async()=>{try{const U=await V.get(`/api/students/${n}/`);u(U.data.student)}catch(U){console.error("Error fetching student:",U)}finally{v(!1)}})()},[n]),f.useEffect(()=>{(async()=>{if(j==="attendance"&&n){h(!0);try{const U=await V.get(`/api/students/${n}/attendance/`);E(U.data.attendance||[])}catch(U){console.error("Error fetching attendance:",U),E([])}finally{h(!1)}}})()},[j,n]),g)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-950",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-slate-200 border-t-indigo-600"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Loading Student Profile..."})]})});if(!c)return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 dark:bg-slate-950 gap-4",children:[e.jsx("div",{className:"h-20 w-20 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center text-slate-400",children:e.jsx(Qe,{size:40})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Student Not Found"}),e.jsx(W,{variant:"outline",onClick:()=>m(-1),children:"Return to Class"})]});const A=(()=>{if(!_||_.length===0)return{total:0,present:0,absent:0,late:0,rate:0};const P=_.filter(H=>H.status==="PRESENT").length,U=_.filter(H=>H.status==="ABSENT").length,F=_.filter(H=>H.status==="LATE").length,Z=_.length,ae=Z>0?(P/Z*100).toFixed(1):0;return{total:Z,present:P,absent:U,late:F,rate:ae}})(),M=_.slice(0,7),T=(()=>{const P=new Date,U=P.getFullYear(),F=P.getMonth(),Z=new Date(U,F+1,0).getDate(),ae=[];for(let H=1;H<=Z;H++){const xe=`${U}-${String(F+1).padStart(2,"0")}-${String(H).padStart(2,"0")}`,I=_.find(ee=>ee.date===xe);ae.push({day:H,status:I?I.status.toLowerCase():null})}return ae})(),D=new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}),y=()=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-5 md:p-6 border border-slate-100 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2 text-sm md:text-base",children:[e.jsx(gt,{size:18,className:"text-purple-500 md:w-5 md:h-5"}),"Guardian Info"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-3 md:p-4 rounded-2xl flex items-center gap-3 md:gap-4",children:[e.jsx("div",{className:"h-10 w-10 md:h-12 md:w-12 rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-600 flex items-center justify-center font-bold text-lg",children:c.guardian.name?c.guardian.name.charAt(0):"G"}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("p",{className:"font-bold text-slate-900 dark:text-white truncate text-sm md:text-base",children:c.guardian.name||"No Guardian Name"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Primary Guardian"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(nf,{icon:Es,label:"Phone Number",value:c.guardian.phone}),e.jsx(nf,{icon:Gt,label:"Email Address",value:c.guardian.email||"No email provided"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-5 md:p-6 border border-slate-100 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2 text-sm md:text-base",children:[e.jsx(Lt,{size:18,className:"text-blue-500 md:w-5 md:h-5"}),"Academic Status"]}),e.jsx("span",{className:"text-xs font-bold bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-2.5 py-1 rounded-full",children:"ACTIVE"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"p-3 md:p-4 rounded-2xl bg-blue-50 dark:bg-blue-900/10 text-center",children:[e.jsx("p",{className:"text-[10px] md:text-xs text-blue-600 dark:text-blue-400 font-bold uppercase mb-1",children:"Grade"}),e.jsx("p",{className:"text-xl md:text-2xl font-black text-slate-900 dark:text-white",children:c.personal.grade})]}),e.jsxs("div",{className:"p-3 md:p-4 rounded-2xl bg-indigo-50 dark:bg-indigo-900/10 text-center",children:[e.jsx("p",{className:"text-[10px] md:text-xs text-indigo-600 dark:text-indigo-400 font-bold uppercase mb-1",children:"Rank"}),e.jsxs("p",{className:"text-xl md:text-2xl font-black text-slate-900 dark:text-white",children:["#",c.academic.position]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 dark:from-slate-800 dark:to-slate-900 rounded-3xl p-5 md:p-6 text-white shadow-lg md:col-span-2 lg:col-span-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[e.jsxs("h3",{className:"font-bold flex items-center gap-2 text-sm md:text-base",children:[e.jsx(dt,{size:18,className:"text-emerald-400 md:w-5 md:h-5"}),"Attendance"]}),e.jsx("span",{className:"text-xs font-medium bg-white/10 px-2 py-1 rounded-lg",children:"This Term"})]}),e.jsx("div",{className:"flex items-center justify-center py-2 md:py-4",children:e.jsxs("div",{className:"relative h-28 w-28 md:h-32 md:w-32 flex items-center justify-center",children:[e.jsxs("svg",{className:"h-full w-full -rotate-90",viewBox:"0 0 36 36",children:[e.jsx("path",{className:"text-white/10",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3"}),e.jsx("path",{className:"text-emerald-400",strokeDasharray:`${c.attendance.attendance_rate}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3"})]}),e.jsxs("div",{className:"absolute flex flex-col items-center",children:[e.jsxs("span",{className:"text-2xl md:text-3xl font-bold",children:[c.attendance.attendance_rate,"%"]}),e.jsx("span",{className:"text-[10px] text-slate-300 uppercase tracking-widest",children:"Present"})]})]})}),e.jsxs("div",{className:"flex justify-between text-sm mt-2 px-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-slate-400 text-xs uppercase",children:"Absent"}),e.jsxs("p",{className:"font-bold",children:[c.attendance.absent_days," Days"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-slate-400 text-xs uppercase",children:"Late"}),e.jsxs("p",{className:"font-bold",children:[c.attendance.late_days," Days"]})]})]})]})]});return e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-950 pb-20 min-h-screen",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 px-4 md:px-8 py-3 md:py-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>{const P=b();m(P?`/teacher/${P}/class`:-1)},className:"group flex items-center gap-2 text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white transition-colors",children:[e.jsx("div",{className:"p-1.5 md:p-2 rounded-full group-hover:bg-slate-100 dark:group-hover:bg-slate-800 transition-colors",children:e.jsx(Ls,{size:20,className:"md:w-5 md:h-5 w-4 h-4"})}),e.jsx("span",{className:"font-medium text-sm md:text-base",children:"Back to Class"})]}),e.jsx("div",{className:"flex gap-3"})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-6 md:py-8 space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"h-32 md:h-48 w-full bg-gradient-to-r from-indigo-900 to-indigo-800 dark:from-slate-800 dark:to-slate-900 rounded-2xl md:rounded-3xl overflow-hidden shadow-sm",children:[e.jsx("div",{className:"absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),e.jsx("div",{className:"absolute bottom-0 right-0 p-8 md:p-12 opacity-10",children:e.jsx(hs,{size:120,className:"md:w-[200px] md:h-[200px]"})})]}),e.jsxs("div",{className:"relative -mt-16 md:-mt-20 px-4 md:px-10 flex flex-col md:flex-row items-center md:items-end gap-4 md:gap-6 text-center md:text-left",children:[e.jsx("div",{className:"relative group",children:e.jsx("div",{className:"h-32 w-32 md:h-40 md:w-40 rounded-3xl border-4 border-white dark:border-slate-950 bg-white dark:bg-slate-900 shadow-xl overflow-hidden p-1 flex items-center justify-center",children:c.personal.photo?e.jsx("img",{src:c.personal.photo,alt:c.personal.full_name,className:"w-full h-full object-cover rounded-2xl"}):e.jsx("div",{className:"w-full h-full bg-slate-100 dark:bg-slate-800 rounded-2xl flex items-center justify-center text-slate-400",children:e.jsx(Qe,{size:48,className:"md:w-16 md:h-16"})})})}),e.jsxs("div",{className:"pb-2 md:pb-4 flex-1 w-full",children:[e.jsx("div",{className:"flex flex-col md:flex-row items-center md:items-end md:gap-4 mb-3 md:mb-2",children:e.jsx("h1",{className:"text-2xl md:text-4xl font-black text-slate-900 dark:text-white tracking-tight",children:c.personal.full_name})}),e.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start items-center gap-2 md:gap-4 text-slate-600 dark:text-slate-400 font-medium text-xs md:text-sm",children:[e.jsxs("span",{className:"bg-white dark:bg-slate-900 px-2.5 py-1 rounded-lg border border-slate-200 dark:border-slate-800 shadow-sm flex items-center gap-1.5",children:[e.jsx(Mt,{size:12,className:"md:w-3.5 md:h-3.5 text-indigo-500"}),"ID: ",c.personal.admission_number]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(gt,{size:14,className:"md:w-4 md:h-4"}),c.personal.location]}),e.jsx("span",{className:"hidden md:inline w-1 h-1 rounded-full bg-slate-300"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ze,{size:14,className:"md:w-4 md:h-4"}),"Born ",c.personal.dob]})]})]})]})]}),e.jsx("div",{className:"flex justify-start overflow-x-auto pb-2 md:pb-0 hide-scrollbar -mx-4 px-4 md:mx-0 md:px-0",children:e.jsxs("div",{className:"flex p-1 bg-white dark:bg-slate-900 rounded-full border border-slate-200 dark:border-slate-800 shadow-sm whitespace-nowrap",children:[e.jsx(bm,{id:"overview",label:"Overview",icon:hs,active:j==="overview",onClick:S}),e.jsx(bm,{id:"academic",label:"Academics",icon:Lt,active:j==="academic",onClick:S}),e.jsx(bm,{id:"attendance",label:"Attendance",icon:dt,active:j==="attendance",onClick:S})]})}),e.jsx(vt,{mode:"wait",children:e.jsxs(he.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[j==="overview"&&y(),j==="academic"&&e.jsx(Uy,{studentId:n,student:c}),j==="attendance"&&e.jsx("div",{className:"space-y-4",children:z?e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-slate-200 border-t-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Loading attendance records..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-3 md:p-4 border border-emerald-100 dark:border-emerald-800/30",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"h-8 w-8 md:h-10 md:w-10 bg-emerald-500 rounded-lg flex items-center justify-center shrink-0",children:e.jsx(Ye,{size:16,className:"md:w-[18px] md:h-[18px] text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] md:text-xs text-emerald-700 dark:text-emerald-400 font-bold uppercase",children:"Rate"}),e.jsxs("p",{className:"text-xl md:text-2xl font-black text-emerald-900 dark:text-emerald-300",children:[A.rate,"%"]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-3 md:p-4 border border-blue-100 dark:border-blue-800/30",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"h-8 w-8 md:h-10 md:w-10 bg-blue-500 rounded-lg flex items-center justify-center shrink-0",children:e.jsx(Ze,{size:16,className:"md:w-[18px] md:h-[18px] text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] md:text-xs text-blue-700 dark:text-blue-400 font-bold uppercase",children:"Present"}),e.jsx("p",{className:"text-xl md:text-2xl font-black text-blue-900 dark:text-blue-300",children:A.present})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-rose-50 to-pink-50 dark:from-rose-900/20 dark:to-pink-900/20 rounded-xl p-3 md:p-4 border border-rose-100 dark:border-rose-800/30",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"h-8 w-8 md:h-10 md:w-10 bg-rose-500 rounded-lg flex items-center justify-center shrink-0",children:e.jsx(ua,{size:16,className:"md:w-[18px] md:h-[18px] text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] md:text-xs text-rose-700 dark:text-rose-400 font-bold uppercase",children:"Absent"}),e.jsx("p",{className:"text-xl md:text-2xl font-black text-rose-900 dark:text-rose-300",children:A.absent})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-3 md:p-4 border border-amber-100 dark:border-amber-800/30",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"h-8 w-8 md:h-10 md:w-10 bg-amber-500 rounded-lg flex items-center justify-center shrink-0",children:e.jsx(dt,{size:16,className:"md:w-[18px] md:h-[18px] text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] md:text-xs text-amber-700 dark:text-amber-400 font-bold uppercase",children:"Late"}),e.jsx("p",{className:"text-xl md:text-2xl font-black text-amber-900 dark:text-amber-300",children:A.late})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-sm",children:"Recent Attendance"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Last 7 days"})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800 max-h-80 overflow-y-auto",children:M.length>0?M.map((P,U)=>e.jsx("div",{className:"px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`h-8 w-8 rounded-lg flex items-center justify-center ${P.status==="PRESENT"?"bg-emerald-100 dark:bg-emerald-900/30":P.status==="LATE"?"bg-amber-100 dark:bg-amber-900/30":"bg-rose-100 dark:bg-rose-900/30"}`,children:P.status==="PRESENT"?e.jsx(Ye,{size:16,className:"text-emerald-600 dark:text-emerald-400"}):P.status==="LATE"?e.jsx(dt,{size:16,className:"text-amber-600 dark:text-amber-400"}):e.jsx(ua,{size:16,className:"text-rose-600 dark:text-rose-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-slate-900 dark:text-white",children:new Date(P.date).toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:P.date})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:P.time_in||"-"}),e.jsx("span",{className:`text-xs font-bold uppercase ${P.status==="PRESENT"?"text-emerald-600 dark:text-emerald-400":P.status==="LATE"?"text-amber-600 dark:text-amber-400":"text-rose-600 dark:text-rose-400"}`,children:P.status})]})]})},U)):e.jsxs("div",{className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:[e.jsx(dt,{size:32,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No attendance records yet"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-sm",children:D}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:e.jsx(Ls,{size:16,className:"text-slate-600 dark:text-slate-400"})}),e.jsx("button",{className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:e.jsx(Ls,{size:16,className:"text-slate-600 dark:text-slate-400 rotate-180"})})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["S","M","T","W","T","F","S"].map((P,U)=>e.jsx("div",{className:"text-center py-1",children:e.jsx("span",{className:"text-xs font-bold text-slate-400 dark:text-slate-500",children:P})},U)),T.map((P,U)=>e.jsx("div",{className:`aspect-square rounded-md flex items-center justify-center text-xs font-semibold cursor-pointer transition-all hover:scale-110 ${P.status==="present"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":P.status==="late"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":P.status==="absent"?"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400":"bg-slate-100 text-slate-400 dark:bg-slate-800 dark:text-slate-500"}`,children:P.day},U))]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 pt-4 border-t border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"h-3 w-3 rounded bg-emerald-500"}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Present"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"h-3 w-3 rounded bg-amber-500"}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Late"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"h-3 w-3 rounded bg-rose-500"}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Absent"})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-4 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-sm",children:"Weekly Trend"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Last 7 days pattern"})]})}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:M.slice(0,7).reverse().map((P,U)=>{const F=P.status.toLowerCase(),Z=F==="present"?90:F==="late"?75:0;return e.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[e.jsx("div",{className:"w-full h-20 bg-slate-100 dark:bg-slate-800 rounded-lg relative overflow-hidden",children:e.jsx("div",{className:`absolute bottom-0 w-full transition-all duration-500 ${F==="present"?"bg-gradient-to-t from-emerald-500 to-emerald-400":F==="late"?"bg-gradient-to-t from-amber-500 to-amber-400":"bg-gradient-to-t from-rose-500 to-rose-400"}`,style:{height:`${Z}%`}})}),e.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400",children:new Date(P.date).toLocaleDateString("en-US",{weekday:"short"})})]},U)})})]})]})})]},j)})]})]})},Hy=()=>{const n=Ya();Le();const{id:m}=Zt(),[c,u]=f.useState("record"),[g,v]=f.useState(!1),[j,S]=f.useState(null),[_,E]=f.useState([]),[z,h]=f.useState([]),[b,C]=f.useState({grade_id:"",term:"1",type:"mid-term",date:new Date().toISOString().split("T")[0]}),[A,M]=f.useState(null),[k,T]=f.useState({}),[D,y]=f.useState(null),[P,U]=f.useState(!1);f.useEffect(()=>{(async()=>{try{const $=await V.get(`/api/teachers/${m}/`);S($.data.teacher),$.data.teacher.professional.is_class_teacher&&$.data.teacher.professional.grade_id&&C(Q=>({...Q,grade_id:$.data.teacher.professional.grade_id}))}catch($){console.error("Failed to load teacher data",$)}})()},[m]),f.useEffect(()=>{(async()=>{try{const $=await V.get("/api/subjects/");E($.data.subjects||[])}catch($){console.error("Failed to load metadata",$)}})()},[]),f.useEffect(()=>{const ee=new URLSearchParams(n.search);ee.get("student");const $=ee.get("grade"),Q=ee.get("term"),re=ee.get("type");$&&C(B=>({...B,grade_id:$,term:Q||B.term,type:re||B.type}))},[n.search]),f.useEffect(()=>{if(!b.grade_id)return;h([]),(async()=>{v(!0);try{const $=await V.get(`/api/students/?grade=${b.grade_id}&per_page=1000`),Q=$.data.students||$.data.results||[];h(Q);const B=new URLSearchParams(n.search).get("student");if(B){const le=Q.find(G=>G.id===parseInt(B));le&&ae(le,Q)}}catch($){console.error("Failed to load students",$)}finally{v(!1)}})()},[b.grade_id]);const F=(ee,$)=>{if($===""){T(Q=>({...Q,[ee]:""}));return}T(Q=>({...Q,[ee]:$}))},Z=ee=>{const $=parseFloat(ee);return isNaN($)?{label:"-",class:""}:$>=80?{label:"EE",class:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}:$>=60?{label:"ME",class:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}:$>=40?{label:"AE",class:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400"}:{label:"BE",class:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}},ae=async ee=>{if(M(ee),T({}),y(null),U(!1),new URLSearchParams(n.search).get("edit")==="true"){console.log("Loading existing marks for editing...");try{const re=await V.get(`/api/students/${ee.id}/academics/`);if(re.data.success&&re.data.records){const B=`Term ${b.term}`,le=re.data.records[B];if(le&&le[b.type]){const G=le[b.type],J={};G.subjects.forEach(oe=>{const ue=_.find(ke=>ke.name===oe.subject_name||ke.code===oe.subject_code||ke.name.toLowerCase()===oe.subject_name.toLowerCase());ue&&(J[ue.id]=oe.marks)}),Object.keys(J).length>0?(T(J),U(!0),y({type:"info",text:`Editing existing assessment. Loaded ${Object.keys(J).length} subject marks.`})):y({type:"error",text:"Could not load existing marks. Subject mismatch detected."})}else y({type:"error",text:`No existing ${b.type} assessment found for Term ${b.term}.`})}}catch(re){console.error("Error fetching existing marks:",re),y({type:"error",text:"Failed to load existing marks. Please try again."})}}},H=async()=>{if(!A||!b.grade_id)return;v(!0),y(null);const ee=Object.entries(k).map(([Q,re])=>({subject_id:Q,marks:re})).filter(Q=>Q.marks!=="");if(ee.length===0){y({type:"error",text:"Please enter at least one mark."}),v(!1);return}const $={student_id:A.id,grade_id:b.grade_id,term:b.term,assessment_type:b.type,date:b.date,results:ee};try{const Q=await V.post("/api/assessments/batch-save/",$);Q.data.success&&(y({type:"success",text:`Saved ${Q.data.saved_count} scores for ${A.full_name}!`}),setTimeout(()=>M(null),1500))}catch(Q){console.error(Q),y({type:"error",text:"Failed to save results. Please try again."})}finally{v(!1)}},I=(()=>{const ee=Object.values(k).map(Q=>parseFloat(Q)).filter(Q=>!isNaN(Q));if(ee.length===0)return{total:0,average:0,count:0};const $=ee.reduce((Q,re)=>Q+re,0);return{total:$,average:($/ee.length).toFixed(1),count:ee.length}})();return e.jsxs("div",{className:"p-4 md:p-8 max-w-7xl mx-auto space-y-6 md:space-y-8 pb-20",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4 md:gap-6 pb-6 border-b border-slate-200 dark:border-slate-800",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Record Assessment"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 md:mt-2 text-sm md:text-base",children:"Record marks for your students"})]})}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 flex flex-col md:flex-row flex-wrap gap-4 items-stretch md:items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 md:mr-2 mb-2 md:mb-0",children:[e.jsx(za,{size:20}),e.jsx("span",{className:"font-medium text-sm",children:"Filters:"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:flex gap-3 w-full md:w-auto",children:[e.jsxs("div",{className:"relative w-full md:min-w-[180px]",children:[e.jsxs("select",{className:"w-full pl-4 pr-10 py-2.5 bg-slate-50 dark:bg-slate-800 border-none rounded-lg text-sm font-semibold focus:ring-2 focus:ring-primary-500 appearance-none text-slate-700 dark:text-slate-200",value:b.type,onChange:ee=>C($=>({...$,type:ee.target.value})),children:[e.jsx("option",{value:"opener",children:"Opener Exam"}),e.jsx("option",{value:"mid-term",children:"Mid Term"}),e.jsx("option",{value:"end-term",children:"End Term"}),e.jsx("option",{value:"weekly",children:"Weekly Test"})]}),e.jsx(xl,{size:16,className:"absolute right-3 top-3.5 text-slate-400 pointer-events-none"})]}),e.jsxs("div",{className:"relative w-full md:min-w-[140px]",children:[e.jsxs("select",{className:"w-full pl-4 pr-10 py-2.5 bg-slate-50 dark:bg-slate-800 border-none rounded-lg text-sm font-semibold focus:ring-2 focus:ring-primary-500 appearance-none text-slate-700 dark:text-slate-200",value:b.term,onChange:ee=>C($=>({...$,term:ee.target.value})),children:[e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]}),e.jsx(xl,{size:16,className:"absolute right-3 top-3.5 text-slate-400 pointer-events-none"})]})]}),e.jsx("div",{className:"w-full md:w-auto md:ml-auto",children:e.jsx(fe,{type:"date",value:b.date,onChange:ee=>C($=>({...$,date:ee.target.value})),className:"py-2.5 w-full md:w-auto"})})]}),e.jsx(vt,{mode:"wait",children:D&&e.jsxs(he.div,{initial:{opacity:0,y:-20,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,height:0},className:`px-4 py-3 rounded-lg flex items-center justify-between gap-4 ${D.type==="success"?"bg-green-50 text-green-700 border border-green-200 dark:bg-green-900/20 dark:border-green-800":D.type==="info"?"bg-blue-50 text-blue-700 border border-blue-200 dark:bg-blue-900/20 dark:border-blue-800":"bg-red-50 text-red-700 border border-red-200 dark:bg-red-900/20 dark:border-red-800"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[D.type==="success"?e.jsx(Ye,{size:18}):D.type==="info"?e.jsx(Br,{size:18}):e.jsx(ot,{size:18}),D.text]}),e.jsx("button",{onClick:()=>y(null),className:"opacity-50 hover:opacity-100 shrink-0",children:e.jsx(Ve,{size:16})})]})}),e.jsx(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:A?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-900 rounded-2xl shadow-xl border border-slate-100 dark:border-slate-800 overflow-hidden",children:[e.jsxs("div",{className:"p-4 md:p-6 border-b border-slate-100 dark:border-slate-800 flex flex-col md:flex-row justify-between items-start md:items-center bg-slate-50/50 dark:bg-slate-800/50 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsx("button",{onClick:()=>M(null),className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-colors text-slate-500 shrink-0",children:e.jsx(xl,{className:"rotate-90",size:24})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h2",{className:"text-lg md:text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2 truncate",children:[e.jsx("span",{className:"truncate",children:A.full_name}),P&&e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-[10px] md:text-xs font-bold rounded-full uppercase tracking-wide shrink-0",children:"Edit Mode"})]}),e.jsxs("p",{className:"text-xs md:text-sm text-slate-500 mt-0.5 truncate",children:["Recording ",e.jsx("span",{className:"font-semibold text-primary-600",children:b.type})," for Term ",b.term]})]})]}),e.jsxs("div",{className:"flex gap-3 w-full md:w-auto pl-11 md:pl-0",children:[e.jsx(W,{variant:"secondary",onClick:()=>M(null),className:"flex-1 md:flex-none justify-center",children:"Cancel"}),e.jsxs(W,{onClick:H,isLoading:g,className:"flex-1 md:flex-none justify-center",children:[e.jsx(ma,{size:18,className:"mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Save Grades"}),e.jsx("span",{className:"sm:hidden",children:"Save"})]})]})]}),e.jsx("div",{className:"p-4 md:p-6 lg:p-8",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4 md:gap-y-6",children:_.map(ee=>{const $=Z(k[ee.id]);return e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 truncate pr-2",children:ee.name}),k[ee.id]&&e.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${$.class} shrink-0`,children:$.label})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",max:"100",placeholder:"",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 focus:ring-2 focus:ring-primary-500 focus:bg-white dark:focus:bg-slate-800 outline-none transition-all font-mono text-lg font-semibold text-center",value:k[ee.id]||"",onChange:Q=>F(ee.id,Q.target.value)}),e.jsx("div",{className:"absolute inset-y-0 right-3 flex items-center text-slate-400 text-xs font-bold pointer-events-none",children:"/100"})]})]},ee.id)})})})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 sticky top-6",children:[e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Ur,{className:"text-amber-500",size:20}),"Current Stats"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"Subjects Graded"}),e.jsxs("p",{className:"text-2xl font-black text-slate-900 dark:text-white",children:[I.count," ",e.jsxs("span",{className:"text-sm font-medium text-slate-400",children:["/ ",_.length]})]}),e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 h-1.5 rounded-full mt-2 overflow-hidden",children:e.jsx("div",{className:"bg-primary-500 h-full rounded-full transition-all duration-300",style:{width:`${I.count/_.length*100}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl text-center",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"Total"}),e.jsx("p",{className:"text-xl font-bold text-slate-900 dark:text-white",children:I.total})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl text-center",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"Average"}),e.jsxs("p",{className:`text-xl font-bold ${parseFloat(I.average)>=60?"text-green-600":parseFloat(I.average)>=40?"text-amber-600":"text-slate-900 dark:text-white"}`,children:[I.average,"%"]})]})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-slate-100 dark:border-slate-800",children:e.jsx("p",{className:"text-xs text-slate-400 text-center",children:"System auto-calculates grade levels and totals upon saving."})})]})})]}):b.grade_id?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[z.map((ee,$)=>e.jsxs(he.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:$*.03},onClick:()=>ae(ee),className:"bg-white dark:bg-slate-900 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-800 hover:border-primary-500 dark:hover:border-primary-500 hover:shadow-md transition-all cursor-pointer group relative overflow-hidden flex sm:block items-center sm:items-start gap-4 sm:gap-0",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity hidden sm:block",children:e.jsx("div",{className:"bg-primary-50 text-primary-600 rounded-full p-1",children:e.jsx(Br,{size:14})})}),e.jsx("div",{className:"h-12 w-12 sm:mb-4 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-700 flex items-center justify-center text-lg font-bold text-slate-500 uppercase shrink-0",children:ee.photo?e.jsx("img",{src:ee.photo,alt:"Student",className:"w-full h-full object-cover rounded-xl"}):ee.full_name?.[0]||"S"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white group-hover:text-primary-600 transition-colors line-clamp-1 text-sm sm:text-base",children:ee.full_name}),e.jsxs("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mt-0.5 sm:mt-1",children:["Adm: ",e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:ee.admission_number})]}),e.jsx("div",{className:"mt-2 text-xs text-slate-400 hidden sm:flex items-center gap-1",children:"Click to record marks"})]}),e.jsx("div",{className:"ml-auto sm:hidden text-primary-500",children:e.jsx(Br,{size:16})})]},ee.id)),z.length===0&&e.jsx("div",{className:"col-span-full py-20 text-center text-slate-400 bg-slate-50 dark:bg-slate-900/50 rounded-2xl border-2 border-dashed border-slate-200 dark:border-slate-800",children:"No students found in this class."})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-slate-50 dark:bg-slate-900/50 rounded-3xl border-2 border-dashed border-slate-200 dark:border-slate-800",children:[e.jsx("div",{className:"h-16 w-16 bg-white dark:bg-slate-800 rounded-2xl flex items-center justify-center shadow-sm mb-4",children:e.jsx(Ie,{size:32,className:"text-primary-500"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Loading Your Class"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 max-w-sm text-center",children:"Please wait while we load your students..."})]})})]})},Iy=({teacher:n,onRefresh:m})=>{const{id:c}=Zt(),[u,g]=f.useState(n||null),[v,j]=f.useState("list"),[S,_]=f.useState(!1),[E,z]=f.useState(!n),[h,b]=f.useState(null),[C,A]=f.useState(null);f.useEffect(()=>{!n&&c?(async()=>{try{z(!0);const xe=await V.get(`/api/teachers/${c}/`);g(xe.data.teacher)}catch(xe){console.error("Error fetching teacher:",xe),b("Failed to load profile.")}finally{z(!1)}})():n&&g(n)},[n,c]);const M=()=>{m?m():c&&(async()=>{try{const xe=await V.get(`/api/teachers/${c}/`);g(xe.data.teacher)}catch(xe){console.error("Error fetching teacher:",xe)}})()},k=n?"":"p-4 md:p-8 max-w-7xl mx-auto space-y-6 md:space-y-8 pb-20",[T,D]=f.useState({leave_type:"CASUAL",start_date:"",end_date:"",reason:""}),[y,P]=f.useState({amount:"",reason:""}),U=async H=>{H.preventDefault(),_(!0),b(null);try{await V.post(`/api/teachers/${u.personal.id}/request-leave/`,T),A("Leave request submitted successfully!"),setTimeout(()=>{A(null),j("list"),M()},2e3)}catch(xe){b(xe.response?.data?.error||"Failed to submit leave request")}finally{_(!1)}},F=async H=>{H.preventDefault(),_(!0),b(null);try{await V.post(`/api/teachers/${u.personal.id}/request-advance/`,y),A("Salary advance request submitted successfully!"),setTimeout(()=>{A(null),j("list"),M()},2e3)}catch(xe){b(xe.response?.data?.error||"Failed to submit advance request")}finally{_(!1)}},Z=({status:H})=>{const xe={PENDING:"bg-yellow-100 text-yellow-800 border-yellow-200",APPROVED:"bg-green-100 text-green-800 border-green-200",REJECTED:"bg-red-100 text-red-800 border-red-200"},ee={PENDING:dt,APPROVED:Ye,REJECTED:ua}[H]||dt;return e.jsxs("span",{className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold border ${xe[H]||xe.PENDING}`,children:[e.jsx(ee,{size:12}),H]})},ae=[{value:"SICK",label:"Sick Leave"},{value:"CASUAL",label:"Casual Leave"},{value:"ANNUAL",label:"Annual Leave"},{value:"MATERNITY",label:"Maternity Leave"},{value:"PATERNITY",label:"Paternity Leave"},{value:"STUDY",label:"Study Leave"},{value:"COMPASSIONATE",label:"Compassionate Leave"}];return E?e.jsx("div",{className:`flex justify-center items-center min-h-[400px] ${k}`,children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):!u&&!E?e.jsx("div",{className:`p-10 text-center ${k}`,children:"Teacher profile not found."}):v==="leave"?e.jsx("div",{className:k,children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(Ze,{className:"text-indigo-500"})," Request Leave"]}),e.jsx("button",{onClick:()=>j("list"),className:"text-sm text-slate-500 hover:text-indigo-600",children:"Cancel"})]}),h&&e.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4 flex items-center gap-2 text-sm",children:[e.jsx(ot,{size:16})," ",h]}),C&&e.jsxs("div",{className:"bg-green-50 text-green-600 p-3 rounded-lg mb-4 flex items-center gap-2 text-sm",children:[e.jsx(Ye,{size:16})," ",C]}),e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Leave Type"}),e.jsx("select",{className:"w-full rounded-xl border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700/50 focus:ring-2 focus:ring-indigo-500 transition-all p-2.5",value:T.leave_type,onChange:H=>D({...T,leave_type:H.target.value}),required:!0,children:ae.map(H=>e.jsx("option",{value:H.value,children:H.label},H.value))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(fe,{label:"Start Date",type:"date",value:T.start_date,onChange:H=>D({...T,start_date:H.target.value}),required:!0}),e.jsx(fe,{label:"End Date",type:"date",value:T.end_date,onChange:H=>D({...T,end_date:H.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Reason"}),e.jsx("textarea",{className:"w-full rounded-xl border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700/50 focus:ring-2 focus:ring-indigo-500 transition-all p-3",rows:"4",value:T.reason,onChange:H=>D({...T,reason:H.target.value}),required:!0,placeholder:"Please provide a detailed reason for your leave request..."})]}),e.jsx("div",{className:"pt-2",children:e.jsx(W,{type:"submit",isLoading:S,className:"w-full",children:"Submit Request"})})]})]})}):v==="advance"?e.jsx("div",{className:k,children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(it,{className:"text-green-500"})," Request Salary Advance"]}),e.jsx("button",{onClick:()=>j("list"),className:"text-sm text-slate-500 hover:text-indigo-600",children:"Cancel"})]}),h&&e.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4 flex items-center gap-2 text-sm",children:[e.jsx(ot,{size:16})," ",h]}),C&&e.jsxs("div",{className:"bg-green-50 text-green-600 p-3 rounded-lg mb-4 flex items-center gap-2 text-sm",children:[e.jsx(Ye,{size:16})," ",C]}),e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl mb-4",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:[e.jsx("strong",{children:"Note:"})," Salary advances are subject to approval and will be deducted from your next payslip. Your current basic salary is ",e.jsxs("strong",{children:["KES ",u.financial?.basic_salary?.toLocaleString()]}),"."]})}),e.jsx(fe,{label:"Amount (KES)",type:"number",min:"1",max:u.financial?.basic_salary||5e4,value:y.amount,onChange:H=>P({...y,amount:H.target.value}),required:!0,placeholder:"e.g. 5000"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Reason"}),e.jsx("textarea",{className:"w-full rounded-xl border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700/50 focus:ring-2 focus:ring-indigo-500 transition-all p-3",rows:"4",value:y.reason,onChange:H=>P({...y,reason:H.target.value}),required:!0,placeholder:"Why do you need this advance?"})]}),e.jsx("div",{className:"pt-2",children:e.jsx(W,{type:"submit",isLoading:S,className:"w-full bg-green-600 hover:bg-green-700 text-white",children:"Submit Request"})})]})]})}):e.jsx("div",{className:k,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-slate-50/50 dark:bg-slate-800/50",children:[e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(Ze,{size:18,className:"text-indigo-500"})," Leave History"]}),e.jsxs(W,{size:"sm",variant:"outline",onClick:()=>j("leave"),children:[e.jsx(nt,{size:16,className:"mr-1"})," New Request"]})]}),e.jsx("div",{className:"p-0",children:u.leaves&&u.leaves.length>0?e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:u.leaves.map((H,xe)=>e.jsxs("div",{className:"p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("h4",{className:"font-medium text-slate-900 dark:text-white",children:H.type}),e.jsx(Z,{status:H.status})]}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 flex flex-wrap gap-4 mb-2",children:e.jsxs("span",{children:[H.start_date," - ",H.end_date]})}),H.reason&&e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 bg-slate-50 dark:bg-slate-900/50 p-2 rounded-lg italic",children:['"',H.reason,'"']})]},xe))}):e.jsx("div",{className:"p-8 text-center text-slate-500",children:e.jsx("p",{children:"No leave history found."})})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-slate-50/50 dark:bg-slate-800/50",children:[e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(it,{size:18,className:"text-green-500"})," Advance History"]}),e.jsxs(W,{size:"sm",variant:"outline",onClick:()=>j("advance"),children:[e.jsx(nt,{size:16,className:"mr-1"})," New Advance"]})]}),e.jsx("div",{className:"p-0",children:u.advances&&u.advances.length>0?e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:u.advances.map((H,xe)=>e.jsxs("div",{className:"p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white",children:["KES ",H.amount.toLocaleString()]}),e.jsx(Z,{status:H.status})]}),e.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:["Requested on ",H.date]}),H.reason&&e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 bg-slate-50 dark:bg-slate-900/50 p-2 rounded-lg italic",children:['"',H.reason,'"']})]},xe))}):e.jsx("div",{className:"p-8 text-center text-slate-500",children:e.jsx("p",{children:"No salary advance history found."})})})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-indigo-600 rounded-2xl p-6 text-white shadow-lg",children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"HR Guidelines"}),e.jsxs("ul",{className:"space-y-3 text-indigo-100 text-sm",children:[e.jsxs("li",{className:"flex gap-2",children:[e.jsx(Ye,{size:16,className:"shrink-0 mt-0.5"}),e.jsx("span",{children:"Leave requests should be submitted at least 3 days in advance unless it's an emergency."})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx(Ye,{size:16,className:"shrink-0 mt-0.5"}),e.jsx("span",{children:"Salary advances cannot exceed 50% of your basic salary."})]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx(Ye,{size:16,className:"shrink-0 mt-0.5"}),e.jsx("span",{children:"Approvals are processed by your supervisor and the HR department."})]})]})]})})]})})},Gy=()=>{const[n,m]=f.useState([]),[c,u]=f.useState(!1),[g,v]=f.useState(!1),[j,S]=f.useState(""),[_,E]=f.useState("all"),[z,h]=f.useState({total:0,thisMonth:0,lastMonth:0,byCategory:{}}),[b,C]=f.useState({title:"",amount:"",category:"utilities",description:"",date:new Date().toISOString().split("T")[0],vendor:"",payment_method:"cash",receipt_number:""}),A=[{value:"utilities",label:"Utilities",color:"bg-blue-500",icon:""},{value:"salaries",label:"Salaries",color:"bg-green-500",icon:""},{value:"supplies",label:"Supplies",color:"bg-purple-500",icon:""},{value:"maintenance",label:"Maintenance",color:"bg-orange-500",icon:""},{value:"transport",label:"Transport",color:"bg-yellow-500",icon:""},{value:"food",label:"Food",color:"bg-red-500",icon:""},{value:"other",label:"Other",color:"bg-gray-500",icon:""}],M=[{value:"cash",label:"Cash",icon:""},{value:"bank_transfer",label:"Bank Transfer",icon:""},{value:"cheque",label:"Cheque",icon:""},{value:"mobile_money",label:"Mobile Money",icon:""}];f.useEffect(()=>{k()},[]);const k=async()=>{u(!0);try{const Z=await V.get("/api/finance/expenses/");Z.data.success&&(m(Z.data.expenses),h({total:Z.data.stats.total_expenses,thisMonth:Z.data.stats.month_expenses,lastMonth:0,byCategory:{}}),T(Z.data.expenses))}catch(Z){console.error("Error fetching expenses:",Z)}finally{u(!1)}},T=Z=>{const ae={};Z.forEach(H=>{ae[H.category]=(ae[H.category]||0)+H.amount}),h(H=>({...H,byCategory:ae}))},D=async Z=>{Z.preventDefault();try{(await V.post("/api/finance/expenses/",{...b,amount:parseFloat(b.amount)})).data.success&&(k(),v(!1),P())}catch(ae){console.error("Error adding expense:",ae),alert("Failed to add expense")}},y=async Z=>{if(window.confirm("Are you sure you want to delete this expense?"))try{(await V.delete(`/api/finance/expenses/${Z}/`)).data.success&&k()}catch(ae){console.error("Error deleting expense:",ae),alert("Failed to delete expense")}},P=()=>{C({title:"",amount:"",category:"utilities",description:"",date:new Date().toISOString().split("T")[0],vendor:"",payment_method:"cash",receipt_number:""})},U=Z=>A.find(ae=>ae.value===Z)||A[A.length-1],F=n.filter(Z=>{const ae=Z.title.toLowerCase().includes(j.toLowerCase())||Z.vendor.toLowerCase().includes(j.toLowerCase()),H=_==="all"||Z.category===_;return ae&&H});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Expense Management"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Track and manage all school expenses"})]}),e.jsxs(W,{onClick:()=>v(!0),className:"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800",children:[e.jsx(nt,{size:20,className:"mr-2"}),"Add Expense"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(it,{size:24})}),e.jsx(Dt,{size:20,className:"text-white/80"})]}),e.jsx("p",{className:"text-emerald-100 text-sm font-medium mb-1",children:"Total Expenses"}),e.jsxs("p",{className:"text-3xl font-bold",children:["KES ",z.total.toLocaleString()]})]}),e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-slate-900 rounded-2xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:e.jsx(Ze,{size:24,className:"text-blue-600 dark:text-blue-400"})})}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium mb-1",children:"This Month"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["KES ",z.thisMonth.toLocaleString()]})]}),e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-slate-900 rounded-2xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-xl",children:e.jsx(Wt,{size:24,className:"text-purple-600 dark:text-purple-400"})})}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium mb-1",children:"Total Records"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:n.length})]}),e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-slate-900 rounded-2xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-xl",children:e.jsx(Gg,{size:24,className:"text-orange-600 dark:text-orange-400"})})}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium mb-1",children:"Categories"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:Object.keys(z.byCategory).length})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search expenses by title or vendor...",value:j,onChange:Z=>S(Z.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-600 focus:border-transparent transition-all text-slate-900 dark:text-white"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:_,onChange:Z=>E(Z.target.value),className:"px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-600 focus:border-transparent transition-all text-slate-900 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Categories"}),A.map(Z=>e.jsxs("option",{value:Z.value,children:[Z.icon," ",Z.label]},Z.value))]}),e.jsxs(W,{variant:"outline",className:"border-slate-200 dark:border-slate-700",children:[e.jsx(Ms,{size:20,className:"mr-2"}),"Export"]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Expense"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Vendor"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Payment"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-800",children:F.map((Z,ae)=>{const H=U(Z.category),xe=M.find(I=>I.value===Z.payment_method);return e.jsxs(he.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:ae*.05},className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-400",children:new Date(Z.date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:Z.title}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:Z.receipt_number})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium text-white ${H.color}`,children:[e.jsx("span",{className:"mr-1",children:H.icon}),H.label]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:Z.vendor}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"inline-flex items-center text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("span",{className:"mr-1",children:xe?.icon}),xe?.label]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-white",children:["KES ",Z.amount.toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:e.jsx(Br,{size:16})}),e.jsx("button",{onClick:()=>y(Z.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(Cs,{size:16})})]})})]},Z.id)})})]})}),F.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Wt,{size:48,className:"mx-auto text-slate-300 dark:text-slate-700 mb-4"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No expenses found"})]})]}),e.jsx(vt,{children:g&&e.jsxs(e.Fragment,{children:[e.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:()=>v(!1)}),e.jsx(he.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Add New Expense"}),e.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:e.jsx(Ve,{size:20,className:"text-slate-500"})})]}),e.jsxs("form",{onSubmit:D,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Expense Title *"}),e.jsx("input",{type:"text",value:b.title,onChange:Z=>C({...b,title:Z.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-600 focus:border-transparent transition-all text-slate-900 dark:text-white",placeholder:"e.g., Electricity Bill",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Amount (KES) *"}),e.jsx("input",{type:"number",step:"0.01",value:b.amount,onChange:Z=>C({...b,amount:Z.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-600 focus:border-transparent transition-all text-slate-900 dark:text-white",placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Date *"}),e.jsx("input",{type:"date",value:b.date,onChange:Z=>C({...b,date:Z.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-600 focus:border-transparent transition-all text-slate-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Category *"}),e.jsx("select",{value:b.category,onChange:Z=>C({...b,category:Z.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-600 focus:border-transparent transition-all text-slate-900 dark:text-white",required:!0,children:A.map(Z=>e.jsxs("option",{value:Z.value,children:[Z.icon," ",Z.label]},Z.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Payment Method *"}),e.jsx("select",{value:b.payment_method,onChange:Z=>C({...b,payment_method:Z.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-600 focus:border-transparent transition-all text-slate-900 dark:text-white",required:!0,children:M.map(Z=>e.jsxs("option",{value:Z.value,children:[Z.icon," ",Z.label]},Z.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Vendor/Supplier"}),e.jsx("input",{type:"text",value:b.vendor,onChange:Z=>C({...b,vendor:Z.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-600 focus:border-transparent transition-all text-slate-900 dark:text-white",placeholder:"e.g., Kenya Power"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Receipt Number"}),e.jsx("input",{type:"text",value:b.receipt_number,onChange:Z=>C({...b,receipt_number:Z.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-600 focus:border-transparent transition-all text-slate-900 dark:text-white",placeholder:"e.g., INV-2026-001"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{value:b.description,onChange:Z=>C({...b,description:Z.target.value}),rows:3,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-600 focus:border-transparent transition-all text-slate-900 dark:text-white resize-none",placeholder:"Additional details about this expense..."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200 dark:border-slate-800",children:[e.jsx(W,{type:"button",variant:"outline",onClick:()=>v(!1),className:"flex-1",children:"Cancel"}),e.jsxs(W,{type:"submit",className:"flex-1 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800",children:[e.jsx(Ye,{size:20,className:"mr-2"}),"Add Expense"]})]})]})]})})]})})]})},cd=({darkMode:n=!1,alwaysSolid:m=!1})=>{const c=Le(),u=Ya(),[g,v]=f.useState(!1),[j,S]=f.useState(!1);f.useEffect(()=>{const z=()=>{v(window.scrollY>20)};return window.addEventListener("scroll",z),()=>window.removeEventListener("scroll",z)},[]);const _=z=>{if(u.pathname!=="/")c("/",{state:{scrollTo:z}});else{const h=document.getElementById(z);h&&h.scrollIntoView({behavior:"smooth"})}S(!1)},E=g||j||m;return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${E?n?"bg-slate-900/90 backdrop-blur-md border-b border-slate-800":"bg-white/90 backdrop-blur-md border-b border-slate-200 shadow-sm":"bg-transparent"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>c("/"),children:[e.jsx("div",{className:"bg-primary-600 p-2 rounded-xl text-white shadow-lg shadow-primary-600/20",children:e.jsx(Lt,{size:24})}),e.jsx("span",{className:`text-xl font-bold tracking-tight ${!E&&n||E&&n?"text-white":"text-slate-900"}`,children:"EduManage"})]}),e.jsxs("div",{className:`hidden md:flex items-center gap-8 text-sm font-medium ${!E&&n||E&&n?"text-slate-300":"text-slate-600"}`,children:[e.jsx("button",{onClick:()=>_("features"),className:"hover:text-primary-600 transition-colors",children:"Features"}),e.jsx("button",{onClick:()=>c("/pricing"),className:`hover:text-primary-600 transition-colors ${u.pathname==="/pricing"?"text-primary-600 font-bold":""}`,children:"Pricing"}),e.jsx("button",{onClick:()=>_("about"),className:"hover:text-primary-600 transition-colors",children:"About"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[e.jsx(W,{variant:"ghost",onClick:()=>c("/login"),className:`${!E&&n?"text-white hover:text-white hover:bg-white/10":E&&n?"text-white hover:bg-white/10":"text-slate-600 hover:text-primary-600 hover:bg-slate-50"}`,children:"Login"}),e.jsx(W,{onClick:()=>c("/pricing"),className:"shadow-lg shadow-primary-600/30",children:"Get Started"})]}),e.jsx("button",{className:`md:hidden p-2 rounded-lg transition-colors ${!E&&n?"text-white hover:bg-white/10":"text-slate-600 hover:bg-slate-100"}`,onClick:()=>S(!j),children:j?e.jsx(Ve,{size:24}):e.jsx(Hr,{size:24})})]})}),j&&e.jsx("div",{className:`fixed inset-0 z-40 pt-24 px-6 md:hidden animate-in fade-in slide-in-from-top-10 duration-200 ${n?"bg-slate-900 border-t border-slate-800":"bg-white"}`,children:e.jsxs("div",{className:`flex flex-col gap-6 text-lg font-medium ${n?"text-slate-300":"text-slate-600"}`,children:[e.jsxs("button",{onClick:()=>_("features"),className:`flex items-center justify-between p-4 rounded-xl ${n?"hover:bg-slate-800":"hover:bg-slate-50"}`,children:["Features ",e.jsx(ds,{size:16})]}),e.jsxs("button",{onClick:()=>{c("/pricing"),S(!1)},className:`flex items-center justify-between p-4 rounded-xl ${u.pathname==="/pricing"?n?"bg-primary-900/20 text-primary-400":"bg-primary-50 text-primary-600":n?"hover:bg-slate-800":"hover:bg-slate-50"}`,children:["Pricing ",e.jsx(ds,{size:16})]}),e.jsx("div",{className:`h-px my-2 ${n?"bg-slate-800":"bg-slate-100"}`}),e.jsx(W,{variant:"secondary",onClick:()=>c("/login"),className:`w-full justify-center py-4 text-base ${n?"bg-slate-800 text-white hover:bg-slate-700 border-none":""}`,children:"Login"}),e.jsx(W,{onClick:()=>c("/pricing"),className:"w-full justify-center py-4 text-base shadow-xl shadow-primary-600/20",children:"Get Started Free"})]})})]})},Fm=()=>e.jsx("footer",{className:"bg-slate-900 text-slate-300 pt-20 pb-10 border-t border-slate-800",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-12 lg:gap-8 mb-16",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-violet-600 p-2 rounded-xl shadow-lg shadow-blue-900/20",children:e.jsx(Lt,{size:24,className:"text-white"})}),e.jsx("span",{className:"text-2xl font-black tracking-tight",children:"EduManage"})]}),e.jsx("p",{className:"text-slate-400 text-base leading-relaxed max-w-sm",children:"The complete operating system for modern schools using the new curriculum. Simple, powerful, and affordable."}),e.jsx("div",{className:"flex gap-4",children:[qg,Zg,$g,Yg].map((n,m)=>e.jsx("a",{href:"#",className:"p-2 bg-slate-800 rounded-full hover:bg-blue-600 hover:text-white transition-all duration-300 group",children:e.jsx(n,{size:18,className:"group-hover:scale-110 transition-transform"})},m))})]}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("h4",{className:"text-white font-bold mb-6 text-lg",children:"Product"}),e.jsxs("ul",{className:"space-y-4 text-sm",children:[e.jsx("li",{children:e.jsx(Tr,{to:"/#features",className:"hover:text-blue-400 transition-colors block",children:"Features"})}),e.jsx("li",{children:e.jsx(Tr,{to:"/pricing",className:"hover:text-blue-400 transition-colors block",children:"Pricing"})}),e.jsx("li",{children:e.jsx(Tr,{to:"/#school-os",className:"hover:text-blue-400 transition-colors block",children:"School OS"})}),e.jsx("li",{children:e.jsx(Tr,{to:"/#roadmap",className:"hover:text-blue-400 transition-colors block",children:"Roadmap"})})]})]}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("h4",{className:"text-white font-bold mb-6 text-lg",children:"Resources"}),e.jsxs("ul",{className:"space-y-4 text-sm",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-blue-400 transition-colors block",children:"Documentation"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-blue-400 transition-colors block",children:"Help Center"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-blue-400 transition-colors block",children:"Blog"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-blue-400 transition-colors block",children:"Community"})})]})]}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("h4",{className:"text-white font-bold mb-6 text-lg",children:"Legal"}),e.jsxs("ul",{className:"space-y-4 text-sm",children:[e.jsx("li",{children:e.jsx(Tr,{to:"/legal/privacy",className:"hover:text-blue-400 transition-colors block",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx(Tr,{to:"/legal/terms",className:"hover:text-blue-400 transition-colors block",children:"Terms of Service"})}),e.jsx("li",{children:e.jsx(Tr,{to:"/legal/cookies",className:"hover:text-blue-400 transition-colors block",children:"Cookie Policy"})}),e.jsx("li",{children:e.jsx(Tr,{to:"/legal/security",className:"hover:text-blue-400 transition-colors block",children:"Security"})})]})]}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("h4",{className:"text-white font-bold mb-6 text-lg",children:"Stay Updated"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Get the latest updates and resources delivered to your inbox."}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",placeholder:"Enter email",className:"w-full bg-slate-800 border border-slate-700 text-white text-sm rounded-xl py-3 pl-4 pr-10 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all placeholder:text-slate-600"}),e.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 bg-blue-600 rounded-lg text-white hover:bg-blue-500 transition-colors",children:e.jsx(Kc,{size:14})})]})]})]})]}),e.jsxs("div",{className:"pt-8 border-t border-slate-800/50 flex flex-col md:flex-row items-center justify-between gap-4 text-sm text-slate-500",children:[e.jsx("p",{children:" 2026 EduManage Inc. All rights reserved."}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-800/50 px-3 py-1.5 rounded-full border border-slate-800",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"text-xs font-medium text-slate-400",children:"All Systems Operational"})]})]})]})}),of="/static/assets/hero-BVfb3zE1.png",qy="/static/assets/dashboard-ByFEliFM.png",Zy=()=>{const n=Le(),m=[{title:"Complete Student Management",description:"From admission to alumni. Track performance, attendance, and discipline in one secure profile.",icon:Ie,color:"blue"},{title:"Automated Finance & Billing",description:"Effortless fee collection with M-Pesa integration, automated invoices, and real-time financial tracking.",icon:Fp,color:"green"},{title:"Staff HR & Payroll",description:"Streamline teacher management, leave requests, and payroll processing in a few clicks.",icon:Mt,color:"purple"},{title:"Advanced Academics",description:"CBC-compliant grading, automated report cards, and deep performance analytics.",icon:Pi,color:"orange"},{title:"Transport Logistics",description:"Real-time fleet management, route optimization, and parent notifications.",icon:sa,color:"indigo"},{title:"Instant Communication",description:"Keep parents in the loop with bulk SMS, email alerts, and a dedicated parent portal.",icon:Jc,color:"rose"}];return e.jsxs("div",{className:"min-h-screen bg-white overflow-x-hidden font-sans",children:[e.jsx(cd,{}),e.jsxs("section",{className:"relative pt-32 pb-20 lg:pt-48 lg:pb-32 px-6 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-bl from-blue-50/50 to-transparent -z-10 rounded-bl-[100px]"}),e.jsx("div",{className:"absolute top-40 left-10 w-64 h-64 bg-purple-100 rounded-full blur-3xl opacity-30 -z-10 animate-pulse"}),e.jsxs("div",{className:"max-w-7xl mx-auto grid lg:grid-cols-2 gap-16 items-center",children:[e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"space-y-8",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-full text-sm font-bold border border-blue-100",children:[e.jsxs("span",{className:"relative flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-blue-500"})]}),"The #1 School Management System"]}),e.jsxs("h1",{className:"text-5xl lg:text-7xl font-extrabold text-slate-900 leading-[1.1] tracking-tight",children:["Manage your school ",e.jsx("br",{className:"hidden lg:block"}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-violet-600",children:"without the chaos."})]}),e.jsx("p",{className:"text-xl text-slate-600 leading-relaxed max-w-lg",children:"The all-in-one operating system for modern schools. Simplify finance, academics, and operations so you can focus on education."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[e.jsxs(W,{size:"lg",onClick:()=>n("/pricing"),className:"h-14 px-8 text-lg shadow-xl shadow-blue-600/20 hover:shadow-2xl hover:bg-blue-700 transition-all rounded-xl",children:["Start Your Free Trial",e.jsx(Za,{size:20,className:"ml-2"})]}),e.jsx(W,{variant:"outline",size:"lg",onClick:()=>document.getElementById("features").scrollIntoView({behavior:"smooth"}),className:"h-14 px-8 text-lg border-2 rounded-xl",children:"See How It Works"})]}),e.jsxs("div",{className:"flex items-center gap-6 pt-4 text-sm font-medium text-slate-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hl,{size:18,className:"text-green-500"}),e.jsx("span",{children:"No credit card required"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hl,{size:18,className:"text-green-500"}),e.jsx("span",{children:"7-day free trial"})]})]})]}),e.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.8,delay:.2},className:"relative hidden lg:block",children:[e.jsxs("div",{className:"relative z-10 rounded-2xl overflow-hidden shadow-2xl border border-slate-200 bg-white",children:[e.jsx("img",{src:of,alt:"EduManage Dashboard",className:"w-full h-auto"}),e.jsxs(he.div,{animate:{y:[0,-10,0]},transition:{repeat:1/0,duration:4,ease:"easeInOut"},className:"absolute -left-12 bottom-20 bg-white p-4 rounded-xl shadow-xl border border-slate-100 flex items-center gap-3 z-20 w-64",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-lg text-green-600",children:e.jsx(Dt,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-semibold uppercase",children:"Fee Collection"}),e.jsx("p",{className:"text-lg font-bold text-slate-900",children:"+ KES 1.2M"})]})]}),e.jsxs(he.div,{animate:{y:[0,10,0]},transition:{repeat:1/0,duration:5,ease:"easeInOut",delay:1},className:"absolute -right-8 top-12 bg-white p-4 rounded-xl shadow-xl border border-slate-100 flex items-center gap-3 z-20",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg text-blue-600",children:e.jsx(Ie,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 font-semibold uppercase",children:"Active Students"}),e.jsx("p",{className:"text-lg font-bold text-slate-900",children:"1,450"})]})]})]}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[120%] h-[120%] bg-gradient-to-tr from-blue-200/50 to-purple-200/50 rounded-full blur-3xl -z-10"})]})]})]}),e.jsx("section",{className:"py-10 border-y border-slate-100 bg-slate-50/50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 text-center",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wider mb-8",children:"Trusted by leading educational institutions"}),e.jsx("div",{className:"flex flex-wrap justify-center items-center gap-12 opacity-60 grayscale hover:grayscale-0 transition-all duration-500",children:["Alpha Academy","Pioneer High","Tech Institute","Global School","Future Leaders"].map((c,u)=>e.jsx("span",{className:"text-xl font-bold font-serif text-slate-800",children:c},u))})]})}),e.jsx("section",{id:"features",className:"py-24 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[e.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-20 space-y-4",children:[e.jsx("div",{className:"inline-block px-3 py-1 bg-violet-100 text-violet-700 rounded-full text-sm font-bold mb-2",children:"Why EduManage?"}),e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-slate-900 tracking-tight",children:"Everything runs smoothly when it's all in one place."}),e.jsx("p",{className:"text-xl text-slate-600",children:"Stop juggling spreadsheets and disconnected tools. EduManage unifies your entire school operation."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:m.map((c,u)=>e.jsxs("div",{className:"group p-8 rounded-[2rem] bg-white border border-slate-100 hover:border-blue-100 hover:shadow-[0_8px_30px_rgb(0,0,0,0.04)] transition-all duration-300",children:[e.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 transition-all group-hover:scale-110 group-hover:-rotate-3 bg-${c.color}-50 text-${c.color}-600`,children:e.jsx(c.icon,{size:28,strokeWidth:2.5})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:c.title}),e.jsx("p",{className:"text-slate-600 leading-relaxed",children:c.description})]},u))})]})}),e.jsx("section",{className:"py-24 bg-slate-50 overflow-hidden",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 space-y-32",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[e.jsxs("div",{className:"order-2 lg:order-1 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-blue-600 blur-[100px] opacity-10 rounded-full"}),e.jsx("img",{src:qy,alt:"Finance Dashboard",className:"relative rounded-2xl shadow-2xl border border-slate-200 rotate-1 hover:rotate-0 transition-transform duration-500"})]}),e.jsxs("div",{className:"space-y-6 order-1 lg:order-2",children:[e.jsx("div",{className:"bg-blue-100 w-12 h-12 rounded-xl flex items-center justify-center text-blue-600",children:e.jsx(Fp,{size:24})}),e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:"Take control of your school's finances."}),e.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"Track every cent that comes in and goes out. From fee collection to expense tracking, payroll, and asset managementget a clear picture of your financial health."}),e.jsx("ul",{className:"space-y-3",children:["Automated Fee Reminders","M-Pesa Integration","Expense Approvals","Real-time Reports"].map((c,u)=>e.jsxs("li",{className:"flex items-center gap-3 text-slate-700 font-medium",children:[e.jsx(hl,{size:18,className:"text-blue-500"}),c]},u))})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-purple-100 w-12 h-12 rounded-xl flex items-center justify-center text-purple-600",children:e.jsx(Ie,{size:24})}),e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:"Empower your teachers and students."}),e.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"Give teachers the tools they need to focus on teaching, not paperwork. Track attendance, grading, and behavior in real-time."}),e.jsx(W,{variant:"outline",className:"mt-4",children:"Explore Academic Tools"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-purple-600 blur-[100px] opacity-10 rounded-full"}),e.jsx("img",{src:of,alt:"Academic Tools",className:"relative rounded-2xl shadow-2xl border border-slate-200 -rotate-1 hover:rotate-0 transition-transform duration-500"})]})]})]})}),e.jsx("section",{className:"py-24 px-6",children:e.jsxs("div",{className:"max-w-5xl mx-auto bg-slate-900 rounded-[3rem] p-12 md:p-20 text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-blue-500 to-transparent opacity-50"}),e.jsx("div",{className:"absolute -top-24 -left-24 w-64 h-64 bg-blue-600 rounded-full blur-3xl opacity-20"}),e.jsx("div",{className:"absolute -bottom-24 -right-24 w-64 h-64 bg-violet-600 rounded-full blur-3xl opacity-20"}),e.jsxs("div",{className:"relative z-10 space-y-8",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white tracking-tight",children:"Ready to transform your school?"}),e.jsx("p",{className:"text-xl text-slate-300 max-w-2xl mx-auto",children:"Join over 500+ schools that trust EduManage to run their daily operations. Start your free 7-day trial today."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center pt-4",children:[e.jsx(W,{size:"lg",onClick:()=>n("/pricing"),className:"bg-white text-slate-900 hover:bg-blue-50 h-14 px-8 text-lg border-2 border-transparent",children:"Get Started Now"}),e.jsx(W,{size:"lg",variant:"outline",onClick:()=>n("/pricing"),className:"border-slate-700 text-white hover:bg-slate-800 h-14 px-8 text-lg",children:"View Pricing"})]})]})]})}),e.jsx(Fm,{})]})},rb=f.createContext(),$y=({children:n})=>{const[m,c]=f.useState({maintenance_mode:!1,registration_open:!0,basic_price:2999,standard_price:5999,enterprise_price:14999,currency:"KES",loading:!0});f.useEffect(()=>{u()},[]);const u=async()=>{try{const g=await V.get("/api/app-status/");c({...g.data,loading:!1})}catch(g){console.error("Error fetching app status:",g),c(v=>({...v,loading:!1}))}};return e.jsx(rb.Provider,{value:{...m,refreshStatus:u},children:n})},n0=()=>f.useContext(rb),Yy=({onSignUp:n})=>{const{basic_price:m,standard_price:c,enterprise_price:u,currency:g}=n0(),v=[{name:"Basic",price:m?.toLocaleString()||"1,499",color:"emerald",icon:Zap,features:["Student Management","Admission Registration","Accounting & Finance","Fee Management","Academic Management","1 Branch"],cta:"Get Started",popular:!1},{name:"Standard",price:c?.toLocaleString()||"2,499",color:"blue",icon:Star,features:["Everything in Basic","Teacher & Staff Portal","Student Portal","Finance Portal","Fee Structure per Class","Payments & Balances","Fee Statements","HR & Staff Management","Exams & Grading","Report Cards"],cta:"Choose Standard",popular:!0},{name:"Enterprise",price:u?.toLocaleString()||"3,499",color:"violet",icon:Crown,features:["Everything in Standard","Communication (SMS)","Transport Portal","Food Management Portal","Driver Portal","Multi-branch (Unlimited)","Advanced Financial Reports","Priority Support","Custom School Branding"],cta:"Choose Enterprise",popular:!1}];return e.jsx("div",{className:"max-w-7xl mx-auto px-6 pb-24",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 items-start",children:v.map((j,S)=>e.jsxs("div",{className:`relative rounded-[2rem] p-8 flex flex-col items-center text-center h-full bg-white transition-all duration-300
                            ${j.popular?"shadow-2xl shadow-blue-900/20 scale-105 z-10 border-2 border-blue-500":"shadow-xl shadow-slate-200/50 border border-slate-100 hover:scale-[1.02] hover:shadow-2xl"}
                        `,children:[j.popular&&e.jsxs("div",{className:"absolute -top-5 left-1/2 -translate-x-1/2 bg-gradient-to-r from-blue-600 to-violet-600 text-white px-6 py-2 rounded-full text-xs font-bold shadow-lg shadow-blue-500/30 flex items-center gap-2 uppercase tracking-wide",children:[e.jsx(Star,{size:14,fill:"currentColor"}),"Most Popular"]}),e.jsxs("div",{className:"mb-8 pt-4 w-full",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-${j.color}-50 text-${j.color}-600 mb-6 shadow-sm`,children:e.jsx(j.icon,{size:28})}),e.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight",children:j.name}),e.jsxs("div",{className:"mt-6 flex items-baseline justify-center gap-1",children:[e.jsx("span",{className:"text-sm font-bold text-slate-400",children:g||"KES"}),e.jsx("span",{className:"text-5xl font-black text-slate-900 tracking-tighter",children:j.price}),e.jsx("span",{className:"text-slate-400 font-medium",children:"/mo"})]}),e.jsx("p",{className:"text-slate-500 text-sm mt-3 font-medium",children:j.popular?"Perfect for growing colleges.":"Great for starting out."}),e.jsx("div",{className:"mt-4 inline-block px-3 py-1 rounded-full bg-slate-100 text-slate-600 text-xs font-bold uppercase tracking-wider",children:"7-Day Free Trial"})]}),e.jsx("div",{className:"space-y-4 flex-1 mb-8 w-full",children:j.features.map((_,E)=>e.jsxs("div",{className:"flex items-center justify-center gap-3 group",children:[e.jsx("div",{className:`mt-1 bg-${j.color}-100 rounded-full p-1 group-hover:bg-${j.color}-200 transition-colors`,children:e.jsx(Check,{size:12,className:`text-${j.color}-700 font-bold`,strokeWidth:3})}),e.jsx("span",{className:"text-slate-600 text-sm font-bold group-hover:text-slate-900 transition-colors",children:_})]},E))}),e.jsx("div",{className:"mt-auto",children:e.jsx(Button,{className:`w-full py-4 text-base font-bold rounded-xl shadow-lg transition-transform active:scale-95 ${j.popular?"bg-gradient-to-r from-blue-600 to-violet-600 hover:from-blue-700 hover:to-violet-700 text-white shadow-blue-500/25":"bg-slate-900 hover:bg-slate-800 text-white shadow-slate-900/20"}`,onClick:()=>n(j.name),children:j.cta})})]},S))})})},Vy=()=>{const n=Le();return f.useEffect(()=>{window.scrollTo(0,0)},[]),e.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans selection:bg-blue-500 selection:text-white",children:[e.jsx(cd,{}),e.jsxs("main",{className:"pt-20",children:[e.jsxs("div",{className:"relative bg-slate-900 overflow-hidden pt-24 pb-32 lg:pt-32 lg:pb-48 text-center px-6",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0",children:[e.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-1/4 w-96 h-96 bg-violet-600/20 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto space-y-6",children:[e.jsx("span",{className:"inline-block py-1 px-3 rounded-full bg-blue-500/10 border border-blue-500/20 text-blue-400 text-sm font-bold tracking-wide uppercase mb-4",children:"Flexible Plans"}),e.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-white tracking-tight leading-tight",children:["Invest in your school's ",e.jsx("br",{}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-violet-400",children:"Future Success."})]}),e.jsx("p",{className:"text-xl md:text-2xl text-slate-400 max-w-2xl mx-auto leading-relaxed",children:"Transparent pricing designed to scale with your institution. Start small, grow big."})]})]}),e.jsx("div",{className:"-mt-20 relative z-20",children:e.jsx(Yy,{onSignUp:m=>n(`/signup?plan=${m}`)})}),e.jsx("section",{className:"py-24 bg-white border-t border-slate-100 relative",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tight mb-4",children:"Frequently Asked Questions"}),e.jsx("p",{className:"text-lg text-slate-500",children:"Everything you need to know about our pricing and billing."})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:[{q:"Can I upgrade my plan later?",a:"Absolutely. You can upgrade at any time instantly. Your billing will be processed on a pro-rata basis for the remainder of the billing cycle."},{q:"Is there a setup fee?",a:"Never. There are no hidden setup fees, maintenance fees, or surprise charges. You only pay the straightforward monthly subscription price."},{q:"Do you offer training?",a:"Yes! We provide comprehensive video tutorials, documentation, and priority support for all plans to ensure your team hits the ground running."},{q:"How secure is my data?",a:"We treat security as our top priority. We use bank-grade 256-bit SSL encryption and perform automated daily backups to dedicated secure servers."}].map((m,c)=>e.jsxs("div",{className:"bg-slate-50 hover:bg-white hover:shadow-xl hover:shadow-slate-200/50 p-8 rounded-3xl transition-all duration-300 border border-transparent hover:border-slate-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-3 flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2 text-xl",children:"Q."}),m.q]}),e.jsx("p",{className:"text-slate-600 leading-relaxed text-sm pl-7",children:m.a})]},c))})]})})]}),e.jsx(Fm,{})]})},Ky=()=>{const{registration_open:n,loading:m}=n0(),c=Le(),u=Ya(),v=new URLSearchParams(u.search).get("plan")||"Basic",[j,S]=f.useState(!1),[_,E]=f.useState(!1),[z,h]=f.useState(null),[b,C]=f.useState({school_name:"",school_code:"",school_email:"",school_phone:"",school_address:"",password:"",confirm_password:"",school_logo:null,school_logo_preview:null}),A=T=>{C(D=>({...D,[T.target.name]:T.target.value}))},M=T=>{const D=T.target.files[0];if(D){const y=new FileReader;y.onloadend=()=>{C(P=>({...P,school_logo:D,school_logo_preview:y.result}))},y.readAsDataURL(D)}},k=async T=>{if(T.preventDefault(),h(null),b.password!==b.confirm_password){h("Passwords do not match");return}S(!0);try{const D=new FormData;D.append("school_name",b.school_name),D.append("school_code",b.school_code),D.append("school_email",b.school_email),D.append("school_phone",b.school_phone),D.append("school_address",b.school_address),D.append("password",b.password),D.append("plan",v),b.school_logo&&D.append("school_logo",b.school_logo),(await V.post("/api/school-signup/",D)).data.success&&(E(!0),setTimeout(()=>c("/login"),3e3))}catch(D){h(D.response?.data?.error||"Registration failed. Please try again.")}finally{S(!1)}};return!m&&!n?e.jsxs("div",{className:"min-h-screen bg-slate-950 flex shadow-inner items-center justify-center p-6 sm:p-12 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-primary-600/10 rounded-full blur-[120px] pointer-events-none"}),e.jsxs("div",{className:"max-w-md w-full bg-slate-900/50 backdrop-blur-xl border border-slate-800 p-12 rounded-[3rem] text-center shadow-2xl relative z-10",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-500/10 text-rose-500 rounded-full flex items-center justify-center mb-6 mx-auto",children:e.jsx(Tt,{size:40})}),e.jsx("h2",{className:"text-3xl font-black text-white mb-4 italic",children:"REGISTRATION CLOSED."}),e.jsxs("p",{className:"text-slate-400 mb-8 font-medium leading-relaxed",children:["We are currently reaching capacity for our beta phase. Please contact ",e.jsx("b",{children:"support@edumanage.com"})," for invitation-only access."]}),e.jsx("button",{onClick:()=>c("/"),className:"w-full py-4 px-6 bg-white text-slate-950 rounded-2xl font-black uppercase tracking-wider hover:bg-slate-200 transition-colors",children:"Back to Home"})]})]}):_?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-6 text-center",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-xl p-10 border border-slate-100 flex flex-col items-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center mb-6",children:e.jsx(hl,{size:48})}),e.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Registration Successful!"}),e.jsxs("p",{className:"text-slate-600 mb-8 leading-relaxed",children:["Your institution ",e.jsx("b",{children:b.school_name})," has been registered. You are being redirected to the login page."]}),e.jsxs("div",{className:"flex gap-2 text-primary-600 font-semibold items-center",children:[e.jsx(gm,{className:"animate-spin",size:20}),e.jsx("span",{children:"Redirecting..."})]})]})}):e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col lg:flex-row",children:[e.jsx(cd,{alwaysSolid:!0}),e.jsxs("div",{className:"lg:w-1/3 bg-slate-900 p-12 lg:pt-32 text-white flex flex-col justify-between relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-12",children:[e.jsx("div",{className:"bg-primary-600 p-2 rounded-xl text-white",children:e.jsx(Lt,{size:24})}),e.jsx("span",{className:"text-xl font-bold tracking-tight",children:"EduManage"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-4xl font-bold leading-tight",children:"Join the future of education governance."}),e.jsx("p",{className:"text-slate-400 text-lg",children:"Set up your school dashboard in minutes and start managing your institution like a pro."}),e.jsx("div",{className:"space-y-4 pt-4",children:["Multi-branch support","Automated fee tracking","Comprehensive HR tools","Real-time academic reporting"].map((T,D)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-primary-500/20 text-primary-400 flex items-center justify-center",children:e.jsx(hl,{size:12})}),e.jsx("span",{className:"text-slate-300",children:T})]},D))})]})]}),e.jsx("div",{className:"relative z-10 pt-12 border-t border-slate-800",children:e.jsx("p",{className:"text-slate-500 text-sm",children:" 2024 EduManage Inc. All rights reserved."})}),e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary-600/20 blur-[120px]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-indigo-600/10 blur-[100px]"})]}),e.jsx("div",{className:"lg:w-2/3 p-6 lg:p-20 lg:pt-32 overflow-y-auto",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-12",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Register Your Institution"}),e.jsx("p",{className:"text-slate-500",children:"Enter your school details to create your admin account."})]}),e.jsxs("div",{className:"mb-8 p-6 bg-white rounded-3xl border border-slate-100 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${v==="Basic"?"bg-emerald-50 text-emerald-600":v==="Standard"?"bg-blue-50 text-blue-600":"bg-violet-50 text-violet-600"}`,children:[v==="Basic"&&e.jsx(ql,{size:24}),v==="Standard"&&e.jsx(Wc,{size:24}),v==="Enterprise"&&e.jsx(ad,{size:24})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Selected Plan"}),e.jsxs("h4",{className:"text-lg font-bold text-slate-900",children:[v," Edition"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Includes"}),e.jsx("p",{className:"text-sm font-bold text-primary-600",children:"7-Day Free Trial"})]})]}),z&&e.jsxs("div",{className:"mb-8 p-4 bg-red-50 border border-red-100 text-red-600 rounded-2xl flex items-center gap-3",children:[e.jsx(Di,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:z})]}),e.jsxs("form",{onSubmit:k,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-100",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-slate-400 mb-6",children:"Institution Logo"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-8",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-32 h-32 rounded-3xl bg-slate-50 border-2 border-dashed border-slate-200 flex items-center justify-center overflow-hidden transition-all group-hover:border-primary-500 group-hover:bg-primary-50/10",children:b.school_logo_preview?e.jsx("img",{src:b.school_logo_preview,alt:"Preview",className:"w-full h-full object-contain"}):e.jsx(e0,{size:40,className:"text-slate-300"})}),e.jsxs("label",{className:"absolute -bottom-3 -right-3 p-3 bg-primary-600 hover:bg-primary-700 text-white rounded-2xl shadow-xl cursor-pointer transition-all hover:scale-110 active:scale-95",children:[e.jsx(zm,{size:18}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:M})]})]}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"font-bold text-slate-900 mb-1",children:"Upload School Logo"}),e.jsx("p",{className:"text-sm text-slate-500 max-w-xs leading-relaxed",children:"This logo will appear on all sidebars, login pages, and official receipts. Recommended: Square PNG/JPG, max 2MB."})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{label:"School Name",name:"school_name",placeholder:"e.g. St. Jude Academy",required:!0,value:b.school_name,onChange:A,icon:e0}),e.jsx(fe,{label:"School Code",name:"school_code",placeholder:"e.g. SJA01",required:!0,value:b.school_code,onChange:A,icon:Di}),e.jsx(fe,{label:"Official Phone Number",name:"school_phone",placeholder:"+254...",value:b.school_phone,onChange:A,icon:Es}),e.jsx(fe,{label:"Support Email",type:"email",name:"school_email",placeholder:"admin@school.com",required:!0,value:b.school_email,onChange:A,icon:Gt})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center gap-2",children:[e.jsx(gt,{size:16}),"School Address"]}),e.jsx("textarea",{name:"school_address",className:"w-full px-5 py-4 bg-white border border-slate-200 rounded-2xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500 transition-all outline-none min-h-[120px] text-slate-600",placeholder:"P.O Box, Physical Location...",value:b.school_address,onChange:A})]}),e.jsxs("div",{className:"bg-slate-50 p-8 rounded-3xl border border-slate-100 space-y-6",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-slate-400",children:"Security & Password"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{label:"Set School Admin Password",type:"password",name:"password",placeholder:"",required:!0,value:b.password,onChange:A,icon:Tt}),e.jsx(fe,{label:"Confirm Password",type:"password",name:"confirm_password",placeholder:"",required:!0,value:b.confirm_password,onChange:A,icon:Tt})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs(W,{type:"submit",size:"lg",className:"w-full py-6 text-lg rounded-2xl shadow-lg shadow-primary-500/20",isLoading:j,children:["Complete Registration",e.jsx(Za,{size:20,className:"ml-2"})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-slate-500",children:["Already have a school account? "," ",e.jsx("button",{onClick:()=>c("/login"),className:"text-primary-600 font-bold hover:underline",children:"Sign In"})]})})]})})]})},Xy=()=>{const n=Le(),{config:m}=Nt(),[c,u]=f.useState(!1),[g,v]=f.useState(null),[j,S]=f.useState({username:"",password:""}),_=new URLSearchParams(window.location.search);f.useEffect(()=>{const b=_.get("slug");b&&localStorage.setItem("portal_slug",b)},[]);const E=_.get("slug")||localStorage.getItem("portal_slug"),z=b=>{S(C=>({...C,[b.target.name]:b.target.value}))},h=async b=>{b.preventDefault(),v(null),u(!0);try{const C=await V.post("/api/login/",{...j,portal_slug:E,is_admin_portal:!0});C.data.success&&(localStorage.setItem("user",JSON.stringify(C.data.user)),C.data.portal_slug&&localStorage.setItem("portal_slug",C.data.portal_slug),n(C.data.redirect_url||"/dashboard"))}catch(C){v(C.response?.data?.error||"Invalid credentials. Please try again.")}finally{u(!1)}};return e.jsxs("div",{className:"dark min-h-screen w-full flex bg-[#0f172a] relative overflow-hidden font-sans text-slate-200",children:[e.jsx(cd,{darkMode:!0}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-[120px] animate-pulse"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-purple-600/20 rounded-full blur-[120px] animate-pulse delay-1000"})]}),e.jsxs("div",{className:"relative z-10 w-full max-w-7xl mx-auto flex items-stretch min-h-screen p-4 lg:p-8 gap-4",children:[e.jsxs("div",{className:"hidden lg:flex flex-col justify-between w-1/2 bg-white/5 backdrop-blur-3xl rounded-[40px] border border-white/10 p-12 lg:p-16 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-12 opacity-50",children:e.jsx(Hn,{className:"text-blue-500/20 w-64 h-64 absolute top-10 right-10 animate-[spin_60s_linear_infinite]"})}),e.jsx("div",{className:"relative z-10 space-y-8 mt-12",children:e.jsxs(he.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6},children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-500/10 border border-blue-500/20 text-blue-400 text-sm font-medium mb-6",children:[e.jsx(jf,{size:14}),e.jsx("span",{children:"The Future of Education"})]}),e.jsxs("h1",{className:"text-5xl lg:text-6xl font-bold text-white leading-[1.1] tracking-tight mb-6",children:["Unified ",e.jsx("br",{}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-400",children:"School Management"})]}),e.jsx("p",{className:"text-lg text-slate-400 max-w-md leading-relaxed",children:"Access the EduManage platform to oversee operations, finance, academics, and more from a single, secure entry point."})]})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex -space-x-4 mb-6",children:[1,2,3,4].map(b=>e.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-[#0f172a] bg-slate-700 flex items-center justify-center text-xs font-bold text-white",children:b===4?"2k+":""},b))}),e.jsxs("div",{className:"flex items-center gap-2 text-white font-medium",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(b=>e.jsx("span",{className:"text-yellow-500",children:""},b))}),e.jsx("span",{className:"text-slate-500 text-sm ml-2",children:"Trusted by 2,000+ Schools"})]})]})]}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center px-4 md:px-12 lg:px-24",children:e.jsxs("div",{className:"w-full max-w-md space-y-10",children:[e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsx(he.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-gradient-to-tr from-blue-600 to-indigo-600 shadow-lg shadow-blue-500/20 mb-6 lg:mx-0",children:e.jsx(Bn,{className:"text-white",size:28})}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-3",children:"Welcome Back"}),e.jsx("p",{className:"text-slate-400",children:"Please enter your credentials to access the platform."})]}),e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[g&&e.jsxs(he.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"p-4 bg-red-500/10 border border-red-500/20 text-red-400 rounded-xl text-sm flex items-start gap-3",children:[e.jsx(Di,{size:18,className:"mt-0.5 shrink-0"}),e.jsx("span",{children:g})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(fe,{label:"Email or Username",name:"username",placeholder:"Enter your email",required:!0,value:j.username,onChange:z,icon:Gt,className:"bg-slate-800/50 border-slate-700 text-white placeholder:text-slate-500 focus:border-blue-500 focus:ring-blue-500/20"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Password"}),e.jsx("button",{type:"button",className:"text-xs text-blue-400 hover:text-blue-300 font-medium transition-colors",children:"Forgot password?"})]}),e.jsx(fe,{type:"password",name:"password",placeholder:"",required:!0,value:j.password,onChange:z,icon:Tt,className:"bg-slate-800/50 border-slate-700 text-white placeholder:text-slate-500 focus:border-blue-500 focus:ring-blue-500/20"})]})]}),e.jsx(W,{type:"submit",size:"lg",className:"w-full bg-blue-600 hover:bg-blue-500 text-white rounded-xl py-4 font-semibold shadow-lg shadow-blue-600/20 border-none transition-all duration-300 hover:scale-[1.02]",isLoading:c,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Sign In to Platform",e.jsx(Za,{size:18})]})})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-800/50 flex flex-col items-center gap-4",children:[e.jsxs("p",{className:"text-slate-500 text-sm",children:["Not registered yet?"," ",e.jsx("button",{onClick:()=>n("/signup"),className:"text-blue-400 hover:text-blue-300 font-medium transition-colors",children:"Create an Account"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-6 text-xs text-slate-600",children:[e.jsx("a",{href:"#",className:"hover:text-slate-400 transition-colors",children:"Privacy Policy"}),e.jsx("span",{className:"w-1 h-1 bg-slate-700 rounded-full"}),e.jsx("a",{href:"#",className:"hover:text-slate-400 transition-colors",children:"Terms of Service"})]})]})]})})]})]})},df={privacy:{title:"Privacy Policy",icon:Mt,updated:"January 14, 2026",content:e.jsxs("div",{className:"space-y-6 text-slate-600 leading-relaxed",children:[e.jsx("p",{children:"At EduManage, we take your privacy seriously. This Privacy Policy explains how we collect, use, disclosure, and safeguard your information when you visit our website directly or use our mobile application."}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-8",children:"1. Collection of Data"}),e.jsx("p",{children:"We collect information that you strictly provide to us. We collect the following personal information: Name, Email address, Phone number, and School information. We also collect data related to your usage of our platform to improve our services."}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-8",children:"2. Use of Data"}),e.jsx("p",{children:"We use the data we collect to operate and maintain our services, improve your experience, and communicate with you about updates and support. We strictly do not sell your personal data to third parties."}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-8",children:"3. Data Retention"}),e.jsx("p",{children:"We will retain your personal data only for as long as is necessary for the purposes set out in this Privacy Policy. We will retain and use your data to the extent necessary to comply with our legal obligations."}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-8",children:"4. Data Security"}),e.jsx("p",{children:"Your data security is important to us. We use commercially acceptable means to protect your Personal Data, including encryption and secure server infrastructure."})]})},terms:{title:"Terms of Service",icon:Wt,updated:"January 10, 2026",content:e.jsxs("div",{className:"space-y-6 text-slate-600 leading-relaxed",children:[e.jsx("p",{children:'Please read these Terms of Service ("Terms", "Terms of Service") carefully before using the EduManage website and mobile application operated by EduManage Inc.'}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-8",children:"1. Conditions of Use"}),e.jsx("p",{children:"By using this website, you certify that you have read and reviewed this Agreement and that you agree to comply with its terms. If you do not want to be bound by the terms of this Agreement, you are advised to stop using the website accordingly."}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-8",children:"2. Intellectual Property"}),e.jsx("p",{children:"You agree that all materials, products, and services provided on this website are the property of EduManage, its affiliates, directors, officers, employees, agents, suppliers, or licensors including all copyrights, trade secrets, trademarks, patents, and other intellectual property."}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-8",children:"3. User Accounts"}),e.jsx("p",{children:"As a user of this website, you may be asked to register with us and provide private information. You are responsible for ensuring the accuracy of this information, and you are responsible for maintaining the safety and security of your identifying information."}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-8",children:"4. Applicable Law"}),e.jsx("p",{children:"By visiting this website, you agree that the laws of Kenya, without regard to principles of conflict laws, will govern these terms and conditions, or any dispute of any sort that might come between EduManage and you."})]})},cookies:{title:"Cookie Policy",icon:Vg,updated:"December 20, 2025",content:e.jsxs("div",{className:"space-y-6 text-slate-600 leading-relaxed",children:[e.jsx("p",{children:"This Cookie Policy explains what cookies are and how we use them. You should read this policy so you can understand what type of cookies we use, or the information we collect using cookies and how that information is used."}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-8",children:"1. What are cookies?"}),e.jsx("p",{children:"Cookies are small text files that are sent to your web browser by a website you visit. A cookie file is stored in your web browser and allows the Service or a third-party to recognize you and make your next visit easier and the Service more useful to you."}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-8",children:"2. How we use cookies"}),e.jsx("p",{children:"When you use and access the Service, we may place a number of cookies files in your web browser. We use cookies for the following purposes: to enable certain functions of the Service, to provide analytics, to store your preferences, and to enable advertisements delivery."}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-8",children:"3. Your choices regarding cookies"}),e.jsx("p",{children:"If you'd like to delete cookies or instruct your web browser to delete or refuse cookies, please visit the help pages of your web browser. Please note, however, that if you delete cookies or refuse to accept them, you might not be able to use all of the features we offer."})]})},security:{title:"Security",icon:Tt,updated:"February 1, 2026",content:e.jsxs("div",{className:"space-y-6 text-slate-600 leading-relaxed",children:[e.jsx("p",{children:"Security is at the core of our business. We work tirelessly to ensure the confidentiality, integrity, and availability of your data."}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-8",children:"1. Infrastructure Security"}),e.jsx("p",{children:"Our application is hosted on secure, world-class cloud infrastructure providers that maintain industry-standard security certifications (ISO 27001, SOC 2). We utilize firewalls, intrusion detection systems, and regular vulnerability scanning."}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-8",children:"2. Data Encryption"}),e.jsx("p",{children:"All data transmitted between your browser and our servers is encrypted using 256-bit TLS/SSL (Transport Layer Security). Data at rest in our databases is also encrypted using industry-standard encryption algorithms."}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-8",children:"3. Access Control"}),e.jsx("p",{children:"We implement strict role-based access control (RBAC) within our organization. Only authorized personnel have access to production systems, and all access is logged and monitored."}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mt-8",children:"4. Backups"}),e.jsx("p",{children:"We perform automated daily backups of all data. These backups are encrypted and stored in multiple geographic locations to ensure data durability and disaster recovery capabilities."})]})}},Qy=()=>{const{type:n}=Zt();if(f.useEffect(()=>{window.scrollTo(0,0)},[n]),!df[n])return e.jsx(os,{to:"/",replace:!0});const{title:m,icon:c,updated:u,content:g}=df[n];return e.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans",children:[e.jsx(cd,{}),e.jsxs("main",{className:"pt-20 pb-24",children:[e.jsx("div",{className:"bg-slate-900 text-white py-20 px-6 text-center",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-white/10 rounded-2xl mb-6 backdrop-blur-sm",children:e.jsx(c,{size:32,className:"text-blue-400"})}),e.jsx("h1",{className:"text-4xl md:text-5xl font-black tracking-tight mb-4 text-white",children:m}),e.jsxs("p",{className:"text-slate-400 text-lg",children:["Last updated: ",u]})]})}),e.jsx("div",{className:"max-w-3xl mx-auto px-6 -mt-10 relative z-10",children:e.jsx("div",{className:"bg-white rounded-3xl p-8 md:p-12 shadow-xl shadow-slate-200/50 border border-slate-100",children:g})})]}),e.jsx(Fm,{})]})},Jy=()=>{const{slug:n,role:m}=Zt();n&&localStorage.setItem("portal_slug",n);const u={teacher:"/teacher-login",student:"/student-login",accountant:"/finance-login",food:"/food-login",transport:"/transport-login",driver:"/driver-login"}[m];return u?e.jsx(os,{to:`${u}?slug=${n}`,replace:!0}):e.jsx(os,{to:"/login",replace:!0})},Wy=()=>{const n=Le(),{config:m}=Nt(),[c,u]=f.useState({username:"",password:""}),[g,v]=f.useState(""),[j,S]=f.useState(!1),[_,E]=f.useState(null),[z,h]=f.useState(!0),b=new URLSearchParams(window.location.search),C=b.get("slug")||localStorage.getItem("portal_slug");b.get("slug")&&localStorage.setItem("portal_slug",b.get("slug")),js.useEffect(()=>{(async()=>{if(C)try{const T=await V.get("/api/config/",{headers:{"X-Portal-Slug":C}});E(T.data)}catch(T){console.error("Failed to fetch school config:",T),E(m)}finally{h(!1)}else E(m),h(!1)})()},[C,m]);const A=k=>{u({...c,[k.target.name]:k.target.value}),v("")},M=async k=>{k.preventDefault(),v(""),S(!0);try{const T=await V.post("/api/login/",{username:c.username,password:c.password,portal_slug:C});T.data.success&&(localStorage.setItem("user",JSON.stringify(T.data.user)),T.data.portal_slug&&localStorage.setItem("portal_slug",T.data.portal_slug),T.data.user.role==="student"&&T.data.user.student_id?n(`/student/${T.data.user.student_id}`):v("This portal is for students only"))}catch(T){v(T.response?.data?.error||"Invalid credentials")}finally{S(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl shadow-lg shadow-green-500/30 mb-4",children:e.jsx(ta,{size:40,className:"text-white"})}),z?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-slate-200 dark:bg-slate-700 rounded w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-1/2 mx-auto"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:[_?.school_name||"School"," Student Portal"]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Access your academic information"}),C&&e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-2 font-mono bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded inline-block",children:["Portal: ",C]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-100 dark:border-slate-700 p-8",children:[g&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-start gap-3",children:[e.jsx(ot,{size:20,className:"text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:g})]}),e.jsxs("form",{onSubmit:M,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[e.jsx(Qe,{size:16,className:"inline mr-2"}),"Student ID / Admission Number"]}),e.jsx(fe,{type:"text",name:"username",value:c.username,onChange:A,placeholder:"Enter your student ID",required:!0,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[e.jsx(Tt,{size:16,className:"inline mr-2"}),"Password"]}),e.jsx(fe,{type:"password",name:"password",value:c.password,onChange:A,placeholder:"Enter your password",required:!0})]}),e.jsx(W,{type:"submit",className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700",isLoading:j,children:j?"Signing in...":"Sign In"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("a",{href:"#",className:"text-sm text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300",children:"Forgot your password?"})})]}),e.jsx("div",{className:"mt-6 text-center text-sm text-slate-500 dark:text-slate-400",children:e.jsx("p",{children:"Need help? Contact your school administrator"})})]})})},ew=()=>{const[n,m]=f.useState([]),[c,u]=f.useState(!0),[g,v]=f.useState(""),[j,S]=f.useState(null),[_,E]=f.useState(!1);f.useEffect(()=>{z()},[]);const z=async()=>{try{u(!0);const k=await V.get("/api/super-portal/schools/");m(k.data)}catch(k){console.error("Error fetching schools:",k),Jt.error("Failed to load institution data")}finally{u(!1)}},h=async k=>{try{await V.post(`/api/super-portal/schools/${k}/toggle-active/`),Jt.success("Access state toggled"),z()}catch{Jt.error("Control command failed")}},b=async k=>{if(window.confirm("CRITICAL ACTION: Are you sure? This will purge all school data from the core."))try{await V.delete(`/api/super-portal/schools/${k}/`),Jt.success("Institution purged"),m(n.filter(T=>T.id!==k))}catch{Jt.error("Purge operation failed")}},C=async k=>{k.preventDefault();try{await V.patch(`/api/super-portal/schools/${j.id}/`,{subscription_plan:j.subscription_plan,subscription_status:j.subscription_status}),Jt.success("Core configuration updated"),E(!1),z()}catch{Jt.error("Config update failed")}},A=k=>{localStorage.setItem("portal_slug",k.portal_slug),window.open("/dashboard","_blank")},M=n.filter(k=>k.school_name.toLowerCase().includes(g.toLowerCase())||k.school_code.toLowerCase().includes(g.toLowerCase())||k.admin_email&&k.admin_email.toLowerCase().includes(g.toLowerCase()));return e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-10",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-black text-white tracking-tight mb-2",children:"INSTITUTION REGISTRY"}),e.jsx("p",{className:"text-slate-500 font-medium text-sm lg:text-base",children:"Manage and monitor all connected educational entities"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full lg:w-auto",children:[e.jsxs("div",{className:"relative group flex-1 lg:flex-none",children:[e.jsx(jt,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-primary-500 transition-colors",size:18}),e.jsx("input",{type:"text",placeholder:"Find institution...",className:"bg-slate-900 border border-slate-800 rounded-2xl py-3 pl-12 pr-6 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none w-full lg:w-80 text-sm text-white placeholder:text-slate-600 transition-all font-medium",value:g,onChange:k=>v(k.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"p-3 bg-slate-900 border border-slate-800 rounded-2xl text-slate-400 hover:text-white hover:border-slate-700 transition-all",children:e.jsx(za,{size:20})}),e.jsx("button",{className:"p-3 bg-slate-900 border border-slate-800 rounded-2xl text-slate-400 hover:text-white hover:border-slate-700 transition-all",children:e.jsx(Ms,{size:20})})]})]})]}),e.jsx("div",{className:"hidden lg:block bg-slate-900/30 backdrop-blur-xl border border-slate-800 rounded-[2.5rem] overflow-hidden shadow-2xl",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-800",children:[e.jsx("th",{className:"px-8 py-6 text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Institution Profile"}),e.jsx("th",{className:"px-8 py-6 text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Population"}),e.jsx("th",{className:"px-8 py-6 text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Deployment"}),e.jsx("th",{className:"px-8 py-6 text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Status"}),e.jsx("th",{className:"px-8 py-6 text-xs font-black text-slate-500 uppercase tracking-[0.2em] text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800/40",children:M.map(k=>e.jsxs("tr",{className:"hover:bg-primary-500/[0.02] transition-colors group",children:[e.jsx("td",{className:"px-8 py-6",children:e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("span",{className:"text-base font-black text-white group-hover:text-primary-400 transition-colors",children:k.school_name}),e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-slate-500 font-bold overflow-hidden",children:[e.jsx(Gt,{size:12,className:"shrink-0"})," ",k.admin_email]}),e.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-primary-500/80 font-black tracking-widest uppercase",children:[e.jsx(Hn,{size:12,className:"shrink-0"})," ",k.portal_slug]})]})]})}),e.jsx("td",{className:"px-8 py-6",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-black text-white leading-none",children:k.student_count}),e.jsx("span",{className:"text-[10px] text-slate-500 font-black uppercase tracking-tighter",children:"Students"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-black text-white leading-none",children:k.staff_total||0}),e.jsx("span",{className:"text-[10px] text-slate-500 font-black uppercase tracking-tighter",children:"Staff"})]})]})}),e.jsx("td",{className:"px-8 py-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`w-fit px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${k.subscription_plan==="Enterprise"?"bg-purple-500/10 text-purple-400 border border-purple-500/20":k.subscription_plan==="Standard"?"bg-blue-500/10 text-blue-400 border border-blue-500/20":"bg-slate-500/10 text-slate-400 border border-slate-500/20"}`,children:k.subscription_plan}),e.jsx("span",{className:"text-[10px] text-slate-600 font-bold uppercase mt-1",children:k.subscription_status})]})}),e.jsx("td",{className:"px-8 py-6",children:e.jsxs("button",{onClick:()=>h(k.id),className:`flex items-center gap-2 px-4 py-2 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all ${k.is_active?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 hover:bg-emerald-500/20 shadow-lg shadow-emerald-500/5":"bg-rose-500/10 text-rose-400 border border-rose-500/20 hover:bg-rose-500/20"}`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${k.is_active?"bg-emerald-500 animate-pulse":"bg-rose-500"}`}),k.is_active?"Online":"Restricted"]})}),e.jsx("td",{className:"px-8 py-6 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-3 opacity-0 group-hover:opacity-100 transition-all duration-300 translate-x-4 group-hover:translate-x-0",children:[e.jsx("button",{onClick:()=>A(k),className:"w-10 h-10 flex items-center justify-center bg-slate-800/80 hover:bg-primary-600 text-slate-300 hover:text-white rounded-xl transition-all shadow-xl",title:"Control Dashboard",children:e.jsx(Nm,{size:16})}),e.jsx("button",{onClick:()=>{S(k),E(!0)},className:"w-10 h-10 flex items-center justify-center bg-slate-800/80 hover:bg-indigo-600 text-slate-300 hover:text-white rounded-xl transition-all shadow-xl",title:"System Configuration",children:e.jsx(Pn,{size:16})}),e.jsx("button",{onClick:()=>b(k.id),className:"w-10 h-10 flex items-center justify-center bg-slate-800/80 hover:bg-rose-600 text-slate-300 hover:text-white rounded-xl transition-all shadow-xl",title:"Purge Command",children:e.jsx(Cs,{size:16})})]})})]},k.id))})]})})}),e.jsx("div",{className:"lg:hidden space-y-4",children:M.map(k=>e.jsxs("div",{className:"bg-slate-900/40 border border-slate-800 rounded-3xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black text-white leading-tight",children:k.school_name}),e.jsx("p",{className:"text-xs text-slate-500 font-bold truncate max-w-[200px] mt-1",children:k.admin_email})]}),e.jsx("button",{onClick:()=>h(k.id),className:`p-2 rounded-xl border ${k.is_active?"bg-emerald-500/10 border-emerald-500/20 text-emerald-500":"bg-rose-500/10 border-rose-500/20 text-rose-500"}`,children:e.jsx(hs,{size:18})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4 border-y border-slate-800/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest mb-1",children:"Students"}),e.jsx("p",{className:"text-xl font-black text-white",children:k.student_count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest mb-1",children:"Staff"}),e.jsx("p",{className:"text-xl font-black text-white",children:k.staff_total||0})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-lg text-[10px] font-black uppercase tracking-widest w-fit ${k.subscription_plan==="Enterprise"?"bg-purple-500/10 text-purple-400":"bg-blue-500/10 text-blue-400"}`,children:k.subscription_plan}),e.jsx("span",{className:"text-[10px] text-primary-500 font-black truncate",children:k.portal_slug})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>A(k),className:"p-3 bg-slate-800 rounded-xl text-slate-400 hover:text-white",children:e.jsx(Nm,{size:16})}),e.jsx("button",{onClick:()=>{S(k),E(!0)},className:"p-3 bg-slate-800 rounded-xl text-slate-400 hover:text-white",children:e.jsx(Pn,{size:16})}),e.jsx("button",{onClick:()=>b(k.id),className:"p-3 bg-rose-500/10 text-rose-500 rounded-xl",children:e.jsx(Cs,{size:16})})]})]})]},k.id))}),_&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-950/80 backdrop-blur-md p-4 animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[3rem] w-full max-w-lg shadow-[0_0_100px_rgba(0,0,0,0.5)] overflow-hidden",children:[e.jsxs("div",{className:"px-10 py-8 border-b border-slate-800 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-2xl text-white tracking-tight",children:"CONFIGURE CELL"}),e.jsxs("p",{className:"text-slate-500 text-xs font-medium uppercase tracking-widest mt-1",children:[j.school_name," // 0x",j.id]})]}),e.jsx("button",{onClick:()=>E(!1),className:"w-12 h-12 flex items-center justify-center bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white rounded-2xl transition-all",children:e.jsx(ua,{})})]}),e.jsxs("form",{onSubmit:C,className:"p-10 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Licensing Tier"}),e.jsxs("select",{className:"w-full bg-slate-950 border border-slate-800 rounded-2xl p-5 text-sm text-white focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all font-bold appearance-none cursor-pointer",value:j.subscription_plan,onChange:k=>S({...j,subscription_plan:k.target.value}),children:[e.jsx("option",{value:"Basic",children:"Basic Deployment"}),e.jsx("option",{value:"Standard",children:"Standard Deployment"}),e.jsx("option",{value:"Enterprise",children:"Enterprise Deployment"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Account State"}),e.jsxs("select",{className:"w-full bg-slate-950 border border-slate-800 rounded-2xl p-5 text-sm text-white focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all font-bold appearance-none cursor-pointer",value:j.subscription_status,onChange:k=>S({...j,subscription_status:k.target.value}),children:[e.jsx("option",{value:"Trial",children:"Evaluation Phase"}),e.jsx("option",{value:"Active",children:"Authorized Active"}),e.jsx("option",{value:"Expired",children:"Deployment Expired"}),e.jsx("option",{value:"Canceled",children:"Service Terminated"})]})]})]}),e.jsxs("div",{className:"pt-6 flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>E(!1),className:"flex-1 px-8 py-5 bg-slate-800 hover:bg-slate-750 text-slate-300 rounded-2xl text-xs font-black uppercase tracking-widest transition-all",children:"Abort"}),e.jsx("button",{type:"submit",className:"flex-1 px-8 py-5 bg-gradient-to-r from-primary-600 to-primary-500 hover:from-primary-500 hover:to-primary-400 text-white rounded-2xl text-xs font-black uppercase tracking-widest shadow-xl shadow-primary-500/20 transition-all active:scale-95",children:"Push Update"})]})]})]})})]})},tw=()=>{const[n]=f.useState([{id:"teacher",name:"Teacher Workspace",description:"Academic management, grading, attendance, and student tracking interface for teaching staff.",icon:ta,path:"/teacher-login",color:"from-emerald-600 to-emerald-400",status:"Active",role:"TEACHER",default_cred:"Teacher@123"},{id:"student",name:"Student Portal",description:"Personalized dashboard for students to view grades, assignments, and financial standing.",icon:Ie,path:"/student-login",color:"from-blue-600 to-blue-400",status:"Active",role:"STUDENT",default_cred:"Student@123"},{id:"finance",name:"Finance Terminal",description:"Advanced accounting control center for school bursars and accountants to manage fees and expenses.",icon:Ss,path:"/finance-login",color:"from-indigo-600 to-indigo-400",status:"Active",role:"ACCOUNTANT",default_cred:"Finance@123"},{id:"transport",name:"Logistics Command",description:"Fleet management, route optimization, and driver coordination system for transport managers.",icon:Kg,path:"/transport-login",color:"from-amber-600 to-amber-400",status:"Active",role:"TRANSPORT",default_cred:"Transport@123"},{id:"food",name:"Catering Hub",description:"Inventory control, meal usage tracking, and cafeteria management system.",icon:Hs,path:"/food-login",color:"from-rose-600 to-rose-400",status:"Active",role:"CATERING",default_cred:"Food@123"},{id:"driver",name:"Driver App",description:"Mobile-first interface for drivers to view routes, schedules, and log maintenance.",icon:_f,path:"/driver-login",color:"from-slate-600 to-slate-400",status:"Active",role:"DRIVER",default_cred:"Driver@123"}]),m=u=>{window.open(u,"_blank")},c=u=>{navigator.clipboard.writeText(u),Jt.success(`Copied default credential: ${u}`)};return e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-10",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-black text-white tracking-tight mb-2",children:"SYSTEM PORTALS"}),e.jsx("p",{className:"text-slate-500 font-medium text-sm lg:text-base",children:"Direct access and configuration for all subsystem interfaces"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"px-4 py-2 bg-slate-900 border border-slate-800 rounded-2xl flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),e.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"All Systems Operational"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(u=>e.jsxs("div",{className:"group relative bg-slate-900/40 backdrop-blur-xl border border-slate-800 hover:border-slate-700 rounded-[2rem] p-8 transition-all hover:-translate-y-1 hover:shadow-2xl overflow-hidden",children:[e.jsx("div",{className:`absolute -right-20 -top-20 w-64 h-64 bg-gradient-to-br ${u.color} opacity-[0.03] group-hover:opacity-[0.08] rounded-full blur-3xl transition-opacity duration-500`}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-br ${u.color} flex items-center justify-center shadow-lg`,children:e.jsx(u.icon,{className:"text-white",size:24})}),e.jsx("div",{className:"px-3 py-1 bg-slate-950/50 border border-slate-800 backdrop-blur-md rounded-full",children:e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:u.status})})]}),e.jsx("h3",{className:"text-xl font-black text-white mb-3 tracking-tight",children:u.name}),e.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-8 h-10 line-clamp-2",children:u.description}),e.jsxs("div",{onClick:()=>c(u.default_cred),className:"mb-8 p-3 bg-slate-950/50 border border-slate-800 rounded-xl cursor-pointer hover:border-slate-700 transition-colors group/pill",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider",children:"Default Pass Key"}),e.jsx(Tt,{size:10,className:"text-slate-600"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("code",{className:"text-xs font-mono text-primary-400",children:u.default_cred}),e.jsx("span",{className:"text-[10px] text-slate-600 opacity-0 group-hover/pill:opacity-100 transition-opacity",children:"Click to copy"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>m(u.path),className:"flex-1 flex items-center justify-center gap-2 bg-white text-slate-900 py-3 rounded-xl hover:bg-slate-200 transition-colors font-bold text-sm",children:["Access Portal ",e.jsx(Nm,{size:14})]}),e.jsx("button",{className:"p-3 bg-slate-800 text-slate-400 rounded-xl hover:bg-slate-700 hover:text-white transition-colors",children:e.jsx(Pn,{size:18})})]})]})]},u.id))}),e.jsxs("div",{className:"mt-12 bg-slate-900/40 border border-slate-800 rounded-3xl p-8 flex flex-col md:flex-row items-center gap-8",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-purple-600 to-blue-600 flex items-center justify-center shrink-0 shadow-lg shadow-purple-500/20",children:e.jsx(Mt,{className:"text-white",size:32})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-black text-white mb-2",children:"Master Override Protocol"}),e.jsx("p",{className:"text-slate-400 text-sm max-w-2xl",children:'As a Super Administrator, your session token allows you to bypass standard authentication checks on all child portals. Use the "Access Portal" buttons above to simulate user sessions for debugging or support.'})]})]})]})},sw=()=>{const[n,m]=f.useState({cpu:24,memory:42,storage:36,uptime:"99.98%",latency:45}),[c,u]=f.useState([{id:1,name:"Core API Gateway",status:"operational",uptime:"99.99%",latency:"45ms"},{id:2,name:"Authentication Service",status:"operational",uptime:"100%",latency:"28ms"},{id:3,name:"Database Clusters (PostgreSQL)",status:"operational",uptime:"99.95%",latency:"12ms"},{id:4,name:"Storage Buckets (Media)",status:"operational",uptime:"99.90%",latency:"140ms"},{id:5,name:"Notification Engine (SMS/Email)",status:"degraded",uptime:"98.50%",latency:"850ms",issue:"High Latency"},{id:6,name:"Payment Processing (Paystack)",status:"operational",uptime:"99.99%",latency:"250ms"},{id:7,name:"Background Workers (Celery)",status:"operational",uptime:"100%",latency:"N/A"},{id:8,name:"Real-time Socket Server",status:"operational",uptime:"99.98%",latency:"15ms"}]),[g,v]=f.useState([{id:101,type:"info",message:"Automated backup completed successfully",timestamp:"2 mins ago"},{id:102,type:"warning",message:"High memory usage detected on Worker-04",timestamp:"15 mins ago"},{id:103,type:"success",message:"Deployment #4592 deployed to production",timestamp:"1 hour ago"},{id:104,type:"info",message:"Database optimization routine finished",timestamp:"3 hours ago"}]);f.useEffect(()=>{const _=setInterval(()=>{m(E=>({...E,cpu:Math.min(100,Math.max(10,E.cpu+(Math.random()*10-5))),memory:Math.min(100,Math.max(20,E.memory+(Math.random()*5-2.5))),latency:Math.max(10,Math.floor(E.latency+(Math.random()*20-10)))}))},3e3);return()=>clearInterval(_)},[]);const j=_=>{switch(_){case"operational":return"text-emerald-400 bg-emerald-500/10 border-emerald-500/20";case"degraded":return"text-amber-400 bg-amber-500/10 border-amber-500/20";case"down":return"text-rose-400 bg-rose-500/10 border-rose-500/20";case"maintenance":return"text-blue-400 bg-blue-500/10 border-blue-500/20";default:return"text-slate-400 bg-slate-500/10 border-slate-500/20"}},S=_=>{switch(_){case"operational":return e.jsx(Ye,{size:16});case"degraded":return e.jsx(On,{size:16});case"down":return e.jsx(ua,{size:16});case"maintenance":return e.jsx(ul,{size:16});default:return e.jsx(hs,{size:16})}};return e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-10",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-black text-white tracking-tight mb-2",children:"PLATFORM HEALTH"}),e.jsx("p",{className:"text-slate-500 font-medium text-sm lg:text-base",children:"Real-time system performance monitoring and status reports"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"px-4 py-2 bg-emerald-500/10 border border-emerald-500/20 rounded-2xl flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),e.jsx("div",{className:"absolute inset-0 w-2 h-2 rounded-full bg-emerald-500 animate-ping opacity-75"})]}),e.jsx("span",{className:"text-xs font-bold text-emerald-400 uppercase tracking-wider",children:"System Operational"})]}),e.jsx("button",{className:"p-3 bg-slate-900 border border-slate-800 rounded-2xl text-slate-400 hover:text-white transition-all hover:bg-slate-800",children:e.jsx(ul,{size:18})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-slate-900/40 backdrop-blur-md border border-slate-800 rounded-3xl p-6 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 p-32 bg-purple-500/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-purple-500/10 transition-all duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-slate-900/80 border border-slate-800 flex items-center justify-center",children:e.jsx(Xg,{size:20,className:"text-purple-400"})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"CPU Load"})]}),e.jsxs("div",{className:"flex items-end gap-2 text-white",children:[e.jsxs("span",{className:"text-4xl font-black tracking-tight",children:[Math.round(n.cpu),"%"]}),e.jsx("span",{className:"text-sm font-bold text-slate-500 mb-1.5",children:"Usage"})]}),e.jsx("div",{className:"w-full bg-slate-800 h-1.5 rounded-full mt-4 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-purple-400 transition-all duration-500",style:{width:`${n.cpu}%`}})})]})]}),e.jsxs("div",{className:"bg-slate-900/40 backdrop-blur-md border border-slate-800 rounded-3xl p-6 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 p-32 bg-blue-500/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-blue-500/10 transition-all duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-slate-900/80 border border-slate-800 flex items-center justify-center",children:e.jsx(Sf,{size:20,className:"text-blue-400"})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Memory"})]}),e.jsxs("div",{className:"flex items-end gap-2 text-white",children:[e.jsxs("span",{className:"text-4xl font-black tracking-tight",children:[Math.round(n.memory),"%"]}),e.jsx("span",{className:"text-sm font-bold text-slate-500 mb-1.5",children:"Free"})]}),e.jsx("div",{className:"w-full bg-slate-800 h-1.5 rounded-full mt-4 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-600 to-blue-400 transition-all duration-500",style:{width:`${n.memory}%`}})})]})]}),e.jsxs("div",{className:"bg-slate-900/40 backdrop-blur-md border border-slate-800 rounded-3xl p-6 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 p-32 bg-emerald-500/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-emerald-500/10 transition-all duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-slate-900/80 border border-slate-800 flex items-center justify-center",children:e.jsx(hs,{size:20,className:"text-emerald-400"})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Avg Latency"})]}),e.jsxs("div",{className:"flex items-end gap-2 text-white",children:[e.jsx("span",{className:"text-4xl font-black tracking-tight",children:Math.round(n.latency)}),e.jsx("span",{className:"text-sm font-bold text-slate-500 mb-1.5",children:"ms"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 text-[10px] font-bold text-emerald-400",children:[e.jsx(ql,{size:10,fill:"currentColor"}),e.jsx("span",{children:"Optimal Response Time"})]})]})]}),e.jsxs("div",{className:"bg-slate-900/40 backdrop-blur-md border border-slate-800 rounded-3xl p-6 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 p-32 bg-amber-500/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-amber-500/10 transition-all duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-slate-900/80 border border-slate-800 flex items-center justify-center",children:e.jsx(Hn,{size:20,className:"text-amber-400"})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Uptime"})]}),e.jsxs("div",{className:"flex items-end gap-2 text-white",children:[e.jsx("span",{className:"text-4xl font-black tracking-tight",children:n.uptime}),e.jsx("span",{className:"text-sm font-bold text-slate-500 mb-1.5",children:"30 Days"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 text-[10px] font-bold text-slate-500",children:[e.jsx(Ye,{size:10}),e.jsx("span",{children:"No outages recently"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx("h3",{className:"text-lg font-black text-white pl-2",children:"Service Status"}),e.jsx("div",{className:"bg-slate-900/40 border border-slate-800 rounded-[2rem] overflow-hidden",children:c.map((_,E)=>e.jsxs("div",{className:"p-6 flex items-center justify-between group hover:bg-white/[0.02] transition-colors border-b border-slate-800/50 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${_.status==="operational"?"bg-emerald-500":"bg-amber-500"}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-white group-hover:text-primary-400 transition-colors",children:_.name}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 mt-1",children:[e.jsxs("span",{className:"font-medium",children:["Uptime: ",_.uptime]}),e.jsx("span",{children:""}),e.jsxs("span",{className:"font-medium",children:["Latency: ",_.latency]})]})]})]}),e.jsxs("span",{className:`flex items-center gap-2 px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider border ${j(_.status)}`,children:[S(_.status),_.status]})]},_.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-black text-white pl-2",children:"System Logs"}),e.jsxs("div",{className:"bg-slate-900/40 border border-slate-800 rounded-[2rem] p-6 space-y-6",children:[g.map(_=>e.jsxs("div",{className:"relative pl-6 border-l border-slate-800",children:[e.jsx("div",{className:`absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full border-2 border-slate-900 ${_.type==="info"?"bg-blue-500":_.type==="warning"?"bg-amber-500":_.type==="success"?"bg-emerald-500":"bg-slate-500"}`}),e.jsx("p",{className:"text-xs font-bold text-white mb-1 leading-relaxed",children:_.message}),e.jsxs("span",{className:"text-[10px] font-bold text-slate-500 flex items-center gap-1.5",children:[e.jsx(dt,{size:10})," ",_.timestamp]})]},_.id)),e.jsx("button",{className:"w-full py-4 rounded-xl border border-dashed border-slate-700 text-slate-500 text-xs font-black uppercase tracking-widest hover:bg-slate-800 hover:text-white transition-all",children:"View Master Log"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-blue-600 rounded-[2rem] p-6 text-white shadow-xl shadow-blue-900/20",children:[e.jsxs("div",{className:"flex items-start justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black mb-1",children:"Security Shield"}),e.jsx("p",{className:"text-blue-100/70 text-xs font-bold",children:"Firewall Active & Monitoring"})]}),e.jsx(Mt,{size:28,className:"text-blue-200"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/10 rounded-2xl p-4 backdrop-blur-sm",children:[e.jsx("p",{className:"text-2xl font-black",children:"0"}),e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider opacity-70",children:"Threats Found"})]}),e.jsxs("div",{className:"bg-white/10 rounded-2xl p-4 backdrop-blur-sm",children:[e.jsx("p",{className:"text-2xl font-black",children:"2K+"}),e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider opacity-70",children:"Reqs / Min"})]})]})]})]})]})]})},aw=()=>{const[n,m]=f.useState([]),[c,u]=f.useState({total_revenue:0,plans:{Enterprise:0,Standard:0,Basic:0}}),[g,v]=f.useState(!0),[j,S]=f.useState("All");f.useEffect(()=>{_()},[]);const _=async()=>{try{const[h,b]=await Promise.all([V.get("/api/super-portal/subscriptions/"),V.get("/api/super-portal/stats/")]);m(h.data.payments),u(b.data),v(!1)}catch(h){console.error("Error fetching subscription data",h),v(!1)}},E=h=>{switch(h){case"Enterprise":return"text-purple-400 bg-purple-500/10 border-purple-500/20";case"Standard":return"text-blue-400 bg-blue-500/10 border-blue-500/20";case"Basic":return"text-emerald-400 bg-emerald-500/10 border-emerald-500/20";default:return"text-slate-400 bg-slate-500/10 border-slate-500/20"}},z=j==="All"?n:n.filter(h=>h.plan===j);return e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-10",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-black text-white tracking-tight mb-2",children:"SUBSCRIPTION BILLING"}),e.jsx("p",{className:"text-slate-500 font-medium text-sm lg:text-base",children:"Global revenue stream and payment transaction history"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"p-3 bg-slate-900 border border-slate-800 rounded-2xl text-slate-400 hover:text-white hover:border-slate-700 transition-all",children:e.jsx(Ms,{size:20})}),e.jsxs("div",{className:"px-5 py-3 bg-gradient-to-r from-emerald-600 to-teal-500 rounded-2xl flex items-center gap-3 shadow-lg shadow-emerald-500/20",children:[e.jsx(it,{size:20,className:"text-white"}),e.jsxs("span",{className:"text-white font-black tracking-wide",children:["KES ",c.total_revenue.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-10",children:[e.jsxs("div",{className:"bg-slate-900/40 border border-slate-800 rounded-[2.5rem] p-8 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 p-32 bg-purple-500/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-purple-500/10 transition-all duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("div",{className:"p-4 bg-slate-950 rounded-2xl border border-slate-800",children:e.jsx(It,{className:"text-purple-400",size:24})}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-purple-500/10 border border-purple-500/20 text-purple-400 text-xs font-black uppercase tracking-widest",children:"Enterprise"})]}),e.jsx("h3",{className:"text-3xl font-black text-white mb-1",children:c.plans?.Enterprise||0}),e.jsx("p",{className:"text-slate-500 text-sm font-bold",children:"Active Subscribers"})]})]}),e.jsxs("div",{className:"bg-slate-900/40 border border-slate-800 rounded-[2.5rem] p-8 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 p-32 bg-blue-500/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-blue-500/10 transition-all duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("div",{className:"p-4 bg-slate-950 rounded-2xl border border-slate-800",children:e.jsx(It,{className:"text-blue-400",size:24})}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-500/10 border border-blue-500/20 text-blue-400 text-xs font-black uppercase tracking-widest",children:"Standard"})]}),e.jsx("h3",{className:"text-3xl font-black text-white mb-1",children:c.plans?.Standard||0}),e.jsx("p",{className:"text-slate-500 text-sm font-bold",children:"Active Subscribers"})]})]}),e.jsxs("div",{className:"bg-slate-900/40 border border-slate-800 rounded-[2.5rem] p-8 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 p-32 bg-emerald-500/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-emerald-500/10 transition-all duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("div",{className:"p-4 bg-slate-950 rounded-2xl border border-slate-800",children:e.jsx(It,{className:"text-emerald-400",size:24})}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-xs font-black uppercase tracking-widest",children:"Basic"})]}),e.jsx("h3",{className:"text-3xl font-black text-white mb-1",children:c.plans?.Basic||0}),e.jsx("p",{className:"text-slate-500 text-sm font-bold",children:"Active Subscribers"})]})]})]}),e.jsxs("div",{className:"bg-slate-900/40 border border-slate-800 rounded-[2.5rem] overflow-hidden",children:[e.jsxs("div",{className:"p-8 border-b border-slate-800/50 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsx("h3",{className:"text-xl font-black text-white pl-2",children:"Recent Transactions"}),e.jsx("div",{className:"flex gap-2",children:["All","Enterprise","Standard","Basic"].map(h=>e.jsx("button",{onClick:()=>S(h),className:`px-4 py-2 rounded-xl text-xs font-black uppercase tracking-wider transition-all ${j===h?"bg-white text-slate-950 shadow-lg shadow-white/10":"bg-slate-950 text-slate-500 hover:text-white"}`,children:h},h))})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-800/50 bg-slate-950/20",children:[e.jsx("th",{className:"px-8 py-6 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"School / User"}),e.jsx("th",{className:"px-8 py-6 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Plan Type"}),e.jsx("th",{className:"px-8 py-6 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Amount"}),e.jsx("th",{className:"px-8 py-6 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Date"}),e.jsx("th",{className:"px-8 py-6 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Status"}),e.jsx("th",{className:"px-8 py-6 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] text-right",children:"Reference"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800/30",children:z.length>0?z.map(h=>e.jsxs("tr",{className:"hover:bg-white/[0.02] transition-colors group",children:[e.jsxs("td",{className:"px-8 py-5",children:[e.jsx("span",{className:"block text-sm font-bold text-white group-hover:text-primary-400 transition-colors",children:h.school_name}),e.jsx("span",{className:"text-[10px] text-slate-500 font-mono mt-0.5 block",children:h.transaction_id})]}),e.jsx("td",{className:"px-8 py-5",children:e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${E(h.plan)}`,children:h.plan})}),e.jsx("td",{className:"px-8 py-5",children:e.jsxs("span",{className:"text-sm font-black text-emerald-400",children:["KES ",h.amount.toLocaleString()]})}),e.jsx("td",{className:"px-8 py-5",children:e.jsx("span",{className:"text-xs font-bold text-slate-400",children:h.date})}),e.jsx("td",{className:"px-8 py-5",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${h.status==="COMPLETED"?"bg-emerald-500":"bg-amber-500"}`}),e.jsx("span",{className:`text-[10px] font-black uppercase tracking-wider ${h.status==="COMPLETED"?"text-emerald-500":"text-amber-500"}`,children:h.status})]})}),e.jsx("td",{className:"px-8 py-5 text-right text-[10px] font-mono text-slate-500",children:h.reference})]},h.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-8 py-12 text-center text-slate-500 text-sm",children:"No transaction records found matching the criteria."})})})]})})]})]})},lw=()=>{const{refreshStatus:n}=n0(),[m,c]=f.useState({system:{maintenance_mode:!1,registration_open:!0,debug_mode:!1,allow_api_access:!0},pricing:{currency:"KES",basic_price:2999,standard_price:5999,enterprise_price:14999,trial_days:14},communication:{sms_gateway:"AfricasTalking",sms_active:!0,email_active:!0,push_notifications:!1},security:{force_2fa_admins:!1,session_timeout:60,password_policy:"strong"}}),[u,g]=f.useState(!0),[v,j]=f.useState("system");f.useEffect(()=>{S()},[]);const S=async()=>{try{const C=await V.get("/api/super-portal/settings/");c(C.data),g(!1)}catch(C){console.error("Error fetching settings:",C),Jt.error("Failed to load system settings"),g(!1)}},_=(C,A)=>{c(M=>({...M,[C]:{...M[C],[A]:!M[C][A]}}))},E=(C,A,M)=>{c(k=>({...k,[C]:{...k[C],[A]:M}}))},z=async()=>{const C=Jt.loading("Updating global configurations...");try{await V.post("/api/super-portal/settings/",m),await n(),Jt.success("System settings updated successfully",{id:C})}catch(A){console.error("Error saving settings:",A),Jt.error("Failed to update settings",{id:C})}},h=({id:C,label:A,icon:M})=>e.jsxs("button",{onClick:()=>j(C),className:`flex items-center gap-3 w-full p-4 rounded-xl transition-all font-bold text-sm text-left ${v===C?"bg-gradient-to-r from-primary-600 to-primary-500 text-white shadow-lg shadow-primary-500/20":"bg-transparent text-slate-500 hover:bg-white/[0.03] hover:text-slate-300"}`,children:[e.jsx(M,{size:18}),e.jsx("span",{children:A})]}),b=({checked:C,onChange:A})=>e.jsx("button",{onClick:A,className:`relative w-12 h-6 rounded-full transition-colors duration-300 ${C?"bg-primary-500":"bg-slate-700"}`,children:e.jsx("div",{className:`absolute top-1 left-1 bg-white w-4 h-4 rounded-full transition-transform duration-300 ${C?"translate-x-6":"translate-x-0"}`})});return u?e.jsx("div",{className:"flex items-center justify-center min-h-[500px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-10",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-black text-white tracking-tight mb-2",children:"GLOBAL SETTINGS"}),e.jsx("p",{className:"text-slate-500 font-medium text-sm lg:text-base",children:"Configure system-wide parameters and operational modes"})]}),e.jsxs("button",{onClick:z,className:"flex items-center gap-2 px-6 py-3 bg-white text-slate-950 rounded-2xl font-black uppercase tracking-wider hover:bg-slate-200 transition-colors shadow-xl shadow-white/5 active:scale-95",children:[e.jsx(ma,{size:18}),e.jsx("span",{children:"Save Changes"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-2",children:[e.jsx(h,{id:"system",label:"System Control",icon:Pn}),e.jsx(h,{id:"pricing",label:"Pricing & Plans",icon:It}),e.jsx(h,{id:"communication",label:"Communication",icon:rd}),e.jsx(h,{id:"security",label:"Security & Access",icon:Mt}),e.jsx(h,{id:"database",label:"Database Config",icon:ld})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-slate-900/40 border border-slate-800 rounded-[2.5rem] p-8 min-h-[500px]",children:[v==="system"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[e.jsx(Hn,{className:"text-primary-500"})," Platform Status"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-950/50 rounded-2xl border border-slate-800",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:"Maintenance Mode"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"If enabled, the platform will be inaccessible to all non-admin users."})]}),e.jsx(b,{checked:m.system.maintenance_mode,onChange:()=>_("system","maintenance_mode")})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-950/50 rounded-2xl border border-slate-800",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:"School Registration"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Allow new schools to sign up and create accounts."})]}),e.jsx(b,{checked:m.system.registration_open,onChange:()=>_("system","registration_open")})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[e.jsx(Qg,{className:"text-primary-500"})," Advanced Operations"]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-950/50 rounded-2xl border border-slate-800",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:"Debug Mode"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Show detailed error traces in frontend application."})]}),e.jsx(b,{checked:m.system.debug_mode,onChange:()=>_("system","debug_mode")})]})})]})]}),v==="pricing"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[e.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[e.jsx(It,{className:"text-primary-500"})," Subscription Models"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 pl-2",children:"Base Currency"}),e.jsxs("select",{className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-4 text-white text-sm font-bold focus:ring-2 focus:ring-primary-500/50 outline-none",value:m.pricing.currency,onChange:C=>E("pricing","currency",C.target.value),children:[e.jsx("option",{value:"KES",children:"KES (Kenyan Shilling)"}),e.jsx("option",{value:"USD",children:"USD (US Dollar)"}),e.jsx("option",{value:"NGN",children:"NGN (Nigerian Naira)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 pl-2",children:"Trial Duration (Days)"}),e.jsx("input",{type:"number",className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-4 text-white text-sm font-bold focus:ring-2 focus:ring-primary-500/50 outline-none",value:m.pricing.trial_days,onChange:C=>E("pricing","trial_days",C.target.value)})]})]}),e.jsx("div",{className:"space-y-4",children:["basic","standard","enterprise"].map(C=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-950/50 rounded-2xl border border-slate-800",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-white capitalize",children:[C," Plan"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Monthly billing amount"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 border border-slate-800 rounded-lg px-3 py-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-500",children:m.pricing.currency}),e.jsx("input",{type:"number",className:"w-24 bg-transparent text-white font-bold text-right outline-none",value:m.pricing[`${C}_price`],onChange:A=>E("pricing",`${C}_price`,A.target.value)})]})]},C))})]}),v==="communication"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[e.jsx(Am,{className:"text-primary-500"})," SMS Gateways"]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-slate-950/50 rounded-2xl border border-slate-800 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-bold text-white",children:"SMS Service"}),e.jsx(b,{checked:m.communication.sms_active,onChange:()=>_("communication","sms_active")})]}),m.communication.sms_active&&e.jsxs("div",{className:"pt-4 border-t border-slate-800/50",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 pl-2 mb-2 block",children:"Provider"}),e.jsxs("select",{className:"w-full bg-slate-900 border border-slate-800 rounded-xl p-4 text-white text-sm font-bold focus:ring-2 focus:ring-primary-500/50 outline-none",value:m.communication.sms_gateway,onChange:C=>E("communication","sms_gateway",C.target.value),children:[e.jsx("option",{value:"AfricasTalking",children:"Africa's Talking (Default)"}),e.jsx("option",{value:"Twilio",children:"Twilio"}),e.jsx("option",{value:"Vonage",children:"Vonage"})]})]})]})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[e.jsx(Gt,{className:"text-primary-500"})," Email Services"]}),e.jsxs("div",{className:"p-4 bg-slate-950/50 rounded-2xl border border-slate-800 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:"System Emails"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Send welcome emails and alerts"})]}),e.jsx(b,{checked:m.communication.email_active,onChange:()=>_("communication","email_active")})]})]})]}),v==="security"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[e.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2",children:[e.jsx(Tt,{className:"text-primary-500"})," Access Control"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-950/50 rounded-2xl border border-slate-800",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:"Enforce 2FA for Admins"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Require two-factor authentication for school admins."})]}),e.jsx(b,{checked:m.security.force_2fa_admins,onChange:()=>_("security","force_2fa_admins")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 pl-2",children:"Session Timeout (Minutes)"}),e.jsx("input",{type:"number",className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-4 text-white text-sm font-bold focus:ring-2 focus:ring-primary-500/50 outline-none",value:m.security.session_timeout,onChange:C=>E("security","session_timeout",C.target.value)})]})]})]}),v==="database"&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-in fade-in slide-in-from-right-4 duration-500",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-slate-900 border border-slate-800 flex items-center justify-center mb-6",children:e.jsx(ld,{className:"text-slate-600",size:32})}),e.jsx("h3",{className:"text-xl font-black text-white text-center",children:"Managed Database"}),e.jsx("p",{className:"text-slate-500 text-center max-w-sm mt-2 mb-6",children:"Database configuration is managed by the cloud provider. Direct modifications are restricted."}),e.jsx("button",{className:"px-6 py-3 bg-slate-800 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-slate-700",children:"Check Connections"})]})]})})]})]})},Vc=({icon:n,label:m,value:c,trend:u,color:g})=>e.jsxs("div",{className:"bg-slate-900/40 backdrop-blur-xl border border-slate-800 p-6 rounded-3xl relative overflow-hidden group hover:border-primary-500/30 transition-all duration-500",children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 bg-${g}-500/5 rounded-full blur-3xl -mr-16 -mt-16 group-hover:bg-${g}-500/10 transition-colors`}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:`p-3 bg-${g}-500/10 rounded-2xl w-fit text-${g}-500 mb-4 group-hover:scale-110 transition-transform duration-500`,children:e.jsx(n,{size:24})}),e.jsx("p",{className:"text-slate-500 text-[10px] lg:text-xs font-bold uppercase tracking-widest mb-1",children:m}),e.jsxs("div",{className:"flex items-end gap-2 lg:gap-3",children:[e.jsx("h3",{className:"text-2xl lg:text-3xl font-black text-white",children:c}),u&&e.jsxs("span",{className:"text-emerald-500 text-xs font-bold mb-1 flex items-center gap-1",children:[e.jsx(Dt,{size:12})," ",u]})]})]})]}),rw=()=>{const[n,m]=f.useState({total_schools:0,total_students:0,total_teachers:0}),[c,u]=f.useState(!0);f.useEffect(()=>{g()},[]);const g=async()=>{try{const S=await V.get("/api/super-portal/stats/");m(S.data)}catch{Jt.error("Failed to sync master stats")}finally{u(!1)}},v=[{name:"Mon",schools:40},{name:"Tue",schools:45},{name:"Wed",schools:48},{name:"Thu",schools:60},{name:"Fri",schools:75},{name:"Sat",schools:82},{name:"Sun",schools:n.total_schools||85}],j=[{name:"Enterprise",value:n.plans?.Enterprise||0,color:"#a855f7"},{name:"Standard",value:n.plans?.Standard||0,color:"#3b82f6"},{name:"Basic",value:n.plans?.Basic||0,color:"#64748b"}];return c?null:e.jsxs("div",{className:"animate-in fade-in duration-700",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6 lg:mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-black text-white tracking-tight mb-2",children:"MASTER COMMAND"}),e.jsx("p",{className:"text-slate-500 font-medium tracking-wide text-sm lg:text-base",children:"Infrastructure Overview & System Vitals"})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-slate-900/50 p-2 rounded-2xl border border-slate-800",children:[e.jsxs("div",{className:"px-4 py-2 bg-emerald-500/10 rounded-xl flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-widest",children:"Core Status: Stable"})]}),e.jsx("button",{onClick:g,className:"p-2 text-slate-500 hover:text-white transition-colors",children:e.jsx(ql,{size:18})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(Vc,{icon:qa,label:"Registered Schools",value:n.total_schools||0,trend:"Live Data",color:"primary"}),e.jsx(Vc,{icon:It,label:"Monthly Revenue",value:`KES ${(n.total_revenue||0).toLocaleString()}`,trend:"MRR",color:"emerald"}),e.jsx(Vc,{icon:Ie,label:"Total Population",value:(n.total_students||0)+(n.total_teachers||0),trend:"+8.2%",color:"indigo"}),e.jsx(Vc,{icon:ql,label:"Active Terminals",value:n.active_terminals||0,color:"amber"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-slate-900/40 backdrop-blur-xl border border-slate-800 p-8 rounded-[3rem]",children:[e.jsxs("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-3",children:[e.jsx(Dt,{size:20,className:"text-primary-500"}),"Registration Velocity"]}),e.jsx("div",{className:"h-[250px] lg:h-[300px] w-full min-h-[250px] lg:min-h-[300px]",children:e.jsx(es,{width:"100%",height:"100%",debounce:50,children:e.jsxs(Bi,{data:v,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorSchools",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),e.jsx(pl,{strokeDasharray:"3 3",vertical:!1,stroke:"#1e293b"}),e.jsx(Ea,{dataKey:"name",stroke:"#64748b",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(Aa,{stroke:"#64748b",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(ts,{contentStyle:{backgroundColor:"#0f172a",border:"1px solid #1e293b",borderRadius:"16px"},itemStyle:{color:"#fff"}}),e.jsx(Zl,{type:"monotone",dataKey:"schools",stroke:"#3b82f6",strokeWidth:4,fillOpacity:1,fill:"url(#colorSchools)"})]})})})]}),e.jsxs("div",{className:"bg-slate-900/40 backdrop-blur-xl border border-slate-800 p-8 rounded-[3rem]",children:[e.jsx("h3",{className:"text-xl font-black text-white mb-6",children:"Subscription Tier Mix"}),e.jsx("div",{className:"h-[200px] lg:h-[250px] w-full flex items-center justify-center min-h-[200px] lg:min-h-[250px]",children:e.jsx(es,{width:"100%",height:"100%",debounce:50,children:e.jsxs(Ir,{children:[e.jsx(Gr,{data:j,innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:j.map((S,_)=>e.jsx($a,{fill:S.color},`cell-${_}`))}),e.jsx(ts,{})]})})}),e.jsx("div",{className:"space-y-3 mt-4",children:j.map(S=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:S.color}}),e.jsx("span",{className:"text-xs font-bold text-slate-400",children:S.name})]}),e.jsxs("span",{className:"text-xs font-black text-white",children:[n.total_schools>0?(S.value/n.total_schools*100).toFixed(1):0,"%"]})]},S.name))})]})]}),e.jsx("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{icon:Sf,label:"API Response",status:"Optimal",time:"12ms"},{icon:ql,label:"Memory Usage",status:"Healthy",time:"2.4 GB"},{icon:dt,label:"Next Backup",status:"Scheduled",time:"2:00 AM"},{icon:gt,label:"Global Nodes",status:"Active",time:"12 Locations"}].map((S,_)=>e.jsxs("div",{className:"flex items-center gap-4 bg-slate-950/50 p-4 rounded-2xl border border-slate-900 overflow-hidden relative group",children:[e.jsx("div",{className:"p-2 bg-slate-900 rounded-xl text-slate-400 group-hover:text-primary-500 transition-colors",children:e.jsx(S.icon,{size:18})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:S.label}),e.jsxs("p",{className:"text-xs font-bold text-white",children:[S.status," ",e.jsxs("span",{className:"text-slate-600 font-medium ml-1",children:["(",S.time,")"]})]})]})]},_))})]})},iw=()=>{const[n,m]=f.useState(""),[c,u]=f.useState(""),[g,v]=f.useState(!1),[j,S]=f.useState(!1),_=Le(),E=async z=>{z.preventDefault(),S(!0);try{const h=await V.post("/api/login/",{email:n,password:c,is_admin_portal:!0});if(h.data.success){const b=h.data.user;if(!b.is_superuser){Jt.error("Access Denied: Not a superuser"),S(!1);return}localStorage.setItem("user",JSON.stringify(b)),localStorage.removeItem("portal_slug"),Jt.success("Access Granted. Welcome, Commander."),_("/ultimate-control-center")}}catch(h){console.error("Login error:",h);const b=h.response?.data?.error||"Authentication failed";Jt.error(b)}finally{S(!1)}};return e.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-primary-600/10 rounded-full blur-[120px] animate-pulse"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-rose-600/10 rounded-full blur-[120px] animate-pulse",style:{animationDelay:"1s"}}),e.jsxs("div",{className:"w-full max-w-md relative z-10 transition-all duration-500",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-3xl bg-slate-900 border border-slate-800 shadow-2xl mb-6 group hover:border-primary-500/50 transition-all duration-500",children:e.jsx(Mt,{className:"w-10 h-10 text-primary-500 group-hover:scale-110 transition-transform duration-500"})}),e.jsx("h1",{className:"text-3xl font-black text-white tracking-tight mb-2",children:"ULTIMATE CONTROL"}),e.jsx("p",{className:"text-slate-400 text-sm uppercase tracking-[0.2em] font-medium",children:"Platform Command Center"})]}),e.jsx("div",{className:"bg-slate-900/50 backdrop-blur-xl border border-slate-800 rounded-3xl p-8 shadow-2xl",children:e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider ml-1",children:"Administrator Email"}),e.jsxs("div",{className:"relative group",children:[e.jsx(Gt,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500 group-focus-within:text-primary-500 transition-colors"}),e.jsx("input",{type:"email",required:!0,className:"w-full bg-slate-950 border border-slate-800 rounded-2xl py-4 pl-12 pr-4 text-white focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all",placeholder:"Enter your email",value:n,onChange:z=>m(z.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider ml-1",children:"Access Key"}),e.jsxs("div",{className:"relative group",children:[e.jsx(Tt,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500 group-focus-within:text-primary-500 transition-colors"}),e.jsx("input",{type:g?"text":"password",required:!0,className:"w-full bg-slate-950 border border-slate-800 rounded-2xl py-4 pl-12 pr-12 text-white focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all",placeholder:"",value:c,onChange:z=>u(z.target.value)}),e.jsx("button",{type:"button",onClick:()=>v(!g),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white transition-colors",children:g?e.jsx(Jg,{size:20}):e.jsx(Un,{size:20})})]})]}),e.jsx("button",{type:"submit",disabled:j,className:`w-full bg-gradient-to-r from-primary-600 to-primary-500 hover:from-primary-500 hover:to-primary-400 text-white font-bold py-4 rounded-2xl shadow-lg shadow-primary-500/20 flex items-center justify-center gap-2 group transition-all duration-300 ${j?"opacity-70 cursor-wait":""}`,children:j?e.jsx("div",{className:"w-6 h-6 border-3 border-white/30 border-t-white rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:["AUTHORIZE ACCESS",e.jsx(Za,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]})}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:"text-slate-600 text-xs font-medium tracking-wide",children:"SECURE TERMINAL  ENCRYPTED SESSION  v2.0.4"})})]})]})},nw=({icon:n,label:m,path:c,active:u,onClick:g})=>e.jsxs("button",{onClick:g,className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300 group ${u?"bg-primary-500/10 text-primary-500 font-bold border border-primary-500/20 shadow-lg shadow-primary-500/5":"text-slate-400 hover:bg-slate-800/50 hover:text-slate-200"}`,children:[e.jsx(n,{size:20,className:u?"text-primary-500":"text-slate-500 group-hover:text-slate-300"}),e.jsx("span",{className:"flex-1 text-left text-sm tracking-wide",children:m}),u&&e.jsx(ds,{size:14,className:"text-primary-500"})]}),ow=({onClose:n})=>{const m=Le(),c=Ya(),u=JSON.parse(localStorage.getItem("user")||"{}"),g=S=>{m(S),n&&n()},v=[{icon:kf,label:"Dashboard",path:"/ultimate-control-center"},{icon:Hn,label:"Manage Schools",path:"/ultimate-control-center/schools"},{icon:_f,label:"System Portals",path:"/ultimate-control-center/portals"},{icon:hs,label:"Platform Health",path:"/ultimate-control-center/health"},{icon:It,label:"Subscriptions",path:"/ultimate-control-center/billing"},{icon:Pn,label:"Global Settings",path:"/ultimate-control-center/settings"}],j=()=>{localStorage.removeItem("user"),m("/super-login")};return e.jsxs("div",{className:"w-72 bg-slate-950 border-r border-slate-900 flex flex-col h-screen overflow-hidden relative z-50",children:[e.jsx("div",{className:"p-8 pb-4",children:e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-600 rounded-xl flex items-center justify-center shadow-lg shadow-primary-500/20",children:e.jsx(Mt,{size:22,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-black text-white tracking-tight leading-none",children:"EDUMANAGE"}),e.jsx("span",{className:"text-[10px] text-primary-500 font-black tracking-widest uppercase",children:"Hyperion Core"})]})]})}),e.jsxs("nav",{className:"flex-1 px-4 space-y-2 overflow-y-auto custom-scrollbar",children:[e.jsx("div",{className:"px-4 py-2 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-2",children:"Main Terminal"}),v.map(S=>e.jsx(nw,{icon:S.icon,label:S.label,path:S.path,active:c.pathname===S.path,onClick:()=>g(S.path)},S.path))]}),e.jsxs("div",{className:"p-4 m-4 rounded-2xl bg-slate-900/50 border border-slate-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 border-2 border-primary-500/30 flex items-center justify-center font-bold text-primary-500",children:"AD"}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("p",{className:"text-sm font-bold text-white truncate",children:u.first_name||"Administrator"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:"Master Control"})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-800",children:[e.jsx(Ui,{}),e.jsxs("button",{onClick:j,className:"flex items-center gap-2 text-rose-500 text-xs font-bold hover:text-rose-400 transition-colors",children:[e.jsx(Fr,{size:14}),"EXIT CORE"]})]})]})]})},dw=()=>{const[n,m]=f.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col lg:flex-row",children:[e.jsxs("header",{className:"lg:hidden flex items-center justify-between p-4 bg-slate-900 border-b border-slate-800 sticky top-0 z-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-black text-xs",children:"HC"})}),e.jsx("span",{className:"font-black text-white text-sm tracking-tight text-[10px] uppercase",children:"Hyperion Core"})]}),e.jsx("button",{onClick:()=>m(!n),className:"p-2 text-slate-400 hover:text-white transition-colors",children:n?e.jsx(Ve,{size:24}):e.jsx(Hr,{size:24})})]}),e.jsxs("div",{className:`
                fixed inset-y-0 left-0 z-50 transition-all duration-300 lg:translate-x-0
                ${n?"translate-x-0":"-translate-x-full"}
            `,children:[e.jsx("div",{className:`fixed inset-0 bg-slate-950/60 backdrop-blur-sm transition-opacity duration-300 lg:hidden ${n?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>m(!1)}),e.jsx(ow,{onClose:()=>m(!1)})]}),e.jsxs("main",{className:"flex-1 lg:ml-72 p-4 lg:p-8 min-h-screen relative overflow-x-hidden",children:[e.jsx("div",{className:"fixed top-0 right-0 w-[300px] lg:w-[500px] h-[300px] lg:h-[500px] bg-primary-600/5 rounded-full blur-[80px] lg:blur-[120px] -z-0 pointer-events-none"}),e.jsx("div",{className:"fixed bottom-0 left-0 lg:left-72 w-[300px] lg:w-[500px] h-[300px] lg:h-[500px] bg-rose-600/5 rounded-full blur-[80px] lg:blur-[120px] -z-0 pointer-events-none"}),e.jsx("div",{className:"relative z-10 max-w-full lg:max-w-7xl mx-auto",children:e.jsx(Sa,{})})]})]})},cw=()=>e.jsxs("div",{className:"min-h-screen bg-slate-950 flex shadow-inner items-center justify-center p-6 sm:p-12 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-primary-600/10 rounded-full blur-[120px] pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-rose-600/10 rounded-full blur-[120px] pointer-events-none"}),e.jsxs("div",{className:"max-w-2xl w-full bg-slate-900/50 backdrop-blur-xl border border-slate-800 p-12 rounded-[3rem] text-center shadow-2xl relative z-10 animate-in zoom-in-95 duration-500",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-amber-500 to-orange-600 rounded-3xl flex items-center justify-center shadow-lg shadow-orange-500/20 mx-auto mb-10 rotate-3",children:e.jsx(Wg,{className:"text-white animate-bounce",size:48})}),e.jsxs("h1",{className:"text-4xl sm:text-5xl font-black text-white tracking-tight mb-6 leading-tight",children:["SYSTEM UNDER ",e.jsx("br",{}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-orange-400 underline decoration-orange-500/30",children:"MAINTENANCE."})]}),e.jsx("p",{className:"text-slate-400 text-lg sm:text-xl font-medium mb-10 leading-relaxed max-w-md mx-auto",children:"We're currently performing some critical system updates to enhance your experience. Master Control remains operational for technical staff."}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-10",children:[e.jsxs("div",{className:"bg-slate-950/50 border border-slate-800 p-6 rounded-2xl flex flex-col items-center",children:[e.jsx("span",{className:"text-amber-500 font-black text-2xl mb-1",children:"Expected Up"}),e.jsx("span",{className:"text-slate-500 text-sm font-bold uppercase tracking-widest",children:"~ 15 Minutes"})]}),e.jsxs("div",{className:"bg-slate-950/50 border border-slate-800 p-6 rounded-2xl flex flex-col items-center",children:[e.jsx("span",{className:"text-primary-500 font-black text-2xl mb-1",children:"Status"}),e.jsx("span",{className:"text-slate-500 text-sm font-bold uppercase tracking-widest",children:"Optimizing DB"})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-3 text-slate-500 bg-slate-950/30 py-4 rounded-2xl border border-slate-800/50",children:[e.jsx(On,{size:18,className:"text-amber-500"}),e.jsx("span",{className:"text-sm font-bold tracking-wide",children:"Regular portal access is temporarily suspended."})]})]})]}),xw=()=>JSON.parse(localStorage.getItem("user")||"null")?e.jsx(Sa,{}):e.jsx(os,{to:"/login",replace:!0}),mw=()=>{const n=JSON.parse(localStorage.getItem("user")||"null");return n?!n.is_superuser&&n.role!=="admin"?n.role==="teacher"&&n.teacher_id?e.jsx(os,{to:`/teacher/${n.teacher_id}`,replace:!0}):n.role==="student"&&n.student_id?e.jsx(os,{to:`/student/${n.student_id}`,replace:!0}):n.role==="driver"?e.jsx(os,{to:"/driver-portal/dashboard",replace:!0}):n.role==="staff"||n.role==="accountant"?e.jsx(os,{to:"/finance-portal/dashboard",replace:!0}):n.role==="food manager"?e.jsx(os,{to:"/food-portal/dashboard",replace:!0}):n.role==="transport manager"?e.jsx(os,{to:"/transport-portal/dashboard",replace:!0}):(localStorage.removeItem("user"),e.jsx(os,{to:"/login",replace:!0})):e.jsx(Sa,{}):e.jsx(os,{to:"/login",replace:!0})},uw=()=>{const n=JSON.parse(localStorage.getItem("user")||"null");return!n||!n.is_superuser?e.jsx(os,{to:"/super-login",replace:!0}):e.jsx(Sa,{})},Rr=({feature:n,requiredPlan:m,children:c})=>{const{hasFeature:u,loading:g}=Nt();return g?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):u(n)?c||e.jsx(Sa,{}):e.jsx(Kv,{feature:n.replace("_"," ").toLowerCase(),requiredPlan:m})},hw=({children:n})=>{const{config:m}=Nt(),{maintenance_mode:c,loading:u}=n0(),g=JSON.parse(localStorage.getItem("user")||"null");return f.useEffect(()=>{m?.school_name&&(document.title=`${m.school_name} | EduManage`)},[m]),!u&&c&&(!g||!g.is_superuser)?e.jsx(cw,{}):n};function pw(){return f.useEffect(()=>{const n=localStorage.getItem("theme")||"dark";n==="dark"?document.documentElement.classList.add("dark"):n==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches&&document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");const m=window.matchMedia("(prefers-color-scheme: dark)"),c=u=>{localStorage.getItem("theme")==="auto"&&(u.matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))};return m.addEventListener("change",c),()=>m.removeEventListener("change",c)},[]),e.jsx($y,{children:e.jsxs($v,{children:[e.jsx(Bj,{position:"top-right",reverseOrder:!1}),e.jsx(_g,{children:e.jsx(hw,{children:e.jsx(js.Suspense,{fallback:null,children:e.jsxs(Sg,{children:[e.jsx(je,{path:"/",element:e.jsx(Zy,{})}),e.jsx(je,{path:"/pricing",element:e.jsx(Vy,{})}),e.jsx(je,{path:"/signup",element:e.jsx(Ky,{})}),e.jsx(je,{path:"/login",element:e.jsx(Xy,{})}),e.jsx(je,{path:"/super-login",element:e.jsx(iw,{})}),e.jsx(je,{path:"/legal/:type",element:e.jsx(Qy,{})}),e.jsx(je,{path:"/driver-login",element:e.jsx(ky,{})}),e.jsx(je,{path:"/teacher-login",element:e.jsx(Ay,{})}),e.jsx(je,{path:"/finance-login",element:e.jsx(zy,{})}),e.jsx(je,{path:"/food-login",element:e.jsx(Ty,{})}),e.jsx(je,{path:"/transport-login",element:e.jsx(Ly,{})}),e.jsx(je,{path:"/student-login",element:e.jsx(Wy,{})}),e.jsx(je,{path:"/portal/:slug/:role",element:e.jsx(Jy,{})}),e.jsxs(je,{element:e.jsx(mw,{}),children:[e.jsxs(je,{element:e.jsx(Vv,{}),children:[e.jsx(je,{path:"/dashboard",element:e.jsx(Xv,{})}),e.jsx(je,{path:"/students",element:e.jsx(Ij,{})}),e.jsx(je,{path:"/students/template",element:e.jsx(os,{to:"/students",replace:!0})}),e.jsx(je,{path:"/students/create",element:e.jsx(qj,{})}),e.jsx(je,{path:"/students/:id",element:e.jsx(Jp,{})}),e.jsx(je,{path:"/students/:id/edit",element:e.jsx($j,{})}),e.jsx(je,{path:"/teachers",element:e.jsx(Xj,{})}),e.jsx(je,{path:"/teachers/create",element:e.jsx(Jj,{})}),e.jsx(je,{path:"/teachers/:id",element:e.jsx(eN,{})}),e.jsx(je,{path:"/teachers/:id/schedule",element:e.jsx(sN,{})}),e.jsxs(je,{element:e.jsx(Rr,{feature:"FINANCE_MANAGEMENT",requiredPlan:"Standard"}),children:[e.jsx(je,{path:"/finance",element:e.jsx(rN,{})}),e.jsx(je,{path:"/finance/transactions",element:e.jsx(iN,{})}),e.jsx(je,{path:"/finance/record",element:e.jsx(nN,{})}),e.jsx(je,{path:"/finance/transport-expenses",element:e.jsx(_m,{})}),e.jsx(je,{path:"/finance/salaries",element:e.jsx(a0,{})})]}),e.jsx(je,{element:e.jsx(Rr,{feature:"SCHEDULE",requiredPlan:"Basic"}),children:e.jsx(je,{path:"/schedule",element:e.jsx(dN,{})})}),e.jsxs(je,{element:e.jsx(Rr,{feature:"ACADEMIC_MANAGEMENT",requiredPlan:"Basic"}),children:[e.jsx(je,{path:"/academics",element:e.jsx(xN,{})}),e.jsx(je,{path:"/academic-management",element:e.jsx(kN,{})})]}),e.jsxs(je,{element:e.jsx(Rr,{feature:"HR_MANAGEMENT",requiredPlan:"Standard"}),children:[e.jsx(je,{path:"/hr/staff",element:e.jsx(uN,{})}),e.jsx(je,{path:"/hr/staff/create",element:e.jsx(fN,{})}),e.jsx(je,{path:"/hr/staff/:id/edit",element:e.jsx(bN,{})}),e.jsx(je,{path:"/hr/staff/:id",element:e.jsx(hN,{})}),e.jsx(je,{path:"/hr/approvals",element:e.jsx(gN,{})}),e.jsx(je,{path:"/hr/supervisors",element:e.jsx(wN,{})})]}),e.jsx(je,{element:e.jsx(Rr,{feature:"COMMUNICATION",requiredPlan:"Standard"}),children:e.jsx(je,{path:"/communication",element:e.jsx(SN,{})})}),e.jsx(je,{path:"/settings",element:e.jsx(cN,{})}),e.jsx(je,{path:"/subscription",element:e.jsx(CN,{})})]}),e.jsx(je,{element:e.jsx(uw,{}),children:e.jsxs(je,{element:e.jsx(dw,{}),children:[e.jsx(je,{path:"/ultimate-control-center",element:e.jsx(rw,{})}),e.jsx(je,{path:"/ultimate-control-center/schools",element:e.jsx(ew,{})}),e.jsx(je,{path:"/ultimate-control-center/portals",element:e.jsx(tw,{})}),e.jsx(je,{path:"/ultimate-control-center/health",element:e.jsx(sw,{})}),e.jsx(je,{path:"/ultimate-control-center/billing",element:e.jsx(aw,{})}),e.jsx(je,{path:"/ultimate-control-center/settings",element:e.jsx(lw,{})})]})})]}),e.jsxs(je,{element:e.jsx(xw,{}),children:[e.jsx(je,{element:e.jsx(Rr,{feature:"FINANCE_MANAGEMENT",requiredPlan:"Standard"}),children:e.jsxs(je,{path:"/finance-portal",element:e.jsx(AN,{}),children:[e.jsx(je,{path:"dashboard",element:e.jsx(ON,{})}),e.jsx(je,{path:"accounts",element:e.jsx(PN,{})}),e.jsx(je,{path:"accounts/:id",element:e.jsx(BN,{})}),e.jsx(je,{path:"transactions",element:e.jsx(FN,{})}),e.jsx(je,{path:"transactions/:id",element:e.jsx(UN,{})}),e.jsx(je,{path:"reports",element:e.jsx(HN,{})}),e.jsx(je,{path:"transport-expenses",element:e.jsx(_m,{})}),e.jsx(je,{path:"salaries",element:e.jsx(a0,{})}),e.jsx(je,{path:"food",element:e.jsx(Vf,{})}),e.jsx(je,{path:"expenses",element:e.jsx(Gy,{})}),e.jsx(je,{index:!0,element:e.jsx(os,{to:"dashboard",replace:!0})})]})}),e.jsx(je,{element:e.jsx(Rr,{feature:"FOOD_MANAGEMENT",requiredPlan:"Enterprise"}),children:e.jsxs(je,{path:"/food-portal",element:e.jsx(GN,{}),children:[e.jsx(je,{index:!0,element:e.jsx(os,{to:"dashboard",replace:!0})}),e.jsx(je,{path:"dashboard",element:e.jsx(qN,{})}),e.jsx(je,{path:"students",element:e.jsx(ZN,{})}),e.jsx(je,{path:"students/:id",element:e.jsx($N,{})}),e.jsx(je,{path:"menu",element:e.jsx(YN,{})}),e.jsx(je,{path:"serving-list",element:e.jsx(VN,{})})]})}),e.jsx(je,{element:e.jsx(Rr,{feature:"TRANSPORT_MANAGEMENT",requiredPlan:"Enterprise"}),children:e.jsxs(je,{path:"/transport-portal",element:e.jsx(XN,{}),children:[e.jsx(je,{index:!0,element:e.jsx(os,{to:"dashboard",replace:!0})}),e.jsx(je,{path:"dashboard",element:e.jsx(QN,{})}),e.jsx(je,{path:"students",element:e.jsx(JN,{})}),e.jsx(je,{path:"students/:id",element:e.jsx(py,{})}),e.jsx(je,{path:"routes",element:e.jsx(fy,{})}),e.jsx(je,{path:"routes/:id",element:e.jsx(by,{})}),e.jsx(je,{path:"vehicles",element:e.jsx(gy,{})}),e.jsx(je,{path:"vehicles/:id",element:e.jsx(vy,{})}),e.jsx(je,{path:"drivers",element:e.jsx(jy,{})}),e.jsx(je,{path:"drivers/:id",element:e.jsx(Ny,{})})]})}),e.jsxs(je,{path:"/driver-portal",element:e.jsx(wy,{}),children:[e.jsx(je,{path:"dashboard",element:e.jsx(Sy,{})}),e.jsx(je,{path:"expenses",element:e.jsx(Cy,{})}),e.jsx(je,{path:"profile",element:e.jsx(Ey,{})})]}),e.jsxs(je,{path:"/teacher/:id",element:e.jsx(Dy,{}),children:[e.jsx(je,{index:!0,element:e.jsx(Ry,{})}),e.jsx(je,{path:"class",element:e.jsx(Oy,{})}),e.jsx(je,{path:"student/:id",element:e.jsx(Fy,{})}),e.jsx(je,{path:"student/:id/report",element:e.jsx(ef,{})}),e.jsx(je,{path:"academics",element:e.jsx(Hy,{})}),e.jsx(je,{path:"attendance",element:e.jsx(Py,{})}),e.jsx(je,{path:"schedule",element:e.jsx(By,{})}),e.jsx(je,{path:"requests",element:e.jsx(Iy,{})})]}),e.jsx(je,{path:"/student/:id",element:e.jsx(Jp,{})}),e.jsx(je,{path:"/students/:id/academic-report",element:e.jsx(ef,{})})]})]})})})})]})})}function Hm(n){let m=null;if(document.cookie&&document.cookie!==""){const c=document.cookie.split(";");for(let u=0;u<c.length;u++){const g=c[u].trim();if(g.substring(0,n.length+1)===n+"="){m=decodeURIComponent(g.substring(n.length+1));break}}}return m}async function fw(){try{return await V.get("/api/csrf/"),console.log("CSRF token fetched successfully"),!0}catch(n){return console.error("Failed to fetch CSRF token:",n),!1}}let Sm=!1;const Im=async()=>{!Sm&&!Hm("csrftoken")&&(await fw(),Sm=!0)};Im();V.defaults.xsrfCookieName="csrftoken";V.defaults.xsrfHeaderName="X-CSRFToken";V.defaults.withCredentials=!0;V.interceptors.request.use(async n=>{if(n.url&&n.url.includes("/api/csrf/"))return n;await Im();const m=Hm("csrftoken");m&&["post","put","patch","delete"].includes(n.method?.toLowerCase())&&(n.headers["X-CSRFToken"]=m);const c=localStorage.getItem("portal_slug");return c&&(n.headers["X-Portal-Slug"]=c),n},n=>Promise.reject(n));V.interceptors.response.use(n=>n,async n=>{if(n.response?.status===403){console.error("CSRF token missing or invalid. Attempting to refresh..."),Sm=!1;const m=await Im();if(!n.config._retry&&m){n.config._retry=!0;const c=Hm("csrftoken");if(c)return n.config.headers["X-CSRFToken"]=c,V(n.config)}}return Promise.reject(n)});lv.createRoot(document.getElementById("root")).render(e.jsx(f.StrictMode,{children:e.jsx(pw,{})}));
