import{r as s,e as c,j as e}from"./vendor-Cr6tcs86.js";import{w as u,D as g,c as r}from"./ui-kKL2mqtN.js";const v=()=>{const[d,x]=s.useState([]),[a,o]=s.useState({total_revenue:0,plans:{Enterprise:0,Standard:0,Basic:0}}),[j,i]=s.useState(!0),[l,p]=s.useState("All");s.useEffect(()=>{m()},[]);const m=async()=>{try{const[t,h]=await Promise.all([c.get("/api/super-portal/subscriptions/"),c.get("/api/super-portal/stats/")]);x(t.data.payments),o(h.data),i(!1)}catch(t){console.error("Error fetching subscription data",t),i(!1)}},b=t=>{switch(t){case"Enterprise":return"text-purple-400 bg-purple-500/10 border-purple-500/20";case"Standard":return"text-blue-400 bg-blue-500/10 border-blue-500/20";case"Basic":return"text-emerald-400 bg-emerald-500/10 border-emerald-500/20";default:return"text-slate-400 bg-slate-500/10 border-slate-500/20"}},n=l==="All"?d:d.filter(t=>t.plan===l);return e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-10",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-black text-white tracking-tight mb-2",children:"SUBSCRIPTION BILLING"}),e.jsx("p",{className:"text-slate-500 font-medium text-sm lg:text-base",children:"Global revenue stream and payment transaction history"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"p-3 bg-slate-900 border border-slate-800 rounded-2xl text-slate-400 hover:text-white hover:border-slate-700 transition-all",children:e.jsx(u,{size:20})}),e.jsxs("div",{className:"px-5 py-3 bg-gradient-to-r from-emerald-600 to-teal-500 rounded-2xl flex items-center gap-3 shadow-lg shadow-emerald-500/20",children:[e.jsx(g,{size:20,className:"text-white"}),e.jsxs("span",{className:"text-white font-black tracking-wide",children:["KES ",a.total_revenue.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-10",children:[e.jsxs("div",{className:"bg-slate-900/40 border border-slate-800 rounded-[2.5rem] p-8 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 p-32 bg-purple-500/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-purple-500/10 transition-all duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("div",{className:"p-4 bg-slate-950 rounded-2xl border border-slate-800",children:e.jsx(r,{className:"text-purple-400",size:24})}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-purple-500/10 border border-purple-500/20 text-purple-400 text-xs font-black uppercase tracking-widest",children:"Enterprise"})]}),e.jsx("h3",{className:"text-3xl font-black text-white mb-1",children:a.plans?.Enterprise||0}),e.jsx("p",{className:"text-slate-500 text-sm font-bold",children:"Active Subscribers"})]})]}),e.jsxs("div",{className:"bg-slate-900/40 border border-slate-800 rounded-[2.5rem] p-8 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 p-32 bg-blue-500/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-blue-500/10 transition-all duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("div",{className:"p-4 bg-slate-950 rounded-2xl border border-slate-800",children:e.jsx(r,{className:"text-blue-400",size:24})}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-500/10 border border-blue-500/20 text-blue-400 text-xs font-black uppercase tracking-widest",children:"Standard"})]}),e.jsx("h3",{className:"text-3xl font-black text-white mb-1",children:a.plans?.Standard||0}),e.jsx("p",{className:"text-slate-500 text-sm font-bold",children:"Active Subscribers"})]})]}),e.jsxs("div",{className:"bg-slate-900/40 border border-slate-800 rounded-[2.5rem] p-8 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 p-32 bg-emerald-500/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-emerald-500/10 transition-all duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("div",{className:"p-4 bg-slate-950 rounded-2xl border border-slate-800",children:e.jsx(r,{className:"text-emerald-400",size:24})}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-xs font-black uppercase tracking-widest",children:"Basic"})]}),e.jsx("h3",{className:"text-3xl font-black text-white mb-1",children:a.plans?.Basic||0}),e.jsx("p",{className:"text-slate-500 text-sm font-bold",children:"Active Subscribers"})]})]})]}),e.jsxs("div",{className:"bg-slate-900/40 border border-slate-800 rounded-[2.5rem] overflow-hidden",children:[e.jsxs("div",{className:"p-8 border-b border-slate-800/50 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsx("h3",{className:"text-xl font-black text-white pl-2",children:"Recent Transactions"}),e.jsx("div",{className:"flex gap-2",children:["All","Enterprise","Standard","Basic"].map(t=>e.jsx("button",{onClick:()=>p(t),className:`px-4 py-2 rounded-xl text-xs font-black uppercase tracking-wider transition-all ${l===t?"bg-white text-slate-950 shadow-lg shadow-white/10":"bg-slate-950 text-slate-500 hover:text-white"}`,children:t},t))})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-800/50 bg-slate-950/20",children:[e.jsx("th",{className:"px-8 py-6 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"School / User"}),e.jsx("th",{className:"px-8 py-6 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Plan Type"}),e.jsx("th",{className:"px-8 py-6 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Amount"}),e.jsx("th",{className:"px-8 py-6 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Date"}),e.jsx("th",{className:"px-8 py-6 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Status"}),e.jsx("th",{className:"px-8 py-6 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] text-right",children:"Reference"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800/30",children:n.length>0?n.map(t=>e.jsxs("tr",{className:"hover:bg-white/[0.02] transition-colors group",children:[e.jsxs("td",{className:"px-8 py-5",children:[e.jsx("span",{className:"block text-sm font-bold text-white group-hover:text-primary-400 transition-colors",children:t.school_name}),e.jsx("span",{className:"text-[10px] text-slate-500 font-mono mt-0.5 block",children:t.transaction_id})]}),e.jsx("td",{className:"px-8 py-5",children:e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${b(t.plan)}`,children:t.plan})}),e.jsx("td",{className:"px-8 py-5",children:e.jsxs("span",{className:"text-sm font-black text-emerald-400",children:["KES ",t.amount.toLocaleString()]})}),e.jsx("td",{className:"px-8 py-5",children:e.jsx("span",{className:"text-xs font-bold text-slate-400",children:t.date})}),e.jsx("td",{className:"px-8 py-5",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t.status==="COMPLETED"?"bg-emerald-500":"bg-amber-500"}`}),e.jsx("span",{className:`text-[10px] font-black uppercase tracking-wider ${t.status==="COMPLETED"?"text-emerald-500":"text-amber-500"}`,children:t.status})]})}),e.jsx("td",{className:"px-8 py-5 text-right text-[10px] font-mono text-slate-500",children:t.reference})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-8 py-12 text-center text-slate-500 text-sm",children:"No transaction records found matching the criteria."})})})]})})]})]})};export{v as default};
