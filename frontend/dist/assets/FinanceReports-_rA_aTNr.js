import{r as n,j as e,e as k}from"./vendor-Cr6tcs86.js";import{B as m}from"./index-41VSs_U4.js";import{ah as v,v as w,D as y,s as h,t as S,W as C,a8 as z,a9 as L}from"./ui-BBn2VFCU.js";import{R as o,A as R,C as b,X as f,Y as p,T as c,a as _,B as D,d as A,P,b as E,c as K}from"./charts-Fmv3L88u.js";const O=()=>{const[x,j]=n.useState(null),[g,u]=n.useState(!0);if(n.useEffect(()=>{(async()=>{try{const s=await k.get("/api/finance/reports/");j(s.data)}catch(s){console.error("Error fetching reports",s)}finally{u(!1)}})()},[]),g)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-950",children:e.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-slate-200 dark:border-slate-800 border-t-indigo-600 animate-spin"})});if(!x)return e.jsx("div",{className:"p-8 text-center text-slate-500",children:"No report data available."});const{daily_collection:N=[],payment_methods:r=[],debt_by_grade:i=[],comparison:t={this_month:0,last_month:0}}=x,l=["#6366f1","#10b981","#f59e0b","#ef4444","#8b5cf6"],d=t.last_month>0?(t.this_month-t.last_month)/t.last_month*100:100;return e.jsxs("div",{className:"p-4 md:p-8 max-w-[1400px] mx-auto space-y-6 min-h-screen bg-slate-50/50 dark:bg-slate-950/20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 pb-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Financial Intelligence"}),e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Deep dive analytics and performance auditing"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(m,{variant:"outline",className:"h-10 px-4 text-xs font-semibold bg-white dark:bg-slate-900 shadow-sm",children:[e.jsx(v,{size:16,className:"mr-2"})," Period"]}),e.jsxs(m,{variant:"primary",className:"h-10 px-4 text-xs font-semibold bg-indigo-600 border-none shadow-sm",children:[e.jsx(w,{size:16,className:"mr-2"})," PDF Report"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-500/10 rounded-lg",children:e.jsx(y,{className:"text-indigo-600",size:20})}),e.jsxs("div",{className:`flex items-center gap-1 text-[10px] font-bold px-2 py-1 rounded-md ${d>=0?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"}`,children:[d>=0?e.jsx(h,{size:12}):e.jsx(S,{size:12}),Math.abs(d).toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Revenue (MTD)"}),e.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mt-1",children:["KES ",t.this_month.toLocaleString()]}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-2 font-medium",children:["Prev Month: ",t.last_month.toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-2 bg-amber-50 dark:bg-amber-500/10 rounded-lg",children:e.jsx(C,{className:"text-amber-600",size:20})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Peak Arrears"}),e.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mt-1",children:i[0]?.grade||"N/A"}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-2 font-medium",children:["Outstanding: KES ",i[0]?.amount.toLocaleString()||"0"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-2 bg-emerald-50 dark:bg-emerald-500/10 rounded-lg",children:e.jsx(z,{className:"text-emerald-600",size:20})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Primary Channel"}),e.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mt-1",children:r[0]?.name||"N/A"}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-2 font-medium",children:["Volume: KES ",r[0]?.value.toLocaleString()||"0"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 pb-12",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2 mb-8",children:[e.jsx(h,{size:18,className:"text-indigo-600"})," Collection Momentum"]}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(o,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(R,{data:N,margin:{left:-20},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colAmt",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})}),e.jsx(b,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0"}),e.jsx(f,{dataKey:"date",tick:{fontSize:10,fill:"#64748b",fontWeight:600},axisLine:!1,tickLine:!1,dy:10}),e.jsx(p,{tick:{fontSize:10,fill:"#64748b",fontWeight:600},axisLine:!1,tickLine:!1,tickFormatter:a=>`${a/1e3}k`}),e.jsx(c,{contentStyle:{borderRadius:"8px",border:"1px solid #e2e8f0"}}),e.jsx(_,{type:"monotone",dataKey:"amount",stroke:"#6366f1",strokeWidth:3,fill:"url(#colAmt)"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2 mb-8",children:[e.jsx(L,{size:18,className:"text-amber-500"})," Grade Exposure"]}),e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(o,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(D,{data:i,layout:"vertical",children:[e.jsx(b,{strokeDasharray:"3 3",horizontal:!0,vertical:!1,stroke:"#e2e8f0"}),e.jsx(f,{type:"number",hide:!0}),e.jsx(p,{dataKey:"grade",type:"category",tick:{fontSize:10,fill:"#64748b",fontWeight:700},axisLine:!1,tickLine:!1,width:60}),e.jsx(c,{cursor:{fill:"transparent"},contentStyle:{borderRadius:"8px",border:"1px solid #e2e8f0"}}),e.jsx(A,{dataKey:"amount",fill:"#f59e0b",radius:[0,4,4,0],barSize:20})]})})})]}),e.jsx("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm lg:col-span-2",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white mb-2",children:"Payment Channels"}),e.jsx("p",{className:"text-slate-500 text-xs font-medium mb-8",children:"Revenue source distribution across multiple gateways"}),e.jsx("div",{className:"space-y-3",children:r.map((a,s)=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-800 transition-hover hover:border-indigo-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:l[s%l.length]}}),e.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300 uppercase tracking-tight",children:a.name})]}),e.jsxs("span",{className:"text-sm font-black text-slate-900 dark:text-white",children:["KES ",a.value.toLocaleString()]})]},s))})]}),e.jsxs("div",{className:"h-64 w-full md:w-1/2 relative flex items-center justify-center",children:[e.jsx(o,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(P,{children:[e.jsx(E,{data:r,innerRadius:70,outerRadius:90,paddingAngle:8,dataKey:"value",cornerRadius:8,children:r.map((a,s)=>e.jsx(K,{fill:l[s%l.length]},s))}),e.jsx(c,{})]})}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center flex-col pointer-events-none",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Gateway"}),e.jsx("span",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Total"})]})]})]})})]})]})};export{O as default};
