import{u as p,r as t,e as j,j as e}from"./vendor-Cr6tcs86.js";import"./index-CiVwWrVG.js";import{j as v,ah as N,m as w,a5 as k}from"./ui-BBn2VFCU.js";const L=()=>{const c=p(),[o,x]=t.useState([]),[d,n]=t.useState([]),[u,m]=t.useState(!0),[a,g]=t.useState(""),[r,h]=t.useState("ALL");t.useEffect(()=>{b()},[]),t.useEffect(()=>{f()},[a,r,o]);const b=async()=>{try{const s=await j.get("/api/food/students/");x(s.data.students||[]),n(s.data.students||[])}catch(s){console.error(s)}finally{m(!1)}},f=()=>{let s=[...o||[]];if(a){const l=a.toLowerCase();s=s.filter(i=>(i.name||"").toLowerCase().includes(l)||(i.admission_number||"").toLowerCase().includes(l))}r!=="ALL"&&(s=s.filter(l=>l.status===r)),n(s)};return u?e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Student Accounts"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Manage food subscriptions and balances"})]})}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col md:flex-row gap-4 justify-between items-center",children:[e.jsxs("div",{className:"relative w-full md:w-96",children:[e.jsx(v,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search student...",value:a,onChange:s=>g(s.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-orange-500 outline-none"})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsx(N,{size:16,className:"text-slate-500"}),e.jsxs("select",{value:r,onChange:s=>h(s.target.value),className:"px-4 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 flex-1 md:flex-none",children:[e.jsx("option",{value:"ALL",children:"All Status"}),e.jsx("option",{value:"ACTIVE",children:"Active Subscription"}),e.jsx("option",{value:"INACTIVE",children:"No Account/Inactive"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:(d||[]).map(s=>e.jsxs("div",{onClick:()=>c(`/food-portal/students/${s.id}`),className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-lg hover:border-orange-200 dark:hover:border-orange-800 transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"relative",children:[s.photo?e.jsx("img",{src:s.photo,alt:s.name,className:"w-16 h-16 rounded-full object-cover border-2 border-white dark:border-slate-700 shadow-md"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400",children:e.jsx(w,{size:32})}),e.jsx("div",{className:`absolute bottom-0 right-0 w-4 h-4 rounded-full border-2 border-white dark:border-slate-800 ${s.status==="ACTIVE"?"bg-emerald-500":"bg-slate-300"}`})]}),e.jsx("div",{className:`px-2 py-1 rounded-lg text-xs font-bold ${s.status==="ACTIVE"?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:s.status})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white truncate",children:s.name}),e.jsx("p",{className:"text-sm text-slate-500",children:s.admission_number}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:s.grade})]}),s.has_account?e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-900 rounded-xl flex justify-between items-center group-hover:bg-orange-50 dark:group-hover:bg-orange-900/10 transition-colors",children:[e.jsx("span",{className:"text-xs uppercase font-bold text-slate-400",children:"Balance"}),e.jsx("span",{className:`font-mono font-bold ${s.balance>0?"text-red-600":"text-emerald-600"}`,children:(s.balance||0).toLocaleString()})]}):e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-900 rounded-xl flex justify-center items-center text-slate-400 text-sm group-hover:bg-orange-50 dark:group-hover:bg-orange-900/10 transition-colors",children:[e.jsx(k,{size:16,className:"mr-2"})," Enable Account"]})]},s.id))}),(d||[]).length===0&&e.jsx("div",{className:"text-center py-20 text-slate-400",children:e.jsx("p",{children:"No students found matching your search."})})]})};export{L as default};
