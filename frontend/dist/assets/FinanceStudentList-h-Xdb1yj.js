import{r,u as C,e as L,j as e,A as E,m as h}from"./vendor-Cr6tcs86.js";import{j as _,aE as D,ah as B,aF as T,m as g,N as M}from"./ui-BBn2VFCU.js";const O=()=>{const[b,f]=r.useState([]),[z,m]=r.useState(!0),[c,v]=r.useState(""),j=C(),[d,N]=r.useState("ALL"),[x,w]=r.useState("ALL"),[n,k]=r.useState("NAME_ASC"),[y,S]=r.useState([]);r.useEffect(()=>{A()},[]);const A=async()=>{m(!0);try{const a=(await L.get("/api/finance/students/")).data.students||[];f(a);const l=[...new Set(a.map(s=>s.grade))].sort();S(l)}catch(t){console.error(t)}finally{m(!1)}},p=[...(b||[]).filter(t=>{const a=(t.full_name||"").toLowerCase().includes(c.toLowerCase())||(t.admission_number||"").toLowerCase().includes(c.toLowerCase()),l=x==="ALL"||t.grade===x;let s=!0;return d==="DEBTOR"?s=t.balance>0:d==="CREDIT"?s=t.balance<0:d==="SETTLED"&&(s=t.balance===0),a&&l&&s})].sort((t,a)=>n==="NAME_ASC"?t.full_name.localeCompare(a.full_name):n==="NAME_DESC"?a.full_name.localeCompare(t.full_name):n==="BALANCE_HIGH"?a.balance-t.balance:n==="BALANCE_LOW"?t.balance-a.balance:0);return e.jsxs("div",{className:"space-y-8 min-h-screen",children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 h-[600px] bg-gradient-to-br from-indigo-500/5 to-transparent dark:from-indigo-900/10 pointer-events-none -z-10"}),e.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center justify-between gap-6 relative z-10",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-4xl font-black text-slate-900 dark:text-white tracking-tighter flex items-center gap-4",children:"Student Accounts"}),e.jsx("p",{className:"text-slate-500 font-bold uppercase text-[10px] tracking-[0.2em] opacity-80",children:"Institutional Billing & Payment Matrix"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full xl:w-auto",children:[e.jsxs("div",{className:"relative w-full sm:w-96 group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none group-focus-within:text-indigo-500 transition-colors",children:e.jsx(_,{size:18,className:"text-slate-400"})}),e.jsx("input",{type:"text",placeholder:"Search by name or admission number...",value:c,onChange:t=>v(t.target.value),className:"w-full pl-12 pr-4 py-4 bg-white/80 dark:bg-slate-900/80 backdrop-blur-xl border-2 border-slate-100 dark:border-slate-800 rounded-[2rem] shadow-xl shadow-slate-200/20 dark:shadow-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none font-bold text-sm transition-all"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-slate-100/50 dark:bg-slate-800/50 backdrop-blur-md rounded-[1.8rem] border border-slate-200 dark:border-slate-700 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 flex-1 sm:flex-none",children:[e.jsx(D,{size:14,className:"text-slate-400"}),e.jsxs("select",{value:x,onChange:t=>w(t.target.value),className:"bg-transparent border-none text-[10px] font-black uppercase text-slate-700 dark:text-slate-300 cursor-pointer outline-none p-0 min-w-[80px]",children:[e.jsx("option",{value:"ALL",children:"All Grades"}),y.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 flex-1 sm:flex-none",children:[e.jsx(B,{size:14,className:"text-slate-400"}),e.jsxs("select",{value:d,onChange:t=>N(t.target.value),className:"bg-transparent border-none text-[10px] font-black uppercase text-slate-700 dark:text-slate-300 cursor-pointer outline-none p-0",children:[e.jsx("option",{value:"ALL",children:"All Status"}),e.jsx("option",{value:"DEBTOR",children:"Debtor"}),e.jsx("option",{value:"CREDIT",children:"Is Credit"}),e.jsx("option",{value:"SETTLED",children:"Settled"})]})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 px-3 py-1.5 opacity-60",children:[e.jsx(T,{size:14,className:"text-slate-400"}),e.jsxs("select",{value:n,onChange:t=>k(t.target.value),className:"bg-transparent border-none text-[10px] font-black uppercase text-slate-500 dark:text-slate-400 cursor-pointer outline-none p-0",children:[e.jsx("option",{value:"NAME_ASC",children:"Name (A-Z)"}),e.jsx("option",{value:"NAME_DESC",children:"Name (Z-A)"}),e.jsx("option",{value:"BALANCE_HIGH",children:"Max Debt"}),e.jsx("option",{value:"BALANCE_LOW",children:"Min Debt"})]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.jsx(E,{mode:"popLayout",children:p.map((t,a)=>{const l=t.total_billed||0,s=t.total_paid||0,u=l>0?Math.min(100,s/l*100):s>0?100:0,o=t.balance>0,i=t.balance<0;return e.jsxs(h.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,delay:a*.02},onClick:()=>j(`/finance-portal/accounts/${t.id}`),className:"group relative bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-[2.5rem] p-6 shadow-sm hover:shadow-2xl hover:shadow-indigo-500/10 transition-all cursor-pointer overflow-hidden flex flex-col h-full",children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 -mr-16 -mt-16 rounded-full blur-3xl opacity-10 transition-opacity group-hover:opacity-20 ${o?"bg-rose-500":i?"bg-emerald-500":"bg-indigo-500"}`}),e.jsxs("div",{className:"flex items-start gap-4 mb-6 relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-16 w-16 rounded-3xl bg-slate-100 dark:bg-slate-800 p-0.5 overflow-hidden shadow-inner group-hover:scale-105 transition-transform duration-500",children:t.avatar?e.jsx("img",{src:t.avatar,alt:"",className:"h-full w-full object-cover rounded-[1.4rem]"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-slate-400",children:e.jsx(g,{size:32})})}),e.jsx("div",{className:`absolute -bottom-1 -right-1 h-5 w-5 rounded-full border-4 border-white dark:border-slate-900 ${o?"bg-rose-500":i?"bg-emerald-500":"bg-indigo-500"}`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-black text-slate-900 dark:text-white leading-tight truncate group-hover:text-indigo-600 transition-colors",children:t.full_name}),e.jsx("p",{className:"text-[10px] font-black font-mono text-slate-400 mt-1 uppercase tracking-tighter",children:t.admission_number}),e.jsx("div",{className:"mt-2 text-[10px] font-black px-2 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400 rounded-lg inline-block uppercase tracking-wider",children:t.grade})]})]}),e.jsxs("div",{className:"mt-auto pt-6 border-t border-slate-50 dark:border-slate-800/50",children:[e.jsxs("div",{className:"flex justify-between items-end mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none mb-2",children:"Current Balance"}),e.jsxs("h3",{className:`text-xl font-black tracking-tight ${o?"text-rose-600 dark:text-rose-400":i?"text-emerald-600":"text-slate-900 dark:text-white"}`,children:["KES ",t.balance.toLocaleString()]})]}),e.jsx("div",{className:`px-3 py-1.5 rounded-2xl text-[10px] font-black uppercase tracking-wider ${o?"bg-rose-50 text-rose-600 dark:bg-rose-500/10 dark:text-rose-400":i?"bg-emerald-50 text-emerald-600 dark:bg-emerald-500/10 dark:text-emerald-400":"bg-slate-50 text-slate-500 dark:bg-slate-800 dark:text-slate-400"}`,children:o?"Owing":i?"Credit":"Settled"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-[10px] font-black",children:[e.jsxs("span",{className:"text-slate-500",children:["PAID ",Math.round(u),"%"]}),e.jsxs("span",{className:"text-slate-400",children:["OF ",l.toLocaleString()]})]}),e.jsx("div",{className:"relative h-2 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx(h.div,{initial:{width:0},animate:{width:`${u}%`},transition:{duration:1,delay:.2},className:`absolute h-full rounded-full ${u>=100?"bg-emerald-500":"bg-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.5)]"}`})})]})]}),e.jsx("div",{className:"absolute inset-0 bg-indigo-600 opacity-0 group-hover:opacity-[0.02] transition-opacity pointer-events-none"}),e.jsx("div",{className:"absolute bottom-4 right-4 translate-y-8 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-300",children:e.jsx("div",{className:"bg-indigo-600 text-white p-2 rounded-xl shadow-lg shadow-indigo-500/30",children:e.jsx(M,{size:20})})})]},t.id)})})}),p.length===0&&e.jsxs("div",{className:"text-center py-20 bg-slate-50/50 dark:bg-slate-900/50 rounded-[3rem] border border-dashed border-slate-200 dark:border-slate-800",children:[e.jsx(g,{size:48,className:"mx-auto text-slate-300 mb-4"}),e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white",children:"No students found"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Try adjusting your filters or search term"})]})]})};export{O as default};
