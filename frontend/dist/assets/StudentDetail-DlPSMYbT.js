import{k as Se,u as ce,r as n,e as k,j as e,m as A,A as H}from"./vendor-Cr6tcs86.js";import{u as ze,B as o}from"./index-Db5g7dLZ.js";import{m as te,K as G,G as se,L as Ae,P as Ce,E as q,w as z,Q as Ee,V as ae,C as T,Y as Pe,c as re,B as S,q as v,_ as U,$ as $e,X as le,W as _e,a0 as Le,a1 as de,a2 as Te,a3 as De,a4 as Re,r as C,h as Fe,a5 as Me,v as oe,a6 as Oe,a7 as ne,a8 as Be,a9 as Ie}from"./ui-BBn2VFCU.js";const Y=({label:r,value:c,icon:x,color:i,trend:s})=>e.jsxs("div",{className:`p-2.5 md:p-3.5 rounded-xl border ${i} bg-white dark:bg-slate-900/50 backdrop-blur-sm flex flex-col items-center text-center md:items-start md:text-left relative overflow-hidden group`,children:[e.jsxs("div",{className:"flex justify-center md:justify-between items-center w-full mb-1.5 md:mb-3",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${i.replace("border-","bg-").replace("200","50").replace("text-","bg-")} dark:bg-opacity-20 group-hover:scale-110 transition-transform shadow-sm`,children:e.jsx(x,{size:16,className:i.replace("border-","text-").replace("bg-","text-").includes("text-")?i.replace("border-","text-"):"text-primary-600"})}),s&&e.jsxs("span",{className:"hidden md:flex items-center text-[9px] font-bold text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/30 px-1.5 py-0.5 rounded-md",children:[e.jsx(C,{size:10,className:"mr-1"}),s]})]}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-[8px] md:text-[10px] font-bold uppercase tracking-widest leading-none",children:r}),e.jsx("h3",{className:"text-base md:text-lg font-black text-slate-900 dark:text-white leading-tight",children:c})]})]}),ie=({icon:r,label:c,value:x,subValue:i})=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-400 group-hover:bg-white group-hover:text-primary-500 group-hover:shadow-sm transition-all",children:e.jsx(r,{size:14})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase leading-none mb-1 tracking-wider",children:c}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white leading-tight",children:x||"N/A"}),i&&e.jsx("p",{className:"text-[11px] text-slate-500 mt-0.5",children:i})]})]}),L=({id:r,label:c,icon:x,active:i,onClick:s})=>e.jsxs("button",{onClick:()=>s(r),className:`relative flex items-center gap-1 md:gap-1.5 px-3 md:px-4 py-1.5 md:py-2 rounded-full text-[10px] md:text-xs font-black transition-all shrink-0 uppercase tracking-tighter ${i?"text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[i&&e.jsx(A.div,{layoutId:"activeTab",className:"absolute inset-0 bg-slate-900 dark:bg-primary-600 rounded-full shadow-lg",transition:{type:"spring",bounce:.2,duration:.6}}),e.jsxs("span",{className:"relative z-10 flex items-center gap-1 md:gap-1.5",children:[e.jsx(x,{size:12,className:"md:w-3.5 md:h-3.5"}),c]})]}),He=({studentId:r,student:c,isManageable:x})=>{const i=ce(),[s,D]=n.useState(null),[R,w]=n.useState(!0);if(n.useEffect(()=>{(async()=>{try{const l=await k.get(`/api/students/${r}/academics/`);D(l.data)}catch(l){console.error("Error fetching academic records:",l)}finally{w(!1)}})()},[r]),R)return e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-slate-200 border-t-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Loading academic records..."})]});if(!s||!s.success)return e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-12 text-center border-2 border-dashed border-slate-200 dark:border-slate-800",children:[e.jsx(ne,{size:48,className:"mx-auto text-slate-300 mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"No Academic Records"}),e.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"No assessment records found for this student."}),x&&e.jsx(o,{onClick:()=>{const a=c?.academic?.grade_id||c?.grade_id||"";i(`/academics?student=${r}&grade=${a}`)},children:"Record First Assessment"})]});const m=Object.values(s.records).reduce((a,l)=>a+Object.keys(l).length,0),b={};Object.values(s.records).forEach(a=>{Object.values(a).forEach(l=>{l.subjects.forEach(h=>{b[h.subject_name]||(b[h.subject_name]={total:0,count:0}),b[h.subject_name].total+=h.marks,b[h.subject_name].count+=1})})});const f=Object.entries(b).map(([a,l])=>({name:a,average:(l.total/l.count).toFixed(1)})).sort((a,l)=>l.average-a.average),F=Math.max(...f.map(a=>parseFloat(a.average)));return e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-3 md:p-4 border border-blue-100 dark:border-blue-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5 md:mb-2 text-left",children:[e.jsx("div",{className:"h-7 w-7 md:h-8 md:w-8 bg-blue-500 rounded-lg flex items-center justify-center shrink-0",children:e.jsx(ne,{size:14,className:"text-white"})}),e.jsx("p",{className:"text-[10px] text-blue-700 dark:text-blue-400 font-bold uppercase truncate",children:"Average"})]}),e.jsxs("p",{className:"text-xl md:text-3xl font-black text-blue-900 dark:text-blue-300 text-left",children:[s.stats.average_score,"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-3 md:p-4 border border-purple-100 dark:border-purple-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5 md:mb-2 text-left",children:[e.jsx("div",{className:"h-7 w-7 md:h-8 md:w-8 bg-purple-500 rounded-lg flex items-center justify-center shrink-0",children:e.jsx(S,{size:14,className:"text-white"})}),e.jsx("p",{className:"text-[10px] text-purple-700 dark:text-purple-400 font-bold uppercase truncate",children:"Assessments"})]}),e.jsx("p",{className:"text-xl md:text-3xl font-black text-purple-900 dark:text-purple-300 text-left",children:s.stats.total_assessments})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-3 md:p-4 border border-emerald-100 dark:border-emerald-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5 md:mb-2 text-left",children:[e.jsx("div",{className:"h-7 w-7 md:h-8 md:w-8 bg-emerald-500 rounded-lg flex items-center justify-center shrink-0",children:e.jsx(S,{size:14,className:"text-white"})}),e.jsx("p",{className:"text-[10px] text-emerald-700 dark:text-emerald-400 font-bold uppercase truncate",children:"Subjects"})]}),e.jsx("p",{className:"text-xl md:text-3xl font-black text-emerald-900 dark:text-emerald-300 text-left",children:s.stats.subjects_count})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-3 md:p-4 border border-amber-100 dark:border-amber-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5 md:mb-2 text-left",children:[e.jsx("div",{className:"h-7 w-7 md:h-8 md:w-8 bg-amber-500 rounded-lg flex items-center justify-center shrink-0",children:e.jsx(T,{size:14,className:"text-white"})}),e.jsx("p",{className:"text-[10px] text-amber-700 dark:text-amber-400 font-bold uppercase truncate",children:"Term"})]}),e.jsxs("p",{className:"text-sm md:text-xl font-black text-amber-900 dark:text-amber-300 text-left uppercase truncate",children:["T",s.stats.latest_term]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Performance Distribution"}),e.jsx(Be,{size:16,className:"text-slate-400"})]}),e.jsx("div",{className:"space-y-2.5",children:[{level:"4",label:"Exceeding",count:s.performance_distribution.exceeding,color:"emerald"},{level:"3",label:"Meeting",count:s.performance_distribution.meeting,color:"blue"},{level:"2",label:"Approaching",count:s.performance_distribution.approaching,color:"amber"},{level:"1",label:"Below",count:s.performance_distribution.below,color:"rose"}].map(a=>{const l=(a.count/(s.stats.total_assessments||1)*100).toFixed(0);return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:[a.label," (",a.level,")"]}),e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[a.count," ",e.jsxs("span",{className:"text-slate-400 text-[10px]",children:["(",l,"%)"]})]})]}),e.jsx("div",{className:"h-1.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-${a.color}-500 transition-all duration-500`,style:{width:`${l}%`}})})]},a.level)})})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Subject Performance"}),e.jsx(Ie,{size:16,className:"text-slate-400"})]}),e.jsx("div",{className:"space-y-2",children:f.slice(0,6).map((a,l)=>e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-0.5",children:[e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:a.name}),e.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[a.average,"%"]})]}),e.jsx("div",{className:"h-1.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary-500 to-primary-600 group-hover:from-primary-600 group-hover:to-primary-700 transition-all duration-300",style:{width:`${parseFloat(a.average)/F*100}%`}})})]},l))})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-5 py-3 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(S,{size:16,className:"text-primary-500"}),"Assessment Summary"]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:[m," assessment",m!==1?"s":""," across ",Object.keys(s.records).length," term",Object.keys(s.records).length!==1?"s":""]})]}),e.jsxs(o,{onClick:()=>i(`/students/${r}/academic-report`),size:"sm",className:"text-xs",children:["View Full Report",e.jsx(C,{size:14,className:"ml-1.5"})]})]})}),e.jsxs("div",{className:"p-5",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:Object.entries(s.records).slice(0,3).map(([a,l])=>e.jsxs("div",{className:"p-3 rounded-xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-700/50 hover:border-primary-200 dark:hover:border-primary-800 transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:a}),e.jsx(T,{size:14,className:"text-slate-400 group-hover:text-primary-500 transition-colors"})]}),e.jsx("p",{className:"text-2xl font-black text-slate-900 dark:text-white mb-0.5",children:Object.keys(l).length}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Assessment",Object.keys(l).length!==1?"s":""]})]},a))}),Object.keys(s.records).length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(S,{size:40,className:"mx-auto text-slate-300 mb-3"}),e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-1",children:"No Assessments Yet"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-4",children:"This student hasn't been assessed yet."}),e.jsx(o,{onClick:()=>i("/academics"),size:"sm",children:"Record First Assessment"})]})]})]}),x&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>i(`/students/${r}/academic-report`),className:"group p-4 rounded-xl bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-900 border border-slate-200 dark:border-slate-700 hover:border-primary-300 dark:hover:border-primary-700 transition-all text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-white dark:bg-slate-800 shadow-sm flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(oe,{size:18,className:"text-primary-600"})}),e.jsx(C,{size:16,className:"text-slate-400 group-hover:text-primary-500 group-hover:translate-x-0.5 group-hover:-translate-y-0.5 transition-all"})]}),e.jsx("h4",{className:"text-sm font-bold text-slate-900 dark:text-white mb-0.5",children:"View Detailed Report"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Complete academic analysis with charts"})]}),e.jsxs("button",{onClick:()=>{const a=c?.academic?.grade_id||c?.grade_id||"";i(`/academics?student=${r}&grade=${a}`)},className:"group p-4 rounded-xl bg-gradient-to-br from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-800/20 border border-primary-200 dark:border-primary-800 hover:border-primary-300 dark:hover:border-primary-700 transition-all text-left",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-white dark:bg-slate-800 shadow-sm flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(q,{size:18,className:"text-primary-600"})}),e.jsx(C,{size:16,className:"text-primary-400 group-hover:text-primary-500 group-hover:translate-x-0.5 group-hover:-translate-y-0.5 transition-all"})]}),e.jsx("h4",{className:"text-sm font-bold text-slate-900 dark:text-white mb-0.5",children:"Record New Assessment"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Add marks for this student"})]})]})]})},We=()=>{const{id:r}=Se(),c=ce(),{config:x,hasFeature:i}=ze(),[s,D]=n.useState(null),[R,w]=n.useState(!0),[m,b]=n.useState("overview"),f=JSON.parse(localStorage.getItem("user")||"{}"),F=f.role==="student",a=f.is_superuser||f.role==="admin"||f.role==="staff",l=()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),c("/student-login")},[h,V]=n.useState([]),[xe,W]=n.useState(!1),[me,M]=n.useState(!0),[K,he]=n.useState(0);n.useEffect(()=>{const t=()=>{const d=window.scrollY;d<10?M(!0):d>K?M(!1):M(!0),he(d)};return window.addEventListener("scroll",t,{passive:!0}),()=>window.removeEventListener("scroll",t)},[K]);const[be,E]=n.useState(!1),[Q,X]=n.useState(!1),[p,y]=n.useState({amount:"",payment_method:"CASH",reference:"",term:"",description:""}),[pe,P]=n.useState(!1),[J,Z]=n.useState(!1),[j,O]=n.useState({date:new Date().toISOString().split("T")[0],status:"PRESENT",remark:""}),ue=async()=>{if(!a){alert("You do not have permission to delete student records.");return}if(window.confirm("Are you sure you want to delete this student record? This action cannot be undone."))try{w(!0),await k.delete(`/api/students/${r}/`),c("/students?deleted=true")}catch(t){alert(t.response?.data?.error||"Failed to delete student"),w(!1)}},B=async()=>{try{w(!0);const t=await k.get(`/api/students/${r}/`);D(t.data.student)}catch(t){console.error("Error fetching student:",t)}finally{w(!1)}};if(n.useEffect(()=>{B()},[r]),n.useEffect(()=>{m==="attendance"&&r&&(W(!0),k.get(`/api/students/${r}/attendance/`).then(t=>V(t.data.attendance||[])).catch(t=>console.error("Error fetching attendance history:",t)).finally(()=>W(!1)))},[m,r]),R)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-950",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-slate-200 border-t-primary-600"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Loading Student Profile..."})]})});if(!s)return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 dark:bg-slate-950 gap-4",children:[e.jsx("div",{className:"h-20 w-20 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center text-slate-400",children:e.jsx(te,{size:40})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Student Not Found"}),e.jsx(o,{variant:"outline",onClick:()=>c(-1),children:"Return to Dashboard"})]});const $=(()=>{if(!h||h.length===0)return{total:0,present:0,absent:0,late:0,rate:0};const t=h.filter(u=>u.status==="PRESENT").length,d=h.filter(u=>u.status==="ABSENT").length,g=h.filter(u=>u.status==="LATE").length,N=h.length,_=N>0?(t/N*100).toFixed(1):0;return{total:N,present:t,absent:d,late:g,rate:_}})(),I=h.slice(0,7),ge=(()=>{const t=new Date,d=t.getFullYear(),g=t.getMonth(),N=new Date(d,g+1,0).getDate(),_=[];for(let u=1;u<=N;u++){const we=`${d}-${String(g+1).padStart(2,"0")}-${String(u).padStart(2,"0")}`,ee=h.find(ye=>ye.date===we);_.push({day:u,status:ee?ee.status.toLowerCase():null})}return _})(),fe=new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}),je=async t=>{if(t.preventDefault(),!a){alert("Permission denied.");return}X(!0);try{await k.post(`/api/students/${r}/payment/add/`,p),E(!1),y({amount:"",payment_method:"CASH",reference:"",term:s?.personal?.current_term||"",description:""}),B()}catch(d){alert(d.response?.data?.error||"Failed to record payment")}finally{X(!1)}},Ne=async t=>{if(t.preventDefault(),!a){alert("Permission denied.");return}Z(!0);try{await k.post(`/api/students/${r}/attendance/mark/`,j),P(!1);const d=await k.get(`/api/students/${r}/attendance/`);V(d.data.attendance||[]),B()}catch(d){alert(d.response?.data?.error||"Failed to record attendance")}finally{Z(!1)}},ve=()=>e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 text-left",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-5 md:p-6 border border-slate-100 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2 text-sm md:text-base",children:[e.jsx(ae,{size:18,className:"text-purple-500"}),"Guardian Info"]}),a&&e.jsx(o,{variant:"ghost",size:"sm",className:"h-7 w-7 md:h-8 md:w-8 p-0 rounded-full",children:e.jsx(q,{size:14})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-3 md:p-4 rounded-2xl flex items-center gap-4",children:[e.jsx("div",{className:"h-10 w-10 md:h-12 md:w-12 rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-600 flex items-center justify-center font-bold text-base md:text-lg shrink-0",children:s.guardian.name?s.guardian.name.charAt(0):"G"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-bold text-slate-900 dark:text-white truncate text-sm md:text-base",children:s.guardian.name||"No Guardian"}),e.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 font-medium",children:"Primary Guardian"})]})]}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ie,{icon:De,label:"Phone Number",value:s.guardian.phone}),e.jsx(ie,{icon:Re,label:"Email Address",value:s.guardian.email||"No email provided"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl p-5 md:p-6 border border-slate-100 dark:border-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2 text-sm md:text-base",children:[e.jsx(S,{size:18,className:"text-blue-500"}),"Academic Status"]}),e.jsx("span",{className:"text-[10px] font-bold bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-2.5 py-1 rounded-full uppercase tracking-tighter",children:"ACTIVE"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"p-3 md:p-4 rounded-2xl bg-blue-50 dark:bg-blue-900/10 text-center",children:[e.jsx("p",{className:"text-[10px] text-blue-600 dark:text-blue-400 font-bold uppercase mb-0.5",children:"Grade"}),e.jsx("p",{className:"text-xl md:text-2xl font-black text-slate-900 dark:text-white",children:s.personal.grade})]}),e.jsxs("div",{className:"p-3 md:p-4 rounded-2xl bg-indigo-50 dark:bg-indigo-900/10 text-center",children:[e.jsx("p",{className:"text-[10px] text-indigo-600 dark:text-indigo-400 font-bold uppercase mb-0.5",children:"Rank"}),e.jsxs("p",{className:"text-xl md:text-2xl font-black text-slate-900 dark:text-white",children:["#",s.academic.position]})]})]}),e.jsxs(o,{className:"w-full justify-between group h-10 md:h-11 text-xs md:text-sm font-bold",variant:"outline",children:["View Full Report",e.jsx(C,{size:14,className:"text-slate-400 group-hover:text-primary-600 transition-transform group-hover:translate-x-0.5 group-hover:-translate-y-0.5"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 dark:from-slate-800 dark:to-slate-900 rounded-3xl p-5 md:p-6 text-white shadow-lg overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:e.jsx(v,{size:120})}),e.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6 relative z-10",children:[e.jsxs("h3",{className:"font-bold flex items-center gap-2 text-sm md:text-base",children:[e.jsx(v,{size:18,className:"text-emerald-400"}),"Attendance"]}),e.jsxs("span",{className:"text-[10px] font-black bg-white/10 px-2 py-1 rounded-lg uppercase tracking-tight",children:["Term ",s.personal.current_term]})]}),e.jsx("div",{className:"flex items-center justify-center py-2 md:py-4 relative z-10",children:e.jsxs("div",{className:"relative h-24 w-24 md:h-32 md:w-32 flex items-center justify-center",children:[e.jsxs("svg",{className:"h-full w-full -rotate-90",viewBox:"0 0 36 36",children:[e.jsx("path",{className:"text-white/10",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3.5"}),e.jsx("path",{className:"text-emerald-400",strokeDasharray:`${s.attendance.attendance_rate}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3.5",strokeLinecap:"round"})]}),e.jsxs("div",{className:"absolute flex flex-col items-center",children:[e.jsxs("span",{className:"text-2xl md:text-3xl font-black tracking-tighter",children:[s.attendance.attendance_rate,"%"]}),e.jsx("span",{className:"text-[8px] md:text-[10px] text-slate-400 uppercase font-black tracking-widest",children:"Score"})]})]})}),e.jsxs("div",{className:"flex justify-between text-xs mt-4 px-2 relative z-10",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-slate-500 text-[9px] uppercase font-black",children:"Absent"}),e.jsxs("p",{className:"font-black text-sm",children:[s.attendance.absent_days,"D"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-slate-500 text-[9px] uppercase font-black",children:"Late"}),e.jsxs("p",{className:"font-black text-sm",children:[s.attendance.late_days,"D"]})]})]})]})]}),ke=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 md:gap-6",children:[e.jsx(Y,{label:"Billed",value:`${x.currency}${s.financial.total_fees.toLocaleString()}`,icon:re,color:"border-slate-200"}),e.jsx(Y,{label:"Paid",value:`${x.currency}${s.financial.total_paid.toLocaleString()}`,icon:z,color:"border-emerald-200"}),e.jsx(Y,{label:"Total Balance",value:`${x.currency}${s.financial.balance.toLocaleString()}`,icon:Fe,color:s.financial.balance>0?"border-rose-200":"border-slate-200"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl border border-slate-100 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-4 md:p-6 border-b border-slate-100 dark:border-slate-800 flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Transaction History"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Record and monitor fee payments"})]}),e.jsxs("div",{className:"flex w-full sm:w-auto gap-2",children:[a&&e.jsxs(o,{variant:"primary",className:"flex-1 sm:flex-none text-xs h-9",onClick:()=>{y({...p,term:s.personal.current_term||1}),E(!0)},children:[e.jsx(Me,{size:14,className:"mr-1.5"}),"Record Payment"]}),e.jsxs(o,{variant:"ghost",className:"flex-1 sm:flex-none text-xs h-9",children:[e.jsx(oe,{size:14,className:"mr-1.5"}),"Statement"]})]})]}),e.jsx("div",{className:"md:hidden divide-y divide-slate-100 dark:divide-slate-800",children:s.financial.history.map(t=>e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-black text-slate-900 dark:text-white uppercase tracking-tight",children:["Term ",t.term," Fees"]}),e.jsx("p",{className:"text-[9px] text-slate-500 font-bold uppercase",children:t.date})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-black text-slate-900 dark:text-white",children:[x.currency,t.amount.toLocaleString()]}),e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-md text-[8px] font-black bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 uppercase tracking-widest border border-emerald-500/10",children:"Success"})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-[9px] bg-slate-50 dark:bg-slate-800/40 p-2 rounded-xl border border-slate-100 dark:border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{size:10,className:"text-slate-400"}),e.jsxs("span",{className:"font-mono text-slate-400 uppercase tracking-tighter shrink-0",children:[t.reference.substring(0,10),"..."]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-slate-600 dark:text-slate-400",children:[e.jsx(de,{size:10}),e.jsx("span",{className:"font-black uppercase",children:t.method})]})]})]},t.id))}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Ref ID"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Method"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:s.financial.history.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-600 dark:text-slate-300",children:t.date}),e.jsxs("td",{className:"px-6 py-4 text-sm text-slate-900 dark:text-white font-medium",children:["Term ",t.term," Fees"]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-xs text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded select-all cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-700",children:t.reference})}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:t.method}),e.jsxs("td",{className:"px-6 py-4 text-sm font-bold text-right text-slate-900 dark:text-white",children:[x.currency,t.amount.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",children:"Success"})})]},t.id))})]})})]})]});return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 pb-20",children:[e.jsx(A.div,{initial:{y:0},animate:{y:me?0:-100},transition:{duration:.3,ease:"easeInOut"},className:"sticky top-0 z-50 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 px-4 sm:px-8 py-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[a&&e.jsxs("button",{onClick:()=>c("/students"),className:"group flex items-center gap-2 text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white transition-colors",children:[e.jsx("div",{className:"p-2 rounded-full group-hover:bg-slate-100 dark:group-hover:bg-slate-800 transition-colors",children:e.jsx(G,{size:20})}),e.jsx("span",{className:"font-medium",children:"Directory"})]}),F&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary-600 dark:text-primary-400 font-bold",children:[e.jsx(se,{size:24}),e.jsx("span",{children:"My Profile"})]}),e.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-3 py-1.5 rounded-xl bg-red-50 dark:bg-red-900/10 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/20 transition-all font-bold text-xs border border-red-100 dark:border-red-900/20",children:[e.jsx(Ae,{size:14}),"Logout"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(o,{variant:"outline",size:"sm",className:"hidden sm:flex",onClick:()=>{navigator.clipboard.writeText(s.personal.admission_number),alert("Admission ID copied!")},children:[e.jsx(Ce,{size:16,className:"mr-2"})," Copy ID"]}),a&&e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"primary",size:"sm",onClick:()=>c(`/students/${r}/edit`),children:"Edit Profile"}),e.jsx(o,{variant:"secondary",size:"sm",className:"bg-red-50 text-red-600 hover:bg-red-100 border-red-100",onClick:ue,children:"Delete Student"})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-8 py-4 md:py-8 space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"h-28 md:h-48 w-full bg-gradient-to-br from-slate-900 via-slate-800 to-primary-900 rounded-3xl md:rounded-[2rem] overflow-hidden shadow-lg border border-slate-200/10 dark:border-white/5",children:[e.jsx("div",{className:"absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),e.jsx("div",{className:"absolute -bottom-10 -right-10 p-12 opacity-10 rotate-12",children:e.jsx(se,{size:240,className:"text-white"})})]}),e.jsxs("div",{className:"relative -mt-14 md:-mt-20 px-4 md:px-10 flex flex-col md:flex-row items-center md:items-end gap-3 md:gap-8",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"h-28 w-28 md:h-44 md:w-44 rounded-2xl md:rounded-[2rem] border-4 md:border-[6px] border-white dark:border-slate-950 bg-white dark:bg-slate-900 shadow-2xl overflow-hidden p-1 flex items-center justify-center transform transition-transform group-hover:scale-[1.02]",children:s.personal.photo?e.jsx("img",{src:s.personal.photo,alt:s.personal.full_name,className:"w-full h-full object-cover rounded-xl md:rounded-[1.6rem]"}):e.jsx("div",{className:"w-full h-full bg-slate-50 dark:bg-slate-800/50 rounded-xl md:rounded-[1.6rem] flex items-center justify-center text-slate-300",children:e.jsx(te,{size:64})})}),a&&e.jsx("button",{className:"absolute bottom-1 right-1 md:bottom-3 md:right-3 p-2 bg-primary-600 text-white rounded-xl md:rounded-2xl shadow-xl hover:bg-primary-700 transition-all hover:scale-110 border-2 md:border-4 border-white dark:border-slate-950",children:e.jsx(q,{size:14,className:"md:w-4 md:h-4"})})]}),e.jsxs("div",{className:"pb-1 md:pb-6 flex-1 flex flex-col items-center md:items-start text-center md:text-left w-full md:w-auto mt-1 md:mt-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-1.5 md:gap-3 mb-2 md:mb-3",children:[e.jsx("h1",{className:"text-2xl md:text-5xl font-black text-slate-900 dark:text-white tracking-tight leading-tight uppercase",children:s.personal.full_name}),s.financial.balance<=0&&e.jsx("div",{className:"flex justify-center md:justify-start",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-[9px] md:text-xs font-black bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border border-emerald-500/20 shadow-sm backdrop-blur-md",children:[e.jsx(z,{size:12,className:"mr-1 md:mr-1.5"}),"CLEARED"]})})]}),e.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start items-center gap-2 md:gap-4",children:[e.jsxs("div",{className:"bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm px-3 py-1.5 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex items-center gap-2 text-xs md:text-sm font-bold text-slate-700 dark:text-slate-300",children:[e.jsx(Ee,{size:14,className:"text-primary-500"}),"ID: ",s.personal.admission_number]}),e.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-semibold text-xs md:text-sm px-1",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(ae,{size:16,className:"text-slate-400"}),s.personal.location]}),e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-slate-300 dark:bg-slate-700"}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(T,{size:16,className:"text-slate-400"}),s.personal.dob]})]})]})]})]})]}),e.jsx("div",{className:"flex md:justify-start overflow-x-auto pb-2 md:pb-0 no-scrollbar -mx-4 px-4 sm:mx-0 sm:px-0",children:e.jsxs("div",{className:"flex p-1 bg-white dark:bg-slate-900 rounded-full border border-slate-200 dark:border-slate-800 shadow-xl shadow-slate-200/50 dark:shadow-none min-w-max",children:[e.jsx(L,{id:"overview",label:"Overview",icon:Pe,active:m==="overview",onClick:b}),i("FINANCE_MANAGEMENT")&&e.jsx(L,{id:"financial",label:"Financials",icon:re,active:m==="financial",onClick:b}),e.jsx(L,{id:"academic",label:"Academics",icon:S,active:m==="academic",onClick:b}),e.jsx(L,{id:"attendance",label:"Attendance",icon:v,active:m==="attendance",onClick:b})]})}),e.jsx(H,{mode:"wait",children:e.jsxs(A.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[m==="overview"&&ve(),m==="financial"&&ke(),m==="academic"&&e.jsx(He,{studentId:r,student:s,isManageable:a}),m==="attendance"&&e.jsx("div",{className:"space-y-4",children:xe?e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-slate-200 border-t-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Loading attendance records..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-emerald-50/50 to-teal-50/50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-3 md:p-4 border border-emerald-100 dark:border-emerald-800/30",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 text-left",children:[e.jsx("div",{className:"h-8 w-8 md:h-10 md:w-10 bg-emerald-500 rounded-lg flex items-center justify-center shrink-0 shadow-sm",children:e.jsx(z,{size:16,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-emerald-700 dark:text-emerald-400 font-bold uppercase",children:"Rate"}),e.jsxs("p",{className:"text-xl md:text-2xl font-black text-emerald-900 dark:text-emerald-300 leading-none",children:[$.rate,"%"]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50/50 to-indigo-50/50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-3 md:p-4 border border-blue-100 dark:border-blue-800/30",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 text-left",children:[e.jsx("div",{className:"h-8 w-8 md:h-10 md:w-10 bg-blue-500 rounded-lg flex items-center justify-center shrink-0 shadow-sm",children:e.jsx(T,{size:16,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-blue-700 dark:text-blue-400 font-bold uppercase",children:"Present"}),e.jsx("p",{className:"text-xl md:text-2xl font-black text-blue-900 dark:text-blue-300 leading-none",children:$.present})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-rose-50/50 to-pink-50/50 dark:from-rose-900/20 dark:to-pink-900/20 rounded-xl p-3 md:p-4 border border-rose-100 dark:border-rose-800/30",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 text-left",children:[e.jsx("div",{className:"h-8 w-8 md:h-10 md:w-10 bg-rose-500 rounded-lg flex items-center justify-center shrink-0 shadow-sm",children:e.jsx(U,{size:16,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-rose-700 dark:text-rose-400 font-bold uppercase",children:"Absent"}),e.jsx("p",{className:"text-xl md:text-2xl font-black text-rose-900 dark:text-rose-300 leading-none",children:$.absent})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-amber-50/50 to-orange-50/50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-3 md:p-4 border border-amber-100 dark:border-amber-800/30",children:e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 text-left",children:[e.jsx("div",{className:"h-8 w-8 md:h-10 md:w-10 bg-amber-500 rounded-lg flex items-center justify-center shrink-0 shadow-sm",children:e.jsx(v,{size:16,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-amber-700 dark:text-amber-400 font-bold uppercase",children:"Late"}),e.jsx("p",{className:"text-xl md:text-2xl font-black text-amber-900 dark:text-amber-300 leading-none",children:$.late})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-sm",children:"Recent Attendance"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Last 7 days"})]}),a&&e.jsxs(o,{size:"sm",className:"text-xs h-8",onClick:()=>P(!0),children:[e.jsx($e,{size:14,className:"mr-1"}),"Mark Attendance"]})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800 max-h-80 overflow-y-auto",children:I.length>0?I.map((t,d)=>e.jsx("div",{className:"px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`h-8 w-8 rounded-lg flex items-center justify-center ${t.status==="PRESENT"?"bg-emerald-100 dark:bg-emerald-900/30":t.status==="LATE"?"bg-amber-100 dark:bg-amber-900/30":"bg-rose-100 dark:bg-rose-900/30"}`,children:t.status==="PRESENT"?e.jsx(z,{size:16,className:"text-emerald-600 dark:text-emerald-400"}):t.status==="LATE"?e.jsx(v,{size:16,className:"text-amber-600 dark:text-amber-400"}):e.jsx(U,{size:16,className:"text-rose-600 dark:text-rose-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-slate-900 dark:text-white",children:new Date(t.date).toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:t.date})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:t.time_in||"-"}),e.jsx("span",{className:`text-xs font-bold uppercase ${t.status==="PRESENT"?"text-emerald-600 dark:text-emerald-400":t.status==="LATE"?"text-amber-600 dark:text-amber-400":"text-rose-600 dark:text-rose-400"}`,children:t.status})]})]})},d)):e.jsxs("div",{className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:[e.jsx(v,{size:32,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No attendance records yet"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-sm",children:fe}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:e.jsx(G,{size:16,className:"text-slate-600 dark:text-slate-400"})}),e.jsx("button",{className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:e.jsx(G,{size:16,className:"text-slate-600 dark:text-slate-400 rotate-180"})})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["S","M","T","W","T","F","S"].map((t,d)=>e.jsx("div",{className:"text-center py-1",children:e.jsx("span",{className:"text-xs font-bold text-slate-400 dark:text-slate-500",children:t})},d)),ge.map((t,d)=>e.jsx("div",{className:`aspect-square rounded-md flex items-center justify-center text-xs font-semibold cursor-pointer transition-all hover:scale-110 ${t.status==="present"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":t.status==="late"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":t.status==="absent"?"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400":"bg-slate-100 text-slate-400 dark:bg-slate-800 dark:text-slate-500"}`,children:t.day},d))]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 pt-4 border-t border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"h-3 w-3 rounded bg-emerald-500"}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Present"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"h-3 w-3 rounded bg-amber-500"}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Late"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"h-3 w-3 rounded bg-rose-500"}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Absent"})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-4 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-sm",children:"Weekly Trend"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Last 7 days pattern"})]})}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:I.slice(0,7).reverse().map((t,d)=>{const g=t.status.toLowerCase(),N=g==="present"?90:g==="late"?75:0;return e.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[e.jsx("div",{className:"w-full h-20 bg-slate-100 dark:bg-slate-800 rounded-lg relative overflow-hidden",children:e.jsx("div",{className:`absolute bottom-0 w-full transition-all duration-500 ${g==="present"?"bg-gradient-to-t from-emerald-500 to-emerald-400":g==="late"?"bg-gradient-to-t from-amber-500 to-amber-400":"bg-gradient-to-t from-rose-500 to-rose-400"}`,style:{height:`${N}%`}})}),e.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400",children:new Date(t.date).toLocaleDateString("en-US",{weekday:"short"})})]},d)})})]})]})})]},m)})]}),e.jsx(H,{children:be&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:e.jsxs(A.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-slate-900 rounded-3xl w-full max-w-lg shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Record Fee Payment"}),e.jsxs("p",{className:"text-xs text-slate-500 font-medium uppercase tracking-wider mt-0.5",children:["Payment for ",s.personal.full_name]})]}),e.jsx("button",{onClick:()=>E(!1),className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition-colors",children:e.jsx(le,{size:20})})]}),e.jsxs("form",{onSubmit:je,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Payment Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 font-bold text-slate-400",children:x.currency}),e.jsx("input",{type:"number",required:!0,placeholder:"0.00",className:"w-full pl-12 pr-4 py-3 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-primary-500 focus:bg-white dark:focus:bg-slate-900 rounded-2xl outline-none transition-all font-bold text-lg",value:p.amount,onChange:t=>y({...p,amount:t.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Term"}),e.jsxs("select",{required:!0,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-primary-500 focus:bg-white dark:focus:bg-slate-900 rounded-2xl outline-none transition-all font-semibold",value:p.term,onChange:t=>y({...p,term:t.target.value}),children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Payment Method"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{id:"CASH",label:"Cash",icon:_e},{id:"MPESA",label:"M-Pesa",icon:Le},{id:"BANK",label:"Bank",icon:de},{id:"CHEQUE",label:"Cheque",icon:Te}].map(t=>e.jsxs("button",{type:"button",onClick:()=>y({...p,payment_method:t.id}),className:`flex flex-col items-center gap-2 p-3 rounded-2xl border-2 transition-all ${p.payment_method===t.id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20 text-primary-600":"border-slate-100 dark:border-slate-800 text-slate-400 hover:border-slate-200 dark:hover:border-slate-700"}`,children:[e.jsx(t.icon,{size:20}),e.jsx("span",{className:"text-[10px] font-bold uppercase",children:t.label})]},t.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Reference Number / Description"}),e.jsx("input",{type:"text",placeholder:"M-Pesa Code, Bank Ref, or Description",className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-primary-500 focus:bg-white dark:focus:bg-slate-900 rounded-2xl outline-none transition-all",value:p.reference,onChange:t=>y({...p,reference:t.target.value})})]}),e.jsxs("div",{className:"pt-4 flex gap-3",children:[e.jsx(o,{variant:"outline",className:"flex-1 rounded-2xl py-4",onClick:()=>E(!1),type:"button",children:"Cancel"}),e.jsx(o,{variant:"primary",className:"flex-[2] rounded-2xl py-4 shadow-lg shadow-primary-500/25",type:"submit",disabled:Q,children:Q?"Recording...":"Complete Payment"})]})]})]})})}),e.jsx(H,{children:pe&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:e.jsxs(A.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-slate-900 rounded-3xl w-full max-w-md shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Mark Attendance"}),e.jsx("p",{className:"text-xs text-slate-500 font-medium uppercase tracking-wider mt-0.5",children:s.personal.full_name})]}),e.jsx("button",{onClick:()=>P(!1),className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition-colors",children:e.jsx(le,{size:20})})]}),e.jsxs("form",{onSubmit:Ne,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Date"}),e.jsx("input",{type:"date",required:!0,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-primary-500 focus:bg-white dark:focus:bg-slate-900 rounded-2xl outline-none transition-all font-semibold",value:j.date,onChange:t=>O({...j,date:t.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Status"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{id:"PRESENT",label:"Present",icon:z,color:"emerald"},{id:"LATE",label:"Late",icon:v,color:"amber"},{id:"ABSENT",label:"Absent",icon:U,color:"rose"}].map(t=>e.jsxs("button",{type:"button",onClick:()=>O({...j,status:t.id}),className:`flex flex-col items-center gap-2 p-4 rounded-2xl border-2 transition-all ${j.status===t.id?`border-${t.color}-500 bg-${t.color}-50 dark:bg-${t.color}-900/20 text-${t.color}-600`:"border-slate-100 dark:border-slate-800 text-slate-400 hover:border-slate-200 dark:hover:border-slate-700"}`,children:[e.jsx(t.icon,{size:24}),e.jsx("span",{className:"text-[10px] font-bold uppercase",children:t.label})]},t.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Remark (Optional)"}),e.jsx("textarea",{placeholder:"Reason for late/absent, etc.",rows:"2",className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-primary-500 focus:bg-white dark:focus:bg-slate-900 rounded-2xl outline-none transition-all resize-none",value:j.remark,onChange:t=>O({...j,remark:t.target.value})})]}),e.jsxs("div",{className:"pt-4 flex gap-3",children:[e.jsx(o,{variant:"outline",className:"flex-1 rounded-2xl py-4",onClick:()=>P(!1),type:"button",children:"Cancel"}),e.jsx(o,{variant:"primary",className:"flex-[2] rounded-2xl py-4 shadow-lg shadow-primary-500/25",type:"submit",disabled:J,children:J?"Saving...":"Save Record"})]})]})]})})})]})};export{We as default};
