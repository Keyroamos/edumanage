import{u as m,r,j as e,l as p,N as g,O as f}from"./vendor-Cr6tcs86.js";import{u as x,T as j,a as v}from"./index-DR2ymqTX.js";import{i as k,aK as c,N,X as w,ag as y,U as S,V as z,aA as C,aL as L,L as T}from"./ui-BBn2VFCU.js";const O=({user:a})=>{const n=m(),{config:d}=x(),[s,i]=r.useState(!1),[l,t]=r.useState(!1),u=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),n("/login")},b=[{path:"/transport-portal/dashboard",icon:y,label:"Dashboard"},{path:"/transport-portal/students",icon:S,label:"Students"},{path:"/transport-portal/routes",icon:z,label:"Routes"},{path:"/transport-portal/vehicles",icon:C,label:"Vehicles"},{path:"/transport-portal/drivers",icon:L,label:"Drivers"}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>t(!0),className:"p-2 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-lg shadow-lg border border-slate-100 dark:border-slate-700",children:e.jsx(k,{size:24})})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>t(!1)}),e.jsxs("aside",{className:`
                    fixed md:sticky top-0 left-0 h-screen bg-white dark:bg-slate-900 
                    border-r border-slate-200 dark:border-slate-800 z-50 transition-all duration-300 ease-in-out
                    ${l?"translate-x-0":"-translate-x-full md:translate-x-0"}
                    ${s?"w-20":"w-72"}
                `,children:[e.jsxs("div",{className:"h-20 flex items-center justify-between px-6 border-b border-slate-100 dark:border-slate-800",children:[!s&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center text-white shadow-lg shadow-blue-500/30",children:e.jsx(c,{size:20})}),e.jsxs("span",{className:"font-bold text-xl text-slate-900 dark:text-white tracking-tight",children:[d.school_name," ",e.jsx("span",{className:"text-blue-600",children:"Transport"})]})]}),s&&e.jsx("div",{className:"mx-auto w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-blue-500/30",children:e.jsx(c,{size:24})}),e.jsx("button",{onClick:()=>i(!s),className:"hidden md:flex p-1.5 rounded-lg bg-slate-50 dark:bg-slate-800 text-slate-400 hover:text-blue-500 transition-colors",children:s?e.jsx(N,{size:16}):e.jsx(w,{size:16})})]}),e.jsx("div",{className:"p-4 space-y-2",children:b.map(o=>e.jsxs(p,{to:o.path,onClick:()=>t(!1),className:({isActive:h})=>`
                                flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group relative overflow-hidden
                                ${h?"bg-blue-50 dark:bg-blue-900/10 text-blue-600 dark:text-blue-400 font-semibold shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-800/50"}
                            `,children:[e.jsx(o.icon,{size:22,className:`
                                transition-colors
                                ${s?"mx-auto":""}
                            `}),!s&&e.jsx("span",{children:o.label})]},o.path))}),e.jsx("div",{className:"absolute bottom-0 w-full p-4 border-t border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50 backdrop-blur-sm",children:e.jsxs("div",{className:`flex items-center gap-3 ${s?"justify-center":""}`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400 font-bold",children:a?.username?.[0]?.toUpperCase()||"U"}),!s&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white truncate",children:a?.username||"User"}),e.jsx("p",{className:"text-xs text-slate-500 truncate",children:"Transport Manager"})]}),!s&&e.jsx("button",{onClick:u,className:"p-2 text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(T,{size:18})}),e.jsx(j,{collapsed:s})]})})]})]})},D=()=>{const[a,n]=r.useState(null),[d,s]=r.useState(!0);if(r.useEffect(()=>{const t=localStorage.getItem("user");t&&n(JSON.parse(t)),s(!1)},[]),d)return e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!a)return e.jsx(g,{to:"/login",replace:!0});const{isLocked:i}=x(),l=i();return e.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-slate-900 overflow-hidden",children:[l&&e.jsx(v,{}),e.jsx(O,{user:a}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-6 md:p-8",children:e.jsx(f,{})})})]})};export{D as default};
