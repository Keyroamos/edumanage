import{u as y,r as a,e as d,j as e}from"./vendor-Cr6tcs86.js";import{B as n}from"./index-wvMzqk1Z.js";import{$ as u,j as _,m as C,aA as D,F as S,X as z}from"./ui-BBn2VFCU.js";const L=()=>{const b=y(),[h,o]=a.useState([]),[g,c]=a.useState([]),[p,f]=a.useState(!0),[i,v]=a.useState(""),[j,r]=a.useState(!1),[t,l]=a.useState({first_name:"",last_name:"",phone_number:"",license_number:"",status:"ACTIVE",vehicle_id:""});a.useEffect(()=>{x()},[]);const x=async()=>{try{const[s,m]=await Promise.all([d.get("/api/transport/drivers/"),d.get("/api/transport/vehicles/")]);o(s.data.drivers||[]),c(m.data.vehicles||[])}catch(s){console.error(s),o([]),c([])}finally{f(!1)}},N=async s=>{s.preventDefault();try{await d.post("/api/transport/drivers/",{action:"CREATE",...t}),r(!1),l({first_name:"",last_name:"",phone_number:"",license_number:"",status:"ACTIVE",vehicle_id:""}),x()}catch{alert("Failed to create driver (Check if vehicle is already assigned or license is duplicate)")}},k=(h||[]).filter(s=>s.name?.toLowerCase().includes(i.toLowerCase())||s.license?.toLowerCase().includes(i.toLowerCase())),w=(g||[]).filter(s=>!s.driver_id);return p?e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 animate-fade-in-up pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Driver Management"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Manage drivers and vehicle assignments"})]}),e.jsxs(n,{onClick:()=>r(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-600/20",children:[e.jsx(u,{size:20,className:"mr-2"}),"Add Driver"]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by name or license...",value:i,onChange:s=>v(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[k.map(s=>e.jsxs("div",{onClick:()=>b(`/transport-portal/drivers/${s.id}`),className:"group relative bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-xl hover:-translate-y-1 transition-all cursor-pointer overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-50 dark:bg-indigo-900/10 rounded-full blur-2xl -mr-8 -mt-8 transition-all group-hover:bg-indigo-100 dark:group-hover:bg-indigo-900/20"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-700/50 text-slate-600 dark:text-slate-300 rounded-full",children:e.jsx(C,{size:24})}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${s.status==="ACTIVE"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30":"bg-slate-100 text-slate-600"}`,children:s.status})]}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:s.phone}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[e.jsx(D,{size:16}),e.jsx("span",{children:"Vehicle"})]}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-200",title:s.vehicle_plate,children:s.vehicle_plate})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[e.jsx(S,{size:16}),e.jsx("span",{children:"License"})]}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-200",children:s.license})]})]})]})]},s.id)),e.jsxs("button",{onClick:()=>r(!0),className:"border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-2xl p-6 flex flex-col items-center justify-center text-slate-400 hover:border-indigo-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-slate-800/50 transition-all group min-h-[250px]",children:[e.jsx("div",{className:"mb-4 p-4 bg-slate-50 dark:bg-slate-800 rounded-full group-hover:scale-110 transition-transform",children:e.jsx(u,{size:32})}),e.jsx("span",{className:"font-bold text-lg",children:"Add New Driver"})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl w-full max-w-lg shadow-2xl animate-scale-in overflow-hidden",children:[e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-900 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Add New Driver"}),e.jsx("button",{onClick:()=>r(!1),className:"text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(z,{size:24})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"First Name"}),e.jsx("input",{type:"text",required:!0,value:t.first_name,onChange:s=>l({...t,first_name:s.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Last Name"}),e.jsx("input",{type:"text",required:!0,value:t.last_name,onChange:s=>l({...t,last_name:s.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Phone Number"}),e.jsx("input",{type:"tel",required:!0,value:t.phone_number,onChange:s=>l({...t,phone_number:s.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"License Number"}),e.jsx("input",{type:"text",required:!0,value:t.license_number,onChange:s=>l({...t,license_number:s.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Assigned Vehicle"}),e.jsxs("select",{value:t.vehicle_id,onChange:s=>l({...t,vehicle_id:s.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white",children:[e.jsx("option",{value:"",children:"-- Unassigned --"}),w.map(s=>e.jsxs("option",{value:s.id,children:[s.plate_number," (",s.model,")"]},s.id))]})]}),e.jsxs("div",{className:"pt-2 flex gap-3",children:[e.jsx(n,{type:"button",variant:"outline",className:"flex-1",onClick:()=>r(!1),children:"Cancel"}),e.jsx(n,{type:"submit",className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white",children:"Save Driver"})]})]})})]})})]})};export{L as default};
