import{u as z,r as c,j as e,e as R,m as D}from"./vendor-Cr6tcs86.js";import{u as _,B as m}from"./index-BgOWsDi2.js";import{q as M,U as f,D as j,g as p,G as N,C as v,r as G,s as k,t as w}from"./ui-BBn2VFCU.js";import{R as L,A as F,C as $,X as I,Y as U,T as K,a as O}from"./charts-Fmv3L88u.js";const o=({title:s,value:h,subtext:l,icon:r,colorClass:n,trend:a,onClick:i})=>e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`p-4 rounded-2xl transition-all ${i?"cursor-pointer hover:bg-slate-100 dark:hover:bg-white/5":""}`,onClick:i,children:[e.jsxs("div",{className:"flex justify-center md:justify-between items-center md:items-start w-full mb-3",children:[e.jsx("div",{className:`p-2.5 rounded-xl shadow-lg ${n} shadow-${n.split("-")[1]}-500/20`,children:e.jsx(r,{size:18,className:"text-white"})}),a!==void 0&&e.jsxs("div",{className:`hidden md:flex items-center space-x-1 px-3 py-1.5 rounded-full text-xs font-black tracking-tighter ${a>=0?"text-emerald-500 bg-emerald-500/10":"text-rose-500 bg-rose-500/10"}`,children:[a>=0?e.jsx(k,{size:14}):e.jsx(w,{size:14}),e.jsxs("span",{children:[Math.abs(a),"%"]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-[10px] font-black uppercase tracking-widest",children:s}),e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white mt-1 tracking-tight",children:h}),e.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-[10px] font-medium mt-0.5",children:l})]}),a!==void 0&&e.jsxs("div",{className:`flex md:hidden items-center space-x-1 px-2 py-1 rounded-lg text-xs font-medium mt-2 ${a>=0?"text-green-600 bg-green-50 dark:bg-green-900/30":"text-red-600 bg-red-50 dark:bg-red-900/30"}`,children:[a>=0?e.jsx(k,{size:14}):e.jsx(w,{size:14}),e.jsxs("span",{children:[Math.abs(a),"%"]})]})]}),Y=()=>{const s=z(),{config:h,hasFeature:l}=_(),[r,n]=c.useState({}),[a,i]=c.useState([]),[u,g]=c.useState([]),[y,b]=c.useState(!0),C=JSON.parse(localStorage.getItem("user")||"{}");if(c.useEffect(()=>{(async()=>{r||b(!0);try{const d=await R.get("/api/dashboard/");n(d.data.stats||{});const x=d?.data?.chart_data;if(x?.labels&&x?.revenue){const S=x.labels.map((E,T)=>({name:E,revenue:x.revenue[T]||0}));i(S)}else i([]);g(d?.data?.recent_payments||[])}catch(d){console.error("Error fetching dashboard data:",d),n({}),i([]),g([])}finally{b(!1)}})()},[]),y&&!r)return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});const A=()=>{const t=new Date().getHours();return t<12?"Good Morning":t<18?"Good Afternoon":"Good Evening"};return e.jsxs("div",{className:"p-4 max-w-7xl mx-auto space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-xl p-4 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg font-bold mb-0.5",children:[A(),", ",C.first_name||"Admin","! ðŸ‘‹"]}),e.jsxs("p",{className:"text-primary-100 text-xs",children:["Here's what's happening with ",h.school_name," today"]})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-xl",children:[e.jsx(M,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[e.jsx(o,{title:"Total Students",value:r?.total_students||0,subtext:`${r?.new_students||0} joined this month`,icon:f,colorClass:"bg-blue-500",onClick:()=>s("/students")}),l("FINANCE_MANAGEMENT")?e.jsx(o,{title:"Total Revenue",value:`KES ${(r?.total_revenue||0).toLocaleString()}`,subtext:"Total fees collected",icon:j,colorClass:"bg-emerald-500",onClick:()=>s("/finance")}):e.jsx(o,{title:"Total Revenue",value:e.jsx(p,{size:28,className:"text-slate-400 mt-1"}),subtext:"Standard plan required",icon:j,colorClass:"bg-slate-400",onClick:()=>s("/subscription")}),e.jsx(o,{title:"Teaching Staff",value:r?.total_teachers||0,subtext:"Active teachers",icon:N,colorClass:"bg-violet-500",onClick:()=>s("/teachers")}),e.jsx(o,{title:"Attendance Rate",value:`${r?.attendance_rate||0}%`,subtext:"Today's attendance",icon:v,colorClass:"bg-amber-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white/50 dark:bg-slate-900/50 p-4 rounded-2xl border border-transparent relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white tracking-tight uppercase",children:"Revenue Analytics"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Monthly fee collection trends"})]}),e.jsxs("select",{className:"bg-slate-100 dark:bg-slate-800 border-none rounded-xl text-sm px-4 py-2 text-slate-600 dark:text-slate-300 focus:ring-2 focus:ring-primary-100 focus:outline-none font-bold",children:[e.jsx("option",{children:"Last 6 Months"}),e.jsx("option",{children:"This Year"})]})]}),l("FINANCE_MANAGEMENT")?e.jsx("div",{className:"h-80 w-full min-h-[320px]",children:e.jsx(L,{width:"99%",height:320,minHeight:320,children:e.jsxs(F,{data:a.length>0?a:[{name:"N/A",revenue:0}],children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})}),e.jsx($,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9",strokeOpacity:.1}),e.jsx(I,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:12},dy:10}),e.jsx(U,{axisLine:!1,tickLine:!1,tick:{fill:"#64748b",fontSize:12},tickFormatter:t=>`${(t/1e3).toFixed(0)}k`}),e.jsx(K,{contentStyle:{borderRadius:"20px",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)",padding:"16px",backgroundColor:"rgba(15, 23, 42, 0.9)",backdropFilter:"blur(8px)",color:"#fff"},formatter:t=>[`KES ${t.toLocaleString()}`,"Revenue"]}),e.jsx(O,{type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:4,fillOpacity:1,fill:"url(#colorRevenue)"})]})})}):e.jsxs("div",{className:"h-80 w-full flex flex-col items-center justify-center bg-slate-50/50 dark:bg-slate-800/20 rounded-2xl border border-dashed border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"w-16 h-16 rounded-3xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-400 mb-4 shadow-sm",children:e.jsx(p,{size:28})}),e.jsx("p",{className:"text-xs text-slate-500 mb-6 font-medium",children:"Standard Edition Required"}),e.jsx(m,{size:"sm",onClick:()=>s("/subscription"),children:"View Plans"})]})]}),e.jsxs("div",{className:"bg-white/50 dark:bg-slate-900/50 p-4 rounded-2xl border border-transparent",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white tracking-tight uppercase tracking-widest",children:"Recent Payments"}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:"Latest transactions"})]}),l("FINANCE_MANAGEMENT")&&e.jsx(m,{variant:"ghost",size:"sm",className:"text-primary-600 hover:bg-primary-50",onClick:()=>s("/finance"),children:e.jsx(G,{size:16})})]}),l("FINANCE_MANAGEMENT")?e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:u.length>0?u.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-colors border border-transparent hover:border-slate-100 dark:hover:border-slate-700 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400 font-bold text-sm",children:t.student_name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:t.student_name}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:t.date})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:["+KES ",t.amount.toLocaleString()]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:t.method})]})]},t.id)):e.jsx("div",{className:"py-2",children:e.jsx("p",{className:"text-slate-400 text-xs italic",children:"No activity recorded for this period"})})}):e.jsxs("div",{className:"space-y-4",children:[[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50/50 dark:bg-slate-800/30 rounded-xl blur-[2px] opacity-40",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-200 dark:bg-slate-800"}),e.jsx("div",{className:"h-4 w-24 bg-slate-200 dark:bg-slate-800 rounded"})]}),e.jsx("div",{className:"h-4 w-12 bg-slate-200 dark:bg-slate-800 rounded"})]},t)),e.jsxs("div",{className:"text-center pt-2",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx(p,{size:14,className:"text-slate-400"})}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Premium History"})]})]}),l("FINANCE_MANAGEMENT")?e.jsx(m,{variant:"outline",className:"w-full mt-4",onClick:()=>s("/finance"),children:u.length>0?"View All Transactions":"Go to Finance Center"}):e.jsx(m,{variant:"outline",className:"w-full mt-4 border-dashed",onClick:()=>s("/subscription"),children:"Unlock Finance Center"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsx("button",{onClick:()=>s("/students/create"),className:"p-4 rounded-3xl transition-all text-left group hover:bg-slate-100 dark:hover:bg-white/5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-2xl group-hover:scale-110 transition-transform",children:e.jsx(f,{className:"text-blue-600 dark:text-blue-400",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-slate-900 dark:text-white text-sm",children:"New Student"}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-bold uppercase tracking-wider",children:"Register a new student"})]})]})}),e.jsx("button",{onClick:()=>s("/teachers/create"),className:"p-4 rounded-3xl transition-all text-left group hover:bg-slate-100 dark:hover:bg-white/5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-violet-100 dark:bg-violet-900/30 rounded-2xl group-hover:scale-110 transition-transform",children:e.jsx(N,{className:"text-violet-600 dark:text-violet-400",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-slate-900 dark:text-white text-sm",children:"Add Teacher"}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-bold uppercase tracking-wider",children:"Register new staff"})]})]})}),e.jsx("button",{onClick:()=>s("/schedule"),className:"p-4 rounded-3xl transition-all text-left group hover:bg-slate-100 dark:hover:bg-white/5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-amber-100 dark:bg-amber-900/30 rounded-2xl group-hover:scale-110 transition-transform",children:e.jsx(v,{className:"text-amber-600 dark:text-amber-400",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-slate-900 dark:text-white text-sm",children:"View Schedule"}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-bold uppercase tracking-wider",children:"Check timetable"})]})]})})]})]})};export{Y as default};
