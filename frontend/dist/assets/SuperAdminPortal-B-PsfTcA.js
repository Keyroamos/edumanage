import{r as l,e as o,j as e}from"./vendor-Cr6tcs86.js";import{z as a}from"./index-wvMzqk1Z.js";import{j as k,ah as _,v as C,a4 as S,ap as E,b2 as g,f as j,J as v,Y as z,_ as T}from"./ui-BBn2VFCU.js";const P=()=>{const[x,p]=l.useState([]),[A,u]=l.useState(!0),[i,N]=l.useState(""),[s,n]=l.useState(null),[w,r]=l.useState(!1);l.useEffect(()=>{d()},[]);const d=async()=>{try{u(!0);const t=await o.get("/api/super-portal/schools/");p(t.data)}catch(t){console.error("Error fetching schools:",t),a.error("Failed to load institution data")}finally{u(!1)}},m=async t=>{try{await o.post(`/api/super-portal/schools/${t}/toggle-active/`),a.success("Access state toggled"),d()}catch{a.error("Control command failed")}},h=async t=>{if(window.confirm("CRITICAL ACTION: Are you sure? This will purge all school data from the core."))try{await o.delete(`/api/super-portal/schools/${t}/`),a.success("Institution purged"),p(x.filter(c=>c.id!==t))}catch{a.error("Purge operation failed")}},y=async t=>{t.preventDefault();try{await o.patch(`/api/super-portal/schools/${s.id}/`,{subscription_plan:s.subscription_plan,subscription_status:s.subscription_status}),a.success("Core configuration updated"),r(!1),d()}catch{a.error("Config update failed")}},b=t=>{localStorage.setItem("portal_slug",t.portal_slug),window.open("/dashboard","_blank")},f=x.filter(t=>t.school_name.toLowerCase().includes(i.toLowerCase())||t.school_code.toLowerCase().includes(i.toLowerCase())||t.admin_email&&t.admin_email.toLowerCase().includes(i.toLowerCase()));return e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-10",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-black text-white tracking-tight mb-2",children:"INSTITUTION REGISTRY"}),e.jsx("p",{className:"text-slate-500 font-medium text-sm lg:text-base",children:"Manage and monitor all connected educational entities"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full lg:w-auto",children:[e.jsxs("div",{className:"relative group flex-1 lg:flex-none",children:[e.jsx(k,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-primary-500 transition-colors",size:18}),e.jsx("input",{type:"text",placeholder:"Find institution...",className:"bg-slate-900 border border-slate-800 rounded-2xl py-3 pl-12 pr-6 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none w-full lg:w-80 text-sm text-white placeholder:text-slate-600 transition-all font-medium",value:i,onChange:t=>N(t.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"p-3 bg-slate-900 border border-slate-800 rounded-2xl text-slate-400 hover:text-white hover:border-slate-700 transition-all",children:e.jsx(_,{size:20})}),e.jsx("button",{className:"p-3 bg-slate-900 border border-slate-800 rounded-2xl text-slate-400 hover:text-white hover:border-slate-700 transition-all",children:e.jsx(C,{size:20})})]})]})]}),e.jsx("div",{className:"hidden lg:block bg-slate-900/30 backdrop-blur-xl border border-slate-800 rounded-[2.5rem] overflow-hidden shadow-2xl",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-800",children:[e.jsx("th",{className:"px-8 py-6 text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Institution Profile"}),e.jsx("th",{className:"px-8 py-6 text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Population"}),e.jsx("th",{className:"px-8 py-6 text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Deployment"}),e.jsx("th",{className:"px-8 py-6 text-xs font-black text-slate-500 uppercase tracking-[0.2em]",children:"Status"}),e.jsx("th",{className:"px-8 py-6 text-xs font-black text-slate-500 uppercase tracking-[0.2em] text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800/40",children:f.map(t=>e.jsxs("tr",{className:"hover:bg-primary-500/[0.02] transition-colors group",children:[e.jsx("td",{className:"px-8 py-6",children:e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("span",{className:"text-base font-black text-white group-hover:text-primary-400 transition-colors",children:t.school_name}),e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-slate-500 font-bold overflow-hidden",children:[e.jsx(S,{size:12,className:"shrink-0"})," ",t.admin_email]}),e.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-primary-500/80 font-black tracking-widest uppercase",children:[e.jsx(E,{size:12,className:"shrink-0"})," ",t.portal_slug]})]})]})}),e.jsx("td",{className:"px-8 py-6",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-black text-white leading-none",children:t.student_count}),e.jsx("span",{className:"text-[10px] text-slate-500 font-black uppercase tracking-tighter",children:"Students"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-black text-white leading-none",children:t.staff_total||0}),e.jsx("span",{className:"text-[10px] text-slate-500 font-black uppercase tracking-tighter",children:"Staff"})]})]})}),e.jsx("td",{className:"px-8 py-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`w-fit px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${t.subscription_plan==="Enterprise"?"bg-purple-500/10 text-purple-400 border border-purple-500/20":t.subscription_plan==="Standard"?"bg-blue-500/10 text-blue-400 border border-blue-500/20":"bg-slate-500/10 text-slate-400 border border-slate-500/20"}`,children:t.subscription_plan}),e.jsx("span",{className:"text-[10px] text-slate-600 font-bold uppercase mt-1",children:t.subscription_status})]})}),e.jsx("td",{className:"px-8 py-6",children:e.jsxs("button",{onClick:()=>m(t.id),className:`flex items-center gap-2 px-4 py-2 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all ${t.is_active?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 hover:bg-emerald-500/20 shadow-lg shadow-emerald-500/5":"bg-rose-500/10 text-rose-400 border border-rose-500/20 hover:bg-rose-500/20"}`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t.is_active?"bg-emerald-500 animate-pulse":"bg-rose-500"}`}),t.is_active?"Online":"Restricted"]})}),e.jsx("td",{className:"px-8 py-6 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-3 opacity-0 group-hover:opacity-100 transition-all duration-300 translate-x-4 group-hover:translate-x-0",children:[e.jsx("button",{onClick:()=>b(t),className:"w-10 h-10 flex items-center justify-center bg-slate-800/80 hover:bg-primary-600 text-slate-300 hover:text-white rounded-xl transition-all shadow-xl",title:"Control Dashboard",children:e.jsx(g,{size:16})}),e.jsx("button",{onClick:()=>{n(t),r(!0)},className:"w-10 h-10 flex items-center justify-center bg-slate-800/80 hover:bg-indigo-600 text-slate-300 hover:text-white rounded-xl transition-all shadow-xl",title:"System Configuration",children:e.jsx(j,{size:16})}),e.jsx("button",{onClick:()=>h(t.id),className:"w-10 h-10 flex items-center justify-center bg-slate-800/80 hover:bg-rose-600 text-slate-300 hover:text-white rounded-xl transition-all shadow-xl",title:"Purge Command",children:e.jsx(v,{size:16})})]})})]},t.id))})]})})}),e.jsx("div",{className:"lg:hidden space-y-4",children:f.map(t=>e.jsxs("div",{className:"bg-slate-900/40 border border-slate-800 rounded-3xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black text-white leading-tight",children:t.school_name}),e.jsx("p",{className:"text-xs text-slate-500 font-bold truncate max-w-[200px] mt-1",children:t.admin_email})]}),e.jsx("button",{onClick:()=>m(t.id),className:`p-2 rounded-xl border ${t.is_active?"bg-emerald-500/10 border-emerald-500/20 text-emerald-500":"bg-rose-500/10 border-rose-500/20 text-rose-500"}`,children:e.jsx(z,{size:18})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4 border-y border-slate-800/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest mb-1",children:"Students"}),e.jsx("p",{className:"text-xl font-black text-white",children:t.student_count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest mb-1",children:"Staff"}),e.jsx("p",{className:"text-xl font-black text-white",children:t.staff_total||0})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-lg text-[10px] font-black uppercase tracking-widest w-fit ${t.subscription_plan==="Enterprise"?"bg-purple-500/10 text-purple-400":"bg-blue-500/10 text-blue-400"}`,children:t.subscription_plan}),e.jsx("span",{className:"text-[10px] text-primary-500 font-black truncate",children:t.portal_slug})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>b(t),className:"p-3 bg-slate-800 rounded-xl text-slate-400 hover:text-white",children:e.jsx(g,{size:16})}),e.jsx("button",{onClick:()=>{n(t),r(!0)},className:"p-3 bg-slate-800 rounded-xl text-slate-400 hover:text-white",children:e.jsx(j,{size:16})}),e.jsx("button",{onClick:()=>h(t.id),className:"p-3 bg-rose-500/10 text-rose-500 rounded-xl",children:e.jsx(v,{size:16})})]})]})]},t.id))}),w&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-950/80 backdrop-blur-md p-4 animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[3rem] w-full max-w-lg shadow-[0_0_100px_rgba(0,0,0,0.5)] overflow-hidden",children:[e.jsxs("div",{className:"px-10 py-8 border-b border-slate-800 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-2xl text-white tracking-tight",children:"CONFIGURE CELL"}),e.jsxs("p",{className:"text-slate-500 text-xs font-medium uppercase tracking-widest mt-1",children:[s.school_name," // 0x",s.id]})]}),e.jsx("button",{onClick:()=>r(!1),className:"w-12 h-12 flex items-center justify-center bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white rounded-2xl transition-all",children:e.jsx(T,{})})]}),e.jsxs("form",{onSubmit:y,className:"p-10 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Licensing Tier"}),e.jsxs("select",{className:"w-full bg-slate-950 border border-slate-800 rounded-2xl p-5 text-sm text-white focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all font-bold appearance-none cursor-pointer",value:s.subscription_plan,onChange:t=>n({...s,subscription_plan:t.target.value}),children:[e.jsx("option",{value:"Basic",children:"Basic Deployment"}),e.jsx("option",{value:"Standard",children:"Standard Deployment"}),e.jsx("option",{value:"Enterprise",children:"Enterprise Deployment"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] ml-2",children:"Account State"}),e.jsxs("select",{className:"w-full bg-slate-950 border border-slate-800 rounded-2xl p-5 text-sm text-white focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all font-bold appearance-none cursor-pointer",value:s.subscription_status,onChange:t=>n({...s,subscription_status:t.target.value}),children:[e.jsx("option",{value:"Trial",children:"Evaluation Phase"}),e.jsx("option",{value:"Active",children:"Authorized Active"}),e.jsx("option",{value:"Expired",children:"Deployment Expired"}),e.jsx("option",{value:"Canceled",children:"Service Terminated"})]})]})]}),e.jsxs("div",{className:"pt-6 flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>r(!1),className:"flex-1 px-8 py-5 bg-slate-800 hover:bg-slate-750 text-slate-300 rounded-2xl text-xs font-black uppercase tracking-widest transition-all",children:"Abort"}),e.jsx("button",{type:"submit",className:"flex-1 px-8 py-5 bg-gradient-to-r from-primary-600 to-primary-500 hover:from-primary-500 hover:to-primary-400 text-white rounded-2xl text-xs font-black uppercase tracking-widest shadow-xl shadow-primary-500/20 transition-all active:scale-95",children:"Push Update"})]})]})]})})]})};export{P as default};
