import{k as h,u as b,r as l,j as e,e as f}from"./vendor-Cr6tcs86.js";import{u as j,B as g}from"./index-BxkJ-YYo.js";import{l as u}from"./index-D0pjtuUa.js";import{p as N,aj as v,G as w,aq as y,V as k,a3 as S,a4 as C,w as D,aG as L}from"./ui-BBn2VFCU.js";const _=()=>{const{id:r}=h(),d=b(),{config:t}=j(),[i,x]=l.useState(null),[o,p]=l.useState(!0),c=l.useRef();l.useEffect(()=>{(async()=>{try{const n=await f.get(`/api/finance/transactions/${r}/`);x(n.data)}catch(n){console.error(n)}finally{p(!1)}})()},[r]);const m=u.useReactToPrint({contentRef:c,documentTitle:`Receipt_${i?.transaction?.id||"doc"}`});if(o)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})});if(!i)return e.jsx("div",{className:"p-12 text-center text-slate-500",children:"Transaction not found."});const{transaction:s,student:a}=i;return e.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto space-y-8 bg-slate-50 dark:bg-slate-950/20 min-h-screen",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 bg-white dark:bg-slate-900 p-4 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm print:hidden",children:[e.jsxs("button",{onClick:()=>d(-1),className:"flex items-center gap-2 text-slate-500 hover:text-slate-900 transition-colors font-medium",children:[e.jsx(N,{size:18})," Back to Ledger"]}),e.jsx("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:e.jsxs(g,{variant:"outline",className:"flex-1 sm:flex-initial gap-2 border-slate-200 hover:bg-slate-50",onClick:m,children:[e.jsx(v,{size:18})," Print Receipt"]})})]}),e.jsx("div",{className:"flex justify-center items-start",children:e.jsxs("div",{ref:c,className:"w-full max-w-[210mm] bg-white text-slate-950 shadow-2xl overflow-hidden relative",style:{fontFamily:"'Inter', sans-serif",padding:"12mm"},children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-[0.02] pointer-events-none select-none overflow-hidden",children:e.jsx(w,{size:400,strokeWidth:1})}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-indigo-600"}),e.jsxs("div",{className:"flex justify-between items-start border-b border-slate-100 pb-6 mb-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 bg-indigo-600 rounded-xl flex items-center justify-center text-white shadow-lg overflow-hidden shrink-0",children:t.school_logo?e.jsx("img",{src:t.school_logo,alt:"School Logo",className:"h-full w-full object-cover"}):e.jsx(y,{size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold uppercase tracking-tight text-indigo-950 leading-tight",children:t.school_name}),e.jsx("p",{className:"text-indigo-600 font-semibold tracking-widest text-[9px] uppercase",children:"Official Financial Document"})]})]}),e.jsxs("div",{className:"text-[11px] text-slate-500 space-y-0.5 pl-1 leading-relaxed",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(k,{size:11,className:"text-slate-400"})," ",t.school_address]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(S,{size:11,className:"text-slate-400"})," ",t.school_phone," | ",e.jsx(C,{size:11,className:"text-slate-400"})," ",t.school_email]})]})]}),e.jsxs("div",{className:"text-right space-y-2",children:[e.jsx("div",{className:"bg-indigo-50 text-indigo-700 font-bold text-xl px-5 py-2 rounded-2xl inline-block ring-1 ring-indigo-100 uppercase tracking-tighter",children:"RECEIPT"}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:"Receipt Number"}),e.jsxs("p",{className:"text-sm font-mono font-bold text-slate-900 tracking-tight",children:["#",s.id.toString().padStart(8,"0")]})]}),e.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-emerald-50 text-emerald-700 px-3 py-1 rounded-full text-[9px] font-bold uppercase ring-1 ring-emerald-100",children:[e.jsx(D,{size:11,strokeWidth:3})," Payment Captured"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-slate-50/50 p-5 rounded-2xl ring-1 ring-slate-100",children:[e.jsx("h3",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest mb-3 border-b border-slate-200 pb-1.5 font-sans",children:"Student Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:"Full Name"}),e.jsx("span",{className:"text-[12px] font-bold text-slate-900 uppercase",children:a.name})]}),e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:"Admission No."}),e.jsx("span",{className:"text-[11px] font-mono font-bold text-slate-900",children:a.admission_number})]}),e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:"Current Grade"}),e.jsx("span",{className:"text-[11px] font-bold text-slate-700 bg-white px-2 py-0.5 rounded border border-slate-100",children:a.grade})]})]})]}),e.jsxs("div",{className:"bg-slate-50/50 p-5 rounded-2xl ring-1 ring-slate-100",children:[e.jsx("h3",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest mb-3 border-b border-slate-200 pb-1.5 font-sans",children:"Transaction Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:"Date & Time"}),e.jsx("span",{className:"text-[11px] font-semibold text-slate-700",children:s.date})]}),e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:"Method"}),e.jsx("span",{className:"text-[11px] font-bold text-slate-900 uppercase",children:s.method})]}),e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:"Ref Code"}),e.jsx("span",{className:"text-[11px] font-mono font-bold text-indigo-700",children:s.reference||"N/A"})]})]})]})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left border-b border-slate-200",children:[e.jsx("th",{className:"py-3 px-4 bg-slate-900 text-white font-bold uppercase text-[9px] tracking-widest rounded-tl-xl",children:"Description of Service/Fee"}),e.jsx("th",{className:"py-3 px-4 bg-slate-900 text-white font-bold uppercase text-[9px] tracking-widest text-right",children:"Unit Price"}),e.jsx("th",{className:"py-3 px-4 bg-slate-900 text-white font-bold uppercase text-[9px] tracking-widest text-right rounded-tr-xl",children:"Amount (KES)"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:e.jsxs("tr",{children:[e.jsxs("td",{className:"py-5 px-4",children:[e.jsx("p",{className:"font-bold text-[13px] text-slate-900",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-[8px] font-bold text-white bg-indigo-500 px-1.5 py-0.5 rounded uppercase",children:"Category"}),e.jsx("span",{className:"text-[10px] font-medium text-slate-400 capitalize",children:s.type?.toLowerCase().replace("_"," ")})]})]}),e.jsxs("td",{className:"py-5 px-4 text-right font-mono text-[12px] text-slate-500",children:[s.amount.toLocaleString(),".00"]}),e.jsxs("td",{className:"py-5 px-4 text-right font-mono text-[14px] font-bold text-slate-900",children:[s.amount.toLocaleString(),".00"]})]})}),e.jsxs("tfoot",{children:[e.jsxs("tr",{children:[e.jsx("td",{colSpan:"2",className:"py-5 text-right pr-4",children:e.jsx("p",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-widest",children:"Total Net Payment"})}),e.jsx("td",{className:`py-5 px-4 text-right bg-indigo-50 ${a.balance>0?"":"rounded-b-xl"}`,children:e.jsxs("p",{className:"text-xl font-bold text-indigo-700",children:[e.jsx("span",{className:"text-xs font-bold mr-1",children:"KES"}),s.amount.toLocaleString(),".00"]})})]}),a.balance>0&&e.jsxs("tr",{children:[e.jsx("td",{colSpan:"2",className:"py-4 text-right pr-4 border-t border-slate-100",children:e.jsx("p",{className:"text-[10px] font-bold text-red-400 uppercase tracking-widest",children:"Outstanding Balance"})}),e.jsx("td",{className:"py-4 px-4 text-right bg-red-50 rounded-b-xl border-t border-white",children:e.jsxs("p",{className:"text-sm font-bold text-red-600",children:[e.jsx("span",{className:"text-[10px] mr-1",children:"KES"}),a.balance.toLocaleString(),".00"]})})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-12 pt-6 border-t border-slate-100",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl border border-slate-100 inline-block",children:[e.jsx("div",{className:"h-20 w-20 bg-white flex items-center justify-center border-2 border-slate-100",children:e.jsx(L,{size:64,className:"text-slate-200"})}),e.jsx("p",{className:"text-[7px] text-slate-400 mt-1.5 font-mono uppercase text-center",children:"Scan to Verify"})]}),e.jsx("div",{className:"space-y-1",children:e.jsxs("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-tight leading-normal",children:["Disclaimers & Conditions:",e.jsx("br",{}),e.jsxs("span",{className:"font-medium",children:["1. Computer-generated official receipt.",e.jsx("br",{}),"2. Fees are non-refundable/transferable.",e.jsx("br",{}),"3. Retain for future academic queries."]})]})})]}),e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[9px] text-slate-400 font-bold uppercase tracking-widest mb-1",children:"Served By:"}),e.jsx("p",{className:"text-[13px] font-bold text-slate-800 italic",children:s.recorded_by}),e.jsx("p",{className:"text-[8px] text-slate-400 font-mono mt-0.5",children:"Authorized Finance Officer"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"border-b border-slate-200 pb-1 flex justify-between items-baseline",children:[e.jsx("span",{className:"text-[8px] font-bold text-slate-300 uppercase",children:"OFFICIAL SEAL / STAMP"}),e.jsx("div",{className:"h-16 w-16 rounded-full border-2 border-dashed border-slate-100"})]}),e.jsxs("div",{className:"flex justify-between items-center text-[8px] text-slate-400 font-bold uppercase",children:[e.jsxs("span",{children:["Date of Issue: ",new Date().toLocaleDateString()]}),e.jsxs("span",{className:"font-mono",children:["CID: ",Math.random().toString(36).substring(2,8).toUpperCase()]})]})]})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-[8px] text-slate-300 font-bold uppercase tracking-[0.3em]",children:[t.school_name," - ",new Date().getFullYear()," - OFFICIAL DOCUMENT"]})})]})}),e.jsx("style",{children:`
                @media print {
                    @page {
                        size: A4;
                        margin: 0;
                    }
                    body {
                        background: white !important;
                        print-color-adjust: exact;
                        -webkit-print-color-adjust: exact;
                    }
                }
            `})]})};export{_ as default};
