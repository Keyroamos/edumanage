import{u as w,r as l,j as e,e as y}from"./vendor-Cr6tcs86.js";import{B as m}from"./index-41VSs_U4.js";import{p as C,aj as S,v as L,D as A,C as M,ah as T,j as z,ai as E,K as P,N as B}from"./ui-BBn2VFCU.js";const R=()=>{const h=w(),[b,g]=l.useState([]),[p,u]=l.useState(!0),[a,j]=l.useState(""),[d,f]=l.useState("ALL"),[n,x]=l.useState(1),o=15;l.useEffect(()=>{(async()=>{try{const t=await y.get("/api/finance/transactions/");g(t.data.transactions||[])}catch(t){console.error("Error fetching transactions:",t)}finally{u(!1)}})()},[]);const r=b.filter(s=>{const t=s.student.toLowerCase().includes(a.toLowerCase())||s.reference.toLowerCase().includes(a.toLowerCase())||s.admission_no.toLowerCase().includes(a.toLowerCase()),v=d==="ALL"||s.method===d;return t&&v}),i=Math.ceil(r.length/o),c=(n-1)*o,N=r.slice(c,c+o),k=r.reduce((s,t)=>s+t.amount,0);return p?e.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-50 dark:bg-slate-950",children:e.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-slate-200 dark:border-slate-800 border-t-indigo-600 animate-spin"})}):e.jsxs("div",{className:"p-4 md:p-8 max-w-[1400px] mx-auto space-y-6 min-h-screen bg-slate-50/50 dark:bg-slate-950/20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>h("/finance"),className:"p-2.5 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-sm hover:bg-slate-50 transition-colors",children:e.jsx(C,{size:20,className:"text-slate-600 dark:text-slate-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Transaction Ledger"}),e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Complete payment history and financial records"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(m,{variant:"outline",className:"h-10 px-4 text-xs font-semibold bg-white dark:bg-slate-900 shadow-sm border-slate-200 dark:border-slate-800",children:[e.jsx(S,{size:16,className:"mr-2"})," Print"]}),e.jsxs(m,{variant:"primary",className:"h-10 px-4 text-xs font-semibold bg-indigo-600 border-none shadow-sm",children:[e.jsx(L,{size:16,className:"mr-2"})," Export CSV"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-5 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-emerald-50 dark:bg-emerald-500/10 rounded-lg",children:e.jsx(A,{size:18,className:"text-emerald-600"})}),e.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Total Volume"})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["KES ",k.toLocaleString()]}),e.jsx("span",{className:"text-[10px] font-bold text-emerald-600 px-1.5 py-0.5 bg-emerald-50 dark:bg-emerald-500/10 rounded tracking-tight",children:"+12%"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-5 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-500/10 rounded-lg",children:e.jsx(M,{size:18,className:"text-indigo-600"})}),e.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Count"})]}),e.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:r.length})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-5 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm sm:col-span-2 lg:col-span-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-slate-50 dark:bg-slate-800 rounded-lg",children:e.jsx(T,{size:18,className:"text-slate-500"})}),e.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Active Filters"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-[10px] font-bold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:[d," Method"]}),a&&e.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-[10px] font-bold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:["Search: ",a]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(z,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search student, ref, admission...",value:a,onChange:s=>j(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-800 border-none rounded-lg text-sm font-medium text-slate-600 dark:text-slate-300 outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:d,onChange:s=>f(s.target.value),className:"px-4 py-2 bg-slate-50 dark:bg-slate-800 border-none rounded-lg text-sm font-semibold text-slate-600 dark:text-slate-300 outline-none focus:ring-2 focus:ring-indigo-500/20",children:[e.jsx("option",{value:"ALL",children:"All Methods"}),e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"MPESA",children:"M-Pesa"}),e.jsx("option",{value:"BANK",children:"Bank Transfer"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-800",children:e.jsxs("tr",{className:"text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:[e.jsx("th",{className:"px-6 py-4",children:"Reference"}),e.jsx("th",{className:"px-6 py-4",children:"Student"}),e.jsx("th",{className:"px-6 py-4",children:"Date"}),e.jsx("th",{className:"px-6 py-4",children:"Method"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:N.map((s,t)=>e.jsxs("tr",{className:"group hover:bg-slate-50/50 dark:hover:bg-slate-800/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-xs font-mono font-medium text-slate-500 bg-slate-50 dark:bg-slate-800 px-2 py-1 rounded border border-slate-200 dark:border-slate-700",children:s.reference})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-indigo-600 font-bold text-xs border border-slate-200 dark:border-slate-700",children:s.student.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white leading-tight",children:s.student}),e.jsx("p",{className:"text-[10px] font-medium text-slate-500",children:s.admission_no})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:s.date})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider ${s.method==="MPESA"?"bg-emerald-50 text-emerald-600 border border-emerald-100":s.method==="CASH"?"bg-blue-50 text-blue-600 border border-blue-100":"bg-indigo-50 text-indigo-600 border border-indigo-100"}`,children:s.method})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("span",{className:"text-sm font-bold text-emerald-600",children:["KES ",s.amount.toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("button",{className:"p-1.5 rounded bg-slate-100 dark:bg-slate-800 text-slate-400 hover:text-slate-600 transition-colors",children:e.jsx(E,{size:14})})})]},s.id))})]})}),i>1&&e.jsxs("div",{className:"p-4 bg-slate-50/50 dark:bg-slate-800/30 border-t border-slate-100 dark:border-slate-800 flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("p",{className:"text-xs font-medium text-slate-500",children:["Showing ",c+1," to ",Math.min(c+o,r.length)," of ",r.length]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>x(s=>Math.max(1,s-1)),disabled:n===1,className:"p-2 rounded-lg bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 text-slate-500 disabled:opacity-50",children:e.jsx(P,{size:16})}),[...Array(i)].map((s,t)=>e.jsx("button",{onClick:()=>x(t+1),className:`w-9 h-9 rounded-lg text-xs font-bold transition-all ${n===t+1?"bg-indigo-600 text-white shadow-sm":"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 text-slate-500 hover:bg-slate-50"}`,children:t+1},t+1)),e.jsx("button",{onClick:()=>x(s=>Math.min(i,s+1)),disabled:n===i,className:"p-2 rounded-lg bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 text-slate-500 disabled:opacity-50",children:e.jsx(B,{size:16})})]})]})]})]})};export{R as default};
