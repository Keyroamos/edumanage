import{k as w,u as k,r as n,e as x,j as e}from"./vendor-Cr6tcs86.js";import{B as i}from"./index-wvMzqk1Z.js";import{K as S,E,J as _,ab as c,V as D,a3 as z,a4 as C,m,D as b,q as P,Q as L,F as A,c as p,Y as R}from"./ui-BBn2VFCU.js";const h=({children:r,className:l=""})=>e.jsx("div",{className:`bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden ${l}`,children:r}),F=()=>{const{id:r}=w(),l=k(),[s,f]=n.useState(null),[j,g]=n.useState(!0),[d,N]=n.useState("overview");n.useEffect(()=>{u()},[r]);const u=async()=>{try{const a=await x.get(`/api/hr/staff/${r}/`);f(a.data.staff)}catch(a){console.error("Error fetching staff details:",a)}finally{g(!1)}},v=async()=>{if(window.confirm(`Are you sure you want to delete ${s.personal.full_name}?`))try{await x.delete(`/api/hr/staff/${s.id}/delete/`),l("/hr/staff")}catch{alert("Error deleting staff member")}};if(j)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!s)return e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Staff member not found"}),e.jsx(i,{variant:"outline",className:"mt-4",onClick:()=>l("/hr/staff"),children:"Back to Staff List"})]});const y=[{id:"overview",label:"Overview",icon:m},{id:"professional",label:"Professional",icon:c},{id:"financial",label:"Financial",icon:b},{id:"leaves",label:"Leave & Attendance",icon:P}];return e.jsx("div",{className:"p-6 md:p-8 bg-slate-50 dark:bg-slate-950 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(i,{variant:"ghost",onClick:()=>l("/hr/staff"),children:[e.jsx(S,{size:20,className:"mr-1"})," Back to Staff"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{variant:"outline",onClick:()=>l(`/hr/staff/${r}/edit`),children:[e.jsx(E,{size:18,className:"mr-2"})," Edit Profile"]}),e.jsxs(i,{variant:"destructive",onClick:v,children:[e.jsx(_,{size:18,className:"mr-2"})," Delete"]})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-800",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[e.jsxs("div",{className:"h-32 w-32 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-4xl font-bold text-slate-400 border-4 border-white dark:border-slate-900 shadow-md",children:[s.personal.first_name[0],s.personal.last_name[0]]}),e.jsxs("div",{className:"flex-1 text-center md:text-left space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:s.personal.full_name}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-3 text-slate-500 dark:text-slate-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(c,{size:16})," ",s.professional.position]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(D,{size:16})," ",s.personal.address||"No Address"]}),e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-bold border ${s.professional.status==="ACTIVE"?"bg-green-50 text-green-700 border-green-200":s.professional.status==="ON_LEAVE"?"bg-yellow-50 text-yellow-700 border-yellow-200":"bg-red-50 text-red-700 border-red-200"}`,children:s.professional.status})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 min-w-[200px]",children:[e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-100 dark:border-slate-800 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg text-blue-600",children:e.jsx(z,{size:18})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium",children:s.personal.phone})]})]}),e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-100 dark:border-slate-800 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg text-purple-600",children:e.jsx(C,{size:18})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Email"}),e.jsx("p",{className:"text-sm font-medium truncate max-w-[150px]",children:s.personal.email})]})]})]})]})}),e.jsx("div",{className:"flex overflow-x-auto border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 rounded-t-xl px-2",children:y.map(a=>e.jsxs("button",{onClick:()=>N(a.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${d===a.id?"border-primary-600 text-primary-600 dark:text-primary-400":"border-transparent text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[e.jsx(a.icon,{size:16}),a.label]},a.id))}),e.jsxs("div",{className:"space-y-6",children:[d==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(m,{size:20,className:"text-primary-500"})," Personal Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(t,{label:"First Name",value:s.personal.first_name}),e.jsx(t,{label:"Last Name",value:s.personal.last_name}),e.jsx(t,{label:"National ID",value:s.personal.national_id}),e.jsx(t,{label:"Date of Birth",value:s.personal.date_of_birth}),e.jsx(t,{label:"Gender",value:s.personal.gender}),e.jsx(t,{label:"Nationality",value:s.personal.nationality}),e.jsx(t,{label:"Marital Status",value:s.personal.marital_status}),e.jsx(t,{label:"Religion",value:s.personal.religion})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(L,{size:20,className:"text-red-500"})," Emergency Contact"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(t,{label:"Name",value:s.emergency.contact_name||"Not provided"}),e.jsx(t,{label:"Phone",value:s.emergency.contact_phone||"Not provided"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(A,{size:20,className:"text-amber-500"})," Job Description"]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm leading-relaxed",children:s.professional.job_description||"No job description available."})]})]})]}),d==="professional"&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(c,{size:20,className:"text-blue-500"})," Employment Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(t,{label:"Staff Type",value:s.professional.staff_type_display}),e.jsx(t,{label:"Position",value:s.professional.position}),e.jsx(t,{label:"Date Joined",value:s.professional.date_joined}),e.jsx(t,{label:"Current Status",value:s.professional.status}),e.jsx(t,{label:"Supervisor",value:s.professional.supervisor_name||"None"})]})]}),d==="financial"&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(p,{size:20,className:"text-green-500"})," Financial Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[e.jsxs(h,{className:"p-6 bg-gradient-to-br from-indigo-500 to-indigo-600 text-white border-none shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 opacity-80",children:[e.jsx(b,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:"Basic Salary"})]}),e.jsxs("div",{className:"text-3xl font-bold",children:["KES ",s.financial.basic_salary?.toLocaleString()]}),e.jsx("div",{className:"mt-4 text-[10px] opacity-70 bg-white/10 px-2 py-1 rounded inline-block uppercase font-bold tracking-wider",children:"Base Rate"})]}),e.jsxs(h,{className:"p-6 bg-gradient-to-br from-emerald-500 to-emerald-600 text-white border-none shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 opacity-80",children:[e.jsx(p,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:"Net Pay"})]}),e.jsxs("div",{className:"text-3xl font-bold",children:["KES ",s.financial.net_salary?.toLocaleString()]}),e.jsx("div",{className:"mt-4 text-[10px] opacity-70 bg-white/10 px-2 py-1 rounded inline-block uppercase font-bold tracking-wider",children:"Take Home"})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/30 rounded-xl border border-slate-100 dark:border-slate-800 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest",children:"Financial Breakdown"}),e.jsx(i,{variant:"ghost",size:"sm",className:"text-[10px] h-7",onClick:()=>l("/finance/salaries",{state:{search:s.personal.full_name}}),children:"Manage in Payroll"})]}),e.jsxs("div",{className:"p-5 grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Monthly Allowances"}),e.jsxs("span",{className:"text-sm font-bold text-emerald-600",children:["+ KES ",s.financial.allowances?.toLocaleString()]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"PAYE/Other Deductions"}),e.jsxs("span",{className:"font-bold text-rose-500",children:["- KES ",s.financial.deductions?.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"NSSF Contribution"}),e.jsxs("span",{className:"font-bold text-rose-500",children:["- KES ",s.financial.nssf?.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"Loan Repayments"}),e.jsxs("span",{className:"font-bold text-rose-500",children:["- KES ",s.financial.loans?.toLocaleString()]})]})]})]})]}),e.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Salary Advances History"}),s.advances.length>0?e.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-200 dark:border-slate-800",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Date"}),e.jsx("th",{className:"px-4 py-3",children:"Amount"}),e.jsx("th",{className:"px-4 py-3",children:"Status"}),e.jsx("th",{className:"px-4 py-3",children:"Reason"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-800",children:s.advances.map((a,o)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3",children:a.date}),e.jsxs("td",{className:"px-4 py-3 font-medium",children:["KES ",a.amount.toLocaleString()]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${a.status==="APPROVED"?"bg-green-100 text-green-700":a.status==="REJECTED"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:a.status})}),e.jsx("td",{className:"px-4 py-3 text-slate-500",children:a.reason})]},o))})]})}):e.jsx("p",{className:"text-sm text-slate-500 italic",children:"No salary advance history found."})]}),d==="leaves"&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(B,{size:20,className:"text-purple-500"})," Recent Leave History"]}),s.leaves.length>0?e.jsx("div",{className:"space-y-4",children:s.leaves.map((a,o)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:a.type}),e.jsxs("p",{className:"text-sm text-slate-500",children:[a.start_date," - ",a.end_date]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${a.status==="APPROVED"?"bg-green-100 text-green-700":a.status==="REJECTED"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:a.status})})]},o))}):e.jsx("p",{className:"text-sm text-slate-500 italic",children:"No leave history found."})]})]})]})})},t=({label:r,value:l})=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center py-3 border-b border-slate-100 dark:border-slate-800 last:border-0",children:[e.jsx("span",{className:"text-sm text-slate-500 w-1/3",children:r}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white flex-1",children:l||"-"})]}),B=({size:r,className:l})=>e.jsx(R,{size:r,className:l});export{F as default};
