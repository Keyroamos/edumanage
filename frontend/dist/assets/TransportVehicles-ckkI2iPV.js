import{u as y,r as a,e as i,j as e}from"./vendor-Cr6tcs86.js";import{B as o}from"./index-41VSs_U4.js";import{$ as u,j as C,aA as b,V as A,m as S,X as _}from"./ui-BBn2VFCU.js";const T=()=>{const h=y(),[p,n]=a.useState([]),[g,c]=a.useState([]),[f,j]=a.useState(!0),[d,v]=a.useState(""),[N,r]=a.useState(!1),[t,l]=a.useState({plate_number:"",model:"",capacity:"",status:"ACTIVE",route_id:""});a.useEffect(()=>{x()},[]);const x=async()=>{try{const[s,m]=await Promise.all([i.get("/api/transport/vehicles/"),i.get("/api/transport/routes/")]);n(s.data.vehicles||[]),c(m.data.routes||[])}catch(s){console.error(s),n([]),c([])}finally{j(!1)}},k=async s=>{s.preventDefault();try{await i.post("/api/transport/vehicles/",{action:"CREATE",...t}),r(!1),l({plate_number:"",model:"",capacity:"",status:"ACTIVE",route_id:""}),x()}catch{alert("Failed to create vehicle")}},w=(p||[]).filter(s=>s.plate_number?.toLowerCase().includes(d.toLowerCase())||s.model?.toLowerCase().includes(d.toLowerCase()));return f?e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 animate-fade-in-up pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Fleet Management"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Manage school transport vehicles and route assignments"})]}),e.jsxs(o,{onClick:()=>r(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-600/20",children:[e.jsx(u,{size:20,className:"mr-2"}),"Add Vehicle"]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by plate number or model...",value:d,onChange:s=>v(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[w.map(s=>e.jsxs("div",{onClick:()=>h(`/transport-portal/vehicles/${s.id}`),className:"group relative bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-xl hover:-translate-y-1 transition-all cursor-pointer overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-50 dark:bg-indigo-900/10 rounded-full blur-2xl -mr-8 -mt-8 transition-all group-hover:bg-indigo-100 dark:group-hover:bg-indigo-900/20"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-xl",children:e.jsx(b,{size:24})}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${s.status==="ACTIVE"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30":s.status==="MAINTENANCE"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30":"bg-slate-100 text-slate-600"}`,children:s.status})]}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1 font-mono",children:s.plate_number}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:s.model}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[e.jsx(A,{size:16}),e.jsx("span",{children:"Route"})]}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-200 truncate max-w-[120px]",title:s.route_name,children:s.route_name})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[e.jsx(S,{size:16}),e.jsx("span",{children:"Driver"})]}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-200",children:s.driver_name})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[e.jsx(b,{size:16}),e.jsx("span",{children:"Capacity"})]}),e.jsxs("span",{className:"font-medium text-slate-900 dark:text-slate-200",children:[s.capacity," Seats"]})]})]})]})]},s.id)),e.jsxs("button",{onClick:()=>r(!0),className:"border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-2xl p-6 flex flex-col items-center justify-center text-slate-400 hover:border-indigo-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-slate-800/50 transition-all group min-h-[250px]",children:[e.jsx("div",{className:"mb-4 p-4 bg-slate-50 dark:bg-slate-800 rounded-full group-hover:scale-110 transition-transform",children:e.jsx(u,{size:32})}),e.jsx("span",{className:"font-bold text-lg",children:"Add New Vehicle"})]})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl w-full max-w-lg shadow-2xl animate-scale-in overflow-hidden",children:[e.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-900 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Add New Vehicle"}),e.jsx("button",{onClick:()=>r(!1),className:"text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(_,{size:24})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Plate Number"}),e.jsx("input",{type:"text",required:!0,value:t.plate_number,onChange:s=>l({...t,plate_number:s.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white",placeholder:"KAA 123B"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Model"}),e.jsx("input",{type:"text",required:!0,value:t.model,onChange:s=>l({...t,model:s.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white",placeholder:"Toyota Coaster"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Capacity"}),e.jsx("input",{type:"number",required:!0,value:t.capacity,onChange:s=>l({...t,capacity:s.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5 ml-1",children:"Assigned Route"}),e.jsxs("select",{value:t.route_id,onChange:s=>l({...t,route_id:s.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none dark:text-white",children:[e.jsx("option",{value:"",children:"-- Unassigned --"}),g.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"pt-2 flex gap-3",children:[e.jsx(o,{type:"button",variant:"outline",className:"flex-1",onClick:()=>r(!1),children:"Cancel"}),e.jsx(o,{type:"submit",className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white",children:"Save Vehicle"})]})]})})]})})]})};export{T as default};
