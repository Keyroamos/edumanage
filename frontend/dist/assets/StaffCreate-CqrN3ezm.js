import{u as T,r as c,j as e,m as h,e as j}from"./vendor-Cr6tcs86.js";import{B as b,I as r}from"./index-CiVwWrVG.js";import{X as R,h as M,m as L,ab as O,Q as N,a4 as D,a3 as y,C as _,V as P,K as B,N as z,O as H}from"./ui-BBn2VFCU.js";const K=()=>{const i=T(),[t,d]=c.useState(1),[x,o]=c.useState(!1),[u,p]=c.useState([]),[v,f]=c.useState(null),[a,C]=c.useState({first_name:"",last_name:"",email:"",phone:"",national_id:"",staff_type:"SUPPORT",position:"Staff",date_of_birth:"",date_joined:new Date().toISOString().split("T")[0],address:"",basic_salary:0,status:"ACTIVE",gender:"M",religion:"CHRISTIAN",marital_status:"SINGLE",nationality:"Kenyan",job_description:"",supervisor_id:"",emergency_contact_name:"",emergency_contact_phone:""});c.useEffect(()=>{(async()=>{try{const n=await j.get("/api/hr/staff/");p(n.data.staff||[])}catch(n){console.error("Error fetching staff for supervisors:",n)}})()},[]);const s=l=>{const{name:n,value:A}=l.target;C(w=>({...w,[n]:A}))},S=()=>d(l=>l+1),k=()=>d(l=>l-1),E=async l=>{l.preventDefault(),o(!0),f(null);try{(await j.post("/api/hr/staff/create/",a)).data.success&&i("/hr/staff")}catch(n){f(n.response?.data?.error||"Failed to create staff member")}finally{o(!1)}},I=[{value:"ADMIN",label:"Administrative"},{value:"SUPPORT",label:"Support Staff"},{value:"SECURITY",label:"Security"},{value:"MAINTENANCE",label:"Maintenance"},{value:"KITCHEN",label:"Kitchen"},{value:"LIBRARIAN",label:"Librarian"},{value:"LAB_TECH",label:"Lab Technician"},{value:"NURSE",label:"Nurse"},{value:"CLEANER",label:"Cleaner"},{value:"OTHER",label:"Other"}];return e.jsx("div",{className:"p-6 md:p-8 bg-slate-50 dark:bg-slate-950 min-h-screen",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Add New Staff"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Register a new non-teaching staff member"})]}),e.jsxs(b,{variant:"ghost",onClick:()=>i("/hr/staff"),children:[e.jsx(R,{size:20,className:"mr-2"})," Cancel"]})]}),v&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 flex items-center gap-3",children:[e.jsx(M,{size:20}),e.jsx("p",{className:"text-sm font-medium",children:v})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-800",children:[e.jsx(g,{step:1,currentStep:t,label:"Personal Info",icon:L}),e.jsx(g,{step:2,currentStep:t,label:"Job & Financial",icon:O}),e.jsx(g,{step:3,currentStep:t,label:"Additional Details",icon:N})]}),e.jsxs("form",{onSubmit:E,className:"p-8",children:[t===1&&e.jsxs(h.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(r,{label:"First Name",name:"first_name",value:a.first_name,onChange:s,required:!0}),e.jsx(r,{label:"Last Name",name:"last_name",value:a.last_name,onChange:s,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(r,{type:"email",label:"Email Address",name:"email",value:a.email,onChange:s,required:!0,icon:D}),e.jsx(r,{label:"Phone Number",name:"phone",value:a.phone,onChange:s,required:!0,icon:y})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(r,{label:"National ID / Passport",name:"national_id",value:a.national_id,onChange:s,required:!0}),e.jsx(r,{type:"date",label:"Date of Birth",name:"date_of_birth",value:a.date_of_birth,onChange:s,icon:_})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(m,{label:"Gender",name:"gender",value:a.gender,onChange:s,options:[{value:"M",label:"Male"},{value:"F",label:"Female"},{value:"O",label:"Other"}]}),e.jsx(m,{label:"Marital Status",name:"marital_status",value:a.marital_status,onChange:s,options:[{value:"SINGLE",label:"Single"},{value:"MARRIED",label:"Married"}]}),e.jsx(r,{label:"Nationality",name:"nationality",value:a.nationality,onChange:s})]}),e.jsx(r,{label:"Current Address",name:"address",value:a.address,onChange:s,icon:P})]}),t===2&&e.jsxs(h.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(m,{label:"Staff Type",name:"staff_type",value:a.staff_type,onChange:s,options:I}),e.jsx(r,{label:"Job Title / Position",name:"position",value:a.position,onChange:s})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(r,{type:"date",label:"Date Joined",name:"date_joined",value:a.date_joined,onChange:s,icon:_}),e.jsx(m,{label:"Supervisor",name:"supervisor_id",value:a.supervisor_id,onChange:s,options:[{value:"",label:"No Supervisor"},...u.map(l=>({value:l.id,label:`${l.first_name} ${l.last_name} (${l.position})`}))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(r,{type:"number",label:"Basic Salary (KES)",name:"basic_salary",value:a.basic_salary,onChange:s}),e.jsx(m,{label:"Employment Status",name:"status",value:a.status,onChange:s,options:[{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"ON_LEAVE",label:"On Leave"}]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:"Job Description"}),e.jsx("textarea",{name:"job_description",value:a.job_description,onChange:s,rows:4,className:"w-full rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 py-3 focus:ring-2 focus:ring-primary-100 focus:border-primary-500 transition-all outline-none",placeholder:"Describe the main responsibilities..."})]})]}),t===3&&e.jsxs(h.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(N,{className:"text-red-500",size:20})," Emergency Contact"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(r,{label:"Contact Name",name:"emergency_contact_name",value:a.emergency_contact_name,onChange:s}),e.jsx(r,{label:"Contact Phone",name:"emergency_contact_phone",value:a.emergency_contact_phone,onChange:s,icon:y})]})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-800",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"Other Information"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsx(m,{label:"Religion",name:"religion",value:a.religion,onChange:s,options:[{value:"CHRISTIAN",label:"Christian"},{value:"MUSLIM",label:"Muslim"},{value:"OTHER",label:"Other"}]})})]})]}),e.jsxs("div",{className:"flex justify-between mt-12 pt-8 border-t border-slate-200 dark:border-slate-800",children:[t>1?e.jsxs(b,{type:"button",variant:"outline",onClick:k,children:[e.jsx(B,{size:20,className:"mr-2"})," Back"]}):e.jsx("div",{}),t<3?e.jsxs(b,{type:"button",onClick:S,children:["Next Step ",e.jsx(z,{size:20,className:"ml-2"})]}):e.jsxs(b,{type:"submit",isLoading:x,children:[e.jsx(H,{size:20,className:"mr-2"})," Save Staff Member"]})]})]})]})]})})},g=({step:i,currentStep:t,label:d,icon:x})=>{const o=t===i,u=t>i;return e.jsxs("div",{className:`flex-1 flex flex-col items-center py-4 transition-colors relative ${o?"text-primary-600 dark:text-primary-400":u?"text-green-600 dark:text-green-500":"text-slate-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(x,{size:18}),e.jsxs("span",{className:"text-sm font-bold uppercase tracking-wider",children:["Step ",i]})]}),e.jsx("span",{className:"text-xs font-medium",children:d}),o&&e.jsx(h.div,{layoutId:"stepUnderline",className:"absolute bottom-0 h-1 bg-primary-600 dark:bg-primary-400 w-full"})]})},m=({label:i,name:t,value:d,onChange:x,options:o,required:u})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 ml-1",children:i}),e.jsx("select",{name:t,value:d,onChange:x,required:u,className:"w-full h-11 rounded-xl border border-slate-200 bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white px-4 focus:ring-2 focus:ring-primary-100 focus:border-primary-500 transition-all outline-none",children:o.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))})]});export{K as default};
