import{k as N,u as k,r,e as c,j as e}from"./vendor-Cr6tcs86.js";import{B as w}from"./index-BxkJ-YYo.js";import{p as y,aA as C,E,J as _,V as A,m as D,X as S}from"./ui-BBn2VFCU.js";const z=()=>{const{id:i}=N(),o=k(),[s,b]=r.useState(null),[h,u]=r.useState(!0),[p,n]=r.useState(!1),[g,j]=r.useState([]),[a,l]=r.useState({plate_number:"",model:"",capacity:"",status:"",route_id:""});r.useEffect(()=>{x()},[i]);const x=async()=>{try{const[t,m]=await Promise.all([c.get(`/api/transport/vehicles/${i}/`),c.get("/api/transport/routes/")]);b(t.data),j(m.data.routes);const d=t.data;l({plate_number:d.plate_number,model:d.model,capacity:d.capacity,status:d.status,route_id:d.route_id||""})}catch(t){console.error(t)}finally{u(!1)}},v=async t=>{t.preventDefault();try{await c.post(`/api/transport/vehicles/${i}/`,{action:"UPDATE",...a}),n(!1),x()}catch{alert("Failed to update vehicle")}},f=async()=>{if(confirm("Are you sure you want to delete this vehicle?"))try{await c.post(`/api/transport/vehicles/${i}/`,{action:"DELETE"}),o("/transport-portal/vehicles")}catch{alert("Failed to delete vehicle")}};return h?e.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent"})}):s?e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 pb-12",children:[e.jsx("div",{className:"max-w-4xl mx-auto px-4 pt-6 mb-6",children:e.jsxs("button",{onClick:()=>o("/transport-portal/vehicles"),className:"flex items-center gap-2 text-slate-500 hover:text-indigo-600 transition-colors mb-4 font-medium",children:[e.jsx(y,{size:18}),"Back to Vehicles"]})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-xl overflow-hidden border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-900 to-slate-800 p-8 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -mr-16 -mt-16"}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"p-4 bg-white/10 backdrop-blur-md rounded-2xl border border-white/10 shadow-lg",children:e.jsx(C,{size:40,className:"text-indigo-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold font-mono tracking-wide",children:s.plate_number}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${s.status==="ACTIVE"?"bg-emerald-500/20 val-emerald-400 border-emerald-500/30 text-emerald-300":"bg-amber-500/20 text-amber-300 border-amber-500/30"}`,children:s.status})]}),e.jsx("p",{className:"text-slate-400 text-lg",children:s.model})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-xl backdrop-blur-sm transition-colors text-sm font-bold flex items-center gap-2",children:[e.jsx(E,{size:16})," Edit"]}),e.jsx("button",{onClick:f,className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 hover:text-red-300 rounded-xl backdrop-blur-sm transition-colors text-sm font-bold flex items-center gap-2",children:e.jsx(_,{size:16})})]})]})]}),e.jsxs("div",{className:"p-8 grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-2xl p-6 border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(A,{className:"text-indigo-500"}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Assigned Route"})]}),s.route_name!=="Unassigned"?e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1",children:s.route_name}),e.jsx("button",{onClick:()=>o(`/transport-portal/routes/${s.route_id}`),className:"text-sm text-indigo-600 hover:underline mt-2 font-medium",children:"View Route Details"})]}):e.jsxs("div",{className:"text-slate-500 flex flex-col items-start gap-2",children:[e.jsx("p",{children:"No route currently assigned."}),e.jsx("button",{onClick:()=>n(!0),className:"text-sm text-indigo-600 font-bold",children:"Assign Route"})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-2xl p-6 border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(D,{className:"text-indigo-500"}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Assigned Driver"})]}),s.driver?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center text-indigo-600 font-bold",children:s.driver.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:s.driver.name}),e.jsx("p",{className:"text-sm text-slate-500",children:s.driver.phone})]})]}),e.jsx("button",{onClick:()=>o(`/transport-portal/drivers/${s.driver.id}`),className:"text-sm text-indigo-600 hover:underline mt-2 font-medium",children:"View Driver Profile"})]}):e.jsxs("div",{className:"text-slate-500",children:[e.jsx("p",{children:"No driver assigned."}),e.jsx("p",{className:"text-xs mt-1",children:"Go to Drivers page to assign a driver to this vehicle."})]})]}),e.jsxs("div",{className:"md:col-span-2 grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-xl text-center",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:"Capacity"}),e.jsx("p",{className:"text-2xl font-black text-slate-900 dark:text-white",children:s.capacity})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-xl text-center",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:"Status"}),e.jsx("p",{className:"text-lg font-bold text-slate-900 dark:text-white",children:s.status})]})]})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl w-full max-w-lg shadow-2xl animate-scale-in",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Edit Vehicle"}),e.jsx("button",{onClick:()=>n(!1),children:e.jsx(S,{size:24,className:"text-slate-400"})})]}),e.jsxs("form",{onSubmit:v,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Plate Number"}),e.jsx("input",{type:"text",value:a.plate_number,onChange:t=>l({...a,plate_number:t.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Model"}),e.jsx("input",{type:"text",value:a.model,onChange:t=>l({...a,model:t.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Capacity"}),e.jsx("input",{type:"number",value:a.capacity,onChange:t=>l({...a,capacity:t.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Status"}),e.jsxs("select",{value:a.status,onChange:t=>l({...a,status:t.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 dark:text-white",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),e.jsx("option",{value:"OUT_OF_SERVICE",children:"Out of Service"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Route"}),e.jsxs("select",{value:a.route_id,onChange:t=>l({...a,route_id:t.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 dark:text-white",children:[e.jsx("option",{value:"",children:"-- Unassigned --"}),g.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(w,{type:"submit",className:"w-full bg-indigo-600 text-white py-3 rounded-xl font-bold",children:"Update Vehicle"})})]})]})})]}):e.jsx("div",{className:"p-8 text-center",children:"Vehicle not found"})};export{z as default};
