# --- STABLE CPANEL DJANGO + REACT CONFIG ---
RewriteEngine On
RewriteBase /

# 1. FORWARD STATIC FILES TO PUBLIC_HTML
# This maps uniqo.top/static/assets/foo.js -> public_html/assets/foo.js
RewriteRule ^static/assets/(.*)$ public_html/assets/$1 [L]
RewriteRule ^static/(.*)$ public_html/$1 [L]

# 2. SERVE PHYSICAL FILES IF THEY EXIST (Favicons, etc)
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# 3. ROUTE API/ADMIN TO DJANGO
RewriteCond %{REQUEST_URI} ^/(api|admin|media)
RewriteRule ^(.*)$ passenger_wsgi.py/$1 [QSA,L]

# 4. ROUTE EVERYTHING ELSE TO REACT (index.html)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ /public_html/index.html [L]
